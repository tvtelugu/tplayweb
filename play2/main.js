(self.webpackChunknas_extension=self.webpackChunknas_extension||[]).push([[179],{930:(Na,Jr,Ci)=>{"use strict";function _r(e){return"function"==typeof e}function hr(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Vt=hr(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,l)=>`${l+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Qe(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class ne{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const f of n)f.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(_r(r))try{r()}catch(f){t=f instanceof Vt?f.errors:[f]}const{_finalizers:l}=this;if(l){this._finalizers=null;for(const f of l)try{E(f)}catch(m){t=t??[],m instanceof Vt?t=[...t,...m.errors]:t.push(m)}}if(t)throw new Vt(t)}}add(t){var n;if(t&&t!==this)if(this.closed)E(t);else{if(t instanceof ne){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Qe(n,t)}remove(t){const{_finalizers:n}=this;n&&Qe(n,t),t instanceof ne&&t._removeParent(this)}}ne.EMPTY=(()=>{const e=new ne;return e.closed=!0,e})();const Ce=ne.EMPTY;function G(e){return e instanceof ne||e&&"closed"in e&&_r(e.remove)&&_r(e.add)&&_r(e.unsubscribe)}function E(e){_r(e)?e():e.unsubscribe()}const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},F={setTimeout(e,t,...n){const{delegate:r}=F;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=F;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function V(e){F.setTimeout(()=>{const{onUnhandledError:t}=_;if(!t)throw e;t(e)})}function D(){}const j=M("C",void 0,void 0);function M(e,t,n){return{kind:e,value:t,error:n}}let L=null;function K(e){if(_.useDeprecatedSynchronousErrorHandling){const t=!L;if(t&&(L={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=L;if(L=null,n)throw r}}else e()}class pe extends ne{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,G(t)&&t.add(this)):this.destination=ge}static create(t,n,r){return new Se(t,n,r)}next(t){this.isStopped?Ee(function T(e){return M("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Ee(function B(e){return M("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Ee(j,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ue=Function.prototype.bind;function Me(e,t){return ue.call(e,t)}class Q{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Le(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Le(r)}else Le(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Le(n)}}}class Se extends pe{constructor(t,n,r){let l;if(super(),_r(t)||!t)l={next:t??void 0,error:n??void 0,complete:r??void 0};else{let f;this&&_.useDeprecatedNextContext?(f=Object.create(t),f.unsubscribe=()=>this.unsubscribe(),l={next:t.next&&Me(t.next,f),error:t.error&&Me(t.error,f),complete:t.complete&&Me(t.complete,f)}):l=t}this.destination=new Q(l)}}function Le(e){_.useDeprecatedSynchronousErrorHandling?function ce(e){_.useDeprecatedSynchronousErrorHandling&&L&&(L.errorThrown=!0,L.error=e)}(e):V(e)}function Ee(e,t){const{onStoppedNotification:n}=_;n&&F.setTimeout(()=>n(e,t))}const ge={closed:!0,next:D,error:function x(e){throw e},complete:D},et="function"==typeof Symbol&&Symbol.observable||"@@observable";function De(e){return e}let St=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,l){const f=function Nt(e){return e&&e instanceof pe||function Pe(e){return e&&_r(e.next)&&_r(e.error)&&_r(e.complete)}(e)&&G(e)}(n)?n:new Se(n,r,l);return K(()=>{const{operator:m,source:b}=this;f.add(m?m.call(f,b):b?this._subscribe(f):this._trySubscribe(f))}),f}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Je(r))((l,f)=>{const m=new Se({next:b=>{try{n(b)}catch(O){f(O),m.unsubscribe()}},error:f,complete:l});this.subscribe(m)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[et](){return this}pipe(...n){return function gt(e){return 0===e.length?De:1===e.length?e[0]:function(n){return e.reduce((r,l)=>l(r),n)}}(n)(this)}toPromise(n){return new(n=Je(n))((r,l)=>{let f;this.subscribe(m=>f=m,m=>l(m),()=>r(f))})}}return e.create=t=>new e(t),e})();function Je(e){var t;return null!==(t=e??_.Promise)&&void 0!==t?t:Promise}const Ht=hr(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let $e=(()=>{class e extends St{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new ht(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ht}next(n){K(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){K(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){K(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:l,observers:f}=this;return r||l?Ce:(this.currentObservers=null,f.push(n),new ne(()=>{this.currentObservers=null,Qe(f,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:l,isStopped:f}=this;r?n.error(l):f&&n.complete()}asObservable(){const n=new St;return n.source=this,n}}return e.create=(t,n)=>new ht(t,n),e})();class ht extends $e{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:Ce}}function zt(e){return t=>{if(function hn(e){return _r(e?.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function mt(e,t,n,r,l){return new It(e,t,n,r,l)}class It extends pe{constructor(t,n,r,l,f,m){super(t),this.onFinalize=f,this.shouldUnsubscribe=m,this._next=n?function(b){try{n(b)}catch(O){t.error(O)}}:super._next,this._error=l?function(b){try{l(b)}catch(O){t.error(O)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(b){t.error(b)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function je(e,t){return zt((n,r)=>{let l=0;n.subscribe(mt(r,f=>{r.next(e.call(t,f,l++))}))})}function Tn(e){return this instanceof Tn?(this.v=e,this):new Tn(e)}function ei(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function un(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(f){n[f]=e[f]&&function(m){return new Promise(function(b,O){!function l(f,m,b,O){Promise.resolve(O).then(function($){f({value:$,done:b})},m)}(b,O,(m=e[f](m)).done,m.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Co=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function dn(e){return _r(e?.then)}function fn(e){return _r(e[et])}function sn(e){return Symbol.asyncIterator&&_r(e?.[Symbol.asyncIterator])}function Tt(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const wt=function en(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Pt(e){return _r(e?.[wt])}function In(e){return function sr(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,r=n.apply(e,t||[]),f=[];return l={},m("next"),m("throw"),m("return"),l[Symbol.asyncIterator]=function(){return this},l;function m(lt){r[lt]&&(l[lt]=function(Et){return new Promise(function(Jt,ln){f.push([lt,Et,Jt,ln])>1||b(lt,Et)})})}function b(lt,Et){try{!function O(lt){lt.value instanceof Tn?Promise.resolve(lt.value.v).then($,Te):Be(f[0][2],lt)}(r[lt](Et))}catch(Jt){Be(f[0][3],Jt)}}function $(lt){b("next",lt)}function Te(lt){b("throw",lt)}function Be(lt,Et){lt(Et),f.shift(),f.length&&b(f[0][0],f[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:l}=yield Tn(n.read());if(l)return yield Tn(void 0);yield yield Tn(r)}}finally{n.releaseLock()}})}function Qt(e){return _r(e?.getReader)}function jn(e){if(e instanceof St)return e;if(null!=e){if(fn(e))return function Xn(e){return new St(t=>{const n=e[et]();if(_r(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Co(e))return function Pn(e){return new St(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(dn(e))return function cn(e){return new St(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,V)})}(e);if(sn(e))return qn(e);if(Pt(e))return function En(e){return new St(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(Qt(e))return function fr(e){return qn(In(e))}(e)}throw Tt(e)}function qn(e){return new St(t=>{(function Fr(e,t){var n,r,l,f;return function ut(e,t,n,r){return new(n||(n=Promise))(function(f,m){function b(Te){try{$(r.next(Te))}catch(Be){m(Be)}}function O(Te){try{$(r.throw(Te))}catch(Be){m(Be)}}function $(Te){Te.done?f(Te.value):function l(f){return f instanceof n?f:new n(function(m){m(f)})}(Te.value).then(b,O)}$((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=ei(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(m){l={error:m}}finally{try{r&&!r.done&&(f=n.return)&&(yield f.call(n))}finally{if(l)throw l.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Ur(e,t,n,r=0,l=!1){const f=t.schedule(function(){n(),l?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(f),!l)return f}function tn(e,t,n=1/0){return _r(t)?tn((r,l)=>je((f,m)=>t(r,f,l,m))(jn(e(r,l))),n):("number"==typeof t&&(n=t),zt((r,l)=>function rr(e,t,n,r,l,f,m,b){const O=[];let $=0,Te=0,Be=!1;const lt=()=>{Be&&!O.length&&!$&&t.complete()},Et=ln=>$<r?Jt(ln):O.push(ln),Jt=ln=>{f&&t.next(ln),$++;let Cn=!1;jn(n(ln,Te++)).subscribe(mt(t,zn=>{l?.(zn),f?Et(zn):t.next(zn)},()=>{Cn=!0},void 0,()=>{if(Cn)try{for($--;O.length&&$<r;){const zn=O.shift();m?Ur(t,m,()=>Jt(zn)):Jt(zn)}lt()}catch(zn){t.error(zn)}}))};return e.subscribe(mt(t,Et,()=>{Be=!0,lt()})),()=>{b?.()}}(r,l,e,n)))}const On=new St(e=>e.complete());function Qr(e){return e[e.length-1]}function pi(e){return function qr(e){return e&&_r(e.schedule)}(Qr(e))?e.pop():void 0}function Gi(e,t=0){return zt((n,r)=>{n.subscribe(mt(r,l=>Ur(r,e,()=>r.next(l),t),()=>Ur(r,e,()=>r.complete(),t),l=>Ur(r,e,()=>r.error(l),t)))})}function Mi(e,t=0){return zt((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function yo(e,t){if(!e)throw new Error("Iterable cannot be null");return new St(n=>{Ur(n,t,()=>{const r=e[Symbol.asyncIterator]();Ur(n,t,()=>{r.next().then(l=>{l.done?n.complete():n.next(l.value)})},0,!0)})})}function qa(e,t){return t?function ja(e,t){if(null!=e){if(fn(e))return function to(e,t){return jn(e).pipe(Mi(t),Gi(t))}(e,t);if(Co(e))return function ta(e,t){return new St(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(dn(e))return function Za(e,t){return jn(e).pipe(Mi(t),Gi(t))}(e,t);if(sn(e))return yo(e,t);if(Pt(e))return function ga(e,t){return new St(n=>{let r;return Ur(n,t,()=>{r=e[wt](),Ur(n,t,()=>{let l,f;try{({value:l,done:f}=r.next())}catch(m){return void n.error(m)}f?n.complete():n.next(l)},0,!0)}),()=>_r(r?.return)&&r.return()})}(e,t);if(Qt(e))return function Kl(e,t){return yo(In(e),t)}(e,t)}throw Tt(e)}(e,t):jn(e)}class El extends $e{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function Ka(...e){return qa(e,pi(e))}function yn(e={}){const{connector:t=(()=>new $e),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:l=!0}=e;return f=>{let m,b,O,$=0,Te=!1,Be=!1;const lt=()=>{b?.unsubscribe(),b=void 0},Et=()=>{lt(),m=O=void 0,Te=Be=!1},Jt=()=>{const ln=m;Et(),ln?.unsubscribe()};return zt((ln,Cn)=>{$++,!Be&&!Te&&lt();const zn=O=O??t();Cn.add(()=>{$--,0===$&&!Be&&!Te&&(b=ir(Jt,l))}),zn.subscribe(Cn),!m&&$>0&&(m=new Se({next:_n=>zn.next(_n),error:_n=>{Be=!0,lt(),b=ir(Et,n,_n),zn.error(_n)},complete:()=>{Te=!0,lt(),b=ir(Et,r),zn.complete()}}),jn(ln).subscribe(m))})(f)}}function ir(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new Se({next:()=>{r.unsubscribe(),e()}});return jn(t(...n)).subscribe(r)}function Ar(e,t){return zt((n,r)=>{let l=null,f=0,m=!1;const b=()=>m&&!l&&r.complete();n.subscribe(mt(r,O=>{l?.unsubscribe();let $=0;const Te=f++;jn(e(O,Te)).subscribe(l=mt(r,Be=>r.next(t?t(O,Be,Te,$++):Be),()=>{l=null,b()}))},()=>{m=!0,b()}))})}function Kr(e,t){return e===t}function Dr(e){for(let t in e)if(e[t]===Dr)return t;throw Error("Could not find renamed property on target object.")}function ri(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function hi(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(hi).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Ni(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const _i=Dr({__forward_ref__:Dr});function Nr(e){return e.__forward_ref__=Nr,e.toString=function(){return hi(this())},e}function dr(e){return Io(e)?e():e}function Io(e){return"function"==typeof e&&e.hasOwnProperty(_i)&&e.__forward_ref__===Nr}function Do(e){return e&&!!e.\u0275providers}class Yn extends Error{constructor(t,n){super(function La(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function Cr(e){return"string"==typeof e?e:null==e?"":String(e)}function Ys(e,t){throw new Yn(-201,!1)}function no(e,t){null==e&&function Sr(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function ii(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ko(e){return{providers:e.providers||[],imports:e.imports||[]}}function Lo(e){return za(e,Cs)||za(e,Uc)}function za(e,t){return e.hasOwnProperty(t)?e[t]:null}function as(e){return e&&(e.hasOwnProperty(Xl)||e.hasOwnProperty(Bc))?e[Xl]:null}const Cs=Dr({\u0275prov:Dr}),Xl=Dr({\u0275inj:Dr}),Uc=Dr({ngInjectableDef:Dr}),Bc=Dr({ngInjectorDef:Dr});var zr=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(zr||{});let Pu;function Oo(e){const t=Pu;return Pu=e,t}function Xs(e,t,n){const r=Lo(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&zr.Optional?null:void 0!==t?t:void Ys(hi(e))}const Ii=globalThis;class ur{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ii({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Qs={},Is="__NG_DI_FLAG__",Al="ngTempTokenPath",Zc=/\n/gm,tu="__source";let Ds;function na(e){const t=Ds;return Ds=e,t}function ru(e,t=zr.Default){if(void 0===Ds)throw new Yn(-203,!1);return null===Ds?Xs(e,void 0,t):Ds.get(e,t&zr.Optional?null:void 0,t)}function Br(e,t=zr.Default){return(function $s(){return Pu}()||ru)(dr(e),t)}function Er(e,t=zr.Default){return Br(e,Po(t))}function Po(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Bu(e){const t=[];for(let n=0;n<e.length;n++){const r=dr(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Yn(900,!1);let l,f=zr.Default;for(let m=0;m<r.length;m++){const b=r[m],O=ws(b);"number"==typeof O?-1===O?l=b.token:f|=O:l=b}t.push(Br(l,f))}else t.push(Br(r))}return t}function pa(e,t){return e[Is]=t,e.prototype[Is]=t,e}function ws(e){return e[Is]}function Bo(e){return{toString:e}.toString()}var el=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(el||{}),Yr=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Yr||{});const ra={},fi=[],Rs=Dr({\u0275cmp:Dr}),Vu=Dr({\u0275dir:Dr}),Yo=Dr({\u0275pipe:Dr}),iu=Dr({\u0275mod:Dr}),Wa=Dr({\u0275fac:Dr}),Eo=Dr({__NG_ELEMENT_ID__:Dr}),ls=Dr({__NG_ENV_ID__:Dr});function qc(e,t,n){let r=e.length;for(;;){const l=e.indexOf(t,n);if(-1===l)return l;if(0===l||e.charCodeAt(l-1)<=32){const f=t.length;if(l+f===r||e.charCodeAt(l+f)<=32)return l}n=l+1}}function Oa(e,t,n){let r=0;for(;r<n.length;){const l=n[r];if("number"==typeof l){if(0!==l)break;r++;const f=n[r++],m=n[r++],b=n[r++];e.setAttribute(t,m,b,f)}else{const f=l,m=n[++r];Hu(f)?e.setProperty(t,f,m):e.setAttribute(t,f,m),r++}}return r}function ou(e){return 3===e||4===e||6===e}function Hu(e){return 64===e.charCodeAt(0)}function us(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const l=t[r];"number"==typeof l?n=l:0===n||Gu(e,n,l,null,-1===n||2===n?t[++r]:null)}}return e}function Gu(e,t,n,r,l){let f=0,m=e.length;if(-1===t)m=-1;else for(;f<e.length;){const b=e[f++];if("number"==typeof b){if(b===t){m=-1;break}if(b>t){m=f-1;break}}}for(;f<e.length;){const b=e[f];if("number"==typeof b)break;if(b===n){if(null===r)return void(null!==l&&(e[f+1]=l));if(r===e[f+1])return void(e[f+2]=l)}f++,null!==r&&f++,null!==l&&f++}-1!==m&&(e.splice(m,0,t),f=m+1),e.splice(f++,0,n),null!==r&&e.splice(f++,0,r),null!==l&&e.splice(f++,0,l)}const ro="ng-template";function Zu(e,t,n){let r=0,l=!0;for(;r<e.length;){let f=e[r++];if("string"==typeof f&&l){const m=e[r++];if(n&&"class"===f&&-1!==qc(m.toLowerCase(),t,0))return!0}else{if(1===f){for(;r<e.length&&"string"==typeof(f=e[r++]);)if(f.toLowerCase()===t)return!0;return!1}"number"==typeof f&&(l=!1)}}return!1}function Ms(e){return 4===e.type&&e.value!==ro}function tl(e,t,n){return t===(4!==e.type||n?e.value:ro)}function au(e,t,n){let r=4;const l=e.attrs||[],f=function qu(e){for(let t=0;t<e.length;t++)if(ou(e[t]))return t;return e.length}(l);let m=!1;for(let b=0;b<t.length;b++){const O=t[b];if("number"!=typeof O){if(!m)if(4&r){if(r=2|1&r,""!==O&&!tl(e,O,n)||""===O&&1===t.length){if(ui(r))return!1;m=!0}}else{const $=8&r?O:t[++b];if(8&r&&null!==e.attrs){if(!Zu(e.attrs,$,n)){if(ui(r))return!1;m=!0}continue}const Be=ju(8&r?"class":O,l,Ms(e),n);if(-1===Be){if(ui(r))return!1;m=!0;continue}if(""!==$){let lt;lt=Be>f?"":l[Be+1].toLowerCase();const Et=8&r?lt:null;if(Et&&-1!==qc(Et,$,0)||2&r&&$!==lt){if(ui(r))return!1;m=!0}}}}else{if(!m&&!ui(r)&&!ui(O))return!1;if(m&&ui(O))continue;m=!1,r=O|1&r}}return ui(r)||m}function ui(e){return 0==(1&e)}function ju(e,t,n,r){if(null===t)return-1;let l=0;if(r||!n){let f=!1;for(;l<t.length;){const m=t[l];if(m===e)return l;if(3===m||6===m)f=!0;else{if(1===m||2===m){let b=t[++l];for(;"string"==typeof b;)b=t[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=f?1:2}return-1}return function $f(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Ns(e,t,n=!1){for(let r=0;r<t.length;r++)if(au(e,t[r],n))return!0;return!1}function Ku(e,t){return e?":not("+t.trim()+")":t}function Xf(e){let t=e[0],n=1,r=2,l="",f=!1;for(;n<e.length;){let m=e[n];if("string"==typeof m)if(2&r){const b=e[++n];l+="["+m+(b.length>0?'="'+b+'"':"")+"]"}else 8&r?l+="."+m:4&r&&(l+=" "+m);else""!==l&&!ui(m)&&(t+=Ku(f,l),l=""),r=m,f=f||!ui(r);n++}return""!==l&&(t+=Ku(f,l)),t}function zo(e){return Bo(()=>{const t=zu(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===el.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Yr.Emulated,styles:e.styles||fi,_:null,schemas:e.schemas||null,tView:null,id:""};Wu(n);const r=e.dependencies;return n.directiveDefs=Wo(r,!1),n.pipeDefs=Wo(r,!0),n.id=function Yc(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const l of n)t=Math.imul(31,t)+l.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function lu(e){return Wr(e)||io(e)}function Kc(e){return null!==e}function Qi(e){return Bo(()=>({type:e.type,bootstrap:e.bootstrap||fi,declarations:e.declarations||fi,imports:e.imports||fi,exports:e.exports||fi,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function uu(e,t){if(null==e)return ra;const n={};for(const r in e)if(e.hasOwnProperty(r)){let l=e[r],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),n[l]=r,t&&(t[l]=f)}return n}function Mr(e){return Bo(()=>{const t=zu(e);return Wu(t),t})}function Wr(e){return e[Rs]||null}function io(e){return e[Vu]||null}function wo(e){return e[Yo]||null}function zu(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||ra,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||fi,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:uu(e.inputs,t),outputs:uu(e.outputs)}}function Wu(e){e.features?.forEach(t=>t(e))}function Wo(e,t){if(!e)return null;const n=t?wo:lu;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(Kc)}const Zi=0,tr=1,xr=2,xi=3,ia=4,fs=5,co=6,xs=7,ji=8,$a=9,Ls=10,Rr=11,ma=12,$u=13,nl=14,qi=15,Il=16,ds=17,va=18,Xa=19,Dl=20,hs=21,Pa=22,rl=23,wl=24,$r=25,fu=1,gs=2,ya=7,Os=9,li=11;function _o(e){return Array.isArray(e)&&"object"==typeof e[fu]}function Fo(e){return Array.isArray(e)&&!0===e[fu]}function du(e){return 0!=(4&e.flags)}function Fa(e){return e.componentOffset>-1}function ka(e){return 1==(1&e.flags)}function Ea(e){return!!e.template}function Ml(e){return 0!=(512&e[xr])}function ko(e,t){return e.hasOwnProperty(Wa)?e[Wa]:null}let oo=null,Sa=!1;function oa(e){const t=oo;return oo=e,t}const nc={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ic(e){if(!Fs(e)||e.dirty){if(!e.producerMustRecompute(e)&&!Xc(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function Ps(e){e.dirty=!0,function Nl(e){if(void 0===e.liveConsumerNode)return;const t=Sa;Sa=!0;try{for(const n of e.liveConsumerNode)n.dirty||Ps(n)}finally{Sa=t}}(e),e.consumerMarkedDirty?.(e)}function al(e){return e&&(e.nextProducerIndex=0),oa(e)}function sl(e,t){if(oa(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(Fs(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)pu(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Xc(e){ks(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(ic(n),r!==n.version))return!0}return!1}function Ll(e){if(ks(e),Fs(e))for(let t=0;t<e.producerNode.length;t++)pu(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function pu(e,t){if(function ms(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),ks(e),1===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)pu(e.producerNode[r],e.producerIndexOfThis[r]);const n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[t],l=e.liveConsumerNode[t];ks(l),l.producerIndexOfThis[r]=t}}function Fs(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function ks(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let sc=null;const yu=()=>{},Eu=(()=>({...nc,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:yu}))();class A{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function S(){return w}function w(e){return e.type.prototype.ngOnChanges&&(e.setInput=W),H}function H(){const e=k(this),t=e?.current;if(t){const n=e.previous;if(n===ra)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function W(e,t,n,r){const l=this.declaredInputs[n],f=k(e)||function X(e,t){return e[Y]=t}(e,{previous:ra,current:null}),m=f.current||(f.current={}),b=f.previous,O=b[l];m[l]=new A(O&&O.currentValue,t,b===ra),e[r]=t}S.ngInherit=!0;const Y="__ngSimpleChanges__";function k(e){return e[Y]||null}const fe=function(e,t,n){};function ae(e){for(;Array.isArray(e);)e=e[Zi];return e}function Ne(e,t){return ae(t[e])}function Fe(e,t){return ae(t[e.index])}function he(e,t){return e.data[t]}function me(e,t){const n=t[e];return _o(n)?n:n[Zi]}function te(e,t){return null==t?null:e[t]}function re(e){e[ds]=0}function z(e){1024&e[xr]||(e[xr]|=1024,be(e,1))}function xe(e){1024&e[xr]&&(e[xr]&=-1025,be(e,-1))}function be(e,t){let n=e[xi];if(null===n)return;n[fs]+=t;let r=n;for(n=n[xi];null!==n&&(1===t&&1===r[fs]||-1===t&&0===r[fs]);)n[fs]+=t,r=n,n=n[xi]}const ie={lFrame:gn(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function st(){return ie.bindingsEnabled}function Ye(){return ie.lFrame.lView}function Lt(){return ie.lFrame.tView}function _t(e){return ie.lFrame.contextLView=e,e[ji]}function Yt(e){return ie.lFrame.contextLView=null,e}function Kt(){let e=Wt();for(;null!==e&&64===e.type;)e=e.parent;return e}function Wt(){return ie.lFrame.currentTNode}function Mn(e,t){const n=ie.lFrame;n.currentTNode=e,n.isParent=t}function er(){return ie.lFrame.isParent}function Bn(){return ie.lFrame.bindingIndex++}function Hn(e){const t=ie.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Dn(e,t){const n=ie.lFrame;n.bindingIndex=n.bindingRootIndex=e,Ln(t)}function Ln(e){ie.lFrame.currentDirectiveIndex=e}function Ct(){return ie.lFrame.currentQueryIndex}function ct(e){ie.lFrame.currentQueryIndex=e}function jt(e){const t=e[tr];return 2===t.type?t.declTNode:1===t.type?e[co]:null}function Ge(e,t,n){if(n&zr.SkipSelf){let l=t,f=e;for(;!(l=l.parent,null!==l||n&zr.Host||(l=jt(f),null===l||(f=f[nl],10&l.type))););if(null===l)return!1;t=l,e=f}const r=ie.lFrame=Mt();return r.currentTNode=t,r.lView=e,!0}function We(e){const t=Mt(),n=e[tr];ie.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Mt(){const e=ie.lFrame,t=null===e?null:e.child;return null===t?gn(e):t}function gn(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function An(){const e=ie.lFrame;return ie.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const pr=An;function ci(){const e=An();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Si(){return ie.lFrame.selectedIndex}function Li(e){ie.lFrame.selectedIndex=e}function mi(){const e=ie.lFrame;return he(e.tView,e.selectedIndex)}let Ja=!0;function Ba(){return Ja}function ao(e){Ja=e}function Us(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const f=e.data[n].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:b,ngAfterViewInit:O,ngAfterViewChecked:$,ngOnDestroy:Te}=f;m&&(e.contentHooks??=[]).push(-n,m),b&&((e.contentHooks??=[]).push(n,b),(e.contentCheckHooks??=[]).push(n,b)),O&&(e.viewHooks??=[]).push(-n,O),$&&((e.viewHooks??=[]).push(n,$),(e.viewCheckHooks??=[]).push(n,$)),null!=Te&&(e.destroyHooks??=[]).push(n,Te)}}function Bs(e,t,n){ys(e,t,3,n)}function Aa(e,t,n,r){(3&e[xr])===n&&ys(e,t,n,r)}function es(e,t){let n=e[xr];(3&n)===t&&(n&=8191,n+=1,e[xr]=n)}function ys(e,t,n,r){const f=r??-1,m=t.length-1;let b=0;for(let O=void 0!==r?65535&e[ds]:0;O<m;O++)if("number"==typeof t[O+1]){if(b=t[O],null!=r&&b>=r)break}else t[O]<0&&(e[ds]+=65536),(b<f||-1==f)&&(bn(e,n,t,O),e[ds]=(4294901760&e[ds])+O+2),O++}function Rt(e,t){fe(4,e,t);const n=oa(null);try{t.call(e)}finally{oa(n),fe(5,e,t)}}function bn(e,t,n,r){const l=n[r]<0,f=n[r+1],b=e[l?-n[r]:n[r]];l?e[xr]>>13<e[ds]>>16&&(3&e[xr])===t&&(e[xr]+=8192,Rt(b,f)):Rt(b,f)}const $n=-1;class lr{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function fd(e){return e!==$n}function _u(e){return 32767&e}function fc(e,t){let n=function bh(e){return e>>16}(e),r=t;for(;n>0;)r=r[nl],n--;return r}let nf=!0;function rf(e){const t=nf;return nf=e,t}const dd=255,Ah=5;let dp=0;const Es={};function af(e,t){const n=Ch(e,t);if(-1!==n)return n;const r=t[tr];r.firstCreatePass&&(e.injectorIndex=t.length,hd(r.data,e),hd(t,null),hd(r.blueprint,null));const l=sf(e,t),f=e.injectorIndex;if(fd(l)){const m=_u(l),b=fc(l,t),O=b[tr].data;for(let $=0;$<8;$++)t[f+$]=b[m+$]|O[m+$]}return t[f+8]=l,f}function hd(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Ch(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function sf(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,l=t;for(;null!==l;){if(r=Mh(l),null===r)return $n;if(n++,l=l[nl],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return $n}function lf(e,t,n){!function hp(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Eo)&&(r=n[Eo]),null==r&&(r=n[Eo]=dp++);const l=r&dd;t.data[e+(l>>Ah)]|=1<<l}(e,t,n)}function Ih(e,t,n){if(n&zr.Optional||void 0!==e)return e;Ys()}function uf(e,t,n,r){if(n&zr.Optional&&void 0===r&&(r=null),!(n&(zr.Self|zr.Host))){const l=e[$a],f=Oo(void 0);try{return l?l.get(t,r,n&zr.Optional):Xs(t,r,n&zr.Optional)}finally{Oo(f)}}return Ih(r,0,n)}function Dh(e,t,n,r=zr.Default,l){if(null!==e){if(2048&t[xr]&&!(r&zr.Self)){const m=function yp(e,t,n,r,l){let f=e,m=t;for(;null!==f&&null!==m&&2048&m[xr]&&!(512&m[xr]);){const b=cf(f,m,n,r|zr.Self,Es);if(b!==Es)return b;let O=f.parent;if(!O){const $=m[Dl];if($){const Te=$.get(n,Es,r);if(Te!==Es)return Te}O=Mh(m),m=m[nl]}f=O}return l}(e,t,n,r,Es);if(m!==Es)return m}const f=cf(e,t,n,r,Es);if(f!==Es)return f}return uf(t,n,r,l)}function cf(e,t,n,r,l){const f=function wh(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Eo)?e[Eo]:void 0;return"number"==typeof t?t>=0?t&dd:vp:t}(n);if("function"==typeof f){if(!Ge(t,e,r))return r&zr.Host?Ih(l,0,r):uf(t,n,r,l);try{let m;if(m=f(r),null!=m||r&zr.Optional)return m;Ys()}finally{pr()}}else if("number"==typeof f){let m=null,b=Ch(e,t),O=$n,$=r&zr.Host?t[qi][co]:null;for((-1===b||r&zr.SkipSelf)&&(O=-1===b?sf(e,t):t[b+8],O!==$n&&Rh(r,!1)?(m=t[tr],b=_u(O),t=fc(O,t)):b=-1);-1!==b;){const Te=t[tr];if(gd(f,b,Te.data)){const Be=pp(b,t,n,m,r,$);if(Be!==Es)return Be}O=t[b+8],O!==$n&&Rh(r,t[tr].data[b+8]===$)&&gd(f,b,t)?(m=Te,b=_u(O),t=fc(O,t)):b=-1}}return l}function pp(e,t,n,r,l,f){const m=t[tr],b=m.data[e+8],Te=dc(b,m,n,null==r?Fa(b)&&nf:r!=m&&0!=(3&b.type),l&zr.Host&&f===b);return null!==Te?Fl(t,m,Te,b):Es}function dc(e,t,n,r,l){const f=e.providerIndexes,m=t.data,b=1048575&f,O=e.directiveStart,Te=f>>20,lt=l?b+Te:e.directiveEnd;for(let Et=r?b:b+Te;Et<lt;Et++){const Jt=m[Et];if(Et<O&&n===Jt||Et>=O&&Jt.type===n)return Et}if(l){const Et=m[O];if(Et&&Ea(Et)&&Et.type===n)return O}return null}function Fl(e,t,n,r){let l=e[n];const f=t.data;if(function Vr(e){return e instanceof lr}(l)){const m=l;m.resolving&&function _l(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Yn(-200,`Circular dependency in DI detected for ${e}${n}`)}(function si(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Cr(e)}(f[n]));const b=rf(m.canSeeViewProviders);m.resolving=!0;const $=m.injectImpl?Oo(m.injectImpl):null;Ge(e,r,zr.Default);try{l=e[n]=m.factory(void 0,f,e,r),t.firstCreatePass&&n>=r.directiveStart&&function Ol(e,t,n){const{ngOnChanges:r,ngOnInit:l,ngDoCheck:f}=t.type.prototype;if(r){const m=w(t);(n.preOrderHooks??=[]).push(e,m),(n.preOrderCheckHooks??=[]).push(e,m)}l&&(n.preOrderHooks??=[]).push(0-e,l),f&&((n.preOrderHooks??=[]).push(e,f),(n.preOrderCheckHooks??=[]).push(e,f))}(n,f[n],t)}finally{null!==$&&Oo($),rf(b),m.resolving=!1,pr()}}return l}function gd(e,t,n){return!!(n[t+(e>>Ah)]&1<<e)}function Rh(e,t){return!(e&zr.Self||e&zr.Host&&t)}class Mo{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Dh(this._tNode,this._lView,t,Po(r),n)}}function vp(){return new Mo(Kt(),Ye())}function Ho(e){return Bo(()=>{const t=e.prototype.constructor,n=t[Wa]||pd(t),r=Object.prototype;let l=Object.getPrototypeOf(e.prototype).constructor;for(;l&&l!==r;){const f=l[Wa]||pd(l);if(f&&f!==n)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function pd(e){return Io(e)?()=>{const t=pd(dr(e));return t&&t()}:ko(e)}function Mh(e){const t=e[tr],n=t.type;return 2===n?t.declTNode:1===n?e[co]:null}const d="__parameters__";function u(e,t,n){return Bo(()=>{const r=function o(e){return function(...n){if(e){const r=e(...n);for(const l in r)this[l]=r[l]}}}(t);function l(...f){if(this instanceof l)return r.apply(this,f),this;const m=new l(...f);return b.annotation=m,b;function b(O,$,Te){const Be=O.hasOwnProperty(d)?O[d]:Object.defineProperty(O,d,{value:[]})[d];for(;Be.length<=Te;)Be.push(null);return(Be[Te]=Be[Te]||[]).push(m),O}}return n&&(l.prototype=Object.create(n.prototype)),l.prototype.ngMetadataName=e,l.annotationCls=l,l})}function nn(e,t){e.forEach(n=>Array.isArray(n)?nn(n,t):t(n))}function qt(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Dt(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function or(e,t,n){let r=Pr(e,t);return r>=0?e[1|r]=n:(r=~r,function Rn(e,t,n,r){let l=e.length;if(l==t)e.push(n,r);else if(1===l)e.push(r,e[0]),e[0]=n;else{for(l--,e.push(e[l-1],e[l]);l>t;)e[l]=e[l-2],l--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function mr(e,t){const n=Pr(e,t);if(n>=0)return e[1|n]}function Pr(e,t){return function Xr(e,t,n){let r=0,l=e.length>>n;for(;l!==r;){const f=r+(l-r>>1),m=e[f<<n];if(t===m)return f<<n;m>t?l=f:r=f+1}return~(l<<n)}(e,t,1)}const Xo=pa(u("Optional"),8),vi=pa(u("SkipSelf"),4);function Ph(e){return 128==(128&e.flags)}var Tu=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Tu||{});const Cp=new Map;let XA=0;const Dp="__ngContext__";function ua(e,t){_o(t)?(e[Dp]=t[Xa],function JA(e){Cp.set(e[Xa],e)}(t)):e[Dp]=t}let wp;function Rp(e,t){return wp(e,t)}function bd(e){const t=e[xi];return Fo(t)?t[xi]:t}function Hy(e){return Zy(e[ma])}function Gy(e){return Zy(e[ia])}function Zy(e){for(;null!==e&&!Fo(e);)e=e[ia];return e}function gf(e,t,n,r,l){if(null!=r){let f,m=!1;Fo(r)?f=r:_o(r)&&(m=!0,r=r[Zi]);const b=ae(r);0===e&&null!==n?null==l?Yy(t,n,b):mc(t,n,b,l||null,!0):1===e&&null!==n?mc(t,n,b,l||null,!0):2===e?function Gh(e,t,n){const r=Vh(e,t);r&&function yC(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,b,m):3===e&&t.destroyNode(b),null!=f&&function TC(e,t,n,r,l){const f=n[ya];f!==ae(n)&&gf(t,e,r,f,l);for(let b=li;b<n.length;b++){const O=n[b];Cd(O[tr],O,e,t,r,f)}}(t,e,f,n,l)}}function Uh(e,t,n){return e.createElement(t,n)}function qy(e,t){const n=e[Os],r=n.indexOf(t);xe(t),n.splice(r,1)}function Bh(e,t){if(e.length<=li)return;const n=li+t,r=e[n];if(r){const l=r[Il];null!==l&&l!==e&&qy(l,r),t>0&&(e[n-1][ia]=r[ia]);const f=Dt(e,li+t);!function cC(e,t){Cd(e,t,t[Rr],2,null,null),t[Zi]=null,t[co]=null}(r[tr],r);const m=f[va];null!==m&&m.detachView(f[tr]),r[xi]=null,r[ia]=null,r[xr]&=-129}return r}function Np(e,t){if(!(256&t[xr])){const n=t[Rr];t[rl]&&Ll(t[rl]),t[wl]&&Ll(t[wl]),n.destroyNode&&Cd(e,t,n,3,null,null),function hC(e){let t=e[ma];if(!t)return xp(e[tr],e);for(;t;){let n=null;if(_o(t))n=t[ma];else{const r=t[li];r&&(n=r)}if(!n){for(;t&&!t[ia]&&t!==e;)_o(t)&&xp(t[tr],t),t=t[xi];null===t&&(t=e),_o(t)&&xp(t[tr],t),n=t&&t[ia]}t=n}}(t)}}function xp(e,t){if(!(256&t[xr])){t[xr]&=-129,t[xr]|=256,function vC(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const l=t[n[r]];if(!(l instanceof lr)){const f=n[r+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const b=l[f[m]],O=f[m+1];fe(4,b,O);try{O.call(b)}finally{fe(5,b,O)}}else{fe(4,l,f);try{f.call(l)}finally{fe(5,l,f)}}}}}(e,t),function mC(e,t){const n=e.cleanup,r=t[xs];if(null!==n)for(let f=0;f<n.length-1;f+=2)if("string"==typeof n[f]){const m=n[f+3];m>=0?r[m]():r[-m].unsubscribe(),f+=2}else n[f].call(r[n[f+1]]);null!==r&&(t[xs]=null);const l=t[hs];if(null!==l){t[hs]=null;for(let f=0;f<l.length;f++)(0,l[f])()}}(e,t),1===t[tr].type&&t[Rr].destroy();const n=t[Il];if(null!==n&&Fo(t[xi])){n!==t[xi]&&qy(n,t);const r=t[va];null!==r&&r.detachView(e)}!function eC(e){Cp.delete(e[Xa])}(t)}}function Lp(e,t,n){return function Ky(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[Zi];{const{componentOffset:l}=r;if(l>-1){const{encapsulation:f}=e.data[r.directiveStart+l];if(f===Yr.None||f===Yr.Emulated)return null}return Fe(r,n)}}(e,t.parent,n)}function mc(e,t,n,r,l){e.insertBefore(t,n,r,l)}function Yy(e,t,n){e.appendChild(t,n)}function zy(e,t,n,r,l){null!==r?mc(e,t,n,r,l):Yy(e,t,n)}function Vh(e,t){return e.parentNode(t)}let Op,Zh,Up,Xy=function $y(e,t,n){return 40&e.type?Fe(e,n):null};function Hh(e,t,n,r){const l=Lp(e,r,t),f=t[Rr],b=function Wy(e,t,n){return Xy(e,t,n)}(r.parent||t[co],r,t);if(null!=l)if(Array.isArray(n))for(let O=0;O<n.length;O++)zy(f,l,n[O],b,!1);else zy(f,l,n,b,!1);void 0!==Op&&Op(f,r,t,n,l)}function Ad(e,t){if(null!==t){const n=t.type;if(3&n)return Fe(t,e);if(4&n)return Pp(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Ad(e,r);{const l=e[t.index];return Fo(l)?Pp(-1,l):ae(l)}}if(32&n)return Rp(t,e)()||ae(e[t.index]);{const r=Jy(e,t);return null!==r?Array.isArray(r)?r[0]:Ad(bd(e[qi]),r):Ad(e,t.next)}}return null}function Jy(e,t){return null!==t?e[qi][co].projection[t.projection]:null}function Pp(e,t){const n=li+e+1;if(n<t.length){const r=t[n],l=r[tr].firstChild;if(null!==l)return Ad(r,l)}return t[ya]}function Fp(e,t,n,r,l,f,m){for(;null!=n;){const b=r[n.index],O=n.type;if(m&&0===t&&(b&&ua(ae(b),r),n.flags|=2),32!=(32&n.flags))if(8&O)Fp(e,t,n.child,r,l,f,!1),gf(t,e,l,b,f);else if(32&O){const $=Rp(n,r);let Te;for(;Te=$();)gf(t,e,l,Te,f);gf(t,e,l,b,f)}else 16&O?tE(e,t,r,n,l,f):gf(t,e,l,b,f);n=m?n.projectionNext:n.next}}function Cd(e,t,n,r,l,f){Fp(n,r,e.firstChild,t,l,f,!1)}function tE(e,t,n,r,l,f){const m=n[qi],O=m[co].projection[r.projection];if(Array.isArray(O))for(let $=0;$<O.length;$++)gf(t,e,l,O[$],f);else{let $=O;const Te=m[xi];Ph(r)&&($.flags|=128),Fp(e,t,$,Te,l,f,!0)}}function nE(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function rE(e,t,n){const{mergedAttrs:r,classes:l,styles:f}=n;null!==r&&Oa(e,t,r),null!==l&&nE(e,t,l),null!==f&&function bC(e,t,n){e.setAttribute(t,"style",n)}(e,t,f)}class sE{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function mE(e){return function CC(e){return function kp(){if(void 0===Zh&&(Zh=null,Ii.trustedTypes))try{Zh=Ii.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Zh}()?.createScriptURL(e)||e}(e[0])}const Kh=new ur("ENVIRONMENT_INITIALIZER"),vE=new ur("INJECTOR",-1),yE=new ur("INJECTOR_DEF_TYPES");class jp{get(t,n=Qs){if(n===Qs){const r=new Error(`NullInjectorError: No provider for ${hi(t)}!`);throw r.name="NullInjectorError",r}return n}}function $C(...e){return{\u0275providers:EE(0,e),\u0275fromNgModule:!0}}function EE(e,...t){const n=[],r=new Set;let l;const f=m=>{n.push(m)};return nn(t,m=>{const b=m;Yh(b,f,[],r)&&(l||=[],l.push(b))}),void 0!==l&&_E(l,f),n}function _E(e,t){for(let n=0;n<e.length;n++){const{ngModule:r,providers:l}=e[n];Kp(l,f=>{t(f,r)})}}function Yh(e,t,n,r){if(!(e=dr(e)))return!1;let l=null,f=as(e);const m=!f&&Wr(e);if(f||m){if(m&&!m.standalone)return!1;l=e}else{const O=e.ngModule;if(f=as(O),!f)return!1;l=O}const b=r.has(l);if(m){if(b)return!1;if(r.add(l),m.dependencies){const O="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const $ of O)Yh($,t,n,r)}}else{if(!f)return!1;{if(null!=f.imports&&!b){let $;r.add(l);try{nn(f.imports,Te=>{Yh(Te,t,n,r)&&($||=[],$.push(Te))})}finally{}void 0!==$&&_E($,t)}if(!b){const $=ko(l)||(()=>new l);t({provide:l,useFactory:$,deps:fi},l),t({provide:yE,useValue:l,multi:!0},l),t({provide:Kh,useValue:()=>Br(l),multi:!0},l)}const O=f.providers;if(null!=O&&!b){const $=e;Kp(O,Te=>{t(Te,$)})}}}return l!==e&&void 0!==e.providers}function Kp(e,t){for(let n of e)Do(n)&&(n=n.\u0275providers),Array.isArray(n)?Kp(n,t):t(n)}const XC=Dr({provide:String,useValue:Dr});function Yp(e){return null!==e&&"object"==typeof e&&XC in e}function vc(e){return"function"==typeof e}const zp=new ur("Set Injector scope."),zh={},JC={};let Wp;function Wh(){return void 0===Wp&&(Wp=new jp),Wp}class ul{}class yf extends ul{get destroyed(){return this._destroyed}constructor(t,n,r,l){super(),this.parent=n,this.source=r,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xp(t,m=>this.processProvider(m)),this.records.set(vE,Ef(void 0,this)),l.has("environment")&&this.records.set(ul,Ef(void 0,this));const f=this.records.get(zp);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(yE.multi,fi,zr.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=na(this),r=Oo(void 0);try{return t()}finally{na(n),Oo(r)}}get(t,n=Qs,r=zr.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(ls))return t[ls](this);r=Po(r);const f=na(this),m=Oo(void 0);try{if(!(r&zr.SkipSelf)){let O=this.records.get(t);if(void 0===O){const $=function iI(e){return"function"==typeof e||"object"==typeof e&&e instanceof ur}(t)&&Lo(t);O=$&&this.injectableDefInScope($)?Ef($p(t),zh):null,this.records.set(t,O)}if(null!=O)return this.hydrate(t,O)}return(r&zr.Self?Wh():this.parent).get(t,n=r&zr.Optional&&n===Qs?null:n)}catch(b){if("NullInjectorError"===b.name){if((b[Al]=b[Al]||[]).unshift(hi(t)),f)throw b;return function Wf(e,t,n,r){const l=e[Al];throw t[tu]&&l.unshift(t[tu]),e.message=function jc(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let l=hi(t);if(Array.isArray(t))l=t.map(hi).join(" -> ");else if("object"==typeof t){let f=[];for(let m in t)if(t.hasOwnProperty(m)){let b=t[m];f.push(m+":"+("string"==typeof b?JSON.stringify(b):hi(b)))}l=`{${f.join(", ")}}`}return`${n}${r?"("+r+")":""}[${l}]: ${e.replace(Zc,"\n  ")}`}("\n"+e.message,l,n,r),e.ngTokenPath=l,e[Al]=null,e}(b,t,"R3InjectorError",this.source)}throw b}finally{Oo(m),na(f)}}resolveInjectorInitializers(){const t=na(this),n=Oo(void 0);try{const l=this.get(Kh.multi,fi,zr.Self);for(const f of l)f()}finally{na(t),Oo(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(hi(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Yn(205,!1)}processProvider(t){let n=vc(t=dr(t))?t:dr(t&&t.provide);const r=function tI(e){return Yp(e)?Ef(void 0,e.useValue):Ef(bE(e),zh)}(t);if(vc(t)||!0!==t.multi)this.records.get(n);else{let l=this.records.get(n);l||(l=Ef(void 0,zh,!0),l.factory=()=>Bu(l.multi),this.records.set(n,l)),n=t,l.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===zh&&(n.value=JC,n.value=n.factory()),"object"==typeof n.value&&n.value&&function rI(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=dr(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function $p(e){const t=Lo(e),n=null!==t?t.factory:ko(e);if(null!==n)return n;if(e instanceof ur)throw new Yn(204,!1);if(e instanceof Function)return function eI(e){const t=e.length;if(t>0)throw function on(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new Yn(204,!1);const n=function $l(e){return e&&(e[Cs]||e[Uc])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Yn(204,!1)}function bE(e,t,n){let r;if(vc(e)){const l=dr(e);return ko(l)||$p(l)}if(Yp(e))r=()=>dr(e.useValue);else if(function SE(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Bu(e.deps||[]));else if(function TE(e){return!(!e||!e.useExisting)}(e))r=()=>Br(dr(e.useExisting));else{const l=dr(e&&(e.useClass||e.provide));if(!function nI(e){return!!e.deps}(e))return ko(l)||$p(l);r=()=>new l(...Bu(e.deps))}return r}function Ef(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Xp(e,t){for(const n of e)Array.isArray(n)?Xp(n,t):n&&Do(n)?Xp(n.\u0275providers,t):t(n)}const $h=new ur("AppId",{providedIn:"root",factory:()=>oI}),oI="ng",AE=new ur("Platform Initializer"),yc=new ur("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),CE=new ur("CSP nonce",{providedIn:"root",factory:()=>function mf(){if(void 0!==Up)return Up;if(typeof document<"u")return document;throw new Yn(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let IE=(e,t,n)=>null;function om(e,t,n=!1){return IE(e,t,n)}class pI{}class RE{}class vI{resolveComponentFactory(t){throw function mI(e){const t=Error(`No component factory found for ${hi(e)}.`);return t.ngComponent=e,t}(t)}}let ng=(()=>{class e{static#e=this.NULL=new vI}return e})();function yI(){return Sf(Kt(),Ye())}function Sf(e,t){return new Hs(Fe(e,t))}let Hs=(()=>{class e{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=yI}return e})();function EI(e){return e instanceof Hs?e.nativeElement:e}class NE{}let Ec=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function _I(){const e=Ye(),n=me(Kt().index,e);return(_o(n)?n:e)[Rr]}()}return e})(),TI=(()=>{class e{static#e=this.\u0275prov=ii({token:e,providedIn:"root",factory:()=>null})}return e})();class rg{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const SI=new rg("16.2.12"),lm={};function PE(e,t=null,n=null,r){const l=FE(e,t,n,r);return l.resolveInjectorInitializers(),l}function FE(e,t=null,n=null,r,l=new Set){const f=[n||fi,$C(e)];return r=r||("object"==typeof e?void 0:hi(e)),new yf(f,t||Wh(),r||null,l)}let Gs=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=Qs;static#t=this.NULL=new jp;static create(n,r){if(Array.isArray(n))return PE({name:""},r,n,"");{const l=n.name??"";return PE({name:l},n.parent,n.providers,l)}}static#n=this.\u0275prov=ii({token:e,providedIn:"any",factory:()=>Br(vE)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function cm(e){return e.ngOriginalError}class Ul{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&cm(t);for(;n&&cm(n);)n=cm(n);return n||null}}function dm(e){return t=>{setTimeout(e,void 0,t)}}const Vi=class RI extends $e{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let l=t,f=n||(()=>null),m=r;if(t&&"object"==typeof t){const O=t;l=O.next?.bind(O),f=O.error?.bind(O),m=O.complete?.bind(O)}this.__isAsync&&(f=dm(f),l&&(l=dm(l)),m&&(m=dm(m)));const b=super.subscribe({next:l,error:f,complete:m});return t instanceof ne&&t.add(b),b}};function UE(...e){}class ho{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vi(!1),this.onMicrotaskEmpty=new Vi(!1),this.onStable=new Vi(!1),this.onError=new Vi(!1),typeof Zone>"u")throw new Yn(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!r&&n,l.shouldCoalesceRunChangeDetection=r,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function MI(){const e="function"==typeof Ii.requestAnimationFrame;let t=Ii[e?"requestAnimationFrame":"setTimeout"],n=Ii[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const l=n[Zone.__symbol__("OriginalDelegate")];l&&(n=l)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function LI(e){const t=()=>{!function xI(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ii,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,gm(e),e.isCheckStableRunning=!0,hm(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),gm(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,l,f,m,b)=>{if(function PI(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(b))return n.invokeTask(l,f,m,b);try{return BE(e),n.invokeTask(l,f,m,b)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||e.shouldCoalesceRunChangeDetection)&&t(),VE(e)}},onInvoke:(n,r,l,f,m,b,O)=>{try{return BE(e),n.invoke(l,f,m,b,O)}finally{e.shouldCoalesceRunChangeDetection&&t(),VE(e)}},onHasTask:(n,r,l,f)=>{n.hasTask(l,f),r===l&&("microTask"==f.change?(e._hasPendingMicrotasks=f.microTask,gm(e),hm(e)):"macroTask"==f.change&&(e.hasPendingMacrotasks=f.macroTask))},onHandleError:(n,r,l,f)=>(n.handleError(l,f),e.runOutsideAngular(()=>e.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ho.isInAngularZone())throw new Yn(909,!1)}static assertNotInAngularZone(){if(ho.isInAngularZone())throw new Yn(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,l){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+l,t,NI,UE,UE);try{return f.runTask(m,n,r)}finally{f.cancelTask(m)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const NI={};function hm(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function gm(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function BE(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function VE(e){e._nesting--,hm(e)}class OI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vi,this.onMicrotaskEmpty=new Vi,this.onStable=new Vi,this.onError=new Vi}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,l){return t.apply(n,r)}}const HE=new ur("",{providedIn:"root",factory:GE});function GE(){const e=Er(ho);let t=!0;return function Yl(...e){const t=pi(e),n=function Ei(e,t){return"number"==typeof Qr(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?jn(r[0]):function pn(e=1/0){return tn(De,e)}(n)(qa(r,t)):On}(new St(l=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{l.next(t),l.complete()})}),new St(l=>{let f;e.runOutsideAngular(()=>{f=e.onStable.subscribe(()=>{ho.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,l.next(!0))})})});const m=e.onUnstable.subscribe(()=>{ho.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{l.next(!1)}))});return()=>{f.unsubscribe(),m.unsubscribe()}}).pipe(yn()))}function pm(e){return e.ownerDocument.defaultView}let mm=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ii({token:e,providedIn:"root",factory:()=>new e})}return e})();function Nd(e){for(;e;){e[xr]|=64;const t=bd(e);if(Ml(e)&&!t)return e;e=t}return null}const YE=new ur("",{providedIn:"root",factory:()=>!1});let og=null;function XE(e,t){return e[t]??e0()}function QE(e,t){const n=e0();n.producerNode?.length&&(e[t]=og,n.lView=e,og=JE())}const jI={...nc,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Nd(e.lView)},lView:null};function JE(){return Object.create(jI)}function e0(){return og??=JE(),og}const Zr={};function br(e){t0(Lt(),Ye(),Si()+e,!1)}function t0(e,t,n,r){if(!r)if(3==(3&t[xr])){const f=e.preOrderCheckHooks;null!==f&&Bs(t,f,n)}else{const f=e.preOrderHooks;null!==f&&Aa(t,f,0,n)}Li(n)}function Kn(e,t=zr.Default){const n=Ye();return null===n?Br(e,t):Dh(Kt(),n,dr(e),t)}function ag(e,t,n,r,l,f,m,b,O,$,Te){const Be=t.blueprint.slice();return Be[Zi]=l,Be[xr]=140|r,(null!==$||e&&2048&e[xr])&&(Be[xr]|=2048),re(Be),Be[xi]=Be[nl]=e,Be[ji]=n,Be[Ls]=m||e&&e[Ls],Be[Rr]=b||e&&e[Rr],Be[$a]=O||e&&e[$a]||null,Be[co]=f,Be[Xa]=function QA(){return XA++}(),Be[Pa]=Te,Be[Dl]=$,Be[qi]=2==t.type?e[qi]:Be,Be}function Cf(e,t,n,r,l){let f=e.data[t];if(null===f)f=function vm(e,t,n,r,l){const f=Wt(),m=er(),O=e.data[t]=function JI(e,t,n,r,l,f){let m=t?t.injectorIndex:-1,b=0;return function Ft(){return null!==ie.skipHydrationRootTNode}()&&(b|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:b,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,n,t,r,l);return null===e.firstChild&&(e.firstChild=O),null!==f&&(m?null==f.child&&null!==O.parent&&(f.child=O):null===f.next&&(f.next=O,O.prev=f)),O}(e,t,n,r,l),function nr(){return ie.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=n,f.value=r,f.attrs=l;const m=function Un(){const e=ie.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return Mn(f,!0),f}function xd(e,t,n,r){if(0===n)return-1;const l=t.length;for(let f=0;f<n;f++)t.push(r),e.blueprint.push(r),e.data.push(null);return l}function n0(e,t,n,r,l){const f=XE(t,rl),m=Si(),b=2&r;try{Li(-1),b&&t.length>$r&&t0(e,t,$r,!1),fe(b?2:0,l);const $=b?f:null,Te=al($);try{null!==$&&($.dirty=!1),n(r,l)}finally{sl($,Te)}}finally{b&&null===t[rl]&&QE(t,rl),Li(m),fe(b?3:1,l)}}function ym(e,t,n){if(du(t)){const r=oa(null);try{const f=t.directiveEnd;for(let m=t.directiveStart;m<f;m++){const b=e.data[m];b.contentQueries&&b.contentQueries(1,n[m],m)}}finally{oa(r)}}}function Em(e,t,n){st()&&(function aD(e,t,n,r){const l=n.directiveStart,f=n.directiveEnd;Fa(n)&&function hD(e,t,n){const r=Fe(t,e),l=r0(n);let m=16;n.signals?m=4096:n.onPush&&(m=64);const b=sg(e,ag(e,l,null,m,r,t,null,e[Ls].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=b}(t,n,e.data[l+n.componentOffset]),e.firstCreatePass||af(n,t),ua(r,t);const m=n.initialInputs;for(let b=l;b<f;b++){const O=e.data[b],$=Fl(t,e,b,n);ua($,t),null!==m&&gD(0,b-l,$,O,0,m),Ea(O)&&(me(n.index,t)[ji]=Fl(t,e,b,n))}}(e,t,n,Fe(n,t)),64==(64&n.flags)&&u0(e,t,n))}function _m(e,t,n=Fe){const r=t.localNames;if(null!==r){let l=t.index+1;for(let f=0;f<r.length;f+=2){const m=r[f+1],b=-1===m?n(t,e):e[m];e[l++]=b}}}function r0(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Tm(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Tm(e,t,n,r,l,f,m,b,O,$,Te){const Be=$r+r,lt=Be+l,Et=function YI(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Zr);return n}(Be,lt),Jt="function"==typeof $?$():$;return Et[tr]={type:e,blueprint:Et,template:n,queries:null,viewQuery:b,declTNode:t,data:Et.slice().fill(null,Be),bindingStartIndex:Be,expandoStartIndex:lt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:O,consts:Jt,incompleteFirstPass:!1,ssrId:Te}}let o0=e=>null;function a0(e,t,n,r){for(let l in e)if(e.hasOwnProperty(l)){n=null===n?{}:n;const f=e[l];null===r?s0(n,t,l,f):r.hasOwnProperty(l)&&s0(n,t,r[l],f)}return n}function s0(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function Sm(e,t,n,r){if(st()){const l=null===r?null:{"":-1},f=function lD(e,t){const n=e.directiveRegistry;let r=null,l=null;if(n)for(let f=0;f<n.length;f++){const m=n[f];if(Ns(t,m.selectors,!1))if(r||(r=[]),Ea(m))if(null!==m.findHostDirectiveDefs){const b=[];l=l||new Map,m.findHostDirectiveDefs(m,b,l),r.unshift(...b,m),bm(e,t,b.length)}else r.unshift(m),bm(e,t,0);else l=l||new Map,m.findHostDirectiveDefs?.(m,r,l),r.push(m)}return null===r?null:[r,l]}(e,n);let m,b;null===f?m=b=null:[m,b]=f,null!==m&&l0(e,t,n,m,l,b),l&&function uD(e,t,n){if(t){const r=e.localNames=[];for(let l=0;l<t.length;l+=2){const f=n[t[l+1]];if(null==f)throw new Yn(-301,!1);r.push(t[l],f)}}}(n,r,l)}n.mergedAttrs=us(n.mergedAttrs,n.attrs)}function l0(e,t,n,r,l,f){for(let $=0;$<r.length;$++)lf(af(n,t),e,r[$].type);!function fD(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let $=0;$<r.length;$++){const Te=r[$];Te.providersResolver&&Te.providersResolver(Te)}let m=!1,b=!1,O=xd(e,t,r.length,null);for(let $=0;$<r.length;$++){const Te=r[$];n.mergedAttrs=us(n.mergedAttrs,Te.hostAttrs),dD(e,n,t,O,Te),cD(O,Te,l),null!==Te.contentQueries&&(n.flags|=4),(null!==Te.hostBindings||null!==Te.hostAttrs||0!==Te.hostVars)&&(n.flags|=64);const Be=Te.type.prototype;!m&&(Be.ngOnChanges||Be.ngOnInit||Be.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),m=!0),!b&&(Be.ngOnChanges||Be.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),b=!0),O++}!function eD(e,t,n){const l=t.directiveEnd,f=e.data,m=t.attrs,b=[];let O=null,$=null;for(let Te=t.directiveStart;Te<l;Te++){const Be=f[Te],lt=n?n.get(Be):null,Jt=lt?lt.outputs:null;O=a0(Be.inputs,Te,O,lt?lt.inputs:null),$=a0(Be.outputs,Te,$,Jt);const ln=null===O||null===m||Ms(t)?null:pD(O,Te,m);b.push(ln)}null!==O&&(O.hasOwnProperty("class")&&(t.flags|=8),O.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=b,t.inputs=O,t.outputs=$}(e,n,f)}function u0(e,t,n){const r=n.directiveStart,l=n.directiveEnd,f=n.index,m=function Fn(){return ie.lFrame.currentDirectiveIndex}();try{Li(f);for(let b=r;b<l;b++){const O=e.data[b],$=t[b];Ln(b),(null!==O.hostBindings||0!==O.hostVars||null!==O.hostAttrs)&&sD(O,$)}}finally{Li(-1),Ln(m)}}function sD(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function bm(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function cD(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Ea(t)&&(n[""]=e)}}function dD(e,t,n,r,l){e.data[r]=l;const f=l.factory||(l.factory=ko(l.type)),m=new lr(f,Ea(l),Kn);e.blueprint[r]=m,n[r]=m,function iD(e,t,n,r,l){const f=l.hostBindings;if(f){let m=e.hostBindingOpCodes;null===m&&(m=e.hostBindingOpCodes=[]);const b=~t.index;(function oD(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(m)!=b&&m.push(b),m.push(n,r,f)}}(e,t,r,xd(e,n,l.hostVars,Zr),l)}function cl(e,t,n,r,l,f){const m=Fe(e,t);!function Am(e,t,n,r,l,f,m){if(null==f)e.removeAttribute(t,l,n);else{const b=null==m?Cr(f):m(f,r||"",l);e.setAttribute(t,l,b,n)}}(t[Rr],m,f,e.value,n,r,l)}function gD(e,t,n,r,l,f){const m=f[t];if(null!==m)for(let b=0;b<m.length;)c0(r,n,m[b++],m[b++],m[b++])}function c0(e,t,n,r,l){const f=oa(null);try{const m=e.inputTransforms;null!==m&&m.hasOwnProperty(r)&&(l=m[r].call(t,l)),null!==e.setInput?e.setInput(t,l,n,r):t[r]=l}finally{oa(f)}}function pD(e,t,n){let r=null,l=0;for(;l<n.length;){const f=n[l];if(0!==f)if(5!==f){if("number"==typeof f)break;if(e.hasOwnProperty(f)){null===r&&(r=[]);const m=e[f];for(let b=0;b<m.length;b+=2)if(m[b]===t){r.push(f,m[b+1],n[l+1]);break}}l+=2}else l+=2;else l+=4}return r}function f0(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null,null]}function d0(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const f=n[r+1];if(-1!==f){const m=e.data[f];ct(n[r]),m.contentQueries(2,t[f],f)}}}function sg(e,t){return e[ma]?e[$u][ia]=t:e[ma]=t,e[$u]=t,t}function Cm(e,t,n){ct(0);const r=oa(null);try{t(e,n)}finally{oa(r)}}function h0(e){return e[xs]||(e[xs]=[])}function g0(e){return e.cleanup||(e.cleanup=[])}function m0(e,t){const n=e[$a],r=n?n.get(Ul,null):null;r&&r.handleError(t)}function Im(e,t,n,r,l){for(let f=0;f<n.length;){const m=n[f++],b=n[f++];c0(e.data[m],t[m],r,b,l)}}function Vl(e,t,n){const r=Ne(t,e);!function jy(e,t,n){e.setValue(t,n)}(e[Rr],r,n)}function mD(e,t){const n=me(t,e),r=n[tr];!function vD(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const l=n[Zi];null!==l&&null===n[Pa]&&(n[Pa]=om(l,n[$a])),Dm(r,n,n[ji])}function Dm(e,t,n){We(t);try{const r=e.viewQuery;null!==r&&Cm(1,r,n);const l=e.template;null!==l&&n0(e,t,l,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&d0(e,t),e.staticViewQueries&&Cm(2,e.viewQuery,n);const f=e.components;null!==f&&function yD(e,t){for(let n=0;n<t.length;n++)mD(e,t[n])}(t,f)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[xr]&=-5,ci()}}let v0=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(n,r,l){const f=typeof Zone>"u"?null:Zone.current,m=function cd(e,t,n){const r=Object.create(Eu);n&&(r.consumerAllowSignalWrites=!0),r.fn=e,r.schedule=t;const l=m=>{r.cleanupFn=m};return r.ref={notify:()=>Ps(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Xc(r))return;r.hasRun=!0;const m=al(r);try{r.cleanupFn(),r.cleanupFn=yu,r.fn(l)}finally{sl(r,m)}},cleanup:()=>r.cleanupFn()},r.ref}(n,$=>{this.all.has($)&&this.queue.set($,f)},l);let b;this.all.add(m),m.notify();const O=()=>{m.cleanup(),b?.(),this.all.delete(m),this.queue.delete(m)};return b=r?.onDestroy(O),{destroy:O}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ii({token:e,providedIn:"root",factory:()=>new e})}return e})();function lg(e,t,n){let r=n?e.styles:null,l=n?e.classes:null,f=0;if(null!==t)for(let m=0;m<t.length;m++){const b=t[m];"number"==typeof b?f=b:1==f?l=Ni(l,b):2==f&&(r=Ni(r,b+": "+t[++m]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=l:e.classesWithoutHost=l}function Ld(e,t,n,r,l=!1){for(;null!==n;){const f=t[n.index];null!==f&&r.push(ae(f)),Fo(f)&&y0(f,r);const m=n.type;if(8&m)Ld(e,t,n.child,r);else if(32&m){const b=Rp(n,t);let O;for(;O=b();)r.push(O)}else if(16&m){const b=Jy(t,n);if(Array.isArray(b))r.push(...b);else{const O=bd(t[qi]);Ld(O[tr],O,b,r,!0)}}n=l?n.projectionNext:n.next}return r}function y0(e,t){for(let n=li;n<e.length;n++){const r=e[n],l=r[tr].firstChild;null!==l&&Ld(r[tr],r,l,t)}e[ya]!==e[Zi]&&t.push(e[ya])}function ug(e,t,n,r=!0){const l=t[Ls],f=l.rendererFactory,m=l.afterRenderEventManager;f.begin?.(),m?.begin();try{E0(e,t,e.template,n)}catch(O){throw r&&m0(t,O),O}finally{f.end?.(),l.effectManager?.flush(),m?.end()}}function E0(e,t,n,r){const l=t[xr];if(256!=(256&l)){t[Ls].effectManager?.flush(),We(t);try{re(t),function Zn(e){return ie.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&n0(e,t,n,2,r);const m=3==(3&l);if(m){const $=e.preOrderCheckHooks;null!==$&&Bs(t,$,null)}else{const $=e.preOrderHooks;null!==$&&Aa(t,$,0,null),es(t,0)}if(function TD(e){for(let t=Hy(e);null!==t;t=Gy(t)){if(!t[gs])continue;const n=t[Os];for(let r=0;r<n.length;r++){z(n[r])}}}(t),_0(t,2),null!==e.contentQueries&&d0(e,t),m){const $=e.contentCheckHooks;null!==$&&Bs(t,$)}else{const $=e.contentHooks;null!==$&&Aa(t,$,1),es(t,1)}!function KI(e,t){const n=e.hostBindingOpCodes;if(null===n)return;const r=XE(t,wl);try{for(let l=0;l<n.length;l++){const f=n[l];if(f<0)Li(~f);else{const m=f,b=n[++l],O=n[++l];Dn(b,m),r.dirty=!1;const $=al(r);try{O(2,t[m])}finally{sl(r,$)}}}}finally{null===t[wl]&&QE(t,wl),Li(-1)}}(e,t);const b=e.components;null!==b&&S0(t,b,0);const O=e.viewQuery;if(null!==O&&Cm(2,O,r),m){const $=e.viewCheckHooks;null!==$&&Bs(t,$)}else{const $=e.viewHooks;null!==$&&Aa(t,$,2),es(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[xr]&=-73,xe(t)}finally{ci()}}}function _0(e,t){for(let n=Hy(e);null!==n;n=Gy(n))for(let r=li;r<n.length;r++)T0(n[r],t)}function SD(e,t,n){T0(me(t,e),n)}function T0(e,t){if(!function P(e){return 128==(128&e[xr])}(e))return;const n=e[tr],r=e[xr];if(80&r&&0===t||1024&r||2===t)E0(n,e,n.template,e[ji]);else if(e[fs]>0){_0(e,1);const l=n.components;null!==l&&S0(e,l,1)}}function S0(e,t,n){for(let r=0;r<t.length;r++)SD(e,t[r],n)}class Od{get rootNodes(){const t=this._lView,n=t[tr];return Ld(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ji]}set context(t){this._lView[ji]=t}get destroyed(){return 256==(256&this._lView[xr])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[xi];if(Fo(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(Bh(t,r),Dt(n,r))}this._attachedToViewContainer=!1}Np(this._lView[tr],this._lView)}onDestroy(t){!function ke(e,t){if(256==(256&e[xr]))throw new Yn(911,!1);null===e[hs]&&(e[hs]=[]),e[hs].push(t)}(this._lView,t)}markForCheck(){Nd(this._cdRefInjectingView||this._lView)}detach(){this._lView[xr]&=-129}reattach(){this._lView[xr]|=128}detectChanges(){ug(this._lView[tr],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Yn(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dC(e,t){Cd(e,t,t[Rr],2,null,null)}(this._lView[tr],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Yn(902,!1);this._appRef=t}}class bD extends Od{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;ug(t[tr],t,t[ji],!1)}checkNoChanges(){}get context(){return null}}class b0 extends ng{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Wr(t);return new Pd(n,this.ngModule)}}function A0(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class CD{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Po(r);const l=this.injector.get(t,lm,r);return l!==lm||n===lm?l:this.parentInjector.get(t,n,r)}}class Pd extends RE{get inputs(){const t=this.componentDef,n=t.inputTransforms,r=A0(t.inputs);if(null!==n)for(const l of r)n.hasOwnProperty(l.propName)&&(l.transform=n[l.propName]);return r}get outputs(){return A0(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function Qf(e){return e.map(Xf).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,l){let f=(l=l||this.ngModule)instanceof ul?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const m=f?new CD(t,f):t,b=m.get(NE,null);if(null===b)throw new Yn(407,!1);const Be={rendererFactory:b,sanitizer:m.get(TI,null),effectManager:m.get(v0,null),afterRenderEventManager:m.get(mm,null)},lt=b.createRenderer(null,this.componentDef),Et=this.componentDef.selectors[0][0]||"div",Jt=r?function zI(e,t,n,r){const f=r.get(YE,!1)||n===Yr.ShadowDom,m=e.selectRootElement(t,f);return function WI(e){o0(e)}(m),m}(lt,r,this.componentDef.encapsulation,m):Uh(lt,Et,function AD(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(Et)),zn=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let _n=null;null!==Jt&&(_n=om(Jt,m,!0));const ar=Tm(0,null,null,1,0,null,null,null,null,null,null),wr=ag(null,ar,null,zn,null,null,Be,lt,m,null,_n);let ai,Go;We(wr);try{const yl=this.componentDef;let Oc,by=null;yl.findHostDirectiveDefs?(Oc=[],by=new Map,yl.findHostDirectiveDefs(yl,Oc,by),Oc.push(yl)):Oc=[yl];const cF=function DD(e,t){const n=e[tr],r=$r;return e[r]=t,Cf(n,r,2,"#host",null)}(wr,Jt),fF=function wD(e,t,n,r,l,f,m){const b=l[tr];!function RD(e,t,n,r){for(const l of e)t.mergedAttrs=us(t.mergedAttrs,l.hostAttrs);null!==t.mergedAttrs&&(lg(t,t.mergedAttrs,!0),null!==n&&rE(r,n,t))}(r,e,t,m);let O=null;null!==t&&(O=om(t,l[$a]));const $=f.rendererFactory.createRenderer(t,n);let Te=16;n.signals?Te=4096:n.onPush&&(Te=64);const Be=ag(l,r0(n),null,Te,l[e.index],e,f,$,null,null,O);return b.firstCreatePass&&bm(b,e,r.length-1),sg(l,Be),l[e.index]=Be}(cF,Jt,yl,Oc,wr,Be,lt);Go=he(ar,$r),Jt&&function ND(e,t,n,r){if(r)Oa(e,n,["ng-version",SI.full]);else{const{attrs:l,classes:f}=function su(e){const t=[],n=[];let r=1,l=2;for(;r<e.length;){let f=e[r];if("string"==typeof f)2===l?""!==f&&t.push(f,e[++r]):8===l&&n.push(f);else{if(!ui(l))break;l=f}r++}return{attrs:t,classes:n}}(t.selectors[0]);l&&Oa(e,n,l),f&&f.length>0&&nE(e,n,f.join(" "))}}(lt,yl,Jt,r),void 0!==n&&function xD(e,t,n){const r=e.projection=[];for(let l=0;l<t.length;l++){const f=n[l];r.push(null!=f?Array.from(f):null)}}(Go,this.ngContentSelectors,n),ai=function MD(e,t,n,r,l,f){const m=Kt(),b=l[tr],O=Fe(m,l);l0(b,l,m,n,null,r);for(let Te=0;Te<n.length;Te++)ua(Fl(l,b,m.directiveStart+Te,m),l);u0(b,l,m),O&&ua(O,l);const $=Fl(l,b,m.directiveStart+m.componentOffset,m);if(e[ji]=l[ji]=$,null!==f)for(const Te of f)Te($,t);return ym(b,m,e),$}(fF,yl,Oc,by,wr,[LD]),Dm(ar,wr,null)}finally{ci()}return new ID(this.componentType,ai,Sf(Go,wr),wr,Go)}}class ID extends pI{constructor(t,n,r,l,f){super(),this.location=r,this._rootLView=l,this._tNode=f,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new bD(l),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let l;if(null!==r&&(l=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const f=this._rootLView;Im(f[tr],f,l,t,n),this.previousInputValues.set(t,n),Nd(me(this._tNode.index,f))}}get injector(){return new Mo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function LD(){const e=Kt();Us(Ye()[tr],e)}function Pi(e){let t=function C0(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const r=[e];for(;t;){let l;if(Ea(e))l=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Yn(903,!1);l=t.\u0275dir}if(l){if(n){r.push(l);const m=e;m.inputs=cg(e.inputs),m.inputTransforms=cg(e.inputTransforms),m.declaredInputs=cg(e.declaredInputs),m.outputs=cg(e.outputs);const b=l.hostBindings;b&&kD(e,b);const O=l.viewQuery,$=l.contentQueries;if(O&&PD(e,O),$&&FD(e,$),ri(e.inputs,l.inputs),ri(e.declaredInputs,l.declaredInputs),ri(e.outputs,l.outputs),null!==l.inputTransforms&&(null===m.inputTransforms&&(m.inputTransforms={}),ri(m.inputTransforms,l.inputTransforms)),Ea(l)&&l.data.animation){const Te=e.data;Te.animation=(Te.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let m=0;m<f.length;m++){const b=f[m];b&&b.ngInherit&&b(e),b===Pi&&(n=!1)}}t=Object.getPrototypeOf(t)}!function OD(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const l=e[r];l.hostVars=t+=l.hostVars,l.hostAttrs=us(l.hostAttrs,n=us(n,l.hostAttrs))}}(r)}function cg(e){return e===ra?{}:e===fi?[]:e}function PD(e,t){const n=e.viewQuery;e.viewQuery=n?(r,l)=>{t(r,l),n(r,l)}:t}function FD(e,t){const n=e.contentQueries;e.contentQueries=n?(r,l,f)=>{t(r,l,f),n(r,l,f)}:t}function kD(e,t){const n=e.hostBindings;e.hostBindings=n?(r,l)=>{t(r,l),n(r,l)}:t}function fg(e){return!!wm(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function wm(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function ca(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function dg(e,t,n,r,l){const f=function _c(e,t,n,r){const l=ca(e,t,n);return ca(e,t+1,r)||l}(e,t,n,r);return ca(e,t+2,l)||f}function Hl(e,t,n,r){const l=Ye();return ca(l,Bn(),t)&&(Lt(),cl(mi(),l,e,t,n,r)),Hl}function Rf(e,t,n,r,l,f,m,b){const $=dg(e,function mn(){return ie.lFrame.bindingIndex}(),n,l,m);return Hn(3),$?t+Cr(n)+r+Cr(l)+f+Cr(m)+b:Zr}function bu(e,t,n,r,l,f,m,b){const O=Ye(),$=Lt(),Te=e+$r,Be=$.firstCreatePass?function uw(e,t,n,r,l,f,m,b,O){const $=t.consts,Te=Cf(t,e,4,m||null,te($,b));Sm(t,n,Te,te($,O)),Us(t,Te);const Be=Te.tView=Tm(2,Te,r,l,f,t.directiveRegistry,t.pipeRegistry,null,t.schemas,$,null);return null!==t.queries&&(t.queries.template(t,Te),Be.queries=t.queries.embeddedTView(Te)),Te}(Te,$,O,t,n,r,l,f,m):$.data[Te];Mn(Be,!1);const lt=H0($,O,Be,e);Ba()&&Hh($,O,lt,Be),ua(lt,O),sg(O,O[Te]=f0(lt,O,lt,Be)),ka(Be)&&Em($,O,Be),null!=m&&_m(O,Be,b)}let H0=function G0(e,t,n,r){return ao(!0),t[Rr].createComment("")};function Om(e){return function Oe(e,t){return e[t]}(function At(){return ie.lFrame.contextLView}(),$r+e)}function Lr(e,t,n){const r=Ye();return ca(r,Bn(),t)&&function is(e,t,n,r,l,f,m,b){const O=Fe(t,n);let Te,$=t.inputs;!b&&null!=$&&(Te=$[r])?(Im(e,n,Te,r,l),Fa(t)&&function nD(e,t){const n=me(t,e);16&n[xr]||(n[xr]|=64)}(n,t.index)):3&t.type&&(r=function tD(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),l=null!=m?m(l,t.value||"",r):l,f.setProperty(O,r,l))}(Lt(),mi(),r,e,t,r[Rr],n,!1),Lr}function Pm(e,t,n,r,l){const m=l?"class":"style";Im(e,n,t.inputs[m],m,r)}function Vn(e,t,n,r){const l=Ye(),f=Lt(),m=$r+e,b=l[Rr],O=f.firstCreatePass?function hw(e,t,n,r,l,f){const m=t.consts,O=Cf(t,e,2,r,te(m,l));return Sm(t,n,O,te(m,f)),null!==O.attrs&&lg(O,O.attrs,!1),null!==O.mergedAttrs&&lg(O,O.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,O),O}(m,f,l,t,n,r):f.data[m],$=Z0(f,l,O,b,t,e);l[m]=$;const Te=ka(O);return Mn(O,!0),rE(b,$,O),32!=(32&O.flags)&&Ba()&&Hh(f,l,$,O),0===function ft(){return ie.lFrame.elementDepthCount}()&&ua($,l),function nt(){ie.lFrame.elementDepthCount++}(),Te&&(Em(f,l,O),ym(f,O,l)),null!==r&&_m(l,O),Vn}function Wn(){let e=Kt();er()?function Jn(){ie.lFrame.isParent=!1}():(e=e.parent,Mn(e,!1));const t=e;(function Gt(e){return ie.skipHydrationRootTNode===e})(t)&&function tt(){ie.skipHydrationRootTNode=null}(),function dt(){ie.lFrame.elementDepthCount--}();const n=Lt();return n.firstCreatePass&&(Us(n,e),du(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function gi(e){return 0!=(8&e.flags)}(t)&&Pm(n,t,Ye(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function ts(e){return 0!=(16&e.flags)}(t)&&Pm(n,t,Ye(),t.stylesWithoutHost,!1),Wn}function Ia(e,t,n,r){return Vn(e,t,n,r),Wn(),Ia}let Z0=(e,t,n,r,l,f)=>(ao(!0),Uh(r,l,function To(){return ie.lFrame.currentNamespace}()));function Vd(){return Ye()}function mg(e){return!!e&&"function"==typeof e.then}function K0(e){return!!e&&"function"==typeof e.subscribe}function Ir(e,t,n,r){const l=Ye(),f=Lt(),m=Kt();return function z0(e,t,n,r,l,f,m){const b=ka(r),$=e.firstCreatePass&&g0(e),Te=t[ji],Be=h0(t);let lt=!0;if(3&r.type||m){const ln=Fe(r,t),Cn=m?m(ln):ln,zn=Be.length,_n=m?wr=>m(ae(wr[r.index])):r.index;let ar=null;if(!m&&b&&(ar=function Ew(e,t,n,r){const l=e.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const m=l[f];if(m===n&&l[f+1]===r){const b=t[xs],O=l[f+2];return b.length>O?b[O]:null}"string"==typeof m&&(f+=2)}return null}(e,t,l,r.index)),null!==ar)(ar.__ngLastListenerFn__||ar).__ngNextListenerFn__=f,ar.__ngLastListenerFn__=f,lt=!1;else{f=$0(r,t,Te,f,!1);const wr=n.listen(Cn,l,f);Be.push(f,wr),$&&$.push(l,_n,zn,zn+1)}}else f=$0(r,t,Te,f,!1);const Et=r.outputs;let Jt;if(lt&&null!==Et&&(Jt=Et[l])){const ln=Jt.length;if(ln)for(let Cn=0;Cn<ln;Cn+=2){const ai=t[Jt[Cn]][Jt[Cn+1]].subscribe(f),Go=Be.length;Be.push(f,ai),$&&$.push(l,r.index,Go,-(Go+1))}}}(f,l,l[Rr],m,e,t,r),Ir}function W0(e,t,n,r){try{return fe(6,t,n),!1!==n(r)}catch(l){return m0(e,l),!1}finally{fe(7,t,n)}}function $0(e,t,n,r,l){return function f(m){if(m===Function)return r;Nd(e.componentOffset>-1?me(e.index,t):t);let O=W0(t,n,r,m),$=f.__ngNextListenerFn__;for(;$;)O=W0(t,n,$,m)&&O,$=$.__ngNextListenerFn__;return l&&!1===O&&m.preventDefault(),O}}function fa(e=1){return function Bi(e){return(ie.lFrame.contextLView=function di(e,t){for(;e>0;)t=t[nl],e--;return t}(e,ie.lFrame.contextLView))[ji]}(e)}function vg(e,t){return e<<17|t<<2}function Au(e){return e>>17&32767}function Bm(e){return 2|e}function Tc(e){return(131068&e)>>2}function Vm(e,t){return-131069&e|t<<2}function Hm(e){return 1|e}function a_(e,t,n,r,l){const f=e[n+1],m=null===t;let b=r?Au(f):Tc(f),O=!1;for(;0!==b&&(!1===O||m);){const Te=e[b+1];ww(e[b],t)&&(O=!0,e[b+1]=r?Hm(Te):Bm(Te)),b=r?Au(Te):Tc(Te)}O&&(e[n+1]=r?Bm(f):Hm(f))}function ww(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Pr(e,t)>=0}function yg(e,t){return function Zs(e,t,n,r){const l=Ye(),f=Lt(),m=Hn(2);f.firstUpdatePass&&function p_(e,t,n,r){const l=e.data;if(null===l[n+1]){const f=l[Si()],m=function g_(e,t){return t>=e.expandoStartIndex}(e,n);(function E_(e,t){return 0!=(e.flags&(t?8:16))})(f,r)&&null===t&&!m&&(t=!1),t=function kw(e,t,n,r){const l=function Gn(e){const t=ie.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let f=r?t.residualClasses:t.residualStyles;if(null===l)0===(r?t.classBindings:t.styleBindings)&&(n=Hd(n=Gm(null,e,t,n,r),t.attrs,r),f=null);else{const m=t.directiveStylingLast;if(-1===m||e[m]!==l)if(n=Gm(l,e,t,n,r),null===f){let O=function Uw(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==Tc(r))return e[Au(r)]}(e,t,r);void 0!==O&&Array.isArray(O)&&(O=Gm(null,e,t,O[1],r),O=Hd(O,t.attrs,r),function Bw(e,t,n,r){e[Au(n?t.classBindings:t.styleBindings)]=r}(e,t,r,O))}else f=function Vw(e,t,n){let r;const l=t.directiveEnd;for(let f=1+t.directiveStylingLast;f<l;f++)r=Hd(r,e[f].hostAttrs,n);return Hd(r,t.attrs,n)}(e,t,r)}return void 0!==f&&(r?t.residualClasses=f:t.residualStyles=f),n}(l,f,t,r),function Iw(e,t,n,r,l,f){let m=f?t.classBindings:t.styleBindings,b=Au(m),O=Tc(m);e[r]=n;let Te,$=!1;if(Array.isArray(n)?(Te=n[1],(null===Te||Pr(n,Te)>0)&&($=!0)):Te=n,l)if(0!==O){const lt=Au(e[b+1]);e[r+1]=vg(lt,b),0!==lt&&(e[lt+1]=Vm(e[lt+1],r)),e[b+1]=function Aw(e,t){return 131071&e|t<<17}(e[b+1],r)}else e[r+1]=vg(b,0),0!==b&&(e[b+1]=Vm(e[b+1],r)),b=r;else e[r+1]=vg(O,0),0===b?b=r:e[O+1]=Vm(e[O+1],r),O=r;$&&(e[r+1]=Bm(e[r+1])),a_(e,Te,r,!0),a_(e,Te,r,!1),function Dw(e,t,n,r,l){const f=l?e.residualClasses:e.residualStyles;null!=f&&"string"==typeof t&&Pr(f,t)>=0&&(n[r+1]=Hm(n[r+1]))}(t,Te,e,r,f),m=vg(b,O),f?t.classBindings=m:t.styleBindings=m}(l,f,t,n,m,r)}}(f,e,m,r),t!==Zr&&ca(l,m,t)&&function v_(e,t,n,r,l,f,m,b){if(!(3&t.type))return;const O=e.data,$=O[b+1],Te=function Cw(e){return 1==(1&e)}($)?y_(O,t,n,l,Tc($),m):void 0;Eg(Te)||(Eg(f)||function bw(e){return 2==(2&e)}($)&&(f=y_(O,null,n,l,b,m)),function SC(e,t,n,r,l){if(t)l?e.addClass(n,r):e.removeClass(n,r);else{let f=-1===r.indexOf("-")?void 0:Tu.DashCase;null==l?e.removeStyle(n,r,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=Tu.Important),e.setStyle(n,r,l,f))}}(r,m,Ne(Si(),n),l,f))}(f,f.data[Si()],l,l[Rr],e,l[m+1]=function jw(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=hi(function Su(e){return e instanceof sE?e.changingThisBreaksApplicationSecurity:e}(e)))),e}(t,n),r,m)}(e,t,null,!0),yg}function Gm(e,t,n,r,l){let f=null;const m=n.directiveEnd;let b=n.directiveStylingLast;for(-1===b?b=n.directiveStart:b++;b<m&&(f=t[b],r=Hd(r,f.hostAttrs,l),f!==e);)b++;return null!==e&&(n.directiveStylingLast=b),r}function Hd(e,t,n){const r=n?1:2;let l=-1;if(null!==t)for(let f=0;f<t.length;f++){const m=t[f];"number"==typeof m?l=m:l===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),or(e,m,!!n||t[++f]))}return void 0===e?null:e}function y_(e,t,n,r,l,f){const m=null===t;let b;for(;l>0;){const O=e[l],$=Array.isArray(O),Te=$?O[1]:O,Be=null===Te;let lt=n[l+1];lt===Zr&&(lt=Be?fi:void 0);let Et=Be?mr(lt,r):Te===r?lt:void 0;if($&&!Eg(Et)&&(Et=mr(O,r)),Eg(Et)&&(b=Et,m))return b;const Jt=e[l+1];l=m?Au(Jt):Tc(Jt)}if(null!==t){let O=f?t.residualClasses:t.residualStyles;null!=O&&(b=mr(O,r))}return b}function Eg(e){return void 0!==e}function cr(e,t=""){const n=Ye(),r=Lt(),l=e+$r,f=r.firstCreatePass?Cf(r,l,1,t,null):r.data[l],m=__(r,n,f,t,e);n[l]=m,Ba()&&Hh(r,n,m,f),Mn(f,!1)}let __=(e,t,n,r,l)=>(ao(!0),function kh(e,t){return e.createText(t)}(t[Rr],r));function gl(e){return Gd("",e,""),gl}function Gd(e,t,n){const r=Ye(),l=function Df(e,t,n,r){return ca(e,Bn(),n)?t+Cr(n)+r:Zr}(r,e,t,n);return l!==Zr&&Vl(r,Si(),l),Gd}function _g(e,t,n,r,l,f,m){const b=Ye(),O=Rf(b,e,t,n,r,l,f,m);return O!==Zr&&Vl(b,Si(),O),_g}const kf="en-US";let H_=kf;function qm(e,t,n,r,l){if(e=dr(e),Array.isArray(e))for(let f=0;f<e.length;f++)qm(e[f],t,n,r,l);else{const f=Lt(),m=Ye(),b=Kt();let O=vc(e)?e:dr(e.provide);const $=bE(e),Te=1048575&b.providerIndexes,Be=b.directiveStart,lt=b.providerIndexes>>20;if(vc(e)||!e.multi){const Et=new lr($,l,Kn),Jt=Ym(O,t,l?Te:Te+lt,Be);-1===Jt?(lf(af(b,m),f,O),Km(f,e,t.length),t.push(O),b.directiveStart++,b.directiveEnd++,l&&(b.providerIndexes+=1048576),n.push(Et),m.push(Et)):(n[Jt]=Et,m[Jt]=Et)}else{const Et=Ym(O,t,Te+lt,Be),Jt=Ym(O,t,Te,Te+lt),Cn=Jt>=0&&n[Jt];if(l&&!Cn||!l&&!(Et>=0&&n[Et])){lf(af(b,m),f,O);const zn=function fM(e,t,n,r,l){const f=new lr(e,n,Kn);return f.multi=[],f.index=t,f.componentProviders=0,dT(f,l,r&&!n),f}(l?cM:uM,n.length,l,r,$);!l&&Cn&&(n[Jt].providerFactory=zn),Km(f,e,t.length,0),t.push(O),b.directiveStart++,b.directiveEnd++,l&&(b.providerIndexes+=1048576),n.push(zn),m.push(zn)}else Km(f,e,Et>-1?Et:Jt,dT(n[l?Jt:Et],$,!l&&r));!l&&r&&Cn&&n[Jt].componentProviders++}}}function Km(e,t,n,r){const l=vc(t),f=function QC(e){return!!e.useClass}(t);if(l||f){const O=(f?dr(t.useClass):t).prototype.ngOnDestroy;if(O){const $=e.destroyHooks||(e.destroyHooks=[]);if(!l&&t.multi){const Te=$.indexOf(n);-1===Te?$.push(n,[r,O]):$[Te+1].push(r,O)}else $.push(n,O)}}}function dT(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Ym(e,t,n,r){for(let l=n;l<r;l++)if(t[l]===e)return l;return-1}function uM(e,t,n,r){return zm(this.multi,[])}function cM(e,t,n,r){const l=this.multi;let f;if(this.providerFactory){const m=this.providerFactory.componentProviders,b=Fl(n,n[tr],this.providerFactory.index,r);f=b.slice(0,m),zm(l,f);for(let O=m;O<b.length;O++)f.push(b[O])}else f=[],zm(l,f);return f}function zm(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function eo(e,t=[]){return n=>{n.providersResolver=(r,l)=>function lM(e,t,n){const r=Lt();if(r.firstCreatePass){const l=Ea(e);qm(n,r.data,r.blueprint,l,!0),qm(t,r.data,r.blueprint,l,!1)}}(r,l?l(e):e,t)}}class bc{}class dM{}class Wm extends bc{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new b0(this);const l=function Ro(e,t){const n=e[iu]||null;if(!n&&!0===t)throw new Error(`Type ${hi(e)} does not have '\u0275mod' property.`);return n}(t);this._bootstrapComponents=function Bl(e){return e instanceof Function?e():e}(l.bootstrap),this._r3Injector=FE(t,n,[{provide:bc,useValue:this},{provide:ng,useValue:this.componentFactoryResolver},...r],hi(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class $m extends dM{constructor(t){super(),this.moduleType=t}create(t){return new Wm(this.moduleType,t,[])}}function go(e,t,n,r){return function _T(e,t,n,r,l,f){const m=t+n;return ca(e,m,l)?function fl(e,t,n){return e[t]=n}(e,m+1,f?r.call(f,l):r(l)):function zd(e,t){const n=e[t];return n===Zr?void 0:n}(e,m+1)}(Ye(),function rn(){const e=ie.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}(),e,t,n,r)}function GM(){return this._results[Symbol.iterator]()}class Qm{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Vi)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Qm.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=GM)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const r=this;r.dirty=!1;const l=function yt(e){return e.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function pt(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let l=e[r],f=t[r];if(n&&(l=n(l),f=n(f)),f!==l)return!1}return!0}(r._results,l,n))&&(r._results=l,r.length=l.length,r.last=l[this.length-1],r.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function jM(e,t,n,r=!0){const l=t[tr];if(function gC(e,t,n,r){const l=li+r,f=n.length;r>0&&(n[l-1][ia]=t),r<f-li?(t[ia]=n[l],qt(n,li+r,t)):(n.push(t),t[ia]=null),t[xi]=n;const m=t[Il];null!==m&&n!==m&&function pC(e,t){const n=e[Os];t[qi]!==t[xi][xi][qi]&&(e[gs]=!0),null===n?e[Os]=[t]:n.push(t)}(m,t);const b=t[va];null!==b&&b.insertView(e),t[xr]|=128}(l,t,e,n),r){const f=Pp(n,e),m=t[Rr],b=Vh(m,e[ya]);null!==b&&function fC(e,t,n,r,l,f){r[Zi]=l,r[co]=t,Cd(e,r,n,1,l,f)}(l,e[co],m,t,b,f)}}let Gl=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=YM}return e})();const qM=Gl,KM=class extends qM{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){const l=function ZM(e,t,n,r){const l=t.tView,b=ag(e,l,n,4096&e[xr]?4096:16,null,t,null,null,null,r?.injector??null,r?.hydrationInfo??null);b[Il]=e[t.index];const $=e[va];return null!==$&&(b[va]=$.createEmbeddedView(l)),Dm(l,b,n),b}(this._declarationLView,this._declarationTContainer,t,{injector:n,hydrationInfo:r});return new Od(l)}};function YM(){return Cg(Kt(),Ye())}function Cg(e,t){return 4&e.type?new KM(t,e,Sf(e,t)):null}let pl=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=JM}return e})();function JM(){return NT(Kt(),Ye())}const eN=pl,RT=class extends eN{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Sf(this._hostTNode,this._hostLView)}get injector(){return new Mo(this._hostTNode,this._hostLView)}get parentInjector(){const t=sf(this._hostTNode,this._hostLView);if(fd(t)){const n=fc(t,this._hostLView),r=_u(t);return new Mo(n[tr].data[r+8],n)}return new Mo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=MT(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-li}createEmbeddedView(t,n,r){let l,f;"number"==typeof r?l=r:null!=r&&(l=r.index,f=r.injector);const b=t.createEmbeddedViewImpl(n||{},f,null);return this.insertImpl(b,l,false),b}createComponent(t,n,r,l,f){const m=t&&!function Xe(e){return"function"==typeof e}(t);let b;if(m)b=n;else{const ln=n||{};b=ln.index,r=ln.injector,l=ln.projectableNodes,f=ln.environmentInjector||ln.ngModuleRef}const O=m?t:new Pd(Wr(t)),$=r||this.parentInjector;if(!f&&null==O.ngModule){const Cn=(m?$:this.parentInjector).get(ul,null);Cn&&(f=Cn)}Wr(O.componentType??{});const Et=O.create($,l,null,f);return this.insertImpl(Et.hostView,b,false),Et}insert(t,n){return this.insertImpl(t,n,!1)}insertImpl(t,n,r){const l=t._lView;if(function oe(e){return Fo(e[xi])}(l)){const O=this.indexOf(t);if(-1!==O)this.detach(O);else{const $=l[xi],Te=new RT($,$[co],$[xi]);Te.detach(Te.indexOf(t))}}const m=this._adjustIndex(n),b=this._lContainer;return jM(b,l,m,!r),t.attachToViewContainerRef(),qt(Jm(b),m,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=MT(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Bh(this._lContainer,n);r&&(Dt(Jm(this._lContainer),n),Np(r[tr],r))}detach(t){const n=this._adjustIndex(t,-1),r=Bh(this._lContainer,n);return r&&null!=Dt(Jm(this._lContainer),n)?new Od(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function MT(e){return e[8]}function Jm(e){return e[8]||(e[8]=[])}function NT(e,t){let n;const r=t[e.index];return Fo(r)?n=r:(n=f0(r,t,null,e),t[e.index]=n,sg(t,n)),xT(n,t,e,r),new RT(n,e,t)}let xT=function LT(e,t,n,r){if(e[ya])return;let l;l=8&n.type?ae(r):function tN(e,t){const n=e[Rr],r=n.createComment(""),l=Fe(t,e);return mc(n,Vh(n,l),r,function EC(e,t){return e.nextSibling(t)}(n,l),!1),r}(t,n),e[ya]=l};class ev{constructor(t){this.queryList=t,this.matches=null}clone(){return new ev(this.queryList)}setDirty(){this.queryList.setDirty()}}class tv{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,l=[];for(let f=0;f<r;f++){const m=n.getByIndex(f);l.push(this.queries[m.indexInDeclarationView].clone())}return new tv(l)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==UT(t,n).matches&&this.queries[n].setDirty()}}class OT{constructor(t,n,r=null){this.predicate=t,this.flags=n,this.read=r}}class nv{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const l=null!==n?n.length:0,f=this.getByIndex(r).embeddedTView(t,l);f&&(f.indexInDeclarationView=r,null!==n?n.push(f):n=[f])}return null!==n?new nv(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class rv{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new rv(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let l=0;l<r.length;l++){const f=r[l];this.matchTNodeWithReadOption(t,n,iN(n,f)),this.matchTNodeWithReadOption(t,n,dc(n,t,f,!1,!1))}else r===Gl?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,dc(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const l=this.metadata.read;if(null!==l)if(l===Hs||l===pl||l===Gl&&4&n.type)this.addMatch(n.index,-2);else{const f=dc(n,t,l,!1,!1);null!==f&&this.addMatch(n.index,f)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function iN(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function aN(e,t,n,r){return-1===n?function oN(e,t){return 11&e.type?Sf(e,t):4&e.type?Cg(e,t):null}(t,e):-2===n?function sN(e,t,n){return n===Hs?Sf(t,e):n===Gl?Cg(t,e):n===pl?NT(t,e):void 0}(e,t,r):Fl(e,e[tr],n,t)}function PT(e,t,n,r){const l=t[va].queries[r];if(null===l.matches){const f=e.data,m=n.matches,b=[];for(let O=0;O<m.length;O+=2){const $=m[O];b.push($<0?null:aN(t,f[$],m[O+1],n.metadata.read))}l.matches=b}return l.matches}function iv(e,t,n,r){const l=e.queries.getByIndex(n),f=l.matches;if(null!==f){const m=PT(e,t,l,n);for(let b=0;b<f.length;b+=2){const O=f[b];if(O>0)r.push(m[b/2]);else{const $=f[b+1],Te=t[-O];for(let Be=li;Be<Te.length;Be++){const lt=Te[Be];lt[Il]===lt[xi]&&iv(lt[tr],lt,$,r)}if(null!==Te[Os]){const Be=Te[Os];for(let lt=0;lt<Be.length;lt++){const Et=Be[lt];iv(Et[tr],Et,$,r)}}}}}return r}function Ac(e){const t=Ye(),n=Lt(),r=Ct();ct(r+1);const l=UT(n,r);if(e.dirty&&function Ve(e){return 4==(4&e[xr])}(t)===(2==(2&l.metadata.flags))){if(null===l.matches)e.reset([]);else{const f=l.crossesNgTemplate?iv(n,t,r,[]):PT(n,t,l,r);e.reset(f,EI),e.notifyOnChanges()}return!0}return!1}function Cc(e,t,n){const r=Lt();r.firstCreatePass&&(function kT(e,t,n){null===e.queries&&(e.queries=new nv),e.queries.track(new rv(t,n))}(r,new OT(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),function FT(e,t,n){const r=new Qm(4==(4&n));(function QI(e,t,n,r){const l=h0(t);l.push(n),e.firstCreatePass&&g0(e).push(r,l.length-1)})(e,t,r,r.destroy),null===t[va]&&(t[va]=new tv),t[va].queries.push(new ev(r))}(r,Ye(),t)}function Ic(){return function uN(e,t){return e[va].queries[t].queryList}(Ye(),Ct())}function UT(e,t){return e.queries.getByIndex(t)}const xN=new ur("Application Initializer");let uv=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=Er(xN,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const l of this.appInits){const f=l();if(mg(f))n.push(f);else if(K0(f)){const m=new Promise((b,O)=>{f.subscribe({complete:b,error:O})});n.push(m)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(l=>{this.reject(l)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Zl=new ur("LocaleId",{providedIn:"root",factory:()=>Er(Zl,zr.Optional|zr.SkipSelf)||function ON(){return typeof $localize<"u"&&$localize.locale||kf}()});let cv=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new El(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const oS=new ur(""),Rg=new ur("");let pv,hv=(()=>{class e{constructor(n,r,l){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,pv||(function o1(e){pv=e}(l),l.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ho.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,l){let f=-1;r&&r>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==f),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:f,updateCb:l})}whenStable(n,r,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,l){return[]}static#e=this.\u0275fac=function(r){return new(r||e)(Br(ho),Br(gv),Br(Rg))};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac})}return e})(),gv=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return pv?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),Cu=null;const aS=new ur("AllowMultipleToken"),mv=new ur("PlatformDestroyListeners"),sS=new ur("appBootstrapListener");function cS(e,t,n=[]){const r=`Platform: ${t}`,l=new ur(r);return(f=[])=>{let m=vv();if(!m||m.injector.get(aS,!1)){const b=[...n,...f,{provide:l,useValue:!0}];e?e(b):function l1(e){if(Cu&&!Cu.get(aS,!1))throw new Yn(400,!1);(function lS(){!function ef(e){sc=e}(()=>{throw new Yn(600,!1)})})(),Cu=e;const t=e.get(dS);(function uS(e){e.get(AE,null)?.forEach(n=>n())})(e)}(function fS(e=[],t){return Gs.create({name:t,providers:[{provide:zp,useValue:"platform"},{provide:mv,useValue:new Set([()=>Cu=null])},...e]})}(b,r))}return function c1(e){const t=vv();if(!t)throw new Yn(401,!1);return t}()}}function vv(){return Cu?.get(dS)??null}let dS=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const l=function f1(e="zone.js",t){return"noop"===e?new OI:"zone.js"===e?new ho(t):e}(r?.ngZone,function hS(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return l.run(()=>{const f=function gM(e,t,n){return new Wm(e,t,n)}(n.moduleType,this.injector,function yS(e){return[{provide:ho,useFactory:e},{provide:Kh,multi:!0,useFactory:()=>{const t=Er(h1,{optional:!0});return()=>t.initialize()}},{provide:vS,useFactory:d1},{provide:HE,useFactory:GE}]}(()=>l)),m=f.injector.get(Ul,null);return l.runOutsideAngular(()=>{const b=l.onError.subscribe({next:O=>{m.handleError(O)}});f.onDestroy(()=>{Mg(this._modules,f),b.unsubscribe()})}),function gS(e,t,n){try{const r=n();return mg(r)?r.catch(l=>{throw t.runOutsideAngular(()=>e.handleError(l)),l}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(m,l,()=>{const b=f.injector.get(uv);return b.runInitializers(),b.donePromise.then(()=>(function G_(e){no(e,"Expected localeId to be defined"),"string"==typeof e&&(H_=e.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Zl,kf)||kf),this._moduleDoBootstrap(f),f))})})}bootstrapModule(n,r=[]){const l=pS({},r);return function a1(e,t,n){const r=new $m(n);return Promise.resolve(r)}(0,0,n).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(n){const r=n.injector.get(Qd);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(l=>r.bootstrap(l));else{if(!n.instance.ngDoBootstrap)throw new Yn(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Yn(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(mv,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||e)(Br(Gs))};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function pS(e,t){return Array.isArray(t)?t.reduce(pS,e):{...e,...t}}let Qd=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Er(vS),this.zoneIsStable=Er(HE),this.componentTypes=[],this.components=[],this.isStable=Er(cv).hasPendingTasks.pipe(Ar(n=>n?Ka(!1):this.zoneIsStable),function Oi(e,t=De){return e=e??Kr,zt((n,r)=>{let l,f=!0;n.subscribe(mt(r,m=>{const b=t(m);(f||!e(l,b))&&(f=!1,l=b,r.next(m))}))})}(),yn()),this._injector=Er(ul)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const l=n instanceof RE;if(!this._injector.get(uv).done)throw!l&&function Nn(e){const t=Wr(e)||io(e)||wo(e);return null!==t&&t.standalone}(n),new Yn(405,!1);let m;m=l?n:this._injector.get(ng).resolveComponentFactory(n),this.componentTypes.push(m.componentType);const b=function s1(e){return e.isBoundToModule}(m)?void 0:this._injector.get(bc),$=m.create(Gs.NULL,[],r||m.selector,b),Te=$.location.nativeElement,Be=$.injector.get(oS,null);return Be?.registerApplication(Te),$.onDestroy(()=>{this.detachView($.hostView),Mg(this.components,$),Be?.unregisterApplication(Te)}),this._loadComponent($),$}tick(){if(this._runningTick)throw new Yn(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Mg(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(sS,[]);r.push(...this._bootstrapListeners),r.forEach(l=>l(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Mg(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Yn(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Mg(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const vS=new ur("",{providedIn:"root",factory:()=>Er(Ul).handleError.bind(void 0)});function d1(){const e=Er(ho),t=Er(Ul);return n=>e.runOutsideAngular(()=>t.handleError(n))}let h1=(()=>{class e{constructor(){this.zone=Er(ho),this.applicationRef=Er(Qd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();let _S=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=p1}return e})();function p1(e){return function m1(e,t,n){if(Fa(e)&&!n){const r=me(e.index,t);return new Od(r,r)}return 47&e.type?new Od(t[qi],t):null}(Kt(),Ye(),16==(16&e))}class bS{constructor(){}supports(t){return fg(t)}create(t){return new S1(t)}}const T1=(e,t)=>t;class S1{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||T1}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,l=0,f=null;for(;n||r;){const m=!r||n&&n.currentIndex<CS(r,l,f)?n:r,b=CS(m,l,f),O=m.currentIndex;if(m===r)l--,r=r._nextRemoved;else if(n=n._next,null==m.previousIndex)l++;else{f||(f=[]);const $=b-l,Te=O-l;if($!=Te){for(let lt=0;lt<$;lt++){const Et=lt<f.length?f[lt]:f[lt]=0,Jt=Et+lt;Te<=Jt&&Jt<$&&(f[lt]=Et+1)}f[m.previousIndex]=Te-$}}b!==O&&t(m,b,O)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!fg(t))throw new Yn(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let l,f,m,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let b=0;b<this.length;b++)f=t[b],m=this._trackByFn(b,f),null!==n&&Object.is(n.trackById,m)?(r&&(n=this._verifyReinsertion(n,f,m,b)),Object.is(n.item,f)||this._addIdentityChange(n,f)):(n=this._mismatch(n,f,m,b),r=!0),n=n._next}else l=0,function qD(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,b=>{m=this._trackByFn(l,b),null!==n&&Object.is(n.trackById,m)?(r&&(n=this._verifyReinsertion(n,b,m,l)),Object.is(n.item,b)||this._addIdentityChange(n,b)):(n=this._mismatch(n,b,m,l),r=!0),n=n._next,l++}),this.length=l;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,l){let f;return null===t?f=this._itTail:(f=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,f,l)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,l))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,f,l)):t=this._addAfter(new b1(n,r),f,l),t}_verifyReinsertion(t,n,r,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==f?t=this._reinsertAfter(f,t._prev,l):t.currentIndex!=l&&(t.currentIndex=l,this._addToMoves(t,l)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const l=t._prevRemoved,f=t._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const l=null===n?this._itHead:n._next;return t._next=l,t._prev=n,null===l?this._itTail=t:l._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new AS),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new AS),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class b1{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class A1{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class AS{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new A1,this.map.set(n,r)),r.add(t)}get(t,n){const l=this.map.get(t);return l?l.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function CS(e,t,n){const r=e.previousIndex;if(null===r)return r;let l=0;return n&&r<n.length&&(l=n[r]),r+t+l}class IS{constructor(){}supports(t){return t instanceof Map||wm(t)}create(){return new C1}}class C1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||wm(t)))throw new Yn(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,l)=>{if(n&&n.key===l)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const f=this._getOrCreateRecordForKey(l,r);n=this._insertBeforeOrAppend(n,f)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const r=t._prev;return n._next=t,n._prev=r,t._prev=n,r&&(r._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const l=this._records.get(t);this._maybeAddToChanges(l,n);const f=l._prev,m=l._next;return f&&(f._next=m),m&&(m._prev=f),l._next=null,l._prev=null,l}const r=new I1(t);return this._records.set(t,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(r=>n(t[r],r))}}class I1{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function DS(){return new Lg([new bS])}let Lg=(()=>{class e{static#e=this.\u0275prov=ii({token:e,providedIn:"root",factory:DS});constructor(n){this.factories=n}static create(n,r){if(null!=r){const l=r.factories.slice();n=n.concat(l)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||DS()),deps:[[e,new vi,new Xo]]}}find(n){const r=this.factories.find(l=>l.supports(n));if(null!=r)return r;throw new Yn(901,!1)}}return e})();function wS(){return new Jd([new IS])}let Jd=(()=>{class e{static#e=this.\u0275prov=ii({token:e,providedIn:"root",factory:wS});constructor(n){this.factories=n}static create(n,r){if(r){const l=r.factories.slice();n=n.concat(l)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||wS()),deps:[[e,new vi,new Xo]]}}find(n){const r=this.factories.find(l=>l.supports(n));if(r)return r;throw new Yn(901,!1)}}return e})();const R1=cS(null,"core",[]);let M1=(()=>{class e{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||e)(Br(Qd))};static#t=this.\u0275mod=Qi({type:e});static#n=this.\u0275inj=Ko({})}return e})();let Av=null;function eh(){return Av}class Z1{}const Iu=new ur("DocumentToken");function qS(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[l,f]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(l.trim()===t)return decodeURIComponent(f)}return null}const Ov=/\s+/,KS=[];let qg=(()=>{class e{constructor(n,r,l,f){this._iterableDiffers=n,this._keyValueDiffers=r,this._ngEl=l,this._renderer=f,this.initialClasses=KS,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(Ov):KS}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(Ov):n}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const r of n)this._updateState(r,!0);else if(null!=n)for(const r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){const l=this.stateMap.get(n);void 0!==l?(l.enabled!==r&&(l.changed=!0,l.enabled=r),l.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const r=n[0],l=n[1];l.changed?(this._toggleClass(r,l.enabled),l.changed=!1):l.touched||(l.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),l.touched=!1}}_toggleClass(n,r){(n=n.trim()).length>0&&n.split(Ov).forEach(l=>{r?this._renderer.addClass(this._ngEl.nativeElement,l):this._renderer.removeClass(this._ngEl.nativeElement,l)})}static#e=this.\u0275fac=function(r){return new(r||e)(Kn(Lg),Kn(Jd),Kn(Hs),Kn(Ec))};static#t=this.\u0275dir=Mr({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return e})();class Mx{constructor(t,n,r,l){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=l}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zS=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,l){this._viewContainer=n,this._template=r,this._differs=l,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((l,f,m)=>{if(null==l.previousIndex)r.createEmbeddedView(this._template,new Mx(l.item,this._ngForOf,-1,-1),null===m?void 0:m);else if(null==m)r.remove(null===f?void 0:f);else if(null!==f){const b=r.get(f);r.move(b,m),WS(b,l)}});for(let l=0,f=r.length;l<f;l++){const b=r.get(l).context;b.index=l,b.count=f,b.ngForOf=this._ngForOf}n.forEachIdentityChange(l=>{WS(r.get(l.currentIndex),l)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||e)(Kn(pl),Kn(Gl),Kn(Lg))};static#t=this.\u0275dir=Mr({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return e})();function WS(e,t){e.context.$implicit=t.item}let rL=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Qi({type:e});static#n=this.\u0275inj=Ko({})}return e})();function eb(e){return"server"===e}class tb{}class ML extends Z1{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Hv extends ML{static makeCurrent(){!function G1(e){Av||(Av=e)}(new Hv)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function NL(){return ih=ih||document.querySelector("base"),ih?ih.getAttribute("href"):null}();return null==n?null:function xL(e){zg=zg||document.createElement("a"),zg.setAttribute("href",e);const t=zg.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){ih=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return qS(document.cookie,t)}}let zg,ih=null,OL=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac})}return e})();const Gv=new ur("EventManagerPlugins");let ab=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(l=>{l.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,l){return this._findPluginFor(r).addEventListener(n,r,l)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(f=>f.supports(n)),!r)throw new Yn(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||e)(Br(Gv),Br(ho))};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac})}return e})();class sb{constructor(t){this._doc=t}}const Zv="ng-app-id";let lb=(()=>{class e{constructor(n,r,l,f={}){this.doc=n,this.appId=r,this.nonce=l,this.platformId=f,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=eb(f),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(l=>l.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${Zv}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(l=>{null!=l.textContent&&r.set(l.textContent,l)}),r}return null}changeUsageCount(n,r){const l=this.styleRef;if(l.has(n)){const f=l.get(n);return f.usage+=r,f.usage}return l.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const l=this.styleNodesInDOM,f=l?.get(r);if(f?.parentNode===n)return l.delete(r),f.removeAttribute(Zv),f;{const m=this.doc.createElement("style");return this.nonce&&m.setAttribute("nonce",this.nonce),m.textContent=r,this.platformIsServer&&m.setAttribute(Zv,this.appId),m}}addStyleToHost(n,r){const l=this.getStyleElement(n,r);n.appendChild(l);const f=this.styleRef,m=f.get(r)?.elements;m?m.push(l):f.set(r,{elements:[l],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||e)(Br(Iu),Br($h),Br(CE,8),Br(yc))};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac})}return e})();const jv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qv=/%COMP%/g,UL=new ur("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function cb(e,t){return t.map(n=>n.replace(qv,e))}let fb=(()=>{class e{constructor(n,r,l,f,m,b,O,$=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=l,this.removeStylesOnCompDestroy=f,this.doc=m,this.platformId=b,this.ngZone=O,this.nonce=$,this.rendererByCompId=new Map,this.platformIsServer=eb(b),this.defaultRenderer=new Kv(n,m,O,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Yr.ShadowDom&&(r={...r,encapsulation:Yr.Emulated});const l=this.getOrCreateRenderer(n,r);return l instanceof hb?l.applyToHost(n):l instanceof Yv&&l.applyStyles(),l}getOrCreateRenderer(n,r){const l=this.rendererByCompId;let f=l.get(r.id);if(!f){const m=this.doc,b=this.ngZone,O=this.eventManager,$=this.sharedStylesHost,Te=this.removeStylesOnCompDestroy,Be=this.platformIsServer;switch(r.encapsulation){case Yr.Emulated:f=new hb(O,$,r,this.appId,Te,m,b,Be);break;case Yr.ShadowDom:return new GL(O,$,n,r,m,b,this.nonce,Be);default:f=new Yv(O,$,r,Te,m,b,Be)}l.set(r.id,f)}return f}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||e)(Br(ab),Br(lb),Br($h),Br(UL),Br(Iu),Br(yc),Br(ho),Br(CE))};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac})}return e})();class Kv{constructor(t,n,r,l){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=l,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(jv[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(db(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(db(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new Yn(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,l){if(l){n=l+":"+n;const f=jv[l];f?t.setAttributeNS(f,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const l=jv[r];l?t.removeAttributeNS(l,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,l){l&(Tu.DashCase|Tu.Important)?t.style.setProperty(n,r,l&Tu.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Tu.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=eh().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function db(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class GL extends Kv{constructor(t,n,r,l,f,m,b,O){super(t,f,m,O),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const $=cb(l.id,l.styles);for(const Te of $){const Be=document.createElement("style");b&&Be.setAttribute("nonce",b),Be.textContent=Te,this.shadowRoot.appendChild(Be)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Yv extends Kv{constructor(t,n,r,l,f,m,b,O){super(t,f,m,b),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=l,this.styles=O?cb(O,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class hb extends Yv{constructor(t,n,r,l,f,m,b,O){const $=l+"-"+r.id;super(t,n,r,f,m,b,O,$),this.contentAttr=function BL(e){return"_ngcontent-%COMP%".replace(qv,e)}($),this.hostAttr=function VL(e){return"_nghost-%COMP%".replace(qv,e)}($)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let ZL=(()=>{class e extends sb{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,l){return n.addEventListener(r,l,!1),()=>this.removeEventListener(n,r,l)}removeEventListener(n,r,l){return n.removeEventListener(r,l)}static#e=this.\u0275fac=function(r){return new(r||e)(Br(Iu))};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac})}return e})();const gb=["alt","control","meta","shift"],jL={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qL={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let KL=(()=>{class e extends sb{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,l){const f=e.parseEventName(r),m=e.eventCallback(f.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>eh().onAndCancel(n,f.domEventName,m))}static parseEventName(n){const r=n.toLowerCase().split("."),l=r.shift();if(0===r.length||"keydown"!==l&&"keyup"!==l)return null;const f=e._normalizeKey(r.pop());let m="",b=r.indexOf("code");if(b>-1&&(r.splice(b,1),m="code."),gb.forEach($=>{const Te=r.indexOf($);Te>-1&&(r.splice(Te,1),m+=$+".")}),m+=f,0!=r.length||0===f.length)return null;const O={};return O.domEventName=l,O.fullKey=m,O}static matchEventFullKeyCode(n,r){let l=jL[n.key]||n.key,f="";return r.indexOf("code.")>-1&&(l=n.code,f="code."),!(null==l||!l)&&(l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),gb.forEach(m=>{m!==l&&(0,qL[m])(n)&&(f+=m+".")}),f+=l,f===r)}static eventCallback(n,r,l){return f=>{e.matchEventFullKeyCode(f,n)&&l.runGuarded(()=>r(f))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||e)(Br(Iu))};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac})}return e})();const $L=cS(R1,"browser",[{provide:yc,useValue:"browser"},{provide:AE,useValue:function YL(){Hv.makeCurrent()},multi:!0},{provide:Iu,useFactory:function WL(){return function DC(e){Up=e}(document),document},deps:[]}]),XL=new ur(""),vb=[{provide:Rg,useClass:class LL{addToWindow(t){Ii.getAngularTestability=(r,l=!0)=>{const f=t.findTestabilityInTree(r,l);if(null==f)throw new Yn(5103,!1);return f},Ii.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ii.getAllAngularRootElements=()=>t.getAllRootElements(),Ii.frameworkStabilizers||(Ii.frameworkStabilizers=[]),Ii.frameworkStabilizers.push(r=>{const l=Ii.getAllAngularTestabilities();let f=l.length,m=!1;const b=function(O){m=m||O,f--,0==f&&r(m)};l.forEach(O=>{O.whenStable(b)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?eh().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:oS,useClass:hv,deps:[ho,gv,Rg]},{provide:hv,useClass:hv,deps:[ho,gv,Rg]}],yb=[{provide:zp,useValue:"root"},{provide:Ul,useFactory:function zL(){return new Ul},deps:[]},{provide:Gv,useClass:ZL,multi:!0,deps:[Iu,ho,yc]},{provide:Gv,useClass:KL,multi:!0,deps:[Iu]},fb,lb,ab,{provide:NE,useExisting:fb},{provide:tb,useClass:OL,deps:[]},[]];let QL=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:$h,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||e)(Br(XL,12))};static#t=this.\u0275mod=Qi({type:e});static#n=this.\u0275inj=Ko({providers:[...yb,...vb],imports:[rL,M1]})}return e})();typeof window<"u"&&window;const{isArray:oO}=Array,{getPrototypeOf:aO,prototype:sO,keys:lO}=Object;const{isArray:fO}=Array;function gO(e,t){return e.reduce((n,r,l)=>(n[r]=t[l],n),{})}function pO(...e){const t=function uo(e){return _r(Qr(e))?e.pop():void 0}(e),{args:n,keys:r}=function uO(e){if(1===e.length){const t=e[0];if(oO(t))return{args:t,keys:null};if(function cO(e){return e&&"object"==typeof e&&aO(e)===sO}(t)){const n=lO(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e),l=new St(f=>{const{length:m}=n;if(!m)return void f.complete();const b=new Array(m);let O=m,$=m;for(let Te=0;Te<m;Te++){let Be=!1;jn(n[Te]).subscribe(mt(f,lt=>{Be||(Be=!0,$--),b[Te]=lt},()=>O--,void 0,()=>{(!O||!Be)&&($||f.next(r?gO(r,b):b),f.complete())}))}});return t?l.pipe(function hO(e){return je(t=>function dO(e,t){return fO(t)?e(...t):e(t)}(e,t))}(t)):l}let Sb=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=l=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||e)(Kn(Ec),Kn(Hs))};static#t=this.\u0275dir=Mr({type:e})}return e})(),wc=(()=>{class e extends Sb{static#e=this.\u0275fac=function(){let n;return function(l){return(n||(n=Ho(e)))(l||e)}}();static#t=this.\u0275dir=Mr({type:e,features:[Pi]})}return e})();const ml=new ur("NgValueAccessor"),mO={provide:ml,useExisting:Nr(()=>Wv),multi:!0};let Wv=(()=>{class e extends wc{writeValue(n){this.setProperty("checked",n)}static#e=this.\u0275fac=function(){let n;return function(l){return(n||(n=Ho(e)))(l||e)}}();static#t=this.\u0275dir=Mr({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,l){1&r&&Ir("change",function(m){return l.onChange(m.target.checked)})("blur",function(){return l.onTouched()})},features:[eo([mO]),Pi]})}return e})();const vO={provide:ml,useExisting:Nr(()=>Wg),multi:!0},EO=new ur("CompositionEventMode");let Wg=(()=>{class e extends Sb{constructor(n,r,l){super(n,r),this._compositionMode=l,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function yO(){const e=eh()?eh().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||e)(Kn(Ec),Kn(Hs),Kn(EO,8))};static#t=this.\u0275dir=Mr({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,l){1&r&&Ir("input",function(m){return l._handleInput(m.target.value)})("blur",function(){return l.onTouched()})("compositionstart",function(){return l._compositionStart()})("compositionend",function(m){return l._compositionEnd(m.target.value)})},features:[eo([vO]),Pi]})}return e})();function wu(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}const da=new ur("NgValidators"),Ru=new ur("NgAsyncValidators");function $g(e){return null}function xb(e){return null!=e}function Lb(e){return mg(e)?qa(e):e}function Ob(e){let t={};return e.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function Pb(e,t){return t.map(n=>n(e))}function Fb(e){return e.map(t=>function TO(e){return!e.validate}(t)?t:n=>t.validate(n))}function $v(e){return null!=e?function kb(e){if(!e)return null;const t=e.filter(xb);return 0==t.length?null:function(n){return Ob(Pb(n,t))}}(Fb(e)):null}function Xv(e){return null!=e?function Ub(e){if(!e)return null;const t=e.filter(xb);return 0==t.length?null:function(n){return pO(Pb(n,t).map(Lb)).pipe(je(Ob))}}(Fb(e)):null}function Bb(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Qv(e){return e?Array.isArray(e)?e:[e]:[]}function Xg(e,t){return Array.isArray(e)?e.includes(t):e===t}function Gb(e,t){const n=Qv(t);return Qv(e).forEach(l=>{Xg(n,l)||n.push(l)}),n}function Zb(e,t){return Qv(t).filter(n=>!Xg(e,n))}class jb{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=$v(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Xv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class Ma extends jb{get formDirective(){return null}get path(){return null}}class Mu extends jb{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class qb{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Kb=(()=>{class e extends qb{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||e)(Kn(Mu,2))};static#t=this.\u0275dir=Mr({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,l){2&r&&yg("ng-untouched",l.isUntouched)("ng-touched",l.isTouched)("ng-pristine",l.isPristine)("ng-dirty",l.isDirty)("ng-valid",l.isValid)("ng-invalid",l.isInvalid)("ng-pending",l.isPending)},features:[Pi]})}return e})();const oh="VALID",Jg="INVALID",Hf="PENDING",ah="DISABLED";function ep(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class $b{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===oh}get invalid(){return this.status===Jg}get pending(){return this.status==Hf}get disabled(){return this.status===ah}get enabled(){return this.status!==ah}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Gb(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Gb(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Zb(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Zb(t,this._rawAsyncValidators))}hasValidator(t){return Xg(this._rawValidators,t)}hasAsyncValidator(t){return Xg(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Hf,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=ah,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=oh,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===oh||this.status===Hf)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ah:oh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Hf,this._hasOwnPendingAsyncValidator=!0;const n=Lb(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,l)=>r&&r._find(l),this)}getError(t,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Vi,this.statusChanges=new Vi}_calculateStatus(){return this._allControlsDisabled()?ah:this.errors?Jg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hf)?Hf:this._anyControlsHaveStatus(Jg)?Jg:oh}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ep(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function IO(e){return Array.isArray(e)?$v(e):e||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function DO(e){return Array.isArray(e)?Xv(e):e||null}(this._rawAsyncValidators)}}const Gf=new ur("CallSetDisabledState",{providedIn:"root",factory:()=>tp}),tp="always";function sh(e,t,n=tp){(function iy(e,t){const n=function Vb(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(Bb(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=function Hb(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(Bb(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const l=()=>e.updateValueAndValidity();ip(t._rawValidators,l),ip(t._rawAsyncValidators,l)})(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||"always"===n)&&t.valueAccessor.setDisabledState?.(e.disabled),function MO(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Xb(e,t)})}(e,t),function xO(e,t){const n=(r,l)=>{t.valueAccessor.writeValue(r),l&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function NO(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Xb(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function RO(e,t){if(t.valueAccessor.setDisabledState){const n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function ip(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function Xb(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function eA(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function tA(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const nA=class extends $b{constructor(t=null,n,r){super(function ty(e){return(ep(e)?e.validators:e)||null}(n),function ny(e,t){return(ep(t)?t.asyncValidators:e)||null}(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ep(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=tA(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){eA(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){eA(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){tA(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},VO={provide:Mu,useExisting:Nr(()=>uy)},oA=(()=>Promise.resolve())();let uy=(()=>{class e extends Mu{constructor(n,r,l,f,m,b){super(),this._changeDetectorRef=m,this.callSetDisabledState=b,this.control=new nA,this._registered=!1,this.name="",this.update=new Vi,this._parent=n,this._setValidators(r),this._setAsyncValidators(l),this.valueAccessor=function sy(e,t){if(!t)return null;let n,r,l;return Array.isArray(t),t.forEach(f=>{f.constructor===Wg?n=f:function PO(e){return Object.getPrototypeOf(e.constructor)===wc}(f)?r=f:l=f}),l||r||n||null}(0,f)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function ay(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){sh(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){oA.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,l=0!==r&&function bv(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}(r);oA.then(()=>{l&&!this.control.disabled?this.control.disable():!l&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function np(e,t){return[...t.path,e]}(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||e)(Kn(Ma,9),Kn(da,10),Kn(Ru,10),Kn(ml,10),Kn(_S,8),Kn(Gf,8))};static#t=this.\u0275dir=Mr({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[eo([VO]),Pi,S]})}return e})();const GO={provide:ml,useExisting:Nr(()=>cy),multi:!0};let cy=(()=>{class e extends wc{writeValue(n){this.setProperty("value",n??"")}registerOnChange(n){this.onChange=r=>{n(""==r?null:parseFloat(r))}}static#e=this.\u0275fac=function(){let n;return function(l){return(n||(n=Ho(e)))(l||e)}}();static#t=this.\u0275dir=Mr({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,l){1&r&&Ir("input",function(m){return l.onChange(m.target.value)})("blur",function(){return l.onTouched()})},features:[eo([GO]),Pi]})}return e})(),aA=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Qi({type:e});static#n=this.\u0275inj=Ko({})}return e})();const XO={provide:ml,useExisting:Nr(()=>ap),multi:!0};function hA(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let ap=(()=>{class e extends wc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const l=hA(this._getOptionId(n),n);this.setProperty("value",l)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){const r=function QO(e){return e.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static#e=this.\u0275fac=function(){let n;return function(l){return(n||(n=Ho(e)))(l||e)}}();static#t=this.\u0275dir=Mr({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,l){1&r&&Ir("change",function(m){return l.onChange(m.target.value)})("blur",function(){return l.onTouched()})},inputs:{compareWith:"compareWith"},features:[eo([XO]),Pi]})}return e})(),gA=(()=>{class e{constructor(n,r,l){this._element=n,this._renderer=r,this._select=l,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(hA(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||e)(Kn(Hs),Kn(Ec),Kn(ap,9))};static#t=this.\u0275dir=Mr({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return e})();const JO={provide:ml,useExisting:Nr(()=>gy),multi:!0};function pA(e,t){return null==e?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let gy=(()=>{class e extends wc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let r;if(this.value=n,Array.isArray(n)){const l=n.map(f=>this._getOptionId(f));r=(f,m)=>{f._setSelected(l.indexOf(m.toString())>-1)}}else r=(l,f)=>{l._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{const l=[],f=r.selectedOptions;if(void 0!==f){const m=f;for(let b=0;b<m.length;b++){const $=this._getOptionValue(m[b].value);l.push($)}}else{const m=r.options;for(let b=0;b<m.length;b++){const O=m[b];if(O.selected){const $=this._getOptionValue(O.value);l.push($)}}}this.value=l,n(l)}}_registerOption(n){const r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){const r=function eP(e){return e.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static#e=this.\u0275fac=function(){let n;return function(l){return(n||(n=Ho(e)))(l||e)}}();static#t=this.\u0275dir=Mr({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,l){1&r&&Ir("change",function(m){return l.onChange(m.target)})("blur",function(){return l.onTouched()})},inputs:{compareWith:"compareWith"},features:[eo([JO]),Pi]})}return e})(),mA=(()=>{class e{constructor(n,r,l){this._element=n,this._renderer=r,this._select=l,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(pA(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(pA(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||e)(Kn(Hs),Kn(Ec),Kn(gy,9))};static#t=this.\u0275dir=Mr({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return e})();let Rc=(()=>{class e{constructor(){this._validator=$g}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):$g,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=Mr({type:e,features:[S]})}return e})();const nP={provide:da,useExisting:Nr(()=>py),multi:!0};let py=(()=>{class e extends Rc{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=n=>function yA(e){return"number"==typeof e?e:parseFloat(e)}(n),this.createValidator=n=>function Ab(e){return t=>{if(wu(t.value)||wu(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}(n)}static#e=this.\u0275fac=function(){let n;return function(l){return(n||(n=Ho(e)))(l||e)}}();static#t=this.\u0275dir=Mr({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,l){2&r&&Hl("min",l._enabled?l.min:null)},inputs:{min:"min"},features:[eo([nP]),Pi]})}return e})(),uP=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Qi({type:e});static#n=this.\u0275inj=Ko({imports:[aA]})}return e})(),fP=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Gf,useValue:n.callSetDisabledState??tp}]}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Qi({type:e});static#n=this.\u0275inj=Ko({imports:[uP]})}return e})(),Mc=(()=>{class e{constructor(){this.transitions={},this.debug=!1}log(n){this.debug&&console.log(n)}registerTransitions(n,r,l){this.transitions[n]={namespace:n,timeout_id:null,state:l,definitions:r,locked:!1},this.log(this.transitions)}lock(n,r){this.log("Locking "+n),this.transition(n,r),this.transitions[n].locked=!0}unlock(n){this.log("Unlocking "+n),this.transitions[n].locked=!1}getIsLocked(n){return this.transitions[n].locked}getState(n){return n in this.transitions?this.transitions[n].state:""}setState(n,r){this.transitions[n].state=r}transition(n,r){var l=this.transitions[n];if(l)if(null!=l.locked&&l.locked)this.log(n+" is locked");else for(var f=0;f<l.definitions.length;f++){var m=l.definitions[f];if(m.to==r){if(m.from!=l.state)continue;this.log(m),l.timeout_id&&clearTimeout(l.timeout_id),null!=m.delay?l.timeout_id=setTimeout(function(){l.state=r,m.handle&&m.handle(m)},m.delay):(l.state=r,m.handle&&m.handle(m));break}}else this.log("Transitions for "+n+" not found")}setDebug(n){this.debug=n}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function CA(e,t,n,r,l,f,m){try{var b=e[f](m),O=b.value}catch($){return void n($)}b.done?t(O):Promise.resolve(O).then(r,l)}class IA{constructor(t,n,r,l,f,m,b,O){if(this.percentage=0,this.seekMouseUp=$=>{window.removeEventListener("mouseup",this.seekMouseUp),this.seek_lock&&(this.seek_lock=!1,window.removeEventListener("mousemove",this.updateProgressPosition),null!=this.valueChanged&&("horizontal"==this.type&&this.valueChanged(this.value),"vertical"==this.type&&this.valueChanged(this.max_value-this.value)))},this.updateProgressPosition=$=>{var Te=this.target.getBoundingClientRect();"horizontal"==this.type&&this.setPercentage(($.clientX-Te.left)/Te.width),"vertical"==this.type&&this.setPercentage(($.clientY-Te.top)/Te.height)},l>f)throw"max_value must be larger than min_value";if(m>f||m<l)throw"Default value out of range";this.target=t,this.valueChanged=n,this.percentageChanged=r,this.seek_lock=!1,this.value=m,this.min_value=l,this.max_value=f,this.type=b,this.path=document.createElement("div"),this.path.style.border="1px solid white",this.path.style.cursor="pointer",this.fill=document.createElement("div"),"horizontal"==this.type&&(this.path.style.height="15px",this.path.style.width="100%",this.fill.style.height="100%",this.fill.style.width="0",this.fill.style.backgroundColor="#c54310"),"vertical"==this.type&&(this.path.style.width="4px",this.path.style.height="100%",this.path.style.backgroundColor="white",this.fill.style.width="2px",this.fill.style.height="100%",this.fill.style.backgroundColor="black"),this.path.appendChild(this.fill),this.target.appendChild(this.path),this.target.className=O,this.target.addEventListener("mousedown",$=>{this.seek_lock=!0;var Te=this.target.getBoundingClientRect();window.addEventListener("mousemove",this.updateProgressPosition,!1),window.addEventListener("mouseup",this.seekMouseUp,!1),"horizontal"==this.type&&this.setPercentage(($.clientX-Te.left)/Te.width),"vertical"==this.type&&this.setPercentage(($.clientY-Te.top)/Te.height)},!1),this.setValue(m)}setMaxValue(t){this.max_value=t}getValue(){return this.value}getPercentage(){return this.percentage}setValue(t,n=!1){this.seek_lock||("vertical"==this.type&&(t=this.max_value-t),t>=this.max_value&&(t=this.max_value),t<=this.min_value&&(t=this.min_value),this.value=t,this.percentage=(t-this.min_value)/(this.max_value-this.min_value),this.represent(),this.valueChanged&&n&&this.valueChanged(this.value))}setPercentage(t,n=!1){t<0&&(t=0),t>1&&(t=1),this.value=t*(this.max_value-this.min_value),this.percentage=t,this.represent(),this.percentageChanged&&n&&this.percentageChanged(this.percentage)}represent(){"vertical"==this.type&&(this.fill.style.height=100*this.percentage+"%"),"horizontal"==this.type&&(this.fill.style.width=100*this.percentage+"%")}}var sp=Ci(660),vy=Ci(86);let yy=(()=>{class e{constructor(n){this.stateControllerService=n,this.title="Test Title",this.message="Test Message",n.registerTransitions("notification",[{from:"visible",to:"collapsed"},{from:"collapsed",to:"visible"}],"collapsed")}show(n,r){this.title=n,this.message=r,this.stateControllerService.transition("notification","visible")}static#e=this.\u0275fac=function(r){return new(r||e)(Br(Mc))};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),DA=(()=>{class e{static#e=this.STORAGE_API_CHROME=0;static#t=this.STORAGE_API_BROWSER=1;constructor(){this.storageApi=e.STORAGE_API_BROWSER,this.logger=new vy.Logger("StorageService",!0),null!=chrome.storage&&(console.log("STORAGE_API_CHROME"),this.storageApi=e.STORAGE_API_CHROME)}get(n,r=null){if(e.STORAGE_API_CHROME!=this.storageApi){var l=localStorage.getItem(n);l&&(l=JSON.parse(l)),r?.(l)}else chrome.storage.local.get([n]).then(f=>{r?.(f[n])})}set(n,r,l=null){if(e.STORAGE_API_CHROME==this.storageApi){let f={};return f[n]=r,void chrome.storage.local.set(f).then(()=>{l?.()})}localStorage.setItem(n,JSON.stringify(r)),l?.()}remove(n,r=null){e.STORAGE_API_CHROME!=this.storageApi?(localStorage.removeItem(n),r?.()):chrome.storage.local.remove(n).then(()=>{r?.()})}static#n=this.\u0275fac=function(r){return new(r||e)};static#r=this.\u0275prov=ii({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function wA(e){return zt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}class lp{}class up{}class vl{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const l=n.slice(0,r),f=l.toLowerCase(),m=n.slice(r+1).trim();this.maybeSetNormalizedName(l,f),this.headers.has(f)?this.headers.get(f).push(m):this.headers.set(f,[m])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof vl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new vl;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof vl?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,n);const l=("a"===t.op?this.headers.get(n):void 0)||[];l.push(...r),this.headers.set(n,l);break;case"d":const f=t.value;if(f){let m=this.headers.get(n);if(!m)return;m=m.filter(b=>-1===f.indexOf(b)),0===m.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,m)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(t,n){const r=(Array.isArray(n)?n:[n]).map(f=>f.toString()),l=t.toLowerCase();this.headers.set(l,r),this.maybeSetNormalizedName(t,l)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class pP{encodeKey(t){return RA(t)}encodeValue(t){return RA(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const vP=/%(\d[a-f0-9])/gi,yP={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function RA(e){return encodeURIComponent(e).replace(vP,(t,n)=>yP[n]??t)}function cp(e){return`${e}`}class Nu{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new pP,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function mP(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(l=>{const f=l.indexOf("="),[m,b]=-1==f?[t.decodeKey(l),""]:[t.decodeKey(l.slice(0,f)),t.decodeValue(l.slice(f+1))],O=n.get(m)||[];O.push(b),n.set(m,O)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const r=t.fromObject[n],l=Array.isArray(r)?r.map(cp):[cp(r)];this.map.set(n,l)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(r=>{const l=t[r];Array.isArray(l)?l.forEach(f=>{n.push({param:r,value:f,op:"a"})}):n.push({param:r,value:l,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new Nu({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(cp(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const l=r.indexOf(cp(t.value));-1!==l&&r.splice(l,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class EP{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function MA(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function NA(e){return typeof Blob<"u"&&e instanceof Blob}function xA(e){return typeof FormData<"u"&&e instanceof FormData}class uh{constructor(t,n,r,l){let f;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function _P(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||l?(this.body=void 0!==r?r:null,f=l):f=r,f&&(this.reportProgress=!!f.reportProgress,this.withCredentials=!!f.withCredentials,f.responseType&&(this.responseType=f.responseType),f.headers&&(this.headers=f.headers),f.context&&(this.context=f.context),f.params&&(this.params=f.params)),this.headers||(this.headers=new vl),this.context||(this.context=new EP),this.params){const m=this.params.toString();if(0===m.length)this.urlWithParams=n;else{const b=n.indexOf("?");this.urlWithParams=n+(-1===b?"?":b<n.length-1?"&":"")+m}}else this.params=new Nu,this.urlWithParams=n}serializeBody(){return null===this.body?null:MA(this.body)||NA(this.body)||xA(this.body)||function TP(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Nu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||xA(this.body)?null:NA(this.body)?this.body.type||null:MA(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Nu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const n=t.method||this.method,r=t.url||this.url,l=t.responseType||this.responseType,f=void 0!==t.body?t.body:this.body,m=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,b=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let O=t.headers||this.headers,$=t.params||this.params;const Te=t.context??this.context;return void 0!==t.setHeaders&&(O=Object.keys(t.setHeaders).reduce((Be,lt)=>Be.set(lt,t.setHeaders[lt]),O)),t.setParams&&($=Object.keys(t.setParams).reduce((Be,lt)=>Be.set(lt,t.setParams[lt]),$)),new uh(n,r,f,{params:$,headers:O,context:Te,reportProgress:b,responseType:l,withCredentials:m})}}var Zf=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Zf||{});class Ey{constructor(t,n=200,r="OK"){this.headers=t.headers||new vl,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class _y extends Ey{constructor(t={}){super(t),this.type=Zf.ResponseHeader}clone(t={}){return new _y({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class jf extends Ey{constructor(t={}){super(t),this.type=Zf.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new jf({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class LA extends Ey{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Ty(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let OA=(()=>{class e{constructor(n){this.handler=n}request(n,r,l={}){let f;if(n instanceof uh)f=n;else{let O,$;O=l.headers instanceof vl?l.headers:new vl(l.headers),l.params&&($=l.params instanceof Nu?l.params:new Nu({fromObject:l.params})),f=new uh(n,r,void 0!==l.body?l.body:null,{headers:O,context:l.context,params:$,reportProgress:l.reportProgress,responseType:l.responseType||"json",withCredentials:l.withCredentials})}const m=Ka(f).pipe(function hP(e,t){return _r(t)?tn(e,t,1):tn(e,1)}(O=>this.handler.handle(O)));if(n instanceof uh||"events"===l.observe)return m;const b=m.pipe(function gP(e,t){return zt((n,r)=>{let l=0;n.subscribe(mt(r,f=>e.call(t,f,l++)&&r.next(f)))})}(O=>O instanceof jf));switch(l.observe||"body"){case"body":switch(f.responseType){case"arraybuffer":return b.pipe(je(O=>{if(null!==O.body&&!(O.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return O.body}));case"blob":return b.pipe(je(O=>{if(null!==O.body&&!(O.body instanceof Blob))throw new Error("Response is not a Blob.");return O.body}));case"text":return b.pipe(je(O=>{if(null!==O.body&&"string"!=typeof O.body)throw new Error("Response is not a string.");return O.body}));default:return b.pipe(je(O=>O.body))}case"response":return b;default:throw new Error(`Unreachable: unhandled observe type ${l.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new Nu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,l={}){return this.request("PATCH",n,Ty(l,r))}post(n,r,l={}){return this.request("POST",n,Ty(l,r))}put(n,r,l={}){return this.request("PUT",n,Ty(l,r))}static#e=this.\u0275fac=function(r){return new(r||e)(Br(lp))};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac})}return e})();function kA(e,t){return t(e)}function bP(e,t){return(n,r)=>t.intercept(n,{handle:l=>e(l,r)})}const CP=new ur(""),ch=new ur(""),UA=new ur("");function IP(){let e=null;return(t,n)=>{null===e&&(e=(Er(CP,{optional:!0})??[]).reduceRight(bP,kA));const r=Er(cv),l=r.add();return e(t,n).pipe(wA(()=>r.remove(l)))}}let BA=(()=>{class e extends lp{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=Er(cv)}handle(n){if(null===this.chain){const l=Array.from(new Set([...this.injector.get(ch),...this.injector.get(UA,[])]));this.chain=l.reduceRight((f,m)=>function AP(e,t,n){return(r,l)=>n.runInContext(()=>t(r,f=>e(f,l)))}(f,m,this.injector),kA)}const r=this.pendingTasks.add();return this.chain(n,l=>this.backend.handle(l)).pipe(wA(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||e)(Br(up),Br(ul))};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac})}return e})();const MP=/^\)\]\}',?\n/;let HA=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Yn(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?qa(r.\u0275loadImpl()):Ka(null)).pipe(Ar(()=>new St(f=>{const m=r.build();if(m.open(n.method,n.urlWithParams),n.withCredentials&&(m.withCredentials=!0),n.headers.forEach((ln,Cn)=>m.setRequestHeader(ln,Cn.join(","))),n.headers.has("Accept")||m.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const ln=n.detectContentTypeHeader();null!==ln&&m.setRequestHeader("Content-Type",ln)}if(n.responseType){const ln=n.responseType.toLowerCase();m.responseType="json"!==ln?ln:"text"}const b=n.serializeBody();let O=null;const $=()=>{if(null!==O)return O;const ln=m.statusText||"OK",Cn=new vl(m.getAllResponseHeaders()),zn=function NP(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(m)||n.url;return O=new _y({headers:Cn,status:m.status,statusText:ln,url:zn}),O},Te=()=>{let{headers:ln,status:Cn,statusText:zn,url:_n}=$(),ar=null;204!==Cn&&(ar=typeof m.response>"u"?m.responseText:m.response),0===Cn&&(Cn=ar?200:0);let wr=Cn>=200&&Cn<300;if("json"===n.responseType&&"string"==typeof ar){const ai=ar;ar=ar.replace(MP,"");try{ar=""!==ar?JSON.parse(ar):null}catch(Go){ar=ai,wr&&(wr=!1,ar={error:Go,text:ar})}}wr?(f.next(new jf({body:ar,headers:ln,status:Cn,statusText:zn,url:_n||void 0})),f.complete()):f.error(new LA({error:ar,headers:ln,status:Cn,statusText:zn,url:_n||void 0}))},Be=ln=>{const{url:Cn}=$(),zn=new LA({error:ln,status:m.status||0,statusText:m.statusText||"Unknown Error",url:Cn||void 0});f.error(zn)};let lt=!1;const Et=ln=>{lt||(f.next($()),lt=!0);let Cn={type:Zf.DownloadProgress,loaded:ln.loaded};ln.lengthComputable&&(Cn.total=ln.total),"text"===n.responseType&&m.responseText&&(Cn.partialText=m.responseText),f.next(Cn)},Jt=ln=>{let Cn={type:Zf.UploadProgress,loaded:ln.loaded};ln.lengthComputable&&(Cn.total=ln.total),f.next(Cn)};return m.addEventListener("load",Te),m.addEventListener("error",Be),m.addEventListener("timeout",Be),m.addEventListener("abort",Be),n.reportProgress&&(m.addEventListener("progress",Et),null!==b&&m.upload&&m.upload.addEventListener("progress",Jt)),m.send(b),f.next({type:Zf.Sent}),()=>{m.removeEventListener("error",Be),m.removeEventListener("abort",Be),m.removeEventListener("load",Te),m.removeEventListener("timeout",Be),n.reportProgress&&(m.removeEventListener("progress",Et),null!==b&&m.upload&&m.upload.removeEventListener("progress",Jt)),m.readyState!==m.DONE&&m.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||e)(Br(tb))};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac})}return e})();const Sy=new ur("XSRF_ENABLED"),GA=new ur("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),ZA=new ur("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class jA{}let OP=(()=>{class e{constructor(n,r,l){this.doc=n,this.platform=r,this.cookieName=l,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=qS(n,this.cookieName),this.lastCookieString=n),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||e)(Br(Iu),Br(yc),Br(GA))};static#t=this.\u0275prov=ii({token:e,factory:e.\u0275fac})}return e})();function PP(e,t){const n=e.url.toLowerCase();if(!Er(Sy)||"GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t(e);const r=Er(jA).getToken(),l=Er(ZA);return null!=r&&!e.headers.has(l)&&(e=e.clone({headers:e.headers.set(l,r)})),t(e)}var xu=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(xu||{});function FP(...e){const t=[OA,HA,BA,{provide:lp,useExisting:BA},{provide:up,useExisting:HA},{provide:ch,useValue:PP,multi:!0},{provide:Sy,useValue:!0},{provide:jA,useClass:OP}];for(const n of e)t.push(...n.\u0275providers);return function qp(e){return{\u0275providers:e}}(t)}const qA=new ur("LEGACY_INTERCEPTOR_FN");function kP(){return function Nc(e,t){return{\u0275kind:e,\u0275providers:t}}(xu.LegacyInterceptors,[{provide:qA,useFactory:IP},{provide:ch,useExisting:qA,multi:!0}])}let UP=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Qi({type:e});static#n=this.\u0275inj=Ko({providers:[FP(kP())]})}return e})();function jP(e,t){if(1&e&&(Vn(0,"option",56),cr(1),Wn()),2&e){const n=t.$implicit;Lr("ngValue",n),br(1),gl(n.lang)}}function qP(e,t){if(1&e&&(Vn(0,"option",56),cr(1),Wn()),2&e){const n=t.$implicit;Lr("ngValue",n),br(1),_g("",n.width,"x",n.height,": ",n.bitrateStr,"")}}function KP(e,t){if(1&e&&(Vn(0,"option",56),cr(1),Wn()),2&e){const n=t.$implicit;Lr("ngValue",n),br(1),gl(n)}}function YP(e,t){if(1&e){const n=Vd();Vn(0,"div",6)(1,"div",57)(2,"input",58),Ir("ngModelChange",function(l){const m=_t(n).index;return Yt(fa().streamingUrlHeaders[m].name=l)})("ngModelChange",function(){_t(n);const l=fa();return Yt(l.streamingUrlHeadersChange.emit(l.streamingUrlHeaders))}),Wn()(),Vn(3,"div",57)(4,"input",58),Ir("ngModelChange",function(l){const m=_t(n).index;return Yt(fa().streamingUrlHeaders[m].value=l)})("ngModelChange",function(){_t(n);const l=fa();return Yt(l.streamingUrlHeadersChange.emit(l.streamingUrlHeaders))}),Wn()(),Vn(5,"div",59),Ir("click",function(){const f=_t(n).index;return Yt(fa().removeStreamingUrlHeader(f))}),Vn(6,"span",42),cr(7,"close"),Wn()()()}if(2&e){const n=t.index,r=fa();br(2),Lr("ngModel",r.streamingUrlHeaders[n].name),br(2),Lr("ngModel",r.streamingUrlHeaders[n].value)}}function zP(e,t){if(1&e){const n=Vd();Vn(0,"div",6)(1,"div",57)(2,"input",58),Ir("ngModelChange",function(l){const m=_t(n).index;return Yt(fa().licenseUrlHeaders[m].name=l)})("ngModelChange",function(){_t(n);const l=fa();return Yt(l.licenseUrlHeadersChange.emit(l.licenseUrlHeaders))}),Wn()(),Vn(3,"div",57)(4,"input",58),Ir("ngModelChange",function(l){const m=_t(n).index;return Yt(fa().licenseUrlHeaders[m].value=l)})("ngModelChange",function(){_t(n);const l=fa();return Yt(l.licenseUrlHeadersChange.emit(l.licenseUrlHeaders))}),Wn()(),Vn(5,"div",59),Ir("click",function(){const f=_t(n).index;return Yt(fa().removeLicenseUrlHeader(f))}),Vn(6,"span",42),cr(7,"close"),Wn()()()}if(2&e){const n=t.index,r=fa();br(2),Lr("ngModel",r.licenseUrlHeaders[n].name),br(2),Lr("ngModel",r.licenseUrlHeaders[n].value)}}function WP(e,t){if(1&e){const n=Vd();Vn(0,"div",6)(1,"div",60),Ir("click",function(){const f=_t(n).$implicit;return Yt(fa().playSavedStream(f))}),Vn(2,"span",42),cr(3,"play_arrow"),Wn()(),Vn(4,"div",61),cr(5),Wn(),Vn(6,"div",62),Ir("click",function(){const f=_t(n).index;return Yt(fa().removeSavedStream(f))}),Vn(7,"span",42),cr(8,"close"),Wn()()()}if(2&e){const n=t.$implicit;br(5),Gd(" ",n.name," ")}}function $P(e,t){if(1&e){const n=Vd();Vn(0,"div",6)(1,"div",60),Ir("click",function(){const f=_t(n).$implicit;return Yt(fa().playSavedStream(f))}),Vn(2,"span",42),cr(3,"play_arrow"),Wn()(),Vn(4,"div",61),cr(5),Wn()()}if(2&e){const n=t.$implicit;br(5),Gd(" ",n.name," ")}}const xc=function(e){return{"settings-menu-item-active":e}},Lc=function(e){return{"settings-section-active":e}};let XP=(()=>{class e{constructor(n,r,l,f){this.http=n,this.storageService=r,this.notificationService=l,this.stateControllerService=f,this.streamLoad=new Vi,this.speedChange=new Vi,this.qualityChange=new Vi,this.licenseUrlChange=new Vi,this.subtitleUrlChange=new Vi,this.streamingUrlChange=new Vi,this.audioTrackChange=new Vi,this.licenseUrlHeadersChange=new Vi,this.showNativePlayerControlsChange=new Vi,this.streamingUrlHeadersChange=new Vi,this.alwaysShowFullPlayerControlsChange=new Vi,this.hrefUrl="",this.licenseUrl="",this.m3uPlaylist="",this.subtitleUrl="",this.streamingUrl="",this.selectedSpeed=1,this.currentStreamName="",this.m3uItems=[],this.savedStreams=[],this.licenseUrlHeaders=[],this.streamingUrlHeaders=[],this.showNativePlayerControls=!1,this.settingsSection="source-settings",this.alwaysShowFullPlayerControls=!1,this.logger=new vy.Logger("SettingsComponent"),this.speeds=[.25,.5,.75,1,1.25,1.5,1.75,2];var m=window.location.href.split("#");this.hrefUrl=m[1],-1==this.hrefUrl.indexOf(".m3u8")&&this.hrefUrl.indexOf(".m3u")>-1?(this.m3uPlaylist=this.hrefUrl,this.loadM3UPlaylist(),this.stateControllerService.transition("settings","visible"),this.settingsSection="m3u-source-settings"):(this.streamingUrl=this.hrefUrl,this.streamingUrlChange.emit(this.streamingUrl)),this.storageService.get("saved_streams",b=>{b&&(this.savedStreams=b)}),this.storageService.get("always-show-full-player-controls",b=>{void 0!==b&&(this.alwaysShowFullPlayerControls=b,this.alwaysShowFullPlayerControlsChange.emit(b))}),this.storageService.get("show-native-player-controls",b=>{void 0!==b&&(this.showNativePlayerControls=b,this.showNativePlayerControlsChange.emit(b))})}ngAfterViewInit(){-1==this.hrefUrl.indexOf(".m3u8")&&this.hrefUrl.indexOf(".m3u")>-1||this.loadStream()}toggleSettings(){this.stateControllerService.transition("settings","collapsed")}loadStream(){this.licenseUrlChange?.emit(this.licenseUrl),this.subtitleUrlChange.emit(this.subtitleUrl),this.streamingUrlChange?.emit(this.streamingUrl),this.licenseUrlHeadersChange.emit(this.licenseUrlHeaders),this.streamingUrlHeadersChange.emit(this.streamingUrlHeaders),this.alwaysShowFullPlayerControlsChange.emit(this.alwaysShowFullPlayerControls),this.showNativePlayerControlsChange.emit(this.showNativePlayerControls),this.streamLoad.emit(this.streamingUrl)}showSection(n){this.settingsSection=n}addStreamingUrlHeader(){this.streamingUrlHeaders.push({name:"",value:""}),this.streamingUrlHeadersChange.emit(this.streamingUrlHeaders)}removeStreamingUrlHeader(n){this.streamingUrlHeaders.splice(n,1),this.streamingUrlHeadersChange.emit(this.streamingUrlHeaders)}addLicenseUrlHeader(){this.licenseUrlHeaders.push({name:"",value:""}),this.licenseUrlHeadersChange.emit(this.licenseUrlHeaders)}removeLicenseUrlHeader(n){this.licenseUrlHeaders.splice(n,1),this.licenseUrlHeadersChange.emit(this.licenseUrlHeaders)}saveCurrentStream(){this.currentStreamName?(this.savedStreams.push({name:this.currentStreamName,streamingUrl:this.streamingUrl,licenseUrl:this.licenseUrl,subtitleUrl:this.subtitleUrl,licenseUrlHeaders:this.licenseUrlHeaders,streamingUrlHeaders:this.streamingUrlHeaders}),this.storageService.set("saved_streams",this.savedStreams)):this.notificationService.show("Stream Save Error","You need to provide a stream name.")}removeSavedStream(n){confirm("Are you sure?")&&this.savedStreams.splice(n,1),this.storageService.set("saved_streams",this.savedStreams)}playSavedStream(n){this.licenseUrl=n.licenseUrl,this.currentStreamName=n.name,this.subtitleUrl=n.subtitleUrl,this.streamingUrl=n.streamingUrl,this.streamingUrlHeaders=n.streamingUrlHeaders,this.licenseUrlHeaders=n.licenseUrlHeaders,this.loadStream()}loadM3UPlaylist(){this.stateControllerService.transition("loader","visible"),this.logger.d(this.m3uPlaylist),this.m3uItems=[],this.http.request("GET",this.m3uPlaylist,{responseType:"text"}).subscribe(n=>{for(var r=n.split("\n"),l=0;l<r.length;l++){var f=r[l];if(""!=f&&"#EXTM3U"!=f&&0==f.indexOf("#EXTINF")&&0==r[l+1].indexOf("http")){var m=f.split(",");this.m3uItems.push({name:m[1],streamingUrl:r[l+1],licenseUrl:"",subtitleUrl:"",licenseUrlHeaders:[],streamingUrlHeaders:[]})}}this.logger.d(this.m3uItems),this.stateControllerService.transition("loader","collapsed")})}alwaysShowFullPlayerControlsChanged(){this.alwaysShowFullPlayerControlsChange.emit(this.alwaysShowFullPlayerControls),this.storageService.set("always-show-full-player-controls",this.alwaysShowFullPlayerControls)}showNativePlayerControlsChanged(){this.showNativePlayerControlsChange.emit(this.showNativePlayerControls),this.storageService.set("show-native-player-controls",this.showNativePlayerControls)}static#e=this.\u0275fac=function(r){return new(r||e)(Kn(OA),Kn(DA),Kn(yy),Kn(Mc))};static#t=this.\u0275cmp=zo({type:e,selectors:[["app-settings"]],inputs:{qualities:"qualities",selectedQuality:"selectedQuality",audioTracks:"audioTracks",currentAutoQuality:"currentAutoQuality",selectedAudioTrack:"selectedAudioTrack"},outputs:{streamLoad:"streamLoad",speedChange:"speedChange",qualityChange:"qualityChange",licenseUrlChange:"licenseUrlChange",subtitleUrlChange:"subtitleUrlChange",streamingUrlChange:"streamingUrlChange",audioTrackChange:"audioTrackChange",licenseUrlHeadersChange:"licenseUrlHeadersChange",showNativePlayerControlsChange:"showNativePlayerControlsChange",streamingUrlHeadersChange:"streamingUrlHeadersChange",alwaysShowFullPlayerControlsChange:"alwaysShowFullPlayerControlsChange"},decls:197,vars:63,consts:[["id","settings"],[1,"settings-menu"],[1,"settings-menu-item",3,"ngClass","click"],[2,"float","right","width","20px","cursor","pointer","height","20px","margin-right","10px","margin-left","10px",3,"click"],[1,"material-icons",2,"font-size","14pt"],[1,"settings-section",3,"ngClass"],[1,"form-field-container"],[1,"form-field-container-inline"],["for","streaming-url"],["type","text","id","streaming-url","name","streaming-url",3,"ngModel","ngModelChange"],["for","license-url"],["type","text","id","license-url","name","license-url",3,"ngModel","ngModelChange"],["for","subtitle-url"],["type","text","id","subtitle-url","name","subtitle-url",3,"ngModel","ngModelChange"],[3,"click"],["for","audio-track-selection"],["id","audio-track-selection","name","audio-track-selection",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["for","quality-selection"],[1,"form-field-container-inline",2,"width","200px"],["id","quality-selection","name","quality-selection",3,"ngModel","ngModelChange"],["for","playback-speed-selection"],["id","playback-speed-selection","name","playback-speed-selection",3,"ngModel","ngModelChange"],["for","playback-speed-input"],["type","number","step",".1","min","0","id","playback-speed-input","name","playback-speed-input",3,"ngModel","ngModelChange"],["for","full-player-controls-checkbox"],["type","checkbox","id","full-player-controls-checkbox",3,"ngModel","ngModelChange"],["for","native-player-controls-checkbox"],["type","checkbox","id","native-player-controls-checkbox",3,"ngModel","ngModelChange"],["class","form-field-container",4,"ngFor","ngForOf"],[1,"form-field-container-inline",2,"width","250px","margin-right","10px"],[1,"http-btn",3,"click"],[1,"form-field-container-inline",2,"width","250px"],[1,"form-field-container",2,"height","500px","overflow-y","auto"],["for","current-stream-name-input"],[1,"form-field-container-inline",2,"width","225px"],["name","current-stream-name-input","id","current-stream-name-input",3,"ngModel","ngModelChange"],["for","m3u-source-input"],["name","m3u-source-input","id","m3u-source-input",3,"ngModel","ngModelChange"],["target","_blank","href","https://github.com/Palethorn/nas-extension/blob/master/Privacy%20Policy.pdf"],["target","_blank","href","/release_notes.html"],["target","_blank","href","https://github.com/Palethorn/nas-extension"],[1,"material-icons"],["target","_blank","href","https://music.youtube.com/channel/UC3gBKosgHP9qAeCUJH0xIrQ"],["target","_blank","href","https://music.apple.com/us/artist/shiro-ryuu/1666369706"],["target","_blank","href","https://open.spotify.com/artist/0ZlEd7woVoVeooBpBWaxGh"],["target","_blank","href","https://www.deezer.com/us/artist/197843387"],["target","_blank","href","https://shiroryuu.bandcamp.com/"],["target","_blank","href","https://www.youtube.com/@shiro_ryuu"],["target","_blank","href","https://www.instagram.com/palethorn/"],["target","_blank","href","https://www.threads.net/@palethorn"],["target","_blank","href","https://paypal.me/nativeadaptivestream"],["href","monero:86vY4r573cpBSs2RmLT6H9EGpw8LihAbL75Qxcspg9YW3j4sXB6BUVHLLbypXm6tR5hGg2eqfEJxDF2MgZYzFU618jddxVR"],["width","150","height","150","src","assets/monero_address.png"],["href","bitcoin:bc1qex67zfjfnv57w436p2uhdmxdlyu8dyy5lghrck"],["width","150","height","150","src","assets/bitcoin_address.png"],[3,"ngValue"],[1,"form-field-container-inline",2,"width","260px"],["type","text",1,"http-header-input",3,"ngModel","ngModelChange"],[1,"form-field-container-inline",2,"width","40px","cursor","pointer","padding-top","2px",3,"click"],[1,"form-field-container-inline",2,"width","40px","height","20px","cursor","pointer","vertical-align","top",3,"click"],[1,"form-field-container-inline",2,"width","312px","height","20px"],[1,"form-field-container-inline",2,"width","176px","cursor","pointer","text-align","right",3,"click"]],template:function(r,l){1&r&&(Vn(0,"div",0)(1,"div",1)(2,"div",2),Ir("click",function(){return l.showSection("source-settings")}),cr(3," Source Settings "),Wn(),Vn(4,"div",2),Ir("click",function(){return l.showSection("stream-settings")}),cr(5," Stream Settings "),Wn(),Vn(6,"div",2),Ir("click",function(){return l.showSection("player-settings")}),cr(7," Player Settings "),Wn(),Vn(8,"div",2),Ir("click",function(){return l.showSection("http-settings")}),cr(9," HTTP Settings "),Wn(),Vn(10,"div",2),Ir("click",function(){return l.showSection("m3u-source-settings")}),cr(11," M3U Source "),Wn(),Vn(12,"div",2),Ir("click",function(){return l.showSection("saved-streams")}),cr(13," Saved Streams "),Wn(),Vn(14,"div",2),Ir("click",function(){return l.showSection("about")}),cr(15," Links "),Wn(),Vn(16,"div",3),Ir("click",function(){return l.toggleSettings()}),Vn(17,"span",4),cr(18,"close"),Wn()()(),Vn(19,"div",5)(20,"div",6)(21,"div",7)(22,"label",8),cr(23,"Streaming URL"),Wn()(),Vn(24,"div",7)(25,"input",9),Ir("ngModelChange",function(m){return l.streamingUrl=m}),Wn()()(),Vn(26,"div",6)(27,"div",7)(28,"label",10),cr(29,"License URL"),Wn()(),Vn(30,"div",7)(31,"input",11),Ir("ngModelChange",function(m){return l.licenseUrl=m}),Wn()()(),Vn(32,"div",6)(33,"div",7)(34,"label",12),cr(35,"Subtitle URL"),Wn()(),Vn(36,"div",7)(37,"input",13),Ir("ngModelChange",function(m){return l.subtitleUrl=m})("ngModelChange",function(){return l.subtitleUrlChange.emit(l.subtitleUrl)}),Wn()()(),Vn(38,"div",6)(39,"div",7)(40,"button",14),Ir("click",function(){return l.loadStream()}),cr(41,"Load Stream"),Wn()()()(),Vn(42,"div",5)(43,"div",6)(44,"div",7)(45,"label",15),cr(46,"Select Audio Track"),Wn()(),Vn(47,"div",7)(48,"select",16),Ir("ngModelChange",function(m){return l.selectedAudioTrack=m})("ngModelChange",function(){return l.audioTrackChange.emit(l.selectedAudioTrack)}),bu(49,jP,2,2,"option",17),Wn()()(),Vn(50,"div",6)(51,"div",7)(52,"label",18),cr(53),Wn()(),Vn(54,"div",19)(55,"select",20),Ir("ngModelChange",function(m){return l.selectedQuality=m})("ngModelChange",function(){return l.qualityChange.emit(l.selectedQuality)}),bu(56,qP,2,4,"option",17),Wn()()(),Vn(57,"div",6)(58,"div",7)(59,"label",21),cr(60,"Select Playback Speed"),Wn()(),Vn(61,"div",7)(62,"select",22),Ir("ngModelChange",function(m){return l.selectedSpeed=m})("ngModelChange",function(){return l.speedChange.emit(l.selectedSpeed)}),bu(63,KP,2,2,"option",17),Wn()()(),Vn(64,"div",6)(65,"div",7)(66,"label",23),cr(67,"Custom Playback Speed"),Wn()(),Vn(68,"div",7)(69,"div",7)(70,"input",24),Ir("ngModelChange",function(m){return l.selectedSpeed=m})("ngModelChange",function(){return l.speedChange.emit(l.selectedSpeed)}),Wn()()()()(),Vn(71,"div",5)(72,"div",6)(73,"div",7)(74,"label",25),cr(75,"Always show full player controls"),Wn()(),Vn(76,"div",7)(77,"input",26),Ir("ngModelChange",function(m){return l.alwaysShowFullPlayerControls=m})("ngModelChange",function(){return l.alwaysShowFullPlayerControlsChanged()}),Wn()()(),Vn(78,"div",6)(79,"div",7)(80,"label",27),cr(81,"Show native player controls"),Wn()(),Vn(82,"div",7)(83,"input",28),Ir("ngModelChange",function(m){return l.showNativePlayerControls=m})("ngModelChange",function(){return l.showNativePlayerControlsChanged()}),Wn()()()(),Vn(84,"div",5)(85,"div",6),cr(86,"Streaming Url Headers"),Wn(),bu(87,YP,8,2,"div",29),Vn(88,"div",6),cr(89,"License Url Headers"),Wn(),bu(90,zP,8,2,"div",29),Vn(91,"div",6)(92,"div",30)(93,"button",31),Ir("click",function(){return l.addStreamingUrlHeader()}),cr(94,"Add Streaming URL Header"),Wn()(),Vn(95,"div",30)(96,"button",31),Ir("click",function(){return l.addLicenseUrlHeader()}),cr(97,"Add License Url Header"),Wn()()(),Vn(98,"div")(99,"div",32)(100,"button",31),Ir("click",function(){return l.loadStream()}),cr(101,"Reload stream"),Wn()()()(),Vn(102,"div",5)(103,"div",33),bu(104,WP,9,1,"div",29),Wn(),Vn(105,"div",6)(106,"div",7)(107,"label",34),cr(108,"Current Stream Name"),Wn()(),Vn(109,"div",35)(110,"input",36),Ir("ngModelChange",function(m){return l.currentStreamName=m}),Wn()()(),Vn(111,"div",6)(112,"div",35)(113,"button",14),Ir("click",function(){return l.saveCurrentStream()}),cr(114,"Save Current Stream"),Wn()()()(),Vn(115,"div",5)(116,"div",33),bu(117,$P,6,1,"div",29),Wn(),Vn(118,"div",6)(119,"div",7)(120,"label",37),cr(121,"Current Stream Name"),Wn()(),Vn(122,"div",35)(123,"input",38),Ir("ngModelChange",function(m){return l.m3uPlaylist=m}),Wn()()(),Vn(124,"div",6)(125,"div",35)(126,"button",14),Ir("click",function(){return l.loadM3UPlaylist()}),cr(127,"Load M3U Playlist"),Wn()()()(),Vn(128,"div",5)(129,"div",6)(130,"a",39),cr(131,"Privacy Policy"),Wn()(),Vn(132,"div",6)(133,"a",40),cr(134,"Release Notes"),Wn()(),Vn(135,"div",6)(136,"a",41),cr(137,"Extension Github Page"),Wn()(),Vn(138,"div",6),cr(139," Check Out My Music "),Vn(140,"span",42),cr(141,"music_note"),Wn(),Vn(142,"ul")(143,"li")(144,"a",43),cr(145,"Youtube Music"),Wn()(),Vn(146,"li")(147,"a",44),cr(148,"Apple Music"),Wn()(),Vn(149,"li")(150,"a",45),cr(151,"Spotify"),Wn()(),Vn(152,"li")(153,"a",46),cr(154,"Deezer"),Wn()(),Vn(155,"li")(156,"a",47),cr(157,"Bandcamp"),Wn()(),Vn(158,"li"),cr(159,"iTunes"),Wn(),Vn(160,"li"),cr(161,"Tidal"),Wn()()(),Vn(162,"div",6),cr(163," Follow me on social "),Vn(164,"span",42),cr(165,"group"),Wn(),Vn(166,"ul")(167,"li")(168,"a",48),cr(169,"Personal Youtube"),Wn()(),Vn(170,"li")(171,"a",49),cr(172,"Instagram"),Wn()(),Vn(173,"li")(174,"a",50),cr(175,"Threads"),Wn()()()(),Vn(176,"div",6),cr(177," Donate "),Vn(178,"span",42),cr(179,"favorite"),Wn(),Vn(180,"ul")(181,"li")(182,"a",51),Ia(183,"span"),cr(184,"Donate using PayPal"),Wn()(),Vn(185,"li")(186,"a",52),Ia(187,"span"),cr(188,"Donate using Monero"),Wn(),Vn(189,"div"),Ia(190,"img",53),Wn()(),Vn(191,"li")(192,"a",54),Ia(193,"span"),cr(194,"Donate using BTC"),Wn(),Vn(195,"div"),Ia(196,"img",55),Wn()()()()()()),2&r&&(br(2),Lr("ngClass",go(35,xc,"source-settings"==l.settingsSection)),br(2),Lr("ngClass",go(37,xc,"stream-settings"==l.settingsSection)),br(2),Lr("ngClass",go(39,xc,"player-settings"==l.settingsSection)),br(2),Lr("ngClass",go(41,xc,"http-settings"==l.settingsSection)),br(2),Lr("ngClass",go(43,xc,"m3u-source-settings"==l.settingsSection)),br(2),Lr("ngClass",go(45,xc,"saved-streams"==l.settingsSection)),br(2),Lr("ngClass",go(47,xc,"about"==l.settingsSection)),br(5),Lr("ngClass",go(49,Lc,"source-settings"==l.settingsSection)),br(6),Lr("ngModel",l.streamingUrl),br(6),Lr("ngModel",l.licenseUrl),br(6),Lr("ngModel",l.subtitleUrl),br(5),Lr("ngClass",go(51,Lc,"stream-settings"==l.settingsSection)),br(6),Lr("ngModel",l.selectedAudioTrack),br(1),Lr("ngForOf",l.audioTracks),br(4),_g("Select Quality (Current: ",l.currentAutoQuality.width,"x",l.currentAutoQuality.height,": ",l.currentAutoQuality.bitrateStr,")"),br(2),Lr("ngModel",l.selectedQuality),br(1),Lr("ngForOf",l.qualities),br(6),Lr("ngModel",l.selectedSpeed),br(1),Lr("ngForOf",l.speeds),br(7),Lr("ngModel",l.selectedSpeed),br(1),Lr("ngClass",go(53,Lc,"player-settings"==l.settingsSection)),br(6),Lr("ngModel",l.alwaysShowFullPlayerControls),br(6),Lr("ngModel",l.showNativePlayerControls),br(1),Lr("ngClass",go(55,Lc,"http-settings"==l.settingsSection)),br(3),Lr("ngForOf",l.streamingUrlHeaders),br(3),Lr("ngForOf",l.licenseUrlHeaders),br(12),Lr("ngClass",go(57,Lc,"saved-streams"==l.settingsSection)),br(2),Lr("ngForOf",l.savedStreams),br(6),Lr("ngModel",l.currentStreamName),br(5),Lr("ngClass",go(59,Lc,"m3u-source-settings"==l.settingsSection)),br(2),Lr("ngForOf",l.m3uItems),br(6),Lr("ngModel",l.m3uPlaylist),br(5),Lr("ngClass",go(61,Lc,"about"==l.settingsSection)))},dependencies:[gA,mA,Wg,cy,Wv,ap,Kb,py,uy,qg,zS],styles:["[_nghost-%COMP%]{position:absolute;width:100%;margin-top:10px}.form-field-container-inline[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:25px;height:25px;text-align:center;vertical-align:middle}#settings[_ngcontent-%COMP%]{width:952px;position:relative;margin-left:auto;margin-right:auto;background-color:#242424;padding:10px;border:1px solid #929292}.settings-menu[_ngcontent-%COMP%]{background-color:#3d3d3d;border-bottom:1px solid #929292;width:950px;height:40px;text-align:left;padding-top:10px;margin-left:-10px;margin-top:-10px}.settings-menu-item[_ngcontent-%COMP%]{margin-left:10px;display:inline-block;font-size:12pt;height:20px;cursor:pointer;color:#dbdbdb;width:120px;text-align:center}.settings-menu-item-active[_ngcontent-%COMP%]{border-bottom:1px solid #929292;color:#fff}.settings-section[_ngcontent-%COMP%]{overflow:hidden;height:0;max-height:800px;overflow-y:auto;overflow-x:hidden}.settings-section-active[_ngcontent-%COMP%]{height:initial}.http-btn[_ngcontent-%COMP%], .http-header-input[_ngcontent-%COMP%]{width:250px}input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px}"]})}return e})();const QP=["settings"],JP=["progress"],eF=["volume"],fh=function(e){return{"visibility-collapsed":e}};let tF=(()=>{class e{constructor(n,r,l){this.stateControllerService=n,this.notificationService=r,this.storageService=l,this.seekLock=!1,this.fullscreen=!1,this.icon="play_arrow",this.duration="00:00:00",this.currentTime="00:00:00",this.volumeIcon="volume_up",this.showNativePlayerControls=!1,this.alwaysShowFullPlayerControls=!1,this.selectedAudioTrack={lang:"Default",name:"Default",index:0},this.selectedQuality={index:0,bitrate:0,bitrateStr:"0k",width:0,height:0},this.currentAutoQuality={index:0,bitrate:0,bitrateStr:"0k",width:0,height:0},this.streamingUrlHeaders={},this.licenseUrlHeaders={},this.qualities=[{index:0,bitrate:0,bitrateStr:"0k",width:0,height:0}],this.audioTracks=[this.selectedAudioTrack],this.logger=new vy.Logger("PlayerControlsComponent"),this.keyEvents=f=>{console.log(f),"KeyF"==f.code&&this.toggleFullscreen(),"KeyM"==f.code&&this.toggleMute(),"Space"==f.code&&this.playPause(),"ArrowRight"==f.code&&this.progressBar.setValue(this.progressBar.getValue()+5,!0),"ArrowLeft"==f.code&&this.progressBar.setValue(this.progressBar.getValue()-5,!0),"ArrowUp"==f.code&&this.volumeBar.setValue(this.volumeBar.getValue()+.1,!0),"ArrowDown"==f.code&&this.volumeBar.setValue(this.volumeBar.getValue()-.1,!0),"KeyS"==f.code&&("collapsed"==this.stateControllerService.getState("settings")?this.stateControllerService.transition("settings","visible"):this.stateControllerService.transition("settings","collapsed"))},this.freezeControls=()=>{this.stateControllerService.lock("controls","visible")},this.unfreezeControls=()=>{this.stateControllerService.unlock("controls"),this.stateControllerService.transition("controls","collapsed")},n.setDebug(!1),n.registerTransitions("settings",[{from:"collapsed",to:"visible",object:this,handle:()=>{document.removeEventListener("keydown",this.keyEvents)}},{from:"visible",to:"collapsed",object:this,handle:()=>{document.addEventListener("keydown",this.keyEvents)}}],"collapsed"),n.registerTransitions("controls",[{from:"collapsed",to:"visible",object:this,handle:()=>{document.body.style.cursor="initial"}},{from:"visible",to:"collapsed",object:this,delay:2500,handle:()=>{n.getIsLocked("controls")||(document.body.style.cursor="none")}}],"collapsed"),this.player=new sp.J5}ngOnInit(){}ngAfterViewInit(){this.resizeProgressBar(),this.progressBar=new IA(this.progress.nativeElement,r=>{isNaN(r)||this.player.seek(r)},null,0,this.player.getDuration(),0,"horizontal","controls-item controls-padding"),this.volumeBar=new IA(this.volume.nativeElement,r=>{isNaN(r)||this.setVolume(r)},null,0,.99,.99,"horizontal","controls-item controls-padding"),window.addEventListener("mousemove",r=>{this.displayControls()},!1);var n=document.querySelectorAll(".controls-item");for(let r=0;r<n.length;r++)n[r].addEventListener("click",this.animateControlItem.bind(n[r]));document.addEventListener("keydown",this.keyEvents),this.storageService.get("player-volume",r=>{console.log("get player-volume",r),void 0!==r&&this.volumeBar.setValue(r),this.storageService.get("player-muted",l=>{console.log("get player-muted",l),void 0!==l&&(console.log("get player-muted",l),l&&this.player.mute(),this.setVolumeIcon())})})}animateControlItem(n){n.target.style.background="click_animation .250s"}loadStream(){if(!this.streamingUrl)return this.notificationService.show("Player Error","Please enter streaming URL"),this.stateControllerService.transition("settings","visible"),void this.stateControllerService.transition("loader","collapsed");this.stateControllerService.transition("settings","collapsed"),this.player.destroy(),this.player=new sp.J5,this.guessTech(this.streamingUrl),this.attachPlayerEventHandlers();let n=null,r=null;0!=Object.keys(this.streamingUrlHeaders).length&&(r=this.streamingUrlHeaders),0!=Object.keys(this.licenseUrlHeaders).length&&(n=this.licenseUrlHeaders),this.player.init(this.tech,this.videoElement,this.streamingUrl,!0,!1,r,{"com.widevine.alpha":{serverURL:this.licenseUrl,httpRequestHeaders:n,priority:0}},l=>{this.notificationService.show("Player Error","Please enter license URL"),this.stateControllerService.transition("settings","visible"),this.stateControllerService.transition("loader","collapsed")}),this.subtitleUrl&&this.player.loadSubtitles(this.subtitleUrl)}loadSubtitle(n){this.player.loadSubtitles(n)}displayControls(){this.stateControllerService.transition("controls","visible"),this.stateControllerService.transition("controls","collapsed")}playPause(){this.player.videoElement.paused?(this.icon="pause",this.player.play()):(this.icon="play_arrow",this.player.pause())}subtitleDelay(n){var r=n.target.value;r&&this.player.getSubtitlesUrl()&&""!=this.player.getSubtitlesUrl()&&this.player.loadSubtitles(this.player.getSubtitlesUrl()+"&delay="+r)}selectAudioTrack(n){this.selectedAudioTrack=n,this.player.setAudioTrack(n.index)}selectQuality(n){this.selectedQuality=n,this.player.setQuality(n.index)}selectSpeed(n){n<0?this.notificationService.show("Playback rate","Playback rate cannot be negative"):this.player.setPlaybackRate(n)}toggleFullscreen(){this.fullscreen?(document.exitFullscreen(),this.fullscreen=!1):(this.parent.requestFullscreen(),this.fullscreen=!0)}toggleSettings(){"visible"==this.stateControllerService.getState("settings")?this.stateControllerService.transition("settings","collapsed"):this.stateControllerService.transition("settings","visible")}guessTech(n){if(typeof n>"u")this.logger.e("URL is undefined");else if(n.indexOf(".mpd")>-1?(this.logger.d("Selecting DASH tech..."),this.tech=new sp.tX):n.indexOf(".m3u8")>-1&&(this.logger.d("Selecting HLS tech..."),this.tech=new sp.X6),null==this.tech)throw"Url "+n+" not recognized."}attachPlayerEventHandlers(){this.player.addEventHandler("playing",n=>{this.logger.d("play"),this.stateControllerService.transition("loader","collapsed"),this.icon="pause",this.audioTracks=this.player.getAudioTracks(),this.selectedAudioTrack=this.audioTracks[0],this.qualities=this.player.getQualities(),this.updateCurrentAutoQuality().then(()=>{this.selectedQuality=this.qualities[0]});let r=this.player.getDuration();Number.isFinite(r)&&(this.duration=this.formatTimeFromSeconds(this.player.getDuration()))}),this.player.addEventHandler("seeking",()=>{this.logger.d("seeking"),this.stateControllerService.transition("loader","visible")}),this.player.addEventHandler("waiting",()=>{this.logger.d("waiting"),this.stateControllerService.transition("loader","visible")}),this.player.addEventHandler("error",n=>{this.logger.e(n),this.notificationService.show("Player error",n.message)}),this.player.addEventHandler("hlsError",n=>{this.logger.e(n.details),this.notificationService.show("Player error",n.details)}),this.player.addEventHandler("streamInitialized",()=>{}),this.player.addEventHandler("timeupdate",()=>{this.currentTime=this.formatTimeFromSeconds(this.player.getCurrentTime()),this.progressBar&&this.progressBar.setMaxValue(this.player.getDuration()),this.player.getCurrentTime&&this.progressBar.setValue(this.player.getCurrentTime()),this.updateCurrentAutoQuality()})}updateCurrentAutoQuality(){var n=this;return function dP(e){return function(){var t=this,n=arguments;return new Promise(function(r,l){var f=e.apply(t,n);function m(O){CA(f,r,l,m,b,"next",O)}function b(O){CA(f,r,l,m,b,"throw",O)}m(void 0)})}}(function*(){var r=n.player.getCurrentQuality();for(var l in n.qualities)if(n.qualities[l].index==r.index)return void(n.currentAutoQuality=n.qualities[l])})()}formatTimeFromSeconds(n){var r=Math.floor(n/3600),l=Math.floor(n/60);l=l<60?l:Math.floor(n/60)-60*r;var f=n<60?n:n-(3600*r+60*l);return f=Math.floor(f),r.toString().padStart(2,"0")+":"+l.toString().padStart(2,"0")+":"+f.toString().padStart(2,"0")}resizeProgressBar(){this.progress.nativeElement.style.width=window.innerWidth-445+"px"}onResize(n){this.resizeProgressBar()}changeStreamingUrl(n){this.streamingUrl=n}changeLicenseUrl(n){this.licenseUrl=n}changeStreamingUrlHeaders(n){this.streamingUrlHeaders={};for(let r=0;r<n.length;r++)""!=n[r].name&&""!=n[r].value&&(this.streamingUrlHeaders[n[r].name]=n[r].value)}changeLicenseUrlHeaders(n){this.licenseUrlHeaders={};for(let r=0;r<n.length;r++)""!=n[r].name&&""!=n[r].value&&(this.licenseUrlHeaders[n[r].name]=n[r].value)}toggleMute(){this.player.isMuted()?(this.player.unmute(),this.storageService.set("player-muted",!1,()=>{console.log("set player-muted false")})):(this.player.mute(),this.storageService.set("player-muted",!0,()=>{console.log("set player-muted true")})),this.setVolumeIcon()}setVolume(n){this.player.setVolume(n),this.setVolumeIcon(),this.storageService.set("player-volume",n,()=>{console.log("set player-volume",n)})}setVolumeIcon(){console.log(this.player.getVolume()),this.player.isMuted()?this.volumeIcon="volume_off":0==this.player.getVolume()?this.volumeIcon="volume_mute":this.player.getVolume()>0&&this.player.getVolume()<=.5?this.volumeIcon="volume_down":this.player.getVolume()>.5&&(this.volumeIcon="volume_up")}changeAlwaysShowFullPlayerControls(n){this.alwaysShowFullPlayerControls=n}changeShowNativePlayerControls(n){this.showNativePlayerControls=n,1==n?(this.stateControllerService.lock("controls","collapsed"),this.videoElement.controls=!0):(this.stateControllerService.unlock("controls"),this.videoElement.controls=!1)}ngOnDestroy(){var n=document.querySelectorAll(".controls-item");for(let r=0;r<n.length;r++)n[r].removeEventListener("click",this.animateControlItem)}static#e=this.\u0275fac=function(r){return new(r||e)(Kn(Mc),Kn(yy),Kn(DA))};static#t=this.\u0275cmp=zo({type:e,selectors:[["app-player-controls"]],viewQuery:function(r,l){if(1&r&&(Cc(QP,5),Cc(JP,5),Cc(eF,5)),2&r){let f;Ac(f=Ic())&&(l.settings=f.first),Ac(f=Ic())&&(l.progress=f.first),Ac(f=Ic())&&(l.volume=f.first)}},hostBindings:function(r,l){1&r&&Ir("resize",function(m){return l.onResize(m)},0,pm)},inputs:{parent:"parent",videoElement:"videoElement"},decls:24,vars:24,consts:[["id","player-controls",3,"ngClass","mouseover","mouseleave"],["id","controls-play-pause",1,"controls-item","controls-btn",3,"click"],[1,"material-icons","control-item",2,"width","40px","height","40px"],["id","controls-time",1,"controls-item","controls-padding",3,"ngClass"],["id","controls-progress",1,"controls-item","controls-padding",3,"ngClass"],["progress",""],["id","controls-duration",1,"controls-item","controls-padding",3,"ngClass"],["id","controls-volume-icon",1,"controls-item","controls-btn",3,"click"],["id","controls-volume",1,"controls-item","controls-padding"],["volume",""],["id","controls-settings",1,"controls-item","controls-btn",3,"click"],["id","controls-fullscreen",1,"controls-item","controls-btn",3,"click"],["id","settings-container",3,"qualities","audioTracks","selectedAudioTrack","selectedQuality","currentAutoQuality","ngClass","streamLoad","speedChange","qualityChange","subtitleUrlChange","audioTrackChange","licenseUrlChange","streamingUrlChange","licenseUrlHeadersChange","streamingUrlHeadersChange","showNativePlayerControlsChange","alwaysShowFullPlayerControlsChange"]],template:function(r,l){1&r&&(Vn(0,"div",0),Ir("mouseover",function(){return l.freezeControls()})("mouseleave",function(){return l.unfreezeControls()}),Vn(1,"div",1),Ir("click",function(){return l.playPause()}),Vn(2,"span",2),cr(3),Wn()(),Vn(4,"div",3)(5,"span"),cr(6),Wn()(),Ia(7,"div",4,5),Vn(9,"div",6)(10,"span"),cr(11),Wn()(),Vn(12,"div",7),Ir("click",function(){return l.toggleMute()}),Vn(13,"span",2),cr(14),Wn()(),Ia(15,"div",8,9),Vn(17,"div",10),Ir("click",function(){return l.toggleSettings()}),Vn(18,"span",2),cr(19,"settings"),Wn()(),Vn(20,"div",11),Ir("click",function(){return l.toggleFullscreen()}),Vn(21,"span",2),cr(22,"fullscreen"),Wn()()(),Vn(23,"app-settings",12),Ir("streamLoad",function(){return l.loadStream()})("speedChange",function(m){return l.selectSpeed(m)})("qualityChange",function(m){return l.selectQuality(m)})("subtitleUrlChange",function(m){return l.loadSubtitle(m)})("audioTrackChange",function(m){return l.selectAudioTrack(m)})("licenseUrlChange",function(m){return l.changeLicenseUrl(m)})("streamingUrlChange",function(m){return l.changeStreamingUrl(m)})("licenseUrlHeadersChange",function(m){return l.changeLicenseUrlHeaders(m)})("streamingUrlHeadersChange",function(m){return l.changeStreamingUrlHeaders(m)})("showNativePlayerControlsChange",function(m){return l.changeShowNativePlayerControls(m)})("alwaysShowFullPlayerControlsChange",function(m){return l.changeAlwaysShowFullPlayerControls(m)}),Wn()),2&r&&(Lr("ngClass",go(14,fh,"collapsed"==l.stateControllerService.getState("controls"))),br(3),gl(l.icon),br(1),Lr("ngClass",go(16,fh,l.player.isLive()&&0==l.alwaysShowFullPlayerControls)),br(2),gl(l.currentTime),br(1),Lr("ngClass",go(18,fh,l.player.isLive()&&0==l.alwaysShowFullPlayerControls)),br(2),Lr("ngClass",go(20,fh,l.player.isLive()&&0==l.alwaysShowFullPlayerControls)),br(2),gl(l.duration),br(3),gl(l.volumeIcon),br(9),Lr("qualities",l.qualities)("audioTracks",l.audioTracks)("selectedAudioTrack",l.selectedAudioTrack)("selectedQuality",l.selectedQuality)("currentAutoQuality",l.currentAutoQuality)("ngClass",go(22,fh,"collapsed"==l.stateControllerService.getState("settings"))))},dependencies:[qg,XP],styles:[".material-icons[_ngcontent-%COMP%]{font-size:25pt;margin-top:2px}#player-controls[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;height:40px;margin:0;background:rgba(0,0,0,.5);border-top:1px solid #383838}.controls-btn[_ngcontent-%COMP%]{width:40px;height:40px;cursor:pointer}.controls-btn[_ngcontent-%COMP%]:active{background-color:#c54310}.controls-item[_ngcontent-%COMP%]{user-select:none;-moz-user-select:none;-webkit-user-select:none;height:40px;float:left;margin-right:10px}.controls-padding[_ngcontent-%COMP%]{margin-top:11px}#controls-time[_ngcontent-%COMP%], #controls-duration[_ngcontent-%COMP%]{width:63px}#controls-progress[_ngcontent-%COMP%]{height:20px}#controls-volume[_ngcontent-%COMP%]{height:20px;width:63px}#settings-container[_ngcontent-%COMP%]{position:absolute;width:100%}#settings[_ngcontent-%COMP%]{width:500px;position:relative;margin-left:auto;margin-right:auto;background-color:#242424;padding:10px;border:1px solid #929292}.settings-title[_ngcontent-%COMP%]{background-color:#3d3d3d;border-bottom:1px solid #929292;width:498px;height:40px;text-align:left;padding:10px;margin-left:-10px;margin-top:-10px;margin-bottom:10px}"]})}return e})();const nF=["videoElement"],rF=["videoElementContainer"],iF=["playerControlsParent"];let oF=(()=>{class e{constructor(n){this.stateControllerService=n}ngOnInit(){}ngAfterViewInit(){this.resizeVideoContainer()}resizeVideoContainer(){this.videoElement.nativeElement.style.width=this.videoElementContainer.nativeElement.style.width,this.videoElement.nativeElement.style.height=this.videoElementContainer.nativeElement.style.height}onResize(n){this.resizeVideoContainer()}static#e=this.\u0275fac=function(r){return new(r||e)(Kn(Mc))};static#t=this.\u0275cmp=zo({type:e,selectors:[["app-player"]],viewQuery:function(r,l){if(1&r&&(Cc(nF,5),Cc(rF,5),Cc(iF,5)),2&r){let f;Ac(f=Ic())&&(l.videoElement=f.first),Ac(f=Ic())&&(l.videoElementContainer=f.first),Ac(f=Ic())&&(l.playerControlsParent=f.first)}},hostBindings:function(r,l){1&r&&Ir("resize",function(m){return l.onResize(m)},0,pm)},decls:7,vars:2,consts:[["id","video-element-container"],["videoElementContainer",""],["crossorigin","anonymous","id","video-element",2,"width","100%","height","100%"],["videoElement",""],["playerControlsParent",""],["id","app-player-controls",3,"parent","videoElement"]],template:function(r,l){if(1&r&&(Vn(0,"div",0,1),Ia(2,"video",2,3),Vn(4,"div",null,4),Ia(6,"app-player-controls",5),Wn()()),2&r){const f=Om(1),m=Om(3);br(6),Lr("parent",f)("videoElement",m)}},dependencies:[tF],styles:["#video-element-container[_ngcontent-%COMP%]{position:absolute;background-color:#000;top:0;left:0;margin:0;padding:0;height:100%;width:100%;overflow:hidden}#video-element[_ngcontent-%COMP%]{position:absolute;left:0;right:0;margin-left:auto;margin-right:auto;max-height:100%;height:100%;width:100%}#app-player-controls[_ngcontent-%COMP%]{width:100%;height:40px}[_ngcontent-%COMP%]::cue{bottom:100px}"]})}return e})(),aF=(()=>{class e{constructor(n){n.registerTransitions("loader",[{from:"collapsed",to:"visible",object:this,handle:null},{from:"visible",to:"collapsed",object:this,handle:null}],"collapsed")}static#e=this.\u0275fac=function(r){return new(r||e)(Kn(Mc))};static#t=this.\u0275cmp=zo({type:e,selectors:[["app-loader"]],decls:2,vars:0,consts:[["id","loader-container-inner",2,"background-color","transparent"],["id","loader-object","data",mE`assets/loader.svg`,"type","image/svg+xml",2,"background-color","transparent"]],template:function(r,l){1&r&&(Vn(0,"div",0),Ia(1,"object",1),Wn())},styles:["#loader-container-inner[_ngcontent-%COMP%]{background-color:transparent;width:200px;height:200px;margin-left:auto;margin-right:auto;margin-top:15%}#loader-object[_ngcontent-%COMP%]{position:relative;width:200px;height:200px}"]})}return e})(),sF=(()=>{class e{constructor(n,r){this.notificationService=n,this.stateControllerService=r}close(){this.stateControllerService.transition("notification","collapsed")}static#e=this.\u0275fac=function(r){return new(r||e)(Kn(yy),Kn(Mc))};static#t=this.\u0275cmp=zo({type:e,selectors:[["app-notification"]],decls:5,vars:2,consts:[[3,"click"]],template:function(r,l){1&r&&(Vn(0,"div",0),Ir("click",function(){return l.close()}),Vn(1,"h4"),cr(2),Wn(),Vn(3,"p"),cr(4),Wn()()),2&r&&(br(2),gl(l.notificationService.title),br(2),gl(l.notificationService.message))},styles:["[_nghost-%COMP%]{position:absolute;border:1px solid #c54310;top:20px;left:20px;border-radius:5%;width:300px;padding:10px;background-color:#272727c2}h4[_ngcontent-%COMP%]{height:24px;display:inline-block;color:#adadad;margin:0}"]})}return e})();const KA=function(e){return{"visibility-collapsed":e}};let lF=(()=>{class e{constructor(n){this.stateControllerService=n,this.title="nas-player-embed"}static#e=this.\u0275fac=function(r){return new(r||e)(Kn(Mc))};static#t=this.\u0275cmp=zo({type:e,selectors:[["app-root"]],decls:5,vars:6,consts:[["id","notification-container",3,"ngClass"],["id","loader-container",3,"ngClass"]],template:function(r,l){1&r&&(Ia(0,"app-player"),Vn(1,"div",0),Ia(2,"app-notification"),Wn(),Vn(3,"div",1),Ia(4,"app-loader"),Wn()),2&r&&(br(1),Lr("ngClass",go(2,KA,"collapsed"==l.stateControllerService.getState("notification"))),br(2),Lr("ngClass",go(4,KA,"collapsed"==l.stateControllerService.getState("loader"))))},dependencies:[qg,oF,aF,sF]})}return e})(),uF=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Qi({type:e,bootstrap:[lF]});static#n=this.\u0275inj=Ko({imports:[fP,QL,UP]})}return e})();$L().bootstrapModule(uF).catch(e=>console.error(e))},584:Na=>{self,Na.exports=function(){var Jr={4593:function(Vt,Qe){var ne,Ce,G,E,_,D={};ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ce=function(j){for(var B=0,T=[],M=0|j.length/3;0<M--;){var L=(j[B]<<16)+(j[B+1]<<8)+j[B+2];B+=3,T.push(ne.charAt(63&L>>18)),T.push(ne.charAt(63&L>>12)),T.push(ne.charAt(63&L>>6)),T.push(ne.charAt(63&L))}return j.length-B==2?(T.push(ne.charAt(63&(L=(j[B]<<16)+(j[B+1]<<8))>>18)),T.push(ne.charAt(63&L>>12)),T.push(ne.charAt(63&L>>6)),T.push("=")):j.length-B==1&&(T.push(ne.charAt(63&(L=j[B]<<16)>>18)),T.push(ne.charAt(63&L>>12)),T.push("==")),T.join("")},G=function(){for(var j=[],B=0;B<64;++B)j[ne.charCodeAt(B)]=B;return j["=".charCodeAt(0)]=0,j}(),E=function(j){for(var B=0,T=[],M=0|j.length/4;0<M--;){var L=(G[j.charCodeAt(B)]<<18)+(G[j.charCodeAt(B+1)]<<12)+(G[j.charCodeAt(B+2)]<<6)+G[j.charCodeAt(B+3)];T.push(255&L>>16),T.push(255&L>>8),T.push(255&L),B+=4}return T&&("="==j.charAt(B-2)?(T.pop(),T.pop()):"="==j.charAt(B-1)&&T.pop()),T},_={encode:function(j){for(var B=[],T=0;T<j.length;++T)B.push(j.charCodeAt(T));return B},decode:function(j){for(var B=0;B<s.length;++B)a[B]=String.fromCharCode(a[B]);return a.join("")}},D.decodeArray=function(j){var B=E(j);return new Uint8Array(B)},D.encodeASCII=function(j){var B=_.encode(j);return Ce(B)},D.decodeASCII=function(j){var B=E(j);return _.decode(B)},D.encode=function(j){var B=function(j){for(var B=[],T=0;T<j.length;++T){var M=j.charCodeAt(T);M<128?B.push(M):M<2048?(B.push(192|M>>6),B.push(128|63&M)):M<65536?(B.push(224|M>>12),B.push(128|63&M>>6),B.push(128|63&M)):(B.push(240|M>>18),B.push(128|63&M>>12),B.push(128|63&M>>6),B.push(128|63&M))}return B}(j);return Ce(B)},D.decode=function(j){return function(j){for(var B=[],T=0;T<j.length;){var M=j[T++];M<128||(M<224?(M=(31&M)<<6,M|=63&j[T++]):M<240?(M=(15&M)<<12,M|=(63&j[T++])<<6,M|=63&j[T++]):(M=(7&M)<<18,M|=(63&j[T++])<<12,M|=(63&j[T++])<<6,M|=63&j[T++])),B.push(String.fromCharCode(M))}return B.join("")}(E(j))},Qe.decode=D.decode,Qe.decodeArray=D.decodeArray,Qe.encode=D.encode,Qe.encodeASCII=D.encodeASCII},452:function(Vt,Qe){!function(ne){"use strict";var Ce={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},G=function(Q){var Se=Q;return Ce.hasOwnProperty(Q)&&(Se=Ce[Q]),String.fromCharCode(Se)},E=15,_=32,F={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},V={17:2,18:4,21:6,22:8,23:10,19:13,20:15},D={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},j={25:2,26:4,29:6,30:8,31:10,27:13,28:15},B=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],T={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(Q){this.time=Q},log:function(Q,Se){this.verboseLevel>=this.verboseFilter[Q]&&console.log(this.time+" ["+Q+"] "+Se)}},M=function(Q){for(var Se=[],Le=0;Le<Q.length;Le++)Se.push(Q[Le].toString(16));return Se},L=function(Q,Se,Le,x,Ee){this.foreground=Q||"white",this.underline=Se||!1,this.italics=Le||!1,this.background=x||"black",this.flash=Ee||!1};L.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(Q){for(var Se=["foreground","underline","italics","background","flash"],Le=0;Le<Se.length;Le++){var x=Se[Le];Q.hasOwnProperty(x)&&(this[x]=Q[x])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(Q){return this.foreground===Q.foreground&&this.underline===Q.underline&&this.italics===Q.italics&&this.background===Q.background&&this.flash===Q.flash},copy:function(Q){this.foreground=Q.foreground,this.underline=Q.underline,this.italics=Q.italics,this.background=Q.background,this.flash=Q.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var K=function(Q,Se,Le,x,Ee,ge){this.uchar=Q||" ",this.penState=new L(Se,Le,x,Ee,ge)};K.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(Q,Se){this.uchar=Q,this.penState.copy(Se)},setPenState:function(Q){this.penState.copy(Q)},equals:function(Q){return this.uchar===Q.uchar&&this.penState.equals(Q.penState)},copy:function(Q){this.uchar=Q.uchar,this.penState.copy(Q.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var ce=function(){this.chars=[];for(var Q=0;Q<_;Q++)this.chars.push(new K);this.pos=0,this.currPenState=new L};ce.prototype={equals:function(Q){for(var Se=!0,Le=0;Le<_;Le++)if(!this.chars[Le].equals(Q.chars[Le])){Se=!1;break}return Se},copy:function(Q){for(var Se=0;Se<_;Se++)this.chars[Se].copy(Q.chars[Se])},isEmpty:function(){for(var Q=!0,Se=0;Se<_;Se++)if(!this.chars[Se].isEmpty()){Q=!1;break}return Q},setCursor:function(Q){this.pos!==Q&&(this.pos=Q),this.pos<0?(T.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>_&&(T.log("ERROR","Too large cursor position "+this.pos),this.pos=_)},moveCursor:function(Q){var Se=this.pos+Q;if(Q>1)for(var Le=this.pos+1;Le<Se+1;Le++)this.chars[Le].setPenState(this.currPenState);this.setCursor(Se)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(Q){Q>=144&&this.backSpace();var Se=G(Q);this.pos>=_?T.log("ERROR","Cannot insert "+Q.toString(16)+" ("+Se+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(Se,this.currPenState),this.moveCursor(1))},clearFromPos:function(Q){var Se;for(Se=Q;Se<_;Se++)this.chars[Se].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var Q=[],Se=!0,Le=0;Le<_;Le++){var x=this.chars[Le].uchar;" "!==x&&(Se=!1),Q.push(x)}return Se?"":Q.join("")},setPenStyles:function(Q){this.currPenState.setStyles(Q),this.chars[this.pos].setPenState(this.currPenState)}};var pe=function(){this.rows=[];for(var Q=0;Q<E;Q++)this.rows.push(new ce);this.currRow=14,this.nrRollUpRows=null,this.reset()};pe.prototype={reset:function(){for(var Q=0;Q<E;Q++)this.rows[Q].clear();this.currRow=14},equals:function(Q){for(var Se=!0,Le=0;Le<E;Le++)if(!this.rows[Le].equals(Q.rows[Le])){Se=!1;break}return Se},copy:function(Q){for(var Se=0;Se<E;Se++)this.rows[Se].copy(Q.rows[Se])},isEmpty:function(){for(var Q=!0,Se=0;Se<E;Se++)if(!this.rows[Se].isEmpty()){Q=!1;break}return Q},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(Q){this.rows[this.currRow].insertChar(Q)},setPen:function(Q){this.rows[this.currRow].setPenStyles(Q)},moveCursor:function(Q){this.rows[this.currRow].moveCursor(Q)},setCursor:function(Q){T.log("INFO","setCursor: "+Q),this.rows[this.currRow].setCursor(Q)},setPAC:function(Q){T.log("INFO","pacData = "+JSON.stringify(Q));var Se=Q.row-1;this.nrRollUpRows&&Se<this.nrRollUpRows-1&&(Se=this.nrRollUpRows-1),this.currRow=Se;var Le=this.rows[this.currRow];if(null!==Q.indent){var Ee=Math.max(Q.indent-1,0);Le.setCursor(Q.indent),Q.color=Le.chars[Ee].penState.foreground}this.setPen({foreground:Q.color,underline:Q.underline,italics:Q.italics,background:"black",flash:!1})},setBkgData:function(Q){T.log("INFO","bkgData = "+JSON.stringify(Q)),this.backSpace(),this.setPen(Q),this.insertChar(32)},setRollUpRows:function(Q){this.nrRollUpRows=Q},rollUp:function(){if(null!==this.nrRollUpRows){T.log("TEXT",this.getDisplayText());var Se=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];Se.clear(),this.rows.splice(this.currRow,0,Se),T.log("INFO","Rolling up")}else T.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(Q){Q=Q||!1;for(var Se=[],Le="",Ee=0;Ee<E;Ee++){var ge=this.rows[Ee].getTextString();ge&&Se.push(Q?"Row "+(Ee+1)+': "'+ge+'"':ge.trim())}return Se.length>0&&(Le=Q?"["+Se.join(" | ")+"]":Se.join("\n")),Le},getTextAndFormat:function(){return this.rows}};var ue=function(Q,Se){this.chNr=Q,this.outputFilter=Se,this.mode=null,this.verbose=0,this.displayedMemory=new pe,this.nonDisplayedMemory=new pe,this.lastOutputScreen=new pe,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};ue.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(Q){this.outputFilter=Q},setPAC:function(Q){this.writeScreen.setPAC(Q)},setBkgData:function(Q){this.writeScreen.setBkgData(Q)},setMode:function(Q){Q!==this.mode&&(this.mode=Q,T.log("INFO","MODE="+Q),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=Q)},insertChars:function(Q){for(var Se=0;Se<Q.length;Se++)this.writeScreen.insertChar(Q[Se]);T.log("INFO",(this.writeScreen===this.displayedMemory?"DISP":"NON_DISP")+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(T.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){T.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){T.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){T.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(Q){T.log("INFO","RU("+Q+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(Q)},cc_FON:function(){T.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){T.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){T.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){T.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){T.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){T.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){T.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(T.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var Q=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=Q,this.writeScreen=this.nonDisplayedMemory,T.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(Q){T.log("INFO","TO("+Q+") - Tab Offset"),this.writeScreen.moveCursor(Q)},cc_MIDROW:function(Q){var Se={flash:!1};if(Se.underline=Q%2==1,Se.italics=Q>=46,Se.italics)Se.foreground="white";else{var Le=Math.floor(Q/2)-16;Se.foreground=["white","green","blue","cyan","red","yellow","magenta"][Le]}T.log("INFO","MIDROW: "+JSON.stringify(Se)),this.writeScreen.setPen(Se)},outputDataUpdate:function(){var Q=T.time;null!==Q&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(Q,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,Q,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:Q):this.cueStartTime=Q,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(Q){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,Q,this.displayedMemory),this.cueStartTime=Q))}};var Me=function(Q,Se,Le){this.field=Q||1,this.outputs=[Se,Le],this.channels=[new ue(1,Se),new ue(2,Le)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};Me.prototype={getHandler:function(Q){return this.channels[Q].getHandler()},setHandler:function(Q,Se){this.channels[Q].setHandler(Se)},addData:function(Q,Se){var Le,x,Ee,ge=!1;this.lastTime=Q,T.setTime(Q);for(var et=0;et<Se.length;et+=2)Ee=127&Se[et+1],(x=127&Se[et])>=16&&x<=31&&x===this.lastCmdA&&Ee===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,T.log("DEBUG","Repeated command ("+M([x,Ee])+") is dropped")):0!==x||0!==Ee?(T.log("DATA","["+M([Se[et],Se[et+1]])+"] -> ("+M([x,Ee])+")"),(Le=this.parseCmd(x,Ee))||(Le=this.parseMidrow(x,Ee)),Le||(Le=this.parsePAC(x,Ee)),Le||(Le=this.parseBackgroundAttributes(x,Ee)),Le||(ge=this.parseChars(x,Ee))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(ge):T.log("WARNING","No channel found yet. TEXT-MODE?")),Le?this.dataCounters.cmd+=2:ge?this.dataCounters.char+=2:(this.dataCounters.other+=2,T.log("WARNING","Couldn't parse cleaned data "+M([x,Ee])+" orig: "+M([Se[et],Se[et+1]])))):this.dataCounters.padding+=2},parseCmd:function(Q,Se){var Le;if(!((20===Q||21===Q||28===Q||29===Q)&&32<=Se&&Se<=47||(23===Q||31===Q)&&33<=Se&&Se<=35))return!1;var x=this.channels[(Le=20===Q||21===Q||23===Q?1:2)-1];return 20===Q||21===Q||28===Q||29===Q?32===Se?x.cc_RCL():33===Se?x.cc_BS():34===Se?x.cc_AOF():35===Se?x.cc_AON():36===Se?x.cc_DER():37===Se?x.cc_RU(2):38===Se?x.cc_RU(3):39===Se?x.cc_RU(4):40===Se?x.cc_FON():41===Se?x.cc_RDC():42===Se?x.cc_TR():43===Se?x.cc_RTD():44===Se?x.cc_EDM():45===Se?x.cc_CR():46===Se?x.cc_ENM():47===Se&&x.cc_EOC():x.cc_TO(Se-32),this.lastCmdA=Q,this.lastCmdB=Se,this.currChNr=Le,!0},parseMidrow:function(Q,Se){var Le=null;if((17===Q||25===Q)&&32<=Se&&Se<=47){if((Le=17===Q?1:2)!==this.currChNr)return T.log("ERROR","Mismatch channel in midrow parsing"),!1;var x=this.channels[Le-1];return x.insertChars([32]),x.cc_MIDROW(Se),T.log("DEBUG","MIDROW ("+M([Q,Se])+")"),this.lastCmdA=Q,this.lastCmdB=Se,!0}return!1},parsePAC:function(Q,Se){var Le;if(!((17<=Q&&Q<=23||25<=Q&&Q<=31)&&64<=Se&&Se<=127||(16===Q||24===Q)&&64<=Se&&Se<=95))return!1;Le=Q<=23?1:2;var Ee=this.interpretPAC(64<=Se&&Se<=95?1===Le?F[Q]:D[Q]:1===Le?V[Q]:j[Q],Se);return this.channels[Le-1].setPAC(Ee),this.lastCmdA=Q,this.lastCmdB=Se,this.currChNr=Le,!0},interpretPAC:function(Q,Se){var Le,x={color:null,italics:!1,indent:null,underline:!1,row:Q};return x.underline=1==(1&(Le=Se>95?Se-96:Se-64)),Le<=13?x.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(Le/2)]:Le<=15?(x.italics=!0,x.color="white"):x.indent=4*Math.floor((Le-16)/2),x},parseChars:function(Q,Se){var ge,Le=null,x=null,Ee=null;if(Q>=25?(Le=2,Ee=Q-8):(Le=1,Ee=Q),17<=Ee&&Ee<=19?(T.log("INFO","Special char '"+G(ge=17===Ee?Se+80:18===Ee?Se+112:Se+144)+"' in channel "+Le),x=[ge],this.lastCmdA=Q,this.lastCmdB=Se):32<=Q&&Q<=127&&(x=0===Se?[Q]:[Q,Se],this.lastCmdA=null,this.lastCmdB=null),x){var et=M(x);T.log("DEBUG","Char codes =  "+et.join(","))}return x},parseBackgroundAttributes:function(Q,Se){var Le,x;return((16===Q||24===Q)&&32<=Se&&Se<=47||(23===Q||31===Q)&&45<=Se&&Se<=47)&&(Le={},16===Q||24===Q?(x=Math.floor((Se-32)/2),Le.background=B[x],Se%2==1&&(Le.background=Le.background+"_semi")):45===Se?Le.background="transparent":(Le.foreground="black",47===Se&&(Le.underline=!0)),this.channels[(Q<24?1:2)-1].setBkgData(Le),this.lastCmdA=Q,this.lastCmdB=Se,!0)},reset:function(){for(var Q=0;Q<this.channels.length;Q++)this.channels[Q]&&this.channels[Q].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(Q){for(var Se=0;Se<this.channels.length;Se++)this.channels[Se]&&this.channels[Se].cueSplitAtTime(Q)}},ne.logger=T,ne.PenState=L,ne.CaptionScreen=pe,ne.Cea608Parser=Me,ne.findCea608Nalus=function(Q,Se,Le){for(var x=0,Ee=Se,ge=[],et=function(Je,Pe,Nt,Ht){if(4!==Je||Pe<8)return null;var $e=Nt.getUint8(Ht),ht=Nt.getUint16(Ht+1),hn=Nt.getUint32(Ht+3),zt=Nt.getUint8(Ht+7);return 181==$e&&49==ht&&1195456820==hn&&3==zt};Ee<Se+Le;){if(x=Q.getUint32(Ee),6==(31&Q.getUint8(Ee+4)))for(var De=Ee+5,ot=-1;De<Ee+4+x-1;){ot=0;for(var gt=255;255===gt;)ot+=gt=Q.getUint8(De),De++;var St=0;for(gt=255;255===gt;)St+=gt=Q.getUint8(De),De++;et(ot,St,Q,De)&&ge.push([De,St]),De+=St}Ee+=x+4}return ge},ne.extractCea608DataFromRange=function(Q,Se){var Le=Se[0],x=[[],[]],Ee=31&Q.getUint8(Le+=8);Le+=2;for(var ge=0;ge<Ee;ge++){var et=Q.getUint8(Le),De=4&et,ot=3&et;Le++;var gt=Q.getUint8(Le);Le++;var St=Q.getUint8(Le);Le++,De&&(127&gt)+(127&St)!=0&&(0===ot?(x[0].push(gt),x[0].push(St)):1===ot&&(x[1].push(gt),x[1].push(St)))}return x}}(Qe)},8416:function(Vt,Qe,ne){"use strict";var Ce=ne(1139),G=ne(5448),E=ne(6398),_=ne(2032),F=(ne(5530),typeof window<"u"&&window||ne.g),V=F.dashjs;V||(V=F.dashjs={}),V.MediaPlayer=Ce.Z,V.FactoryMaker=G.Z,V.Debug=E.Z,V.Version=(0,_.e)()},6398:function(Vt,Qe,ne){"use strict";var Ce=ne(5595),G=ne(8512),E=ne(5448),_=1,F=2,V=3,D=4,j=5;function B(M){M=M||{};var L,K,ce,pe,Me=(0,Ce.Z)(this.context).getInstance(),Q=M.settings,Se=[];function Le(gt){return gt&&gt.bind?gt.bind(window.console):window.console.log.bind(window.console)}function x(){for(var gt=arguments.length,St=new Array(gt),Je=0;Je<gt;Je++)St[Je]=arguments[Je];ot.apply(void 0,[_,this].concat(St))}function Ee(){for(var gt=arguments.length,St=new Array(gt),Je=0;Je<gt;Je++)St[Je]=arguments[Je];ot.apply(void 0,[F,this].concat(St))}function ge(){for(var gt=arguments.length,St=new Array(gt),Je=0;Je<gt;Je++)St[Je]=arguments[Je];ot.apply(void 0,[V,this].concat(St))}function et(){for(var gt=arguments.length,St=new Array(gt),Je=0;Je<gt;Je++)St[Je]=arguments[Je];ot.apply(void 0,[D,this].concat(St))}function De(){for(var gt=arguments.length,St=new Array(gt),Je=0;Je<gt;Je++)St[Je]=arguments[Je];ot.apply(void 0,[j,this].concat(St))}function ot(gt,St){var Je="",Pe=null;K&&(Pe=(new Date).getTime(),Je+="["+(Pe-pe)+"]"),ce&&St&&St.getClassName&&(Je+="["+St.getClassName()+"]",St.getType&&(Je+="["+St.getType()+"]")),Je.length>0&&(Je+=" ");for(var Nt=arguments.length,Ht=new Array(Nt>2?Nt-2:0),$e=2;$e<Nt;$e++)Ht[$e-2]=arguments[$e];Array.apply(null,Ht).forEach(function(ht){Je+=ht+" "}),Se[gt]&&Q&&Q.get().debug.logLevel>=gt&&Se[gt](Je),Q&&Q.get().debug.dispatchEvent&&Me.trigger(G.Z.LOG,{message:Je,level:gt})}return L={getLogger:function(gt){return{fatal:x.bind(gt),error:Ee.bind(gt),warn:ge.bind(gt),info:et.bind(gt),debug:De.bind(gt)}},setLogTimestampVisible:function(gt){K=gt},setCalleeNameVisible:function(gt){ce=gt}},K=!0,ce=!0,pe=(new Date).getTime(),typeof window<"u"&&window.console&&(Se[_]=Le(window.console.error),Se[F]=Le(window.console.error),Se[V]=Le(window.console.warn),Se[D]=Le(window.console.info),Se[j]=Le(window.console.debug)),L}B.__dashjs_factory_name="Debug";var T=E.Z.getSingletonFactory(B);T.LOG_LEVEL_NONE=0,T.LOG_LEVEL_FATAL=_,T.LOG_LEVEL_ERROR=F,T.LOG_LEVEL_WARNING=V,T.LOG_LEVEL_INFO=D,T.LOG_LEVEL_DEBUG=j,E.Z.updateSingletonFactory(B.__dashjs_factory_name,T),Qe.Z=T},5595:function(Vt,Qe,ne){"use strict";var Ce=ne(5448),G=ne(8825);function E(){var F={};function V(j,B,T){var M=-1;return F[j]&&F[j].some(function(L,K){if(L&&L.callback===B&&(!T||T===L.scope))return M=K,!0}),M}var D={on:function(j,B,T){var M=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!j)throw new Error("event type cannot be null or undefined");if(!B||"function"!=typeof B)throw new Error("listener must be a function: "+B);var L=M.priority||0;if(!(V(j,B,T)>=0)){F[j]=F[j]||[];var K={callback:B,scope:T,priority:L};T&&T.getStreamId&&(K.streamId=T.getStreamId()),T&&T.getType&&(K.mediaType=T.getType()),M&&M.mode&&(K.mode=M.mode),F[j].some(function(pe,ue){if(pe&&L>pe.priority)return F[j].splice(ue,0,K),!0})||F[j].push(K)}},off:function(j,B,T){if(j&&B&&F[j]){var M=V(j,B,T);M<0||(F[j][M]=null)}},trigger:function(j){var B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(j&&F[j]){if((B=B||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");B.type=j,T.streamId&&(B.streamId=T.streamId),T.mediaType&&(B.mediaType=T.mediaType),F[j].filter(function(M){return!(!M||T.streamId&&M.streamId&&M.streamId!==T.streamId||T.mediaType&&M.mediaType&&M.mediaType!==T.mediaType||T.mode&&M.mode&&M.mode!==T.mode||!M.mode&&T.mode&&T.mode===G.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(M){return M&&M.callback.call(M.scope,B)})}},reset:function(){F={}}};return D}E.__dashjs_factory_name="EventBus";var _=Ce.Z.getSingletonFactory(E);_.EVENT_PRIORITY_LOW=0,_.EVENT_PRIORITY_HIGH=5e3,Ce.Z.updateSingletonFactory(E.__dashjs_factory_name,_),Qe.Z=_},5448:function(Vt,Qe){"use strict";var ne=function(){var Ce,G=[],E={},_={};function F(B,T){for(var M in G){var L=G[M];if(L.context===B&&L.name===T)return L.instance}return null}function V(B,T){return T[B]}function D(B,T,M){B in M&&(M[B]=T)}function j(B,T,M){var L,K=B.__dashjs_factory_name,ce=T[K];if(ce){var pe=ce.instance;if(!ce.override)return pe.apply({context:T,factory:Ce},M);for(var ue in L=B.apply({context:T},M),pe=pe.apply({context:T,factory:Ce,parent:L},M))L.hasOwnProperty(ue)&&(L[ue]=pe[ue])}else L=B.apply({context:T},M);return L.getClassName=function(){return K},L}return Ce={extend:function(B,T,M,L){!L[B]&&T&&(L[B]={instance:T,override:M})},getSingletonInstance:F,setSingletonInstance:function(B,T,M){for(var L in G){var K=G[L];if(K.context===B&&K.name===T)return void(G[L].instance=M)}G.push({name:T,context:B,instance:M})},deleteSingletonInstances:function(B){G=G.filter(function(T){return T.context!==B})},getSingletonFactory:function(B){var T=V(B.__dashjs_factory_name,E);return T||(T=function(M){var L;return void 0===M&&(M={}),{getInstance:function(){return L||(L=F(M,B.__dashjs_factory_name)),L||(L=j(B,M,arguments),G.push({name:B.__dashjs_factory_name,context:M,instance:L})),L}}},E[B.__dashjs_factory_name]=T),T},getSingletonFactoryByName:function(B){return V(B,E)},updateSingletonFactory:function(B,T){D(B,T,E)},getClassFactory:function(B){var T=V(B.__dashjs_factory_name,_);return T||(T=function(M){return void 0===M&&(M={}),{create:function(){return j(B,M,arguments)}}},_[B.__dashjs_factory_name]=T),T},getClassFactoryByName:function(B){return V(B,_)},updateClassFactory:function(B,T){D(B,T,_)}},Ce}();Qe.Z=ne},1264:function(Vt,Qe,ne){"use strict";var Ce=ne(5448),G=ne(703),E=ne(6398),_=ne(3393),F=ne(7855),V=ne(5595),D=ne(8512);function j(L){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(K){return typeof K}:function(K){return K&&"function"==typeof Symbol&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K})(L)}function B(L,K,ce){return K in L?Object.defineProperty(L,K,{value:ce,enumerable:!0,configurable:!0,writable:!0}):L[K]=ce,L}function T(){var L,K,pe=(0,V.Z)(this.context).getInstance(),ue={"streaming.delay.liveDelay":D.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":D.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":D.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":D.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":D.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},Me={debug:{logLevel:E.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:_.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:_.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:_.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:_.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(L={},B(L,F.w.MPD_TYPE,500),B(L,F.w.XLINK_EXPANSION_TYPE,500),B(L,F.w.MEDIA_SEGMENT_TYPE,1e3),B(L,F.w.INIT_SEGMENT_TYPE,1e3),B(L,F.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),B(L,F.w.INDEX_SEGMENT_TYPE,1e3),B(L,F.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),B(L,F.w.LICENSE,1e3),B(L,F.w.OTHER_TYPE,1e3),B(L,"lowLatencyReductionFactor",10),L),retryAttempts:(K={},B(K,F.w.MPD_TYPE,3),B(K,F.w.XLINK_EXPANSION_TYPE,1),B(K,F.w.MEDIA_SEGMENT_TYPE,3),B(K,F.w.INIT_SEGMENT_TYPE,3),B(K,F.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),B(K,F.w.INDEX_SEGMENT_TYPE,3),B(K,F.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),B(K,F.w.LICENSE,3),B(K,F.w.OTHER_TYPE,3),B(K,"lowLatencyMultiplyFactor",5),K),abr:{movingAverageMethod:_.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:_.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:_.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:_.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},Q=G.Z.clone(Me);function Se(Le,x,Ee){for(var ge in Le)Le.hasOwnProperty(ge)&&(x.hasOwnProperty(ge)?"object"!==j(Le[ge])||Le[ge]instanceof Array||null===Le[ge]?(x[ge]=G.Z.clone(Le[ge]),ue[Ee+ge]&&pe.trigger(ue[Ee+ge])):Se(Le[ge],x[ge],Ee.slice()+ge+"."):console.error("Settings parameter "+Ee+ge+" is not supported"))}return{get:function(){return Q},update:function(Le){"object"===j(Le)&&Se(Le,Q,"")},reset:function(){Q=G.Z.clone(Me)}}}T.__dashjs_factory_name="Settings";var M=Ce.Z.getSingletonFactory(T);Qe.Z=M},703:function(Vt,Qe,ne){"use strict";var Ce=ne(3875),G=ne.n(Ce),E=ne(1067);function _(D){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(D)}var V=function(){function D(){!function(T,M){if(!(T instanceof M))throw new TypeError("Cannot call a class as a function")}(this,D)}var B;return B=[{key:"mixin",value:function(T,M,L){var K,ce={};if(T)for(var pe in M)M.hasOwnProperty(pe)&&(K=M[pe],pe in T&&(T[pe]===K||pe in ce&&ce[pe]===K)||(T[pe]="object"===_(T[pe])&&null!==T[pe]?D.mixin(T[pe],K,L):L(K)));return T}},{key:"clone",value:function(T){if(!T||"object"!==_(T))return T;var M;if(T instanceof Array){M=[];for(var L=0,K=T.length;L<K;++L)L in T&&M.push(D.clone(T[L]))}else M={};return D.mixin(M,T,D.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(T,M){try{if(!M||0===M.length)return T;var L=new URL(T);return M.forEach(function(K){K.key&&K.value&&L.searchParams.set(K.key,K.value)}),L.href}catch{return T}}},{key:"parseHttpHeaders",value:function(T){var M={};if(!T)return M;for(var L=T.trim().split("\r\n"),K=0,ce=L.length;K<ce;K++){var pe=L[K],ue=pe.indexOf(": ");ue>0&&(M[pe.substring(0,ue)]=pe.substring(ue+2))}return M}},{key:"generateUuid",value:function(){var T=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(M){var L=(T+16*Math.random())%16|0;return T=Math.floor(T/16),("x"==M?L:3&L|8).toString(16)})}},{key:"generateHashCode",value:function(T){var M=0;if(0===T.length)return M;for(var L=0;L<T.length;L++)M=(M<<5)-M+T.charCodeAt(L),M|=0;return M}},{key:"getRelativeUrl",value:function(T,M){try{var L=new URL(T),K=new URL(M);if(L.protocol=K.protocol,L.origin!==K.origin)return M;var ce=G().relative(L.pathname.substr(0,L.pathname.lastIndexOf("/")),K.pathname.substr(0,K.pathname.lastIndexOf("/"))),pe=0===ce.length?1:0;return ce+=K.pathname.substr(K.pathname.lastIndexOf("/")+pe,K.pathname.length-1),K.pathname.length<ce.length?K.pathname:ce}catch{return M}}},{key:"parseUserAgent",value:function(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var M=null===T&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,E.UAParser)(M)}catch{return{}}}},{key:"stringHasProtocol",value:function(T){return/(http(s?)):\/\//i.test(T)}}],B&&function F(D,j){for(var B=0;B<j.length;B++){var T=j[B];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(D,T.key,T)}}(D,B),D}();Qe.Z=V},2032:function(Vt,Qe,ne){"use strict";function Ce(){return"4.7.4"}ne.d(Qe,{e:function(){return Ce}})},2230:function(Vt,Qe){"use strict";var Ce=function(){function G(){!function(F,V){if(!(F instanceof V))throw new TypeError("Cannot call a class as a function")}(this,G)}var _;return(_=[{key:"extend",value:function(F,V){if(F){var D=!!V&&V.override,j=!!V&&V.publicOnly;for(var B in F)!F.hasOwnProperty(B)||this[B]&&!D||j&&-1===F[B].indexOf("public_")||(this[B]=F[B])}}}])&&function ne(G,E){for(var _=0;_<E.length;_++){var F=E[_];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(G,F.key,F)}}(G.prototype,_),G}();Qe.Z=Ce},4351:function(Vt,Qe,ne){"use strict";function Ce(V){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(V)}function G(V,D){return(G=Object.setPrototypeOf||function(j,B){return j.__proto__=B,j})(V,D)}function _(V){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(V)}var F=function(V){!function(M,L){if("function"!=typeof L&&null!==L)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(L&&L.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),L&&G(M,L)}(T,V);var D,j,B=(D=T,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var M,L=_(D);if(j){var K=_(this).constructor;M=Reflect.construct(L,arguments,K)}else M=L.apply(this,arguments);return function E(V,D){return!D||"object"!==Ce(D)&&"function"!=typeof D?function(j){if(void 0===j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(V):D}(this,M)});function T(){var M;return function(L,K){if(!(L instanceof K))throw new TypeError("Cannot call a class as a function")}(this,T),(M=B.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",M.BUFFERING_COMPLETED="bufferingCompleted",M.BUFFER_CLEARED="bufferCleared",M.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",M.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",M.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",M.CMSD_STATIC_HEADER="cmsdStaticHeader",M.CURRENT_TRACK_CHANGED="currentTrackChanged",M.DATA_UPDATE_COMPLETED="dataUpdateCompleted",M.INBAND_EVENTS="inbandEvents",M.INITIAL_STREAM_SWITCH="initialStreamSwitch",M.INIT_FRAGMENT_LOADED="initFragmentLoaded",M.INIT_FRAGMENT_NEEDED="initFragmentNeeded",M.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",M.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",M.LOADING_COMPLETED="loadingCompleted",M.LOADING_PROGRESS="loadingProgress",M.LOADING_DATA_PROGRESS="loadingDataProgress",M.LOADING_ABANDONED="loadingAborted",M.MANIFEST_UPDATED="manifestUpdated",M.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",M.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",M.QUOTA_EXCEEDED="quotaExceeded",M.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",M.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",M.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",M.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",M.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",M.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",M.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",M.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",M.SOURCE_BUFFER_ERROR="sourceBufferError",M.STREAMS_COMPOSED="streamsComposed",M.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",M.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",M.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",M.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",M.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",M.URL_RESOLUTION_FAILED="urlResolutionFailed",M.VIDEO_CHUNK_RECEIVED="videoChunkReceived",M.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",M.XLINK_ELEMENT_LOADED="xlinkElementLoaded",M.XLINK_READY="xlinkReady",M.SEEK_TARGET="seekTarget",M.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",M.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",M.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",M.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",M.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",M}return T}(ne(8342).Z);Qe.Z=F},8512:function(Vt,Qe,ne){"use strict";function Ce(j){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(B){return typeof B}:function(B){return B&&"function"==typeof Symbol&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B})(j)}function E(j,B){return(E=Object.setPrototypeOf||function(T,M){return T.__proto__=M,T})(j,B)}function F(j){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(B){return B.__proto__||Object.getPrototypeOf(B)})(j)}var V=function(j){!function(K,ce){if("function"!=typeof ce&&null!==ce)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(ce&&ce.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),ce&&E(K,ce)}(L,j);var B,T,M=(B=L,T=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var K,ce=F(B);if(T){var pe=F(this).constructor;K=Reflect.construct(ce,arguments,pe)}else K=ce.apply(this,arguments);return function _(j,B){return!B||"object"!==Ce(B)&&"function"!=typeof B?function(T){if(void 0===T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(j):B}(this,K)});function L(){return function G(j,B){if(!(j instanceof B))throw new TypeError("Cannot call a class as a function")}(this,L),M.apply(this,arguments)}return L}(ne(4351).Z),D=new V;Qe.Z=D},8342:function(Vt,Qe){"use strict";var Ce=function(){function G(){!function(F,V){if(!(F instanceof V))throw new TypeError("Cannot call a class as a function")}(this,G)}var _;return(_=[{key:"extend",value:function(F,V){if(F){var D=!!V&&V.override,j=!!V&&V.publicOnly;for(var B in F)!F.hasOwnProperty(B)||this[B]&&!D||j&&-1===F[B].indexOf("public_")||(this[B]=F[B])}}}])&&function ne(G,E){for(var _=0;_<E.length;_++){var F=E[_];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(G,F.key,F)}}(G.prototype,_),G}();Qe.Z=Ce},9326:function(Vt,Qe,ne){"use strict";var Ce=ne(3186),G=ne(7855),E=ne(5448),_=ne(8825),F=ne(7387),V=ne(1553);function D(j){var B,T,M,L,K,ce=(j=j||{}).eventBus,ue=j.urlUtils,Me=j.type,Q=j.streamInfo,Se=j.segmentsController,Le=j.timelineConverter,x=j.baseURLController;function Ee(){return Me}function ge(){M=null}function et(Je,Pe,Nt){var Ht,$e,ht=x.resolve(Nt.path),hn={};return ht&&Pe!==ht.url&&ue.isRelative(Pe)?(Ht=ht.url,$e=ht.serviceLocation,hn=ht.queryParams,Pe&&(Ht=ue.resolve(Pe,Ht))):Ht=Pe,!ue.isRelative(Ht)&&(Je.url=Ht,Je.serviceLocation=$e,Je.queryParams=hn,!0)}function De(Je,Pe){if(null==Pe)return null;var Nt=new Ce.Z,Ht=Pe.representation,$e=Ht.adaptation.period.mpd.manifest.Period_asArray[Ht.adaptation.period.index].AdaptationSet_asArray[Ht.adaptation.index].Representation_asArray[Ht.index].bandwidth,ht=Pe.media;return ht=(0,F.vi)(ht,"Number",Pe.replacementNumber),ht=(0,F.vi)(ht,"Time",Pe.replacementTime),ht=(0,F.vi)(ht,"Bandwidth",$e),ht=(0,F.Aj)(ht,Ht.id),ht=(0,F.eR)(ht),Nt.mediaType=Ee(),Nt.type=G.w.MEDIA_SEGMENT_TYPE,Nt.range=Pe.mediaRange,Nt.startTime=Pe.presentationStartTime,Nt.mediaStartTime=Pe.mediaStartTime,Nt.duration=Pe.duration,Nt.timescale=Ht.timescale,Nt.availabilityStartTime=Pe.availabilityStartTime,Nt.availabilityEndTime=Pe.availabilityEndTime,Nt.availabilityTimeComplete=Ht.availabilityTimeComplete,Nt.wallStartTime=Pe.wallStartTime,Nt.quality=Ht.index,Nt.index=Pe.index,Nt.mediaInfo=Je,Nt.adaptationIndex=Ht.adaptation.index,Nt.representationId=Ht.id,et(Nt,ht,Ht)?Nt:void 0}function ot(Je,Pe,Nt){var Ht=null;if(!Pe||!Pe.segmentInfoType)return Ht;var $e=Se.getSegmentByTime(Pe,Nt);return $e&&(M=$e,T.debug("Index for time "+Nt+" is "+$e.index),Ht=De(Je,$e)),Ht}function gt(Je,Pe,Nt){var Ht=null,$e=Se.getSegmentByIndex(Pe,Nt,M?M.mediaStartTime:-1);if($e)Ht=De(Je,$e),M=$e;else{if(L&&!K)return T.debug(Ee()+" No segment found at index: "+Nt+". Wait for next loop"),null;K=!0}return Ht}function St(){T.debug("Dynamic stream complete"),K=!0}return T=j.debug.getLogger(B={getCurrentIndex:function(){return M?M.index:-1},getInitRequest:function(Je,Pe){return Pe?function(Nt,Ht,$e){var ht=new Ce.Z,hn=Ht.adaptation.period,zt=hn.start;if(ht.mediaType=$e,ht.type=G.w.INIT_SEGMENT_TYPE,ht.range=Ht.range,ht.availabilityStartTime=Le.calcAvailabilityStartTimeFromPresentationTime(zt,Ht,L),ht.availabilityEndTime=Le.calcAvailabilityEndTimeFromPresentationTime(zt+hn.duration,Ht,L),ht.quality=Ht.index,ht.mediaInfo=Nt,ht.representationId=Ht.id,et(ht,Ht.initialization,Ht))return ht.url=(0,F.vi)(ht.url,"Bandwidth",Ht.bandwidth),ht}(Je,Pe,Ee()):null},getNextSegmentRequest:function(Je,Pe){return Pe&&Pe.segmentInfoType?gt(Je,Pe,M?M.index+1:0):null},getNextSegmentRequestIdempotent:function(Je,Pe){var Ht=Se.getSegmentByIndex(Pe,M?M.index+1:0,M?M.mediaStartTime:-1);return Ht?De(Je,Ht):null},getSegmentRequestForTime:ot,getStreamId:function(){return Q.id},getStreamInfo:function(){return Q},getType:Ee,getValidTimeAheadOfTargetTime:function(Je,Pe,Nt,Ht){try{if(isNaN(Je)||!Pe||!Nt)return NaN;if(Je<0&&(Je=0),isNaN(Ht)&&(Ht=.5),ot(Pe,Nt,Je))return Je;if(Nt.adaptation.period.start+Nt.adaptation.period.duration<Je)return NaN;for(var $e=isFinite(Nt.adaptation.period.duration)?Nt.adaptation.period.start+Nt.adaptation.period.duration:Je+30,ht=Math.min(Je+Ht,$e),hn=NaN,zt=null;ht<=$e;){var mt=null;if(ht<=$e&&(mt=ot(Pe,Nt,ht)),mt){hn=ht,zt=mt;break}ht+=Ht}if(zt){var It=zt.startTime+zt.duration;return Je>zt.startTime&&It-Je>Ht?Je:!isNaN(zt.startTime)&&Je<zt.startTime&&hn>zt.startTime?zt.startTime+.001:Math.min(It-Ht,hn)}return hn}catch{return NaN}},initialize:function(Je){L=Je,K=!1,Se.initialize(Je)},isLastSegmentRequested:function(Je,Pe){return!(!Je||!M||!K&&(!isFinite(Je.adaptation.period.duration)||M.presentationStartTime+M.duration>Pe||!(Je.mediaFinishedInformation&&!isNaN(Je.mediaFinishedInformation.numberOfSegments)&&!isNaN(M.index)&&M.index>=Je.mediaFinishedInformation.numberOfSegments-1&&(!L||Je.segmentInfoType===V.Z.SEGMENT_TEMPLATE||L&&Je.segmentInfoType===V.Z.SEGMENT_LIST&&Je.adaptation.period.nextPeriodId)||L&&Je.adaptation.period.nextPeriodId&&Je.segmentInfoType===V.Z.SEGMENT_TIMELINE&&Je.mediaFinishedInformation&&!isNaN(Je.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&M&&!isNaN(M.mediaStartTime)&&!isNaN(M.duration)&&M.mediaStartTime+M.duration>=Je.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)))},repeatSegmentRequest:function(Je,Pe){return Pe&&Pe.segmentInfoType?gt(Je,Pe,M?M.index:0):null},reset:function(){ge(),ce.off(_.Z.DYNAMIC_TO_STATIC,St,B)}}),ge(),ce.on(_.Z.DYNAMIC_TO_STATIC,St,B),B}D.__dashjs_factory_name="DashHandler",Qe.Z=E.Z.getClassFactory(D)},1553:function(Vt,Qe){"use strict";var Ce=new(function(){function G(){(function(F,V){if(!(F instanceof V))throw new TypeError("Cannot call a class as a function")})(this,G),this.init()}var _;return(_=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&function ne(G,E){for(var _=0;_<E.length;_++){var F=E[_];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(G,F.key,F)}}(G.prototype,_),G}());Qe.Z=Ce},7802:function(Vt,Qe,ne){"use strict";var Ce=ne(5448),G=ne(1724),E=ne(3636),_=ne(1736),F=ne(5246);function V(j){var B,T,M=this.context,L=(j=j||{}).dashConstants,K=j.type,ce=j.segmentBaseController;function pe(ue){return ue?ue.segments?T[L.SEGMENT_BASE]:T[ue.segmentInfoType]:null}return B={initialize:function(ue){T[L.SEGMENT_TIMELINE]=(0,G.Z)(M).create(j,ue),T[L.SEGMENT_TEMPLATE]=(0,E.Z)(M).create(j,ue),T[L.SEGMENT_LIST]=(0,_.Z)(M).create(j,ue),T[L.SEGMENT_BASE]=(0,F.Z)(M).create(j,ue)},updateInitData:function(ue,Me){return Me?Promise.resolve():ce.getSegmentBaseInitSegment({representation:ue,mediaType:K})},updateSegmentData:function(ue,Me){return Me?Promise.resolve():ce.getSegmentList({mimeType:ue.mimeType,representation:ue,mediaType:K})},getSegmentByIndex:function(ue,Me,Q){var Se=pe(ue);return Se?Se.getSegmentByIndex(ue,Me,Q):null},getSegmentByTime:function(ue,Me){var Q=pe(ue);return Q?Q.getSegmentByTime(ue,Me):null},getMediaFinishedInformation:function(ue){var Me=pe(ue);return Me?Me.getMediaFinishedInformation(ue):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},T={},B}V.__dashjs_factory_name="SegmentsController";var D=Ce.Z.getClassFactory(V);Qe.Z=D},1736:function(Vt,Qe,ne){"use strict";var Ce=ne(5448),G=ne(3393),E=ne(7387);function _(V,D){var j=(V=V||{}).timelineConverter;function B(){if(!j||!j.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(G.Z.MISSING_CONFIG_ERROR)}function T(M,L){if(B(),!M)return null;var K=M.adaptation.period.mpd.manifest.Period_asArray[M.adaptation.period.index].AdaptationSet_asArray[M.adaptation.index].Representation_asArray[M.index].SegmentList,ce=K.SegmentURL_asArray.length,pe=M&&!isNaN(M.startNumber)?M.startNumber:1,ue=Math.max(pe-1,0),Me=Math.max(L-ue,0),Q=null;if(Me<ce){var Se=K.SegmentURL_asArray[Me];(Q=(0,E.NF)(j,D,M,L))&&(Q.replacementTime=(pe+L-1)*M.segmentDuration,Q.media=Se.media?Se.media:"",Q.mediaRange=Se.mediaRange,Q.indexRange=Se.indexRange)}return Q}return{getSegmentByIndex:T,getSegmentByTime:function(M,L){if(B(),!M)return null;var K=M.segmentDuration;if(isNaN(K))return null;var ce=j.calcPeriodRelativeTimeFromMpdRelativeTime(M,L);return T(M,Math.floor(ce/K))},getMediaFinishedInformation:function(M){var L={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!M)return L;var K=M.adaptation.period.mpd.manifest.Period_asArray[M.adaptation.period.index].AdaptationSet_asArray[M.adaptation.index].Representation_asArray[M.index].SegmentList,ce=M&&!isNaN(M.startNumber)?M.startNumber:1,pe=Math.max(ce-1,0);return L.numberOfSegments=pe+K.SegmentURL_asArray.length,L}}}_.__dashjs_factory_name="ListSegmentsGetter";var F=Ce.Z.getClassFactory(_);Qe.Z=F},5246:function(Vt,Qe,ne){"use strict";var Ce=ne(5448),G=ne(3393);function E(F){var V=(F=F||{}).timelineConverter;function D(){if(!V||!V.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(G.Z.MISSING_CONFIG_ERROR)}function j(B,T){if(D(),!B)return null;var M,L=B.segments?B.segments.length:-1;if(T<L&&(M=B.segments[T])&&M.index===T)return M;for(var K=0;K<L;K++)if((M=B.segments[K])&&M.index===T)return M;return null}return{getSegmentByIndex:j,getSegmentByTime:function(B,T){return D(),j(B,function(L,K){if(!L)return-1;var ce,pe,ue,Me,Q,Se=L.segments,Le=Se?Se.length:null,x=-1;if(Se&&Le>0)for(Q=0;Q<Le;Q++)if(ue=(pe=Se[Q]).presentationStartTime,K+(ce=(Me=pe.duration)/2)>=ue&&K-ce<ue+Me){x=pe.index;break}return x}(B,T))},getMediaFinishedInformation:function(B){var T={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return B&&B.segments&&(T.numberOfSegments=B.segments.length),T}}}E.__dashjs_factory_name="SegmentBaseGetter";var _=Ce.Z.getClassFactory(E);Qe.Z=_},7387:function(Vt,Qe,ne){"use strict";ne.d(Qe,{Aj:function(){return _},NF:function(){return j},TJ:function(){return B},eR:function(){return E},vi:function(){return F}});var Ce=ne(2011);function G(T,M){for(;T.length<M;)T="0"+T;return T}function E(T){return T&&T.split("$$").join("$")}function _(T,M){if(!M||!T||-1===T.indexOf("$RepresentationID$"))return T;var L=M.toString();return T.split("$RepresentationID$").join(L)}function F(T,M,L){var K,ce,pe,ue,Me,Q,Se=M.length;if(!T)return T;for(;;){if((K=T.indexOf("$"+M))<0||(ce=T.indexOf("$",K+Se))<0)return T;if((pe=T.indexOf("%0",K+Se))>K&&pe<ce)switch(ue=T.charAt(ce-1),Me=parseInt(T.substring(pe+2,ce-1),10),ue){case"d":case"i":case"u":Q=G(L.toString(),Me);break;case"x":Q=G(L.toString(16),Me);break;case"X":Q=G(L.toString(16),Me).toUpperCase();break;case"o":Q=G(L.toString(8),Me);break;default:return T}else Q=L;T=T.substring(0,K)+Q+T.substring(ce+1)}}function V(T,M,L,K,ce,pe,ue,Me){var Se=new Ce.Z;return Se.representation=T,Se.duration=M,Se.presentationStartTime=L,Se.mediaStartTime=K,Se.availabilityStartTime=ce.calcAvailabilityStartTimeFromPresentationTime(pe,T,ue),Se.availabilityEndTime=ce.calcAvailabilityEndTimeFromPresentationTime(pe+M,T,ue),Se.wallStartTime=ce.calcWallTimeForSegment(Se,ue),Se.replacementNumber=Se.representation.startNumber+Me,Se.index=Me,Se}function D(T,M,L,K){var ce=M.adaptation.period;if(isFinite(ce.duration)&&ce.start+ce.duration<=L.presentationStartTime)return!1;if(K){if("INF"===M.availabilityTimeOffset)return!0;var pe=T.getClientReferenceTime();return L.availabilityStartTime.getTime()<=pe&&(!isFinite(L.availabilityEndTime)||L.availabilityEndTime.getTime()>=pe)}return!0}function j(T,M,L,K){var ce,pe,ue;ce=L.segmentDuration,isNaN(ce)&&(ce=L.adaptation.period.duration),pe=parseFloat((L.adaptation.period.start+K*ce).toFixed(5)),ue=parseFloat((pe+ce).toFixed(5));var Me=V(L,ce,pe,T.calcMediaTimeFromPresentationTime(pe,L),T,ue,M,K);return D(T,L,Me,M)?Me:null}function B(T,M,L,K,ce,pe,ue,Me,Q,Se){var Le,x,Ee=K/pe,ge=ce/pe;return Le=T.calcPresentationTimeFromMediaTime(Ee,L),D(T,L,x=V(L,ge,Le,Ee,T,Le+ge,M,Q),M)?(x.replacementTime=Se||K,ue=F(ue,"Number",x.replacementNumber),ue=F(ue,"Time",x.replacementTime),x.media=ue,x.mediaRange=Me,x):null}},3636:function(Vt,Qe,ne){"use strict";var Ce=ne(5448),G=ne(3393),E=ne(7387);function _(V,D){var j=(V=V||{}).timelineConverter;function B(){if(!j||!j.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(G.Z.MISSING_CONFIG_ERROR)}function T(M,L){if(B(),!M)return null;var K=M.adaptation.period.mpd.manifest.Period_asArray[M.adaptation.period.index].AdaptationSet_asArray[M.adaptation.index].Representation_asArray[M.index].SegmentTemplate;L=Math.max(L,0);var ce=(0,E.NF)(j,D,M,L);if(ce){ce.replacementTime=Math.round((L-1)*M.segmentDuration*M.timescale,10);var pe=K.media;pe=(0,E.vi)(pe,"Number",ce.replacementNumber),pe=(0,E.vi)(pe,"Time",ce.replacementTime),ce.media=pe}return ce}return{getSegmentByIndex:T,getSegmentByTime:function(M,L){if(B(),!M)return null;var K=M.segmentDuration;if(isNaN(K))return null;var ce=j.calcPeriodRelativeTimeFromMpdRelativeTime(M,L);return T(M,Math.floor(ce/K))},getMediaFinishedInformation:function(M){var L={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!M)return L;var K=M.segmentDuration;return L.numberOfSegments=isNaN(K)?1:Math.ceil(M.adaptation.period.duration/K),L}}}_.__dashjs_factory_name="TemplateSegmentsGetter";var F=Ce.Z.getClassFactory(_);Qe.Z=F},1724:function(Vt,Qe,ne){"use strict";var Ce=ne(5448),G=ne(3393),E=ne(7387);function _(V,D){var j=(V=V||{}).timelineConverter,B=V.dashMetrics;function T(){if(!j)throw new Error(G.Z.MISSING_CONFIG_ERROR)}function M(K,ce){var pe,ue,Me,Q,Se,Le,x,Ee=K.adaptation.period.mpd.manifest.Period_asArray[K.adaptation.period.index].AdaptationSet_asArray[K.adaptation.index].Representation_asArray[K.index].SegmentTemplate||K.adaptation.period.mpd.manifest.Period_asArray[K.adaptation.period.index].AdaptationSet_asArray[K.adaptation.index].Representation_asArray[K.index].SegmentList,et=Ee.SegmentURL_asArray,De=0,ot=-1;x=K.timescale;var gt=!1;for(Me=0,Q=(pe=Ee.SegmentTimeline.S_asArray).length;Me<Q&&!gt;Me++)for(Le=0,(ue=pe[Me]).hasOwnProperty("r")&&(Le=ue.r),ue.hasOwnProperty("t")&&(De=ue.t),Le<0&&(Le=L(K,pe[Me+1],ue,x,De/x)),Se=0;Se<=Le&&!gt;Se++)(gt=ce(De,Ee,et,ue,x,++ot,Me))&&(K.segmentDuration=ue.d/x),De+=ue.d}function L(K,ce,pe,ue,Me){var Q;if(ce&&ce.hasOwnProperty("t"))Q=ce.t/ue;else try{var Se=0;if(isNaN(K.adaptation.period.start)||isNaN(K.adaptation.period.duration)||!isFinite(K.adaptation.period.duration)){var Le=B.getCurrentDVRInfo();Se=isNaN(Le.end)?0:Le.end}else Se=K.adaptation.period.start+K.adaptation.period.duration;Q=j.calcMediaTimeFromPresentationTime(Se,K),K.segmentDuration=pe.d/ue}catch{Q=0}return Math.max(Math.ceil((Q-Me)/(pe.d/ue))-1,0)}return{getSegmentByIndex:function(K,ce,pe){if(T(),!K)return null;var ue=null,Me=!1;return M(K,function(Q,Se,Le,x,Ee,ge,et){if(Me||pe<0){var De=Se.media,ot=x.mediaRange;return Le&&(De=Le[et].media||"",ot=Le[et].mediaRange),ue=(0,E.TJ)(j,D,K,Q,x.d,Ee,De,ot,ge,x.tManifest),!0}return Q>=pe*Ee-.5*x.d&&(Me=!0),!1}),ue},getSegmentByTime:function(K,ce){if(T(),!K)return null;void 0===ce&&(ce=null);var pe=null,ue=j.calcMediaTimeFromPresentationTime(ce,K);return M(K,function(Me,Q,Se,Le,x,Ee,ge){var et=parseFloat((ue*x).toPrecision(15));if(et<Me+Le.d&&et>=Me){var De=Q.media,ot=Le.mediaRange;return Se&&(De=Se[ge].media||"",ot=Se[ge].mediaRange),pe=(0,E.TJ)(j,D,K,Me,Le.d,x,De,ot,Ee,Le.tManifest),!0}return!1}),pe},getMediaFinishedInformation:function(K){if(!K)return 0;var ce,pe,ue,Me,Q,Se,Le,Ee=0,ge=0,et=0;for(Le=K.timescale,Me=(ce=(K.adaptation.period.mpd.manifest.Period_asArray[K.adaptation.period.index].AdaptationSet_asArray[K.adaptation.index].Representation_asArray[K.index].SegmentTemplate||K.adaptation.period.mpd.manifest.Period_asArray[K.adaptation.period.index].AdaptationSet_asArray[K.adaptation.index].Representation_asArray[K.index].SegmentList).SegmentTimeline.S_asArray).length,ue=0;ue<Me;ue++)for(Se=0,(pe=ce[ue]).hasOwnProperty("r")&&(Se=pe.r),pe.hasOwnProperty("t")&&(ge=(Ee=pe.t)/Le),Se<0&&(Se=L(K,ce[ue+1],pe,Le,ge)),Q=0;Q<=Se;Q++)et++,ge=(Ee+=pe.d)/Le;return{numberOfSegments:et,mediaTimeOfLastSignaledSegment:ge}}}}_.__dashjs_factory_name="TimelineSegmentsGetter";var F=Ce.Z.getClassFactory(_);Qe.Z=F},2011:function(Vt,Qe){"use strict";Qe.Z=function ne(){(function(Ce,G){if(!(Ce instanceof G))throw new TypeError("Cannot call a class as a function")})(this,ne),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(Vt,Qe){"use strict";Qe.Z=function ne(){(function(Ce,G){if(!(Ce instanceof G))throw new TypeError("Cannot call a class as a function")})(this,ne),this.schemeIdUri="",this.value=""}},1139:function(Vt,Qe,ne){"use strict";ne.d(Qe,{Z:function(){return Sh}});var Ce=ne(452),G=ne.n(Ce),E=ne(3393),_=ne(1553),F=ne(3860),V=ne(5595),D=ne(8512),j=ne(5448),B=ne(6398),T=ne(8825);function M(){var A,S,w,H,W,Y,k,X,le,ve,fe,ee,de,ae,He,Ne,Fe,he,Oe,me,Ve,P,oe,te,re=this.context,z=(0,V.Z)(re).getInstance();function xe(){ie(),ae=!1,ve=0,fe=0,Fe=0,P=!1,he=!1,oe=!1,Oe=NaN,Ne=NaN,k&&(z.off(D.Z.DATA_UPDATE_COMPLETED,_t,A),z.off(D.Z.LOADING_PROGRESS,Ln,A),z.off(D.Z.MANIFEST_UPDATED,jt,A),z.off(D.Z.STREAMS_COMPOSED,Ge,A),z.off(T.Z.PLAYBACK_ENDED,Xt,A),z.off(T.Z.STREAM_INITIALIZING,Ct,A),z.off(T.Z.REPRESENTATION_SWITCH,ct,A),z.off(T.Z.BUFFER_LEVEL_STATE_CHANGED,Wt,A),Lt(),k.removeEventListener("canplay",Yt),k.removeEventListener("canplaythrough",Kt),k.removeEventListener("play",Un),k.removeEventListener("waiting",Mn),k.removeEventListener("playing",er),k.removeEventListener("pause",Jn),k.removeEventListener("error",Dn),k.removeEventListener("seeking",At),k.removeEventListener("seeked",$t),k.removeEventListener("timeupdate",Ut),k.removeEventListener("progress",rn),k.removeEventListener("ratechange",mn),k.removeEventListener("loadedmetadata",Zn),k.removeEventListener("loadeddata",Bn),k.removeEventListener("stalled",Gn),k.removeEventListener("ended",Hn),k.removeEventListener("volumechange",nr)),le=null,k=null,ee=null,de=null}function be(){return parseFloat((ke(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)-nt()).toFixed(5))}function ke(We){var Mt=We||ee;return Mt.start+Mt.duration}function we(){var We=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ee&&k&&k.getElement()?(We&&de&&ft(nt()),k.play()):ae=!0}function ie(){ee&&k&&k.pause()}function Re(We){var Mt=arguments.length>1&&void 0!==arguments[1]&&arguments[1],gn=arguments.length>2&&void 0!==arguments[2]&&arguments[2],An=arguments.length>3&&void 0!==arguments[3]&&arguments[3];ee&&k&&k.getElement()&&We!==(isNaN(Oe)?k.getTime():Oe)&&((me=!0===gn)||(Oe=We),S.info("Requesting seek to time: "+We+(me?" (internal)":"")),de&&An&&ft(We),k.setCurrentTime(We,Mt))}function qe(){if(ee&&k&&de){var We=w&&w.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,Mt=W.getCurrentDVRInfo(We);return Mt&&Mt.range?Mt.range.end:0}}function ft(We){var Mt=new Date(X.getClientReferenceTime()),gn=Y.getRegularPeriods()[0],An=X.calcPresentationTimeFromWallTime(Mt,gn);ve=An-We}function nt(){return ee&&k?k.getTime():null}function dt(){return ee&&k?k.isPaused():null}function st(){return ee&&k?k.isSeeking():null}function Ft(){return ee&&k?k.isStalled():null}function Gt(){return ee&&k?k.getPlaybackRate():null}function Ot(){return ee&&k?k.getEnded():null}function kt(){return de}function wn(){var We=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!dt()&&de&&0!==k.getReadyState()&&!st()&&!P){We||(We=w.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO);var Mt=nt(),gn=function tt(We,Mt){var gn=W.getCurrentDVRInfo(Mt),An=gn?gn.range:null;return An?We>An.end?Math.max(An.end-ve,An.start):We>0&&We+.25<An.start&&Math.abs(We-An.start)<31536e4?he?Math.max(An.end-ve,An.start):An.start:We:NaN}(Mt,We);!isNaN(gn)&&gn!==Mt&&!st()&&(Ft()||Ve||1===k.getReadyState())&&(S.debug("UpdateCurrentTime: Seek to actual time: ".concat(gn," from currentTime: ").concat(Mt)),Re(gn,!1,!1))}}function Ye(){null===le&&(le=setInterval(function(){!function(){if(z.trigger(D.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:de,time:new Date}),kt()){var We=Date.now();(isNaN(Ne)||We>Ne+te.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(w.addDVRMetric(),dt()?(Mt=Date.now(),(!He||Mt>He+500)&&(He=Mt,Ut())):wn(),Ne=We)}var Mt}()},te.get().streaming.wallclockTimeUpdateInterval))}function Lt(){clearInterval(le),le=null}function _t(We){var Mt=Y.convertRepresentationToRepresentationInfo(We.currentRepresentation),gn=Mt?Mt.mediaInfo.streamInfo:null;null!==gn&&ee.id===gn.id&&(ee=gn)}function Yt(){z.trigger(D.Z.CAN_PLAY)}function Kt(){z.trigger(D.Z.CAN_PLAY_THROUGH)}function Wt(We){We.streamId===w.getActiveStreamInfo().id&&(Ve=We.state===F.Z.BUFFER_EMPTY,te.get().streaming.buffer.setStallState&&k.setStallState(We.mediaType,We.state===F.Z.BUFFER_EMPTY))}function Un(){S.info("Native video element event: play"),wn(),Ye(),z.trigger(D.Z.PLAYBACK_STARTED,{startTime:nt()})}function Mn(){S.info("Native video element event: waiting"),z.trigger(D.Z.PLAYBACK_WAITING,{playingTime:nt()})}function er(){S.info("Native video element event: playing"),me=!1,z.trigger(D.Z.PLAYBACK_PLAYING,{playingTime:nt()})}function Jn(){S.info("Native video element event: pause"),z.trigger(D.Z.PLAYBACK_PAUSED,{ended:Ot()})}function At(){if(!me){var We=nt();isNaN(Oe)||Oe===We||(We=Oe),Oe=NaN,S.info("Seeking to: "+We),Ye(),z.trigger(D.Z.PLAYBACK_SEEKING,{seekTime:We,streamId:ee.id})}}function $t(){S.info("Native video element event: seeked"),me=!1,z.trigger(D.Z.PLAYBACK_SEEKED)}function Ut(){ee&&z.trigger(D.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:be(),time:nt(),streamId:ee.id})}function rn(){z.trigger(D.Z.PLAYBACK_PROGRESS,{streamId:ee.id})}function mn(){var We=Gt();S.info("Native video element event: ratechange: ",We),z.trigger(D.Z.PLAYBACK_RATE_CHANGED,{playbackRate:We})}function Zn(){S.info("Native video element event: loadedmetadata"),z.trigger(D.Z.PLAYBACK_METADATA_LOADED),Ye()}function Bn(){S.info("Native video element event: loadeddata"),z.trigger(D.Z.PLAYBACK_LOADED_DATA)}function Hn(){S.info("Native video element event: ended"),ie(),Lt();var We=w?w.getActiveStreamInfo():null;We&&z.trigger(D.Z.PLAYBACK_ENDED,{isLast:We.isLast})}function nr(){z.trigger(D.Z.PLAYBACK_VOLUME_CHANGED)}function Xt(We){if(le&&We.isLast){S.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Mt=We.seekTime?We.seekTime:ke();k.setCurrentTime(Mt),ie(),Lt()}}function Dn(We){z.trigger(D.Z.PLAYBACK_ERROR,{error:(We.target||We.srcElement).error})}function Fn(){de=!1}function Ln(We){if(!1===We.stream&&he&&!isNaN(We.request.duration)){var Mt=1.2*We.request.duration;Mt>ve&&(S.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Mt.toFixed(2)),ve=Mt,fe=Mt)}}function Gn(We){z.trigger(D.Z.PLAYBACK_STALLED,{e:We})}function Ct(We){var Mt;(Mt=We.mediaInfo)&&Mt.supplementalProperties&&Mt.supplementalProperties[E.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&"true"===Mt.supplementalProperties[E.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value&&(S.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),he=!0)}function ct(We){var Mt=w.getActiveStreamInfo();We&&Mt&&We.currentRepresentation&&We.streamId&&We.streamId===Mt.id&&We.mediaType&&(We.mediaType===E.Z.VIDEO||We.mediaType===E.Z.AUDIO)&&(he=!We.currentRepresentation.availabilityTimeComplete)&&!oe&&(oe=!0)}function jt(){P=!0}function Ge(){P=!1}return A={initialize:function(We,Mt){ee=We,!0!==Mt&&(k.addEventListener("canplay",Yt),k.addEventListener("canplaythrough",Kt),k.addEventListener("play",Un),k.addEventListener("waiting",Mn),k.addEventListener("playing",er),k.addEventListener("pause",Jn),k.addEventListener("error",Dn),k.addEventListener("seeking",At),k.addEventListener("seeked",$t),k.addEventListener("timeupdate",Ut),k.addEventListener("progress",rn),k.addEventListener("ratechange",mn),k.addEventListener("loadedmetadata",Zn),k.addEventListener("loadeddata",Bn),k.addEventListener("stalled",Gn),k.addEventListener("ended",Hn),k.addEventListener("volumechange",nr),de=ee.manifestInfo.isDynamic,Ve=!1,me=!1,z.on(D.Z.DATA_UPDATE_COMPLETED,_t,A),z.on(D.Z.LOADING_PROGRESS,Ln,A),z.on(D.Z.MANIFEST_UPDATED,jt,A),z.on(D.Z.STREAMS_COMPOSED,Ge,A),z.on(T.Z.PLAYBACK_ENDED,Xt,A,{priority:V.Z.EVENT_PRIORITY_HIGH}),z.on(T.Z.STREAM_INITIALIZING,Ct,A),z.on(T.Z.REPRESENTATION_SWITCH,ct,A),z.on(T.Z.BUFFER_LEVEL_STATE_CHANGED,Wt,A),z.on(T.Z.DYNAMIC_TO_STATIC,Fn,A),ae&&(ae=!1,we()))},setConfig:function(We){We&&(We.streamController&&(w=We.streamController),We.serviceDescriptionController&&(H=We.serviceDescriptionController),We.dashMetrics&&(W=We.dashMetrics),We.adapter&&(Y=We.adapter),We.videoModel&&(k=We.videoModel),We.timelineConverter&&(X=We.timelineConverter),We.settings&&(te=We.settings))},getTimeToStreamEnd:be,getBufferLevel:function(){var We=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,Mt=null;return w.getActiveStreamProcessors().forEach(function(gn){if(!We||0===We.length||-1===We.indexOf(gn.getType())){var An=gn.getBufferLevel();Mt=null===Mt?An:Math.min(Mt,An)}}),Mt},getPlaybackStalled:function(){return Ve},getTime:nt,getLowLatencyModeEnabled:function(){return he},getInitialCatchupModeActivated:function(){return oe},getIsManifestUpdateInProgress:function(){return P},getPlaybackRate:Gt,getPlayedRanges:function(){return ee&&k?k.getPlayedRanges():null},getEnded:Ot,getIsDynamic:kt,getStreamController:function(){return w},computeAndSetLiveDelay:function(We,Mt){var gn,An,pr,ci=!isNaN(We)&&isFinite(We)?We:NaN,Bi=Y.getSuggestedPresentationDelay(),di=H.getServiceDescriptionSettings();return gn=isNaN(te.get().streaming.delay.liveDelay)?null===te.get().streaming.delay.liveDelayFragmentCount||isNaN(te.get().streaming.delay.liveDelayFragmentCount)||isNaN(ci)?di&&!isNaN(di.liveDelay)&&di.liveDelay>0?di.liveDelay:!0===te.get().streaming.delay.useSuggestedPresentationDelay&&null!==Bi&&!isNaN(Bi)&&Bi>0?Bi:isNaN(ci)?Mt&&!isNaN(Mt.minBufferTime)?4*Mt.minBufferTime:4*ee.manifestInfo.minBufferTime:4*ci:ci*te.get().streaming.delay.liveDelayFragmentCount:te.get().streaming.delay.liveDelay,null!==(pr=Y.getAvailabilityStartTime())&&(Fe=pr),An=Mt&&Mt.dvrWindowSize>0?Math.min(gn,Mt.dvrWindowSize):gn,ve=An,fe=An,An},getLiveDelay:function(){return ve},getOriginalLiveDelay:function(){return fe},getCurrentLiveLatency:function(){if(!de||isNaN(Fe))return NaN;var We=nt();if(isNaN(We)||0===We)return 0;var Mt=(new Date).getTime()+1e3*X.getClientTimeOffset();return Math.max(((Mt-Fe-1e3*We)/1e3).toFixed(3),0)},play:we,isPaused:dt,isStalled:Ft,pause:ie,isSeeking:st,getStreamEndTime:ke,seek:Re,seekToOriginalLive:function(){var We=arguments.length>0&&void 0!==arguments[0]&&arguments[0],Mt=arguments.length>1&&void 0!==arguments[1]&&arguments[1],gn=arguments.length>2&&void 0!==arguments[2]&&arguments[2],An=qe();0!==An&&Re(An-(ve=fe),We,Mt,gn)},seekToCurrentLive:function(){var We=arguments.length>0&&void 0!==arguments[0]&&arguments[0],Mt=arguments.length>1&&void 0!==arguments[1]&&arguments[1],gn=arguments.length>2&&void 0!==arguments[2]&&arguments[2],An=qe();0!==An&&Re(An-ve,We,Mt,gn)},reset:xe,updateCurrentTime:wn,getAvailabilityStartTime:function(){return Fe}},S=(0,B.Z)(re).getInstance().getLogger(A),xe(),A}M.__dashjs_factory_name="PlaybackController";var L=j.Z.getSingletonFactory(M),K=ne(3186),ce="loading",pe="executed";function Me(A){var S,w,H,W,Y=(A=A||{}).eventBus,k=A.events,X=A.dashMetrics,le=A.fragmentLoader,fe=A.streamInfo,ee=A.type;function de(P){var oe;return!!P&&(oe=!1,H.some(function(te){if(re=P,z=te,!isNaN(re.index)&&re.startTime===z.startTime&&re.adaptationIndex===z.adaptationIndex&&re.type===z.type||(xe=P,be=te,isNaN(xe.index)&&isNaN(be.index)&&xe.quality===be.quality)||function(xe,be){return xe.action===K.Z.ACTION_COMPLETE&&xe.action===be.action}(P,te))return oe=!0;var xe,be,re,z}),oe)}function ae(P){return isNaN(P.duration)?.25:Math.min(P.duration/8,.5)}function He(P){H=H.filter(function(oe){var te=ae(oe);return isNaN(oe.startTime)||void 0!==P&&oe.startTime>=P-te})}function Ne(P,oe){oe<=P+.5||(H=H.filter(function(te){var re=ae(te);return isNaN(te.startTime)||te.startTime>=oe-re||isNaN(te.duration)||te.startTime+te.duration<=P+re}))}function Fe(P,oe,te){for(var re=P.length-1;re>=0;re--){var z=P[re],xe=z.startTime,be=xe+z.duration;if(te=isNaN(te)?ae(z):te,!isNaN(xe)&&!isNaN(be)&&oe+te>=xe&&oe-te<be||isNaN(xe)&&isNaN(oe))return z}return null}function Ze(P,oe){X.addSchedulingInfo(P,oe),X.addRequestsQueue(P.mediaType,W,H)}function he(P){P.sender===le&&(W.splice(W.indexOf(P.request),1),P.response&&!P.error&&H.push(P.request),Ze(P.request,P.error?"failed":pe),Y.trigger(k.FRAGMENT_LOADING_COMPLETED,{request:P.request,response:P.response,error:P.error,sender:this},{streamId:fe.id,mediaType:ee}))}function Oe(P){P.sender===le&&Y.trigger(k.FRAGMENT_LOADING_PROGRESS,{request:P.request,response:P.response,error:P.error,sender:this},{streamId:fe.id,mediaType:ee})}function me(P){P.sender===le&&Y.trigger(k.FRAGMENT_LOADING_ABANDONED,{request:P.request},{streamId:fe.id,mediaType:ee})}function Ve(){H=[],W=[]}return S={getStreamId:function(){return fe.id},getType:function(){return ee},getRequests:function(P){var te=[];return(P?P.state instanceof Array?P.state:[P.state]:[]).forEach(function(re){var xe,be,z=function(xe){var be;switch(xe){case ce:be=W;break;case pe:be=H;break;default:be=[]}return be}(re);te=te.concat((xe=z,(be=P).hasOwnProperty("time")?[Fe(xe,be.time,be.threshold)]:xe.filter(function(ke){for(var we in be)if("state"!==we&&be.hasOwnProperty(we)&&ke[we]!=be[we])return!1;return!0})))}),te},isFragmentLoaded:de,isFragmentLoadedOrPending:function(P){var oe,te=!1,re=0;if(!(te=de(P)))for(re=0;re<W.length;re++)P.url===(oe=W[re]).url&&P.startTime===oe.startTime&&(te=!0);return te},removeExecutedRequestsBeforeTime:He,removeExecutedRequestsAfterTime:function(P){H=H.filter(function(oe){return isNaN(oe.startTime)||void 0!==P&&oe.startTime<P})},syncExecutedRequestsWithBufferedRange:function(P,oe){if(P&&0!==P.length){for(var te=0,re=0,z=P.length;re<z;re++)Ne(te,P.start(re)),te=P.end(re);oe>0&&Ne(te,oe)}else He()},abortRequests:function(){w.debug("abort requests"),le.abort(),W=[]},executeRequest:function(P){var oe;P.action===K.Z.ACTION_DOWNLOAD?(Ze(P,ce),W.push(P),Y.trigger(k.FRAGMENT_LOADING_STARTED,{request:oe=P},{streamId:fe.id,mediaType:ee}),le.load(oe)):w.warn("Unknown request action.")},reset:function(){Y.off(k.LOADING_COMPLETED,he,this),Y.off(k.LOADING_DATA_PROGRESS,Oe,this),Y.off(k.LOADING_ABANDONED,me,this),le&&le.reset(),Ve()},resetInitialSettings:Ve,addExecutedRequest:function(P){H.push(P)}},w=A.debug.getLogger(S),Ve(),Y.on(k.LOADING_COMPLETED,he,S),Y.on(k.LOADING_DATA_PROGRESS,Oe,S),Y.on(k.LOADING_ABANDONED,me,S),S}Me.__dashjs_factory_name="FragmentModel";var Q=j.Z.getClassFactory(Me);Q.FRAGMENT_MODEL_LOADING=ce,Q.FRAGMENT_MODEL_EXECUTED=pe,Q.FRAGMENT_MODEL_CANCELED="canceled",Q.FRAGMENT_MODEL_FAILED="failed",j.Z.updateClassFactory(Me.__dashjs_factory_name,Q);var Se=Q,Le=ne(5459);function x(A){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(A)}function Ee(A,S){return(Ee=Object.setPrototypeOf||function(w,H){return w.__proto__=H,w})(A,S)}function et(A){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(A)}var De=new(function(A){!function(Y,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(k&&k.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),k&&Ee(Y,k)}(W,A);var S,w,H=(S=W,w=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Y,k=et(S);if(w){var X=et(this).constructor;Y=Reflect.construct(k,arguments,X)}else Y=k.apply(this,arguments);return function ge(A,S){return!S||"object"!==x(S)&&"function"!=typeof S?function(w){if(void 0===w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(A):S}(this,Y)});function W(){var Y;return function(k,X){if(!(k instanceof X))throw new TypeError("Cannot call a class as a function")}(this,W),(Y=H.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,Y.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,Y.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,Y.SEGMENT_BASE_LOADER_ERROR_CODE=15,Y.TIME_SYNC_FAILED_ERROR_CODE=16,Y.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,Y.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,Y.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,Y.APPEND_ERROR_CODE=20,Y.REMOVE_ERROR_CODE=21,Y.DATA_UPDATE_FAILED_ERROR_CODE=22,Y.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,Y.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,Y.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,Y.DOWNLOAD_ERROR_ID_SIDX_CODE=26,Y.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,Y.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,Y.DOWNLOAD_ERROR_ID_XLINK_CODE=29,Y.MANIFEST_ERROR_ID_PARSE_CODE=31,Y.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,Y.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,Y.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,Y.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,Y.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",Y.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",Y.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",Y.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",Y.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",Y.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",Y.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",Y.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",Y.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",Y.APPEND_ERROR_MESSAGE="chunk is not defined",Y.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",Y.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",Y.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",Y.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",Y.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",Y.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",Y}return W}(ne(2230).Z)),ot=ne(1264),gt=ne(7855);function St(A){var S,w,H,W,Y,k,X=this.context,le=(0,ot.Z)(X).getInstance(),ve=A.textController,fe=A.eventBus,ee=[],de=[],ae=!1,He=A.mediaSource,Ne=null;function Fe(z){return new Promise(function(xe){re(function(){W.changeType&&W.changeType(z),xe()})})}function Ze(z){return W=ve.getTextSourceBuffer(z),Promise.resolve()}function he(){if("function"==typeof W.addEventListener)try{W.addEventListener("updateend",oe,!1),W.addEventListener("error",te,!1),W.addEventListener("abort",te,!1)}catch{k=setInterval(oe,50)}else k=setInterval(oe,50)}function Oe(z){return new Promise(function(xe){W&&le.get().streaming.buffer.useAppendWindow?re(function(){try{if(!W)return void xe();var be=He.duration,ke=0;z&&!isNaN(z.start)&&!isNaN(z.duration)&&isFinite(z.duration)&&(be=z.start+z.duration),z&&!isNaN(z.start)&&(ke=z.start),W.appendWindowEnd===be&&W.appendWindowStart===ke||(W.appendWindowStart=0,W.appendWindowEnd=be+.01,W.appendWindowStart=Math.max(ke-.1,0),H.debug("Updated append window for ".concat(Y.type,". Set start to ").concat(W.appendWindowStart," and end to ").concat(W.appendWindowEnd))),xe()}catch{H.warn("Failed to set append window"),xe()}}):xe()})}function me(z){return new Promise(function(xe){W?re(function(){try{W.timestampOffset===z||isNaN(z)||(W.timestampOffset=z,H.debug("Set MSE timestamp offset to ".concat(z))),xe()}catch{xe()}}):xe()})}function Ve(){if(!ae&&de.length>0){ae=!0;var z=de[0];de.splice(0,1);var xe=function(){ae=!1,de.length>0&&Ve.call(this),z&&z.data&&z.data.segmentType&&z.data.segmentType!==gt.w.INIT_SEGMENT_TYPE&&delete z.data.bytes,z.promise.resolve({chunk:z.data})};try{Ne=z.request,0===z.data.bytes.byteLength?xe.call(this):(W.appendBuffer?W.appendBuffer(z.data.bytes):W.append(z.data.bytes,z.data),re(xe.bind(this)))}catch(be){H.fatal('SourceBuffer append failed "'+be+'"'),de.length>0?Ve():ae=!1,delete z.data.bytes,z.promise.reject({chunk:z.data,error:new Le.Z(be.code,be.message)})}}}function P(){ee.length>0&&(W.updating||(ee.shift()(),P()))}function oe(){W.updating||P()}function te(z){fe.trigger(D.Z.SOURCE_BUFFER_ERROR,{error:z.target||{},lastRequestAppended:Ne},{streamId:Y.streamInfo.id,mediaType:w})}function re(z){ee.push(z),W.updating||P()}return S={getType:function(){return w},getAllBufferRanges:function(){try{return W.buffered}catch(z){return H.error("getAllBufferRanges exception: "+z.message),null}},getBuffer:function(){return W},append:function(z){var xe=this,be=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(ke,we){z?(de.push({data:z,promise:{resolve:ke,reject:we},request:be}),re(Ve.bind(xe))):we({chunk:z,error:new Le.Z(De.APPEND_ERROR_CODE,De.APPEND_ERROR_MESSAGE)})})},remove:function(z){return new Promise(function(xe,be){var ke=z.start,we=z.end;ke>=0&&we>ke?re(function(){try{W.remove(ke,we),re(function(){xe({from:ke,to:we,unintended:!1}),z.resolve&&z.resolve()})}catch(ie){be({from:ke,to:we,unintended:!1,error:new Le.Z(De.REMOVE_ERROR_CODE,De.REMOVE_ERROR_MESSAGE)}),z.reject&&z.reject(ie)}}):xe()})},abort:function(){return new Promise(function(z){try{de=[],"open"===He.readyState?re(function(){try{W&&W.abort(),z()}catch{z()}}):(W&&W.setTextTrack&&"ended"===He.readyState&&W.abort(),z())}catch{z()}})},reset:function(){if(W){try{ee=[],function(){try{"function"==typeof W.removeEventListener&&(W.removeEventListener("updateend",oe,!1),W.removeEventListener("error",te,!1),W.removeEventListener("abort",te,!1)),clearInterval(k)}catch(z){H.error(z)}}(),ae=!1,de=[],W.getClassName&&"TextSourceBuffer"===W.getClassName()||(H.debug("Removing sourcebuffer from media source"),He.removeSourceBuffer(W))}catch{}W=null}Ne=null},updateTimestampOffset:me,initializeForStreamSwitch:function(z,xe,be){w=(Y=z).type;var ke=Y.codec;W=be.getBuffer(),he();var we=[];return we.push(new Promise(function(ie){re(function(){var Re=W.appendWindowStart,qe=W.appendWindowEnd;W&&(W.abort(),W.appendWindowStart=Re,W.appendWindowEnd=qe),ie()})})),we.push(Oe(Y.streamInfo)),le.get().streaming.buffer.useChangeTypeForTrackSwitch&&we.push(Fe(ke)),xe&&void 0!==xe.MSETimeOffset&&we.push(me(xe.MSETimeOffset)),Promise.all(we)},initializeForFirstUse:function(z,xe,be){w=(Y=xe).type;var ke=Y.codec;try{if(ke.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return Ze(z);W=He.addSourceBuffer(ke),he();var we=[];return we.push(Oe(Y.streamInfo)),be&&void 0!==be.MSETimeOffset&&we.push(me(be.MSETimeOffset)),Promise.all(we)}catch(ie){return Y.type==E.Z.TEXT&&!Y.isFragmented||-1!==ke.indexOf('codecs="stpp')||-1!==ke.indexOf('codecs="vtt')||-1!==ke.indexOf("text/vtt")?Ze(z):Promise.reject(ie)}},updateAppendWindow:Oe,changeType:Fe},H=(0,B.Z)(X).getInstance().getLogger(S),S}St.__dashjs_factory_name="SourceBufferSink";var Je=j.Z.getClassFactory(St);function Pe(A){var S,w,H,Y=[],k=A;function X(le,ve){return Y=Y.filter(function(fe){return!((isNaN(ve)||fe.start<ve)&&(isNaN(le)||fe.end>le))}),Promise.resolve()}return S={getAllBufferRanges:function(){for(var le=[],ve=0;ve<Y.length;ve++){var fe=Y[ve];0===le.length||fe.start>le[le.length-1].end?le.push({start:fe.start,end:fe.end}):le[le.length-1].end=fe.end}var ee={start:function(de){return le[de].start},end:function(de){return le[de].end}};return Object.defineProperty(ee,"length",{get:function(){return le.length}}),ee},append:function(le){return"InitializationSegment"!==le.segmentType?(Y.push(le),Y.sort(function(ve,fe){return ve.start-fe.start}),H=null):H=le,w.debug("PreBufferSink appended chunk s: "+le.start+"; e: "+le.end),k&&k({chunk:le}),Promise.resolve()},remove:X,abort:function(){return Promise.resolve()},discharge:function(le,ve){var ee,de,fe=(ee=le,de=ve,Y.filter(function(ae){return(isNaN(de)||ae.start<de)&&(isNaN(ee)||ae.end>ee)}));return H&&(fe.push(H),H=null),X(le,ve),fe},reset:function(){Y=[],H=null,k=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(le){le()},getBuffer:function(){return this}},w=(0,B.Z)(this.context).getInstance().getLogger(S),S}Pe.__dashjs_factory_name="PreBufferSink";var Nt=j.Z.getClassFactory(Pe);function Ht(){var A={};return{save:function(S){var w=S.streamId,H=S.representationId;A[w]=A[w]||{},A[w][H]=S},extract:function(S,w){return A&&A[S]&&A[S][w]?A[S][w]:null},reset:function(){A={}}}}Ht.__dashjs_factory_name="InitCache";var $e=j.Z.getSingletonFactory(Ht),hn="BufferController";function zt(A){A=A||{};var S,w,H,W,Y,k,X,le,ve,fe,ee,de,ae,He,Ne,Fe,Ze,he,Oe,me,Ve,P=this.context,oe=(0,V.Z)(P).getInstance(),te=A.errHandler,re=A.fragmentModel,z=A.representationController,xe=A.adapter,be=A.textController,ke=A.abrController,we=A.playbackController,ie=A.streamInfo,Re=A.type,qe=A.settings;function ft(ct){var jt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(Ge,We){k=ct,ve&&jt&&"function"==typeof ve.discharge?(fe=ve,dt(jt).then(function(){Ge()}).catch(function(Mt){We(Mt)})):Ge()})}function nt(ct){return xe.convertRepresentationToRepresentationInfo(z.getRepresentationForQuality(ct))}function dt(ct){var jt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise(function(Ge,We){he&&ct?k?(ee=!1,function Ft(ct,jt){return new Promise(function(Ge,We){var gn,An,pr,ci,Mt=ke.getQualityFor(Re,ie.id);ve=Je(P).create({mediaSource:k,textController:be,eventBus:oe}),(gn=ct,An=jt,pr=Mt,ci=nt(pr),An&&An[Re]&&(Re===E.Z.VIDEO||Re===E.Z.AUDIO)?ve.initializeForStreamSwitch(gn,ci,An[Re]):ve.initializeForFirstUse(ie,gn,ci)).then(function(){return Zn(nt(Mt))}).then(function(){Ge(ve)}).catch(function(gn){w.fatal("Caught error on create SourceBuffer: "+gn),te.error(new Le.Z(De.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,De.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+Re)),We(gn)})})}(ct,jt).then(function(Mt){Ge(Mt)}).catch(function(Mt){We(Mt)})):(ee=!0,function st(){var ct=this;return new Promise(function(jt,Ge){var We=ke.getQualityFor(Re,ie.id);ve=Nt(P).create(tt.bind(ct)),Zn(nt(We)).then(function(){jt(ve)}).catch(function(){Ge()})})}().then(function(Mt){Ge(Mt)}).catch(function(Mt){We(Mt)})):Ge(null)})}function Gt(ct){qe.get().streaming.cacheInitSegments&&(w.info("Init fragment finished loading saving to",Re+"'s init cache"),he.save(ct.chunk)),w.debug("Append Init fragment",Re," with representationId:",ct.chunk.representationId," and quality:",ct.chunk.quality,", data size:",ct.chunk.bytes.byteLength),kt(ct.chunk)}function Ot(ct){kt(ct.chunk,ct.request)}function kt(ct){ve&&(ve.append(ct,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null).then(function(Ge){tt(Ge)}).catch(function(Ge){tt(Ge)}),ct.mediaInfo.type===E.Z.VIDEO&&Gn(D.Z.VIDEO_CHUNK_RECEIVED,{chunk:ct}))}function wn(ct){if(ct&&ct.length>0)for(var jt=0,Ge=ct.length;jt<Ge;jt++)w.debug("Buffered range: "+ct.start(jt)+" - "+ct.end(jt)+", currentTime = ",we.getTime())}function tt(ct){if(ct.error)return 22===ct.error.code&&function(){if(Ze=!0,Y=.8*Dn(),w.warn("Quota exceeded, Critical Buffer: "+Y),Y>0){var We=Math.max(.2*Y,1),Mt=Y-We,gn=Math.min(qe.get().streaming.buffer.bufferTimeAtTopQuality,.9*Mt),An=Math.min(qe.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Mt),pr={streaming:{buffer:{bufferToKeep:parseFloat(We.toFixed(5)),bufferTimeAtTopQuality:parseFloat(gn.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(An.toFixed(5))}}};qe.update(pr)}}(),void(22!==ct.error.code&&Ln()||(w.warn("Clearing playback buffer to overcome quota exceed situation"),Gn(D.Z.QUOTA_EXCEEDED,{criticalBufferLevel:Y,quotaExceededTime:ct.chunk.start}),Ut($t())));if(ve&&(Un(),Ze=!1,(He=ct.chunk)&&He.endFragment)){He&&!isNaN(He.index)&&(X=Math.max(He.index,X),Mn());var jt=ve.getAllBufferRanges();He.segmentType===gt.w.MEDIA_SEGMENT_TYPE&&(wn(jt),_t(),function(){if(!isNaN(Ve)&&!ee)if(Re===E.Z.AUDIO||Re===E.Z.VIDEO){var We=we.getTime(),Mt=Wt(We,0),gn=Wt(Ve,0);if(Mt&&gn&&Mt.start===gn.start)Ve=NaN;else{var An=z.getCurrentRepresentation().segmentDuration,pr=Wt(Ve,An);pr&&(qe.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(We-Ve)>An?Ve<=pr.end&&we.seek(Math.max(Ve,pr.start),!1,!0):We<pr.start&&we.seek(pr.start,!1,!0))}}else Ve=NaN}());var Ge=!1;de&&(de.indexOf(He)>0&&(Ge=!0),de=null),He&&!Ge&&Gn(D.Z.BYTES_APPENDED_END_FRAGMENT,{quality:He.quality,startTime:He.start,index:He.index,bufferedRanges:jt,segmentType:He.segmentType,mediaType:Re})}}function Ye(){return new Promise(function(ct,jt){var Ge=Lt();if(!Ge||0===Ge.length)return _t(),void ct();Ut(Ge).then(function(){ct()}).catch(function(We){jt(We)})})}function Lt(ct){var jt=[],Ge=ve.getAllBufferRanges();if(!Ge||0===Ge.length)return jt;if(!ct&&0!==ct||isNaN(ct))jt.push({start:Ge.start(0),end:Ge.end(Ge.length-1)+.5});else{var We=function(gn,An){var pr=qe.get().streaming.buffer.bufferToKeep,ci=An.start(0);if(gn-ci>pr){var Bi=Math.max(0,gn-pr),di=re.getRequests({state:Se.FRAGMENT_MODEL_EXECUTED,time:gn,threshold:.01})[0];if(di&&(Bi=Math.min(di.startTime,Bi)),Bi>0)return{start:ci,end:Bi}}return null}(ct,Ge),Mt=function(gn,An){var pr=An.end(An.length-1)+.5,ci=Fn(gn),Bi=ie.manifestInfo.duration>=qe.get().streaming.buffer.longFormContentDurationThreshold?qe.get().streaming.buffer.bufferTimeAtTopQualityLongForm:qe.get().streaming.buffer.bufferTimeAtTopQuality,di=isNaN(ci)?gn:Math.min(ci,gn+Bi);if(di>=An.end(An.length-1))return null;var Si=re.getRequests({state:Se.FRAGMENT_MODEL_EXECUTED,time:gn,threshold:.01})[0];if(Si&&(di=Math.max(Si.startTime+Si.duration,di)),qe.get().streaming.buffer.avoidCurrentTimeRangePruning)for(var Li=0;Li<An.length;Li++)if(An.start(Li)<=gn&&gn<=An.end(Li)&&An.start(Li)<=di&&di<=An.end(Li)){var mi=di;di=Li+1<An.length?An.start(Li+1):An.end(Li)+1,w.debug("Buffered range ["+An.start(Li)+", "+An.end(Li)+"] overlaps with targetTime "+gn+" and range to be pruned ["+mi+", "+pr+"], using ["+di+", "+pr+"] instead"+(di<pr?"":" (no actual pruning)"));break}return di<An.end(An.length-1)?{start:di,end:pr}:null}(ct,Ge);We&&jt.push(We),Mt&&jt.push(Mt)}return jt}function _t(){(!me||Re===E.Z.TEXT&&be.isTextEnabled())&&Un()}function Yt(){er()}function Kt(){er(),Ve=NaN}function Wt(ct,jt){if(!ve)return null;var Ge,We,Mt=ve.getAllBufferRanges(),gn=0,An=0,pr=null,ci=null,Bi=0,di=isNaN(jt)?.15:jt;if(null!=Mt){for(We=0,Ge=Mt.length;We<Ge;We++)if(gn=Mt.start(We),An=Mt.end(We),null===pr)Bi=Math.abs(gn-ct),(ct>=gn&&ct<An||Bi<=di)&&(pr=gn,ci=An);else{if(!((Bi=gn-ci)<=di))break;ci=An}if(null!==pr)return{start:pr,end:ci}}return null}function Un(){if(we){var ct=we.getTime()||0;ee&&(ct=isNaN(Ve)?0:Ve);var jt=qe.get().streaming.gaps.jumpGaps&&!isNaN(qe.get().streaming.gaps.smallGapLimit)?qe.get().streaming.gaps.smallGapLimit:NaN;W=Math.max((Ge=ct,We=jt,qe.get().streaming.gaps.jumpGaps&&(We=qe.get().streaming.gaps.smallGapLimit),null===(Mt=Wt(Ge,We))?0:Mt.end-Ge),0),Gn(D.Z.BUFFER_LEVEL_UPDATED,{mediaType:Re,bufferLevel:W}),er()}var Ge,We,Mt}function Mn(){var ct=X>=le-1,jt=we.getTimeToStreamEnd(ie)-W<1e-5;!ct&&!jt||H||(Xt(!0),w.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(ie.id," and type ").concat(Re)))}function er(){Re!==E.Z.AUDIO&&Re!==E.Z.VIDEO||((!we.getLowLatencyModeEnabled()&&W<qe.get().streaming.buffer.stallThreshold||0===W)&&!H?Jn(F.Z.BUFFER_EMPTY):(H||W>=qe.get().streaming.buffer.stallThreshold||we.getLowLatencyModeEnabled()&&W>0)&&Jn(F.Z.BUFFER_LOADED))}function Jn(ct){ae===ct||ct===F.Z.BUFFER_EMPTY&&0===we.getTime()||Re===E.Z.TEXT&&!be.isTextEnabled()||(ae=ct,Gn(D.Z.BUFFER_LEVEL_STATE_CHANGED,{state:ct}),Gn(ct===F.Z.BUFFER_LOADED?D.Z.BUFFER_LOADED:D.Z.BUFFER_EMPTY),w.debug(ct===F.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function At(){ve&&Re!==E.Z.TEXT&&(H||Ut($t()))}function $t(){var ct=[],jt=ve.getAllBufferRanges();if(!jt||0===jt.length)return ct;var Ge=we.getTime(),We=Math.max(0,Ge-qe.get().streaming.buffer.bufferToKeep),Mt=re.getRequests({state:Se.FRAGMENT_MODEL_EXECUTED,time:Ge,threshold:.01})[0];if(Mt)We=Math.min(Mt.startTime,We);else if(0===Ge&&we.getIsDynamic())return[];if(jt.start(0)<=We){for(var gn={start:0,end:We},An=0;An<jt.length&&jt.end(An)<=We;An++)gn.end=jt.end(An);gn.start<gn.end&&ct.push(gn)}return ct}function Ut(ct){return new Promise(function(jt,Ge){if(ct&&ve&&0!==ct.length){var We=[];ct.forEach(function(Mt){var gn;We.push((gn=Mt,new Promise(function(An,pr){gn.resolve=An,gn.reject=pr,Oe.push(gn)})))}),Fe||rn(),Promise.all(We).then(function(){jt()}).catch(function(Mt){Ge(Mt)})}else jt()})}function rn(){try{if(0===Oe.length||!ve)return w.debug("Nothing to prune, halt pruning"),Oe=[],void(Fe=!1);var ct=ve.getBuffer();if(!ct||!ct.buffered||0===ct.buffered.length)return w.debug("SourceBuffer is empty (or does not exist), halt pruning"),Oe=[],void(Fe=!1);var jt=Oe.shift();w.debug("".concat(Re,": Removing buffer from: ").concat(jt.start," to ").concat(jt.end)),Fe=!0,we.getTime()<jt.end&&Xt(!1),ve.remove(jt).then(function(Ge){mn(Ge)}).catch(function(Ge){mn(Ge)})}catch{Fe=!1}}function mn(ct){w.debug("onRemoved buffer from:",ct.from,"to",ct.to),ve&&(wn(ve.getAllBufferRanges()),0===Oe.length&&(Fe=!1,Un()),ct.unintended&&(w.warn("Detected unintended removal from:",ct.from,"to",ct.to,"setting streamprocessor time to",ct.from),Gn(D.Z.SEEK_TARGET,{time:ct.from})),Fe?rn():(me?me=!1:Un(),Gn(D.Z.BUFFER_CLEARED,{from:ct.from,to:ct.to,unintended:ct.unintended,hasEnoughSpaceToAppend:Ln(),quotaExceeded:Ze})))}function Zn(ct){return new Promise(function(jt){ct&&void 0!==ct.MSETimeOffset&&ve&&ve.updateTimestampOffset?ve.updateTimestampOffset(ct.MSETimeOffset).then(function(){jt()}).catch(function(){jt()}):jt()})}function Bn(){return ve&&!H?ve.updateAppendWindow(ie):Promise.resolve()}function Hn(){++Ne*(qe.get().streaming.wallclockTimeUpdateInterval/1e3)>=qe.get().streaming.buffer.bufferPruningInterval&&(Ne=0,At())}function nr(){er()}function Xt(ct){(H=ct)?Gn(D.Z.BUFFERING_COMPLETED):le=Number.POSITIVE_INFINITY}function Dn(){try{var ct,jt,Ge=ve.getAllBufferRanges(),We=0;if(!Ge)return We;for(jt=0,ct=Ge.length;jt<ct;jt++)We+=Ge.end(jt)-Ge.start(jt);return We}catch{return 0}}function Fn(ct){try{var jt=ct,Ge=ve.getAllBufferRanges();if(!Ge||0===Ge.length)return NaN;for(var We=0;jt===ct&&We<Ge.length;){var Mt=Ge.start(We),gn=Ge.end(We);jt>=Mt&&jt<=gn&&(jt=gn),We+=1}return jt===ct?NaN:jt}catch{}}function Ln(){var ct=Dn();return isNaN(ct)||ct<Y}function Gn(ct,jt){oe.trigger(ct,jt||{},{streamId:ie.id,mediaType:Re})}function Ct(ct,jt){if(Y=Number.POSITIVE_INFINITY,ae=void 0,le=Number.POSITIVE_INFINITY,X=0,He=null,H=!1,Fe=!1,Ze=!1,W=0,Ne=0,Oe=[],Ve=NaN,ee=!1,ve){var Ge=ve;ve=null,ct||jt||Ge.abort().then(function(){Ge.reset(jt),Ge=null})}me=!1}return S={initialize:function(ct){ft(ct),oe.on(D.Z.INIT_FRAGMENT_LOADED,Gt,S),oe.on(D.Z.MEDIA_FRAGMENT_LOADED,Ot,S),oe.on(D.Z.WALLCLOCK_TIME_UPDATED,Hn,S),oe.on(T.Z.PLAYBACK_PLAYING,Kt,S),oe.on(T.Z.PLAYBACK_PROGRESS,_t,S),oe.on(T.Z.PLAYBACK_TIME_UPDATED,_t,S),oe.on(T.Z.PLAYBACK_RATE_CHANGED,nr,S),oe.on(T.Z.PLAYBACK_STALLED,Yt,S)},getStreamId:function(){return ie.id},getType:function(){return Re},getBufferControllerType:function(){return hn},createBufferSink:dt,dischargePreBuffer:function(){if(ve&&fe&&"function"==typeof fe.discharge){var ct=fe.getAllBufferRanges();if(ct.length>0){for(var jt="Beginning "+Re+"PreBuffer discharge, adding buffer for:",Ge=0;Ge<ct.length;Ge++)jt+=" start: "+ct.start(Ge)+", end: "+ct.end(Ge)+";";w.debug(jt)}else w.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");de=[];for(var We=fe.discharge(),Mt=null,gn=0;gn<We.length;gn++){var An=We[gn];if(An.segmentType!==gt.w.INIT_SEGMENT_TYPE){var pr=he.extract(An.streamId,An.representationId);pr&&Mt!==pr&&(de.push(pr),ve.append(pr),Mt=pr)}de.push(An),ve.append(An)}fe.reset(),fe=null}},getBuffer:function(){return ve},getBufferLevel:function(){return W},getRangeAt:Wt,hasBufferAtTime:function(ct){try{var jt=ve.getAllBufferRanges();if(!jt||0===jt.length)return!1;for(var Ge=0;Ge<jt.length;){var We=jt.start(Ge),Mt=jt.end(Ge);if(ct>=We&&ct<=Mt)return!0;Ge+=1}return!1}catch(gn){return w.error(gn),!1}},pruneBuffer:At,setMediaSource:ft,getMediaSource:function(){return k},appendInitSegmentFromCache:function(ct){var jt=he.extract(ie.id,ct);return!!jt&&(w.info("Append Init fragment",Re," with representationId:",jt.representationId," and quality:",jt.quality,", data size:",jt.bytes.byteLength),kt(jt),!0)},getIsBufferingCompleted:function(){return H},setIsBufferingCompleted:Xt,getIsPruningInProgress:function(){return Fe},reset:function(ct,jt){oe.off(D.Z.INIT_FRAGMENT_LOADED,Gt,this),oe.off(D.Z.MEDIA_FRAGMENT_LOADED,Ot,this),oe.off(D.Z.WALLCLOCK_TIME_UPDATED,Hn,this),oe.off(T.Z.PLAYBACK_PLAYING,Kt,this),oe.off(T.Z.PLAYBACK_PROGRESS,_t,this),oe.off(T.Z.PLAYBACK_TIME_UPDATED,_t,this),oe.off(T.Z.PLAYBACK_RATE_CHANGED,nr,this),oe.off(T.Z.PLAYBACK_STALLED,Yt,this),Ct(ct,jt)},prepareForPlaybackSeek:function(){return H&&Xt(!1),ve.abort()},prepareForReplacementTrackSwitch:function(ct){return new Promise(function(jt,Ge){ve.abort().then(function(){return Bn()}).then(function(){return qe.get().streaming.buffer.useChangeTypeForTrackSwitch?ve.changeType(ct):Promise.resolve()}).then(function(){return Ye()}).then(function(){Xt(!1),jt()}).catch(function(We){Ge(We)})})},prepareForNonReplacementTrackSwitch:function(ct){return new Promise(function(jt,Ge){Bn().then(function(){return qe.get().streaming.buffer.useChangeTypeForTrackSwitch?ve.changeType(ct):Promise.resolve()}).then(function(){jt()}).catch(function(We){Ge(We)})})},prepareForForceReplacementQualitySwitch:function(ct){return new Promise(function(jt,Ge){ve.abort().then(function(){return Bn()}).then(function(){return Ye()}).then(function(){return Zn(ct)}).then(function(){Xt(!1),jt()}).catch(function(We){Ge(We)})})},updateAppendWindow:Bn,getAllRangesWithSafetyFactor:Lt,getContinuousBufferTimeForTargetTime:Fn,clearBuffers:Ut,pruneAllSafely:Ye,updateBufferTimestampOffset:Zn,setSeekTarget:function(ct){Ve=ct},segmentRequestingCompleted:function(ct){isNaN(ct)||(le=ct,Mn())}},w=(0,B.Z)(P).getInstance().getLogger(S),he=$e(P).getInstance(),Ct(),S}zt.__dashjs_factory_name=hn;var mt=j.Z.getClassFactory(zt),It="NotFragmentedTextBufferController";function je(A){A=A||{};var S,w,H,W,Y,k,X=this.context,le=(0,V.Z)(X).getInstance(),ve=A.textController,fe=A.errHandler,ee=A.streamInfo,de=A.type;function ae(Fe){W=Fe}function He(Fe){w!==Fe&&(w=Fe)&&le.trigger(D.Z.BUFFERING_COMPLETED,{},{streamId:ee.id,mediaType:de})}function Ne(Fe){Fe.chunk.bytes&&!w&&(k.save(Fe.chunk),Y.append(Fe.chunk),He(!0))}return S={initialize:function(Fe){ae(Fe)},getStreamId:function(){return ee.id},getType:function(){return de},getBufferControllerType:function(){return It},createBufferSink:function(Fe){return new Promise(function(Ze,he){try{(Y=Je(X).create({mediaSource:W,textController:ve,eventBus:le})).initializeForFirstUse(ee,Fe),H||(Y.getBuffer()&&"function"==typeof Y.getBuffer().initialize&&Y.getBuffer().initialize(),H=!0),Ze(Y)}catch(Oe){fe.error(new Le.Z(De.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,De.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+de)),he(Oe)}})},dischargePreBuffer:function(){},getBuffer:function(){return Y},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:ae,getMediaSource:function(){return W},appendInitSegmentFromCache:function(Fe){return null!==k.extract(ee.id,Fe)},getIsBufferingCompleted:function(){return w},setIsBufferingCompleted:He,getIsPruningInProgress:function(){return!1},reset:function(Fe){le.off(D.Z.INIT_FRAGMENT_LOADED,Ne,S),!Fe&&Y&&(Y.abort(),Y.reset(),Y=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return w=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},H=!1,W=null,w=!1,k=$e(X).getInstance(),le.on(D.Z.INIT_FRAGMENT_LOADED,Ne,S),S}je.__dashjs_factory_name=It;var ze=j.Z.getClassFactory(je);function bt(A){A=A||{};var S,w,H,W,Y,k,X,le,ve,fe,ee,de,ae,He=this.context,Ne=(0,V.Z)(He).getInstance(),Fe=A.dashMetrics,Ze=A.mediaPlayerModel,he=A.fragmentModel,Oe=A.abrController,me=A.playbackController,Ve=A.textController,P=A.type,oe=A.bufferController,te=A.representationController,re=A.settings;function z(){de=!0}function xe(){de=!1}function be(Ft){if(!oe.getIsBufferingCompleted()){ke();var Gt=isNaN(Ft)?0:Ft;Y=setTimeout(we,Gt)}}function ke(){Y&&(clearTimeout(Y),Y=null)}function we(){try{if(function(){try{return P===E.Z.TEXT&&!Ve.isTextEnabled()||me.isPaused()&&(!me.getStreamController().getInitialPlayback()||!me.getStreamController().getAutoPlay())&&!re.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}}())return void ke();if(function(){try{return!!de&&te.getCurrentRepresentationInfo()&&(isNaN(ve)||fe||(kt=Oe.getMaxAllowedIndexFor(P,w.id),!(!isNaN(le)&&le==kt||(H.info("Top quality "+P+" index has changed from "+le+" to "+kt),le=kt,0)))||(wn=te.getCurrentRepresentationInfo(),!P||!wn||Fe.getCurrentBufferLevel(P)<ie()))}catch{return!1}var wn,kt}()){var Ft=!1;ae&&(Ft=Oe.checkPlaybackQuality(P,w.id)),Ft||(Gt=te.getCurrentRepresentationInfo(),ee||Gt.quality!==ve||fe?(fe?(H.debug("Switch track for "+P+", representation id = "+Gt.id),fe=!1):H.debug("Quality has changed, get init request for representationid = "+Gt.id),Ne.trigger(D.Z.INIT_FRAGMENT_NEEDED,{representationId:Gt.id,sender:S},{streamId:w.id,mediaType:P}),ae=!1,ee=!1):(H.debug("Media segment needed for ".concat(P," and stream id ").concat(w.id)),Ne.trigger(D.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:w.id,mediaType:P}),ae=!0))}else be(me.getLowLatencyModeEnabled()?re.get().streaming.scheduling.lowLatencyTimeout:re.get().streaming.scheduling.defaultTimeout)}catch{be(me.getLowLatencyModeEnabled()?re.get().streaming.scheduling.lowLatencyTimeout:re.get().streaming.scheduling.defaultTimeout)}var Gt}function ie(){var Ft=NaN,Gt=te.getCurrentRepresentationInfo();return P&&Gt&&(Ft=P===E.Z.TEXT?function(){try{if(Ve.isTextEnabled()){var Ot=te.getCurrentRepresentationInfo();if(isNaN(Ot.fragmentDuration)){var kt=Fe.getCurrentSchedulingInfo(F.Z.SCHEDULING_INFO);return kt?kt.duration:0}return Ot.fragmentDuration}return 0}catch{return 0}}():P===E.Z.AUDIO&&k?function(){try{var Ot=Fe.getCurrentBufferLevel(E.Z.VIDEO),kt=te.getCurrentRepresentationInfo();return isNaN(kt.fragmentDuration)?Ot+1:Math.max(Ot+1,kt.fragmentDuration)}catch{return 0}}():function(){try{var Ot=te.getCurrentRepresentationInfo().mediaInfo.streamInfo;return Oe.isPlayingAtTopQuality(Ot)?Ot.manifestInfo.duration>=re.get().streaming.buffer.longFormContentDurationThreshold?re.get().streaming.buffer.bufferTimeAtTopQualityLongForm:re.get().streaming.buffer.bufferTimeAtTopQuality:Ze.getStableBufferTime()}catch{return Ze.getStableBufferTime()}}()),Ft}function Re(){qe(!0)}function qe(Ft){if(me&&he){var Gt=he.getRequests({state:Se.FRAGMENT_MODEL_EXECUTED,time:me.getTime(),threshold:0})[0];Gt&&me.getTime()>=Gt.startTime&&((!X.mediaInfo||Gt.mediaInfo.type===X.mediaInfo.type&&Gt.mediaInfo.index!==X.mediaInfo.index)&&Ft&&Ne.trigger(D.Z.TRACK_CHANGE_RENDERED,{mediaType:P,oldMediaInfo:X.mediaInfo,newMediaInfo:Gt.mediaInfo,streamId:w.id}),Gt.quality===X.quality&&Gt.adaptationIndex===X.adaptationIndex||!Ft||(H.debug("Quality change rendered for streamId ".concat(w.id," and type ").concat(P)),Ne.trigger(D.Z.QUALITY_CHANGE_RENDERED,{mediaType:P,oldQuality:X.quality,newQuality:Gt.quality,streamId:w.id})),X={mediaInfo:Gt.mediaInfo,quality:Gt.quality,adaptationIndex:Gt.adaptationIndex})}}function ft(){he.abortRequests(),ke()}function nt(){re.get().streaming.scheduling.scheduleWhilePaused||be()}function dt(Ft){Fe.updatePlayListTraceMetrics({playbackspeed:Ft.playbackRate.toString()})}function st(){ae=!0,W=0,ve=NaN,X={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},le=NaN,fe=!1,ee=!1,de=!0}return S={initialize:function(Ft){k=Ft,Ne.on(D.Z.URL_RESOLUTION_FAILED,ft,S),Ne.on(T.Z.PLAYBACK_STARTED,nt,S),Ne.on(T.Z.PLAYBACK_RATE_CHANGED,dt,S),Ne.on(T.Z.PLAYBACK_TIME_UPDATED,Re,S),Ne.on(T.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,z,S),Ne.on(T.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,xe,S)},getType:function(){return P},getStreamId:function(){return w.id},setTimeToLoadDelay:function(Ft){W=Ft},getTimeToLoadDelay:function(){return W},setSwitchTrack:function(Ft){fe=Ft},getSwitchTrack:function(){return fe},startScheduleTimer:be,clearScheduleTimer:ke,reset:function(){Ne.off(D.Z.URL_RESOLUTION_FAILED,ft,S),Ne.off(T.Z.PLAYBACK_STARTED,nt,S),Ne.off(T.Z.PLAYBACK_RATE_CHANGED,dt,S),Ne.off(T.Z.PLAYBACK_TIME_UPDATED,Re,S),Ne.off(T.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,z,S),Ne.off(T.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,xe,S),ke(),qe(!1),st(),w=null},getBufferTarget:ie,getPlaybackController:function(){return me},setCheckPlaybackQuality:function(Ft){ae=Ft},setInitSegmentRequired:function(Ft){ee=Ft},setLastInitializedQuality:function(Ft){ve=Ft}},H=(0,B.Z)(He).getInstance().getLogger(S),st(),w=A.streamInfo,S}bt.__dashjs_factory_name="ScheduleController";var N=j.Z.getClassFactory(bt),I=ne(7387);function Z(A){var S,w,H,W,Y,k,X=(A=A||{}).eventBus,le=A.events,ve=A.abrController,fe=A.dashMetrics,ee=A.playbackController,de=A.timelineConverter,ae=A.type,He=A.streamInfo,Ne=A.dashConstants,Fe=A.segmentsController,Ze=A.isDynamic,he=A.adapter;function Oe(){return ae}function me(){return H}function Ve(){return k}function P(){w=null,H=!0,W=[],Y=null}function oe(ke){return new Promise(function(we,ie){var Re=ke.hasInitialization(),qe=ke.hasSegments(),ft=[];ft.push(Fe.updateInitData(ke,Re)),ft.push(Fe.updateSegmentData(ke,qe)),Promise.all(ft).then(function(nt){var dt,Ft;nt[0]&&!nt[0].error&&(ke=(Ft=nt[0])&&!Ft.error&&Ft.representation?Ft.representation:ke),nt[1]&&!nt[1].error&&(ke=function(st,Ft){if(Ft&&!Ft.error){var Gt,Ot,kt,wn,tt=Ft.segments,Ye=[],Lt=0;for(Gt=0,Ot=tt?tt.length:0;Gt<Ot;Gt++)(wn=(0,I.TJ)(de,Ze,st,(kt=tt[Gt]).startTime,kt.duration,kt.timescale,kt.media,kt.mediaRange,Lt))&&(Ye.push(wn),wn=null,Lt++);return Ye.length>0&&(st.segments=Ye),st}}(ke,nt[1])),(dt=ke).mediaFinishedInformation=Fe.getMediaFinishedInformation(dt),function(st){if(me()){var Ft,Ot=fe.getCurrentManifestUpdate(),kt=!1;if(Ot){for(var wn=0;wn<Ot.representationInfo.length;wn++)if((Ft=Ot.representationInfo[wn]).index===st.index&&Ft.mediaType===Oe()){kt=!0;break}kt||fe.addManifestUpdateRepresentationInfo(st,Oe())}if(function(){for(var Ye=0,Lt=W.length;Ye<Lt;Ye++){var _t=W[Ye].segmentInfoType;if(!W[Ye].hasInitialization()||(_t===Ne.SEGMENT_BASE||_t===Ne.BASE_URL)&&!W[Ye].segments)return!1}return!0}()){ve.setPlaybackQuality(ae,He,W.indexOf(k));var tt=fe.getCurrentDVRInfo(ae);tt&&fe.updateManifestUpdateInfo({latency:tt.range.end-ee.getTime()}),fe.getCurrentRepresentationSwitch(Ve().adaptation.type)||te(),z()}}}(ke),we()}).catch(function(nt){ie(nt)})})}function te(){!function(){if(!(ve&&fe&&ee&&de))throw new Error(E.Z.MISSING_CONFIG_ERROR)}();var ke=new Date,we=Ve(),ie=1e3*ee.getTime();we&&fe.addRepresentationSwitch(we.adaptation.type,ke,ie,we.id),X.trigger(T.Z.REPRESENTATION_SWITCH,{mediaType:ae,streamId:He.id,currentRepresentation:we,numberOfRepresentations:W.length},{streamId:He.id,mediaType:ae})}function re(ke){return null==ke||ke>=W.length?null:W[ke]}function z(ke){H=!1,X.trigger(le.DATA_UPDATE_COMPLETED,{data:w,currentRepresentation:k,error:ke},{streamId:He.id,mediaType:ae})}function xe(ke){Y=he.convertRepresentationToRepresentationInfo(k=ke)}function be(ke){if(ke.newDuration){var we=Ve();we&&we.adaptation.period&&(we.adaptation.period.duration=ke.newDuration)}}return S={getStreamId:function(){return He.id},getType:Oe,getData:function(){return w},isUpdating:me,updateData:function(ke,we,ie,Re,qe){return new Promise(function(ft,nt){if(H=!0,W=we,w=ke,xe(re(qe)),ie!==E.Z.VIDEO&&ie!==E.Z.AUDIO&&(ie!==E.Z.TEXT||!Re))return z(),void ft();for(var dt=[],st=0,Ft=W.length;st<Ft;st++)dt.push(oe(W[st]));Promise.all(dt).then(function(){xe(re(qe)),ft()}).catch(function(Ot){nt(Ot)})})},getCurrentRepresentation:Ve,getCurrentRepresentationInfo:function(){return Y},getRepresentationForQuality:re,prepareQualityChange:function(ke){xe(re(ke)),te()},reset:function(){X.off(T.Z.MANIFEST_VALIDITY_CHANGED,be,S),P()}},P(),X.on(T.Z.MANIFEST_VALIDITY_CHANGED,be,S),S}Z.__dashjs_factory_name="RepresentationController";var q=j.Z.getClassFactory(Z),Ie=ne(3106),_e=ne(9326),rt=ne(7473),xt=ne(2594);function at(A,S){if(!(A instanceof S))throw new TypeError("Cannot call a class as a function")}var ut=function A(){at(this,A),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};ut.INITIAL_PLAYOUT_START_REASON="initial_playout",ut.SEEK_START_REASON="seek",ut.RESUME_FROM_PAUSE_START_REASON="resume",ut.METRICS_COLLECTION_START_REASON="metrics_collection_start";var it=function A(){at(this,A),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};it.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",it.REBUFFERING_REASON="rebuffering",it.USER_REQUEST_STOP_REASON="user_request",it.END_OF_PERIOD_STOP_REASON="end_of_period",it.END_OF_CONTENT_STOP_REASON="end_of_content",it.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",it.FAILURE_STOP_REASON="failure";var vt=ne(7802);function Bt(){return{ntpToUTC:function(A){var S=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(S.getTime()+A).getTime()}}}Bt.__dashjs_factory_name="TimeUtils";var un=j.Z.getSingletonFactory(Bt);function Zt(A){A=A||{};var S,w,H,W,Y,k,X,le,ve,fe,ee,de,ae,He,Ne,Fe=this.context,Ze=(0,V.Z)(Fe).getInstance(),he=A.streamInfo,Oe=A.type,me=A.errHandler,Ve=A.mimeType,P=A.timelineConverter,oe=A.adapter,te=A.manifestModel,re=A.mediaPlayerModel,z=A.fragmentModel,xe=A.abrController,be=A.playbackController,ke=A.mediaController,we=A.textController,ie=A.dashMetrics,Re=A.settings,qe=A.boxParser,ft=A.segmentBlacklistController;function nt(){return he.id}function dt(){return Oe}function st(){return oe.getIsTextTrack(le.getData())}function Ft(){Y=[],W=null,He=0,ve=!1,fe=!1,ee=!1,Ne=null}function Gt(Ct){return!isNaN(Ct)&&!isNaN(he.duration)&&isFinite(he.duration)&&Ct>=he.start+he.duration}function Ot(Ct){var ct=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Ct.sender)if(be.getIsManifestUpdateInProgress())Lt();else if((!st()||we.isTextEnabled())&&k&&Ct.representationId&&!k.appendInitSegmentFromCache(Ct.representationId)){var jt=le.getCurrentRepresentation();if(0===jt.range)return void kt();var Ge=de?de.getInitRequest(W,jt):null;Ge?z.executeRequest(Ge):ct&&(X.setInitSegmentRequired(!0),Lt())}}function kt(Ct){var ct=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(be.getIsManifestUpdateInProgress()||k.getIsPruningInProgress())Lt();else{var jt=function Ye(){var Ct,ct=Bn();if(isNaN(He)||dt()===E.Z.TEXT&&!we.isTextEnabled())return null;if(de){var jt=le&&ct?le.getRepresentationForQuality(ct.quality):null;Ct=ve?de.getSegmentRequestForTime(W,jt,He):fe?de.repeatSegmentRequest(W,jt):de.getNextSegmentRequest(W,jt)}return Ct}();jt?(ve=!1,fe=!1,function wn(Ct){var ct,jt;isNaN(Ct.startTime+Ct.duration)||(He=Ct.startTime+Ct.duration),Ct.delayLoadingTime=(new Date).getTime()+X.getTimeToLoadDelay(),X.setTimeToLoadDelay(0),jt=(ct=Ct).url,ct.range&&(jt=jt.concat("_",ct.range)),ft.contains(jt)?(w.warn("Fragment request url ".concat(Ct.url," for stream id ").concat(he.id," and media type ").concat(Oe," is on the ignore list and will be skipped")),Lt()):(w.debug("Next fragment request url for stream id ".concat(he.id," and media type ").concat(Oe," is ").concat(Ct.url)),z.executeRequest(Ct))}(jt)):function tt(Ct){var ct,jt=le.getCurrentRepresentation();if(!Re.get().streaming.gaps.enableSeekFix||!ve&&0!==be.getTime()||(H?H&&jt.segmentInfoType===_.Z.SEGMENT_TIMELINE&&(ct=de.getValidTimeAheadOfTargetTime(He,W,jt,Re.get().streaming.gaps.threshold)):ct=de.getValidTimeAheadOfTargetTime(He,W,jt,Re.get().streaming.gaps.threshold),isNaN(ct)||ct===He)){if(de.isLastSegmentRequested(jt,He)){var Ge=de.getCurrentIndex();return w.debug("Segment requesting for stream ".concat(he.id," has finished")),Ze.trigger(D.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:Ge},{streamId:he.id,mediaType:Oe}),k.segmentRequestingCompleted(Ge),void X.clearScheduleTimer()}Ct&&Lt()}else be.isSeeking()||0===be.getTime()?(w.warn("Adjusting playback time ".concat(ct," because of gap in the manifest. Seeking by ").concat(ct-He)),be.seek(ct,!1,!1)):(w.warn("Adjusting buffering time ".concat(ct," because of gap in the manifest. Adjusting time by ").concat(ct-He)),Gn(ct),Ct&&Lt())}(ct)}}function Lt(){X.startScheduleTimer(be.getLowLatencyModeEnabled()?Re.get().streaming.scheduling.lowLatencyTimeout:Re.get().streaming.scheduling.defaultTimeout)}function _t(Ct){Ct.error||k.getIsBufferingCompleted()||k.updateBufferTimestampOffset(Ct.currentRepresentation)}function Yt(Ct){ie.addBufferState(Oe,Ct.state,X.getBufferTarget()),Ct.state!==F.Z.BUFFER_EMPTY||be.isSeeking()||(w.info("Buffer is empty! Stalling!"),ie.pushPlayListTraceMetrics(new Date,it.REBUFFERING_REASON))}function Kt(Ct){z.syncExecutedRequestsWithBufferedRange(k.getBuffer().getAllBufferRanges(),he.duration),Ct.quotaExceeded&&Ct.from>be.getTime()&&Gn(Ct.from),Ct.hasEnoughSpaceToAppend&&Ct.quotaExceeded&&X.startScheduleTimer()}function Wt(Ct){if(Ct&&Ct.lastRequestAppended&&Ct.lastRequestAppended.url){var ct=Ct.lastRequestAppended.url;Ct.lastRequestAppended.range&&(ct=ct.concat("_",Ct.lastRequestAppended.range)),w.warn("Blacklisting segment with url ".concat(ct)),ft.add(ct)}}function Un(Ct){w.debug("Appended bytes for ".concat(Ct.mediaType," and stream id ").concat(Ct.streamId)),Ct.segmentType===gt.w.INIT_SEGMENT_TYPE&&(X.setLastInitializedQuality(Ct.quality),w.info("["+Oe+"] lastInitializedRepresentationInfo changed to "+Ct.quality)),Ne?Mn(Ne):X.startScheduleTimer(0)}function Mn(Ct){var ct=z.getRequests({state:Se.FRAGMENT_MODEL_LOADING});if(ct&&ct.length>0)return w.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(Ne=Ct);k.updateBufferTimestampOffset(Ct).then(function(){X.setCheckPlaybackQuality(!1),W.segmentAlignment||W.subSegmentAlignment?X.startScheduleTimer():Fn(),Ne=null,ee=!1}).catch(function(){Ne=null,ee=!1})}function er(Ct){w.info("onFragmentLoadingAbandoned request: "+Ct.request.url+" has been aborted"),be.isSeeking()||X.getSwitchTrack()||ee||(w.info("onFragmentLoadingAbandoned request: "+Ct.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Ct.request&&Ct.request.isInitializationRequest()?X.setInitSegmentRequired(!0):Gn(Ct.request.startTime+Ct.request.duration/2),X.startScheduleTimer(0))}function Jn(Ct){var ct;w.info("OnFragmentLoadingCompleted for stream id "+he.id+" and media type "+Oe+" - Url:",Ct.request?Ct.request.url:"undefined",Ct.request.range?", Range:"+Ct.request.range:""),st()&&X.startScheduleTimer(0),Ct.error&&Ct.request.serviceLocation&&(ct=Ct,w.info("Fragment loading completed with an error"),ct&&ct.request&&ct.request.type&&(ct.request.type===gt.w.INIT_SEGMENT_TYPE?Ot({representationId:ct.request.representationId,sender:{}},!1):ct.request.type===gt.w.MEDIA_SEGMENT_TYPE&&(Gn(ct.request.startTime+ct.request.duration/2),kt({},!1))))}function At(){Gn(be.getTime()),Zn().startScheduleTimer()}function $t(Ct){var ct=Ct.currentTrackInfo;if(ct){var jt=Y.find(function(Ge){return Ge.index===ct.index&&Ge.lang===ct.lang});jt&&mn(jt).then(function(){k.setIsBufferingCompleted(!1),Gn(be.getTime()),X.setInitSegmentRequired(!0),X.startScheduleTimer()})}}function Ut(Ct){Gn(Ct.quotaExceededTime),X.clearScheduleTimer()}function rn(){return k?k.getBuffer():null}function mn(Ct){Ct===W||Ct&&W&&Ct.type!==W.type||(W=Ct);var ct=oe.getRealAdaptation(he,W),jt=oe.getVoRepresentations(W);if(le){var Ge,We=le.getData(),Mt=xe.getMaxAllowedIndexFor(Oe,he.id),gn=xe.getMinAllowedIndexFor(Oe,he.id),An=null;return null!==We&&We.id===ct.id||Oe===E.Z.TEXT?Ge=xe.getQualityFor(Oe,he.id):(An=xe.getThroughputHistory().getAverageThroughput(Oe,H)||xe.getInitialBitrateFor(Oe,he.id),Ge=xe.getQualityForBitrate(W,An,he.id)),void 0!==gn&&Ge<gn&&(Ge=gn),Ge>Mt&&(Ge=Mt),le.updateData(ct,jt,Oe,W.isFragmented,Ge)}return Promise.resolve()}function Zn(){return X}function Bn(Ct){var ct;return void 0!==Ct?((0,Ie.SE)(Ct),ct=le?le.getRepresentationForQuality(Ct):null):ct=le?le.getCurrentRepresentation():null,oe.convertRepresentationToRepresentationInfo(ct)}function Hn(){return!!k&&k.getIsBufferingCompleted()}function nr(Ct){if(Re.get().streaming.enableManifestTimescaleMismatchFix){var ct=Ct.chunk,jt=ct.bytes,Ge=Bn(ct.quality),We=le&&Ge?le.getRepresentationForQuality(Ge.quality):null;Ge&&We&&(We.timescale=qe.getMediaTimescaleFromMoov(jt))}}function Xt(Ct){var Si,Li,mi,vs,ct=Ct.chunk,jt=ct.bytes,Ge=ct.quality,We=Bn(Ge),Mt=le&&We?le.getRepresentationForQuality(We.quality):null;if(We&&Mt){var gn;if(Re.get().streaming.parseInbandPrft&&Ct.request.type===gt.w.MEDIA_SEGMENT_TYPE){var An=(Si=gn=gn||qe.parse(jt),Li=Mt.timescale,mi=Si.getBoxes("prft"),vs=[],mi.forEach(function(Qa){vs.push(function($o,ba){var To="unknown";switch($o.flags){case 0:To=_.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:To=_.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:To=_.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var Ja=1e3*$o.ntp_timestamp_sec+$o.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:To,ntpTimestamp:Ja=un(Fe).getInstance().ntpToUTC(Ja),mediaTime:$o.media_time/ba}}(Qa,Li))}),vs);An&&An.length&&Ze.trigger(T.Z.INBAND_PRFT,{data:An},{streamId:he.id,mediaType:Oe})}var pr=oe.getEventsFor(We.mediaInfo,null,he),ci=oe.getEventsFor(We,Mt,he);if(pr&&pr.length>0||ci&&ci.length>0){var Bi=z.getRequests({state:Se.FRAGMENT_MODEL_EXECUTED,quality:Ge,index:ct.index})[0],di=function(Si,Li,mi,vs){try{for(var Qa={},$o=[],ba=mi.concat(vs),To=0,Ja=ba.length;To<Ja;To++)Qa[ba[To].schemeIdUri+"/"+ba[To].value]=ba[To];var Ba=Si.getBoxes("emsg");if(!Ba||0===Ba.length)return $o;for(var ao=Si.getBox("sidx"),Ol=!ao||isNaN(ao.earliest_presentation_time)||isNaN(ao.timescale)?Li&&!isNaN(Li.mediaStartTime)?Li.mediaStartTime:0:ao.earliest_presentation_time/ao.timescale,Us=Math.max(Ol,0),Bs=le.getCurrentRepresentation(),Aa=0,es=Ba.length;Aa<es;Aa++){var ys=oe.getEvent(Ba[Aa],Qa,Us,Bs);ys&&$o.push(ys)}return $o}catch{return[]}}(gn=gn||qe.parse(jt),Bi,pr,ci);Ze.trigger(D.Z.INBAND_EVENTS,{events:di},{streamId:he.id})}}}function Dn(){var Ct=be.getTime();Re.get().streaming.buffer.flushBufferAtTrackSwitch&&be.seek(Ct+.001,!1,!0),Gn(Ct),k.setSeekTarget(Ct),X.startScheduleTimer()}function Fn(){var Ct=be.getTime(),ct=k.getContinuousBufferTimeForTargetTime(Ct);Gn(isNaN(ct)?Ct:ct),X.startScheduleTimer()}function Ln(Ct){Ct&&!isNaN(Ct.time)&&(Gn(Ct.time),k.setSeekTarget(Ct.time))}function Gn(Ct){He=Ct,ve=!0}return S={initialize:function(Ct,ct,jt){var Ge;ae=(0,vt.Z)(Fe).create({events:D.Z,eventBus:Ze,streamInfo:he,timelineConverter:P,dashConstants:_.Z,segmentBaseController:A.segmentBaseController,type:Oe}),(de=(0,_e.Z)(Fe).create({streamInfo:he,type:Oe,timelineConverter:P,dashMetrics:ie,mediaPlayerModel:re,baseURLController:A.baseURLController,errHandler:me,segmentsController:ae,settings:Re,boxParser:qe,events:D.Z,eventBus:Ze,errors:De,debug:(0,B.Z)(Fe).getInstance(),requestModifier:(0,rt.Z)(Fe).getInstance(),dashConstants:_.Z,constants:E.Z,urlUtils:(0,xt.Z)(Fe).getInstance()})).initialize(H=he.manifestInfo.isDynamic),xe.registerStreamType(Oe,S),le=q(Fe).create({streamInfo:he,type:Oe,abrController:xe,dashMetrics:ie,playbackController:be,timelineConverter:P,dashConstants:_.Z,events:D.Z,eventBus:Ze,errors:De,isDynamic:H,adapter:oe,segmentsController:ae}),(k=(Ge=Oe)?Ge!==E.Z.TEXT||jt?mt(Fe).create({streamInfo:he,type:Ge,mediaPlayerModel:re,manifestModel:te,fragmentModel:z,errHandler:me,mediaController:ke,representationController:le,adapter:oe,textController:we,abrController:xe,playbackController:be,settings:Re}):ze(Fe).create({streamInfo:he,type:Ge,mimeType:Ve,fragmentModel:z,textController:we,errHandler:me,settings:Re}):(me.error(new Le.Z(De.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,De.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null))&&k.initialize(Ct),(X=N(Fe).create({streamInfo:he,type:Oe,mimeType:Ve,adapter:oe,dashMetrics:ie,mediaPlayerModel:re,fragmentModel:z,abrController:xe,playbackController:be,textController:we,mediaController:ke,bufferController:k,representationController:le,settings:Re})).initialize(ct),He=0,ve=!1,fe=!1},getStreamId:nt,getType:dt,isUpdating:function(){return!!le&&le.isUpdating()},getBufferController:function(){return k},dischargePreBuffer:function(){k.dischargePreBuffer()},getFragmentModel:function(){return z},getScheduleController:Zn,getRepresentationController:function(){return le},getRepresentationInfo:Bn,getBufferLevel:function(){return k?k.getBufferLevel():0},isBufferingCompleted:Hn,createBufferSinks:function(Ct){var ct=rn();return ct?Promise.resolve(ct):k?k.createBufferSink(W,Ct):Promise.resolve(null)},updateStreamInfo:function(Ct){return he=Ct,Hn()?Promise.resolve():k.updateAppendWindow()},getStreamInfo:function(){return he},selectMediaInfo:mn,clearMediaInfoArray:function(){Y=[]},addMediaInfo:function(Ct){-1===Y.indexOf(Ct)&&Y.push(Ct)},prepareTrackSwitch:function(){return new Promise(function(Ct){w.debug("Preparing track switch for type ".concat(Oe));var ct=Oe===E.Z.TEXT||Re.get().streaming.trackSwitchMode[Oe]===E.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&be.getTimeToStreamEnd(he)>Re.get().streaming.buffer.stallThreshold;if(k.getIsBufferingCompleted()&&!ct)return k.prepareForNonReplacementTrackSwitch(W.codec).then(function(){Ze.trigger(D.Z.BUFFERING_COMPLETED,{},{streamId:he.id,mediaType:Oe})}).catch(function(){Ze.trigger(D.Z.BUFFERING_COMPLETED,{},{streamId:he.id,mediaType:Oe})}),void Ct();X.clearScheduleTimer(),X.setSwitchTrack(!0),ct?(Ze.trigger(D.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Oe,streamId:he.id},{mediaType:Oe,streamId:he.id}),z.abortRequests(),k.prepareForReplacementTrackSwitch(W.codec).then(function(){var jt=Bn();return k.updateBufferTimestampOffset(jt)}).then(function(){Dn(),Ct()}).catch(function(){Dn(),Ct()})):k.prepareForNonReplacementTrackSwitch(W.codec).then(function(){Fn(),Ct()}).catch(function(){Fn(),Ct()})})},prepareQualityChange:function(Ct){Ne&&w.warn("Canceling queued representation switch to ".concat(Ne.quality," for ").concat(Oe)),w.debug("Preparing quality switch for type ".concat(Oe));var ct=Ct.newQuality;ee=!0,X.clearScheduleTimer(),le.prepareQualityChange(ct);var Ge,jt=Bn(ct);Ct.reason&&Ct.reason.forceReplace?(Ge=jt,z.abortRequests(),Ze.trigger(D.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Oe,streamId:he.id},{mediaType:Oe,streamId:he.id}),X.setCheckPlaybackQuality(!1),k.prepareForForceReplacementQualitySwitch(Ge).then(function(){Dn(),Ne=null,ee=!1}).catch(function(){Dn(),Ne=null,ee=!1})):Ct&&Ct.reason&&Ct.reason.forceAbandon?function(Ge){k.updateBufferTimestampOffset(Ge).then(function(){z.abortRequests(),fe=!0,X.setCheckPlaybackQuality(!1),X.startScheduleTimer(),ee=!1,Ne=null}).catch(function(){Ne=null,ee=!1})}(jt):Re.get().streaming.buffer.fastSwitchEnabled?function(Ge){var We=be.getTime(),Mt=1.5*(isNaN(Ge.fragmentDuration)?1:Ge.fragmentDuration),gn=z.getRequests({state:Se.FRAGMENT_MODEL_EXECUTED,time:We+Mt,threshold:0})[0];if(gn&&!st()){var An=k.getBufferLevel(),pr=xe.getAbandonmentStateFor(he.id,Oe);gn.quality<Ge.quality&&An>=Mt&&pr!==F.Z.ABANDON_LOAD?k.updateBufferTimestampOffset(Ge).then(function(){z.abortRequests(),Gn(We+Mt),X.setCheckPlaybackQuality(!1),X.startScheduleTimer(),ee=!1}).catch(function(){ee=!1}):Mn(Ge)}else Mn(Ge)}(jt):Mn(jt),ie.pushPlayListTraceMetrics(new Date,it.REPRESENTATION_SWITCH_STOP_REASON),ie.createPlaylistTraceMetrics(jt.id,1e3*be.getTime(),be.getPlaybackRate())},getMediaInfo:function(){return W},getMediaSource:function(){return k.getMediaSource()},setMediaSource:function(Ct){return k.setMediaSource(Ct,W)},getBuffer:rn,setExplicitBufferingTime:Gn,finalisePlayList:function(Ct,ct){ie.pushPlayListTraceMetrics(Ct,ct)},probeNextRequest:function(){var Ct=Bn(),ct=le&&Ct?le.getRepresentationForQuality(Ct.quality):null;return de.getNextSegmentRequestIdempotent(W,ct)},prepareInnerPeriodPlaybackSeeking:function(Ct){return new Promise(function(ct){if(k.hasBufferAtTime(Ct.seekTime))return k.pruneBuffer(),Gt(k.getContinuousBufferTimeForTargetTime(Ct.seekTime))&&k.setIsBufferingCompleted(!0),void ct();X.clearScheduleTimer(),z.abortRequests(),k.prepareForPlaybackSeek().then(function(){var jt=k.getAllRangesWithSafetyFactor(Ct.seekTime);return k.clearBuffers(jt)}).then(function(){var jt=k.getContinuousBufferTimeForTargetTime(Ct.seekTime);if(Gt(jt))k.setIsBufferingCompleted(!0),ct();else{var Ge=isNaN(jt)?Ct.seekTime:jt;Gn(Ge),k.setSeekTarget(Ge);var We=[];We.push(k.updateAppendWindow());var Mt=Bn();We.push(k.updateBufferTimestampOffset(Mt)),Promise.all(We).then(function(){X.setInitSegmentRequired(!0),X.setCheckPlaybackQuality(!1),X.startScheduleTimer(),ct()})}}).catch(function(jt){w.error(jt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(Ct,ct){try{X.clearScheduleTimer(),z.abortRequests(),k.prepareForPlaybackSeek().then(function(){return k.pruneAllSafely()}).then(function(){Ct()})}catch(jt){ct(jt)}})},reset:function(Ct,ct){de&&de.reset(),k&&(k.reset(Ct,ct),k=null),X&&(X.reset(),X=null),le&&(le.reset(),le=null),ae&&(ae=null),xe&&xe.unRegisterStreamType(nt(),Oe),Ze.off(D.Z.DATA_UPDATE_COMPLETED,_t,S),Ze.off(D.Z.INIT_FRAGMENT_NEEDED,Ot,S),Ze.off(D.Z.MEDIA_FRAGMENT_NEEDED,kt,S),Ze.off(D.Z.INIT_FRAGMENT_LOADED,nr,S),Ze.off(D.Z.MEDIA_FRAGMENT_LOADED,Xt,S),Ze.off(D.Z.BUFFER_LEVEL_STATE_CHANGED,Yt,S),Ze.off(D.Z.BUFFER_CLEARED,Kt,S),Ze.off(D.Z.SEEK_TARGET,Ln,S),Ze.off(D.Z.FRAGMENT_LOADING_ABANDONED,er,S),Ze.off(D.Z.FRAGMENT_LOADING_COMPLETED,Jn,S),Ze.off(D.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,At,S),Ze.off(D.Z.SET_NON_FRAGMENTED_TEXT,$t,S),Ze.off(D.Z.QUOTA_EXCEEDED,Ut,S),Ze.off(D.Z.SOURCE_BUFFER_ERROR,Wt,S),Ze.off(D.Z.BYTES_APPENDED_END_FRAGMENT,Un,S),Ft(),Oe=null,he=null}},w=(0,B.Z)(Fe).getInstance().getLogger(S),Ft(),Ze.on(D.Z.DATA_UPDATE_COMPLETED,_t,S,{priority:V.Z.EVENT_PRIORITY_HIGH}),Ze.on(D.Z.INIT_FRAGMENT_NEEDED,Ot,S),Ze.on(D.Z.MEDIA_FRAGMENT_NEEDED,kt,S),Ze.on(D.Z.INIT_FRAGMENT_LOADED,nr,S),Ze.on(D.Z.MEDIA_FRAGMENT_LOADED,Xt,S),Ze.on(D.Z.BUFFER_LEVEL_STATE_CHANGED,Yt,S),Ze.on(D.Z.BUFFER_CLEARED,Kt,S),Ze.on(D.Z.SEEK_TARGET,Ln,S),Ze.on(D.Z.FRAGMENT_LOADING_ABANDONED,er,S),Ze.on(D.Z.FRAGMENT_LOADING_COMPLETED,Jn,S),Ze.on(D.Z.QUOTA_EXCEEDED,Ut,S),Ze.on(D.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,At,S),Ze.on(D.Z.SET_NON_FRAGMENTED_TEXT,$t,S),Ze.on(D.Z.SOURCE_BUFFER_ERROR,Wt,S),Ze.on(D.Z.BYTES_APPENDED_END_FRAGMENT,Un,S),S}Zt.__dashjs_factory_name="StreamProcessor";var kn=j.Z.getClassFactory(Zt),vn=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},xn=ne(9032);function Tn(A,S){if(A){if("string"==typeof A)return sr(A,S);var w=Object.prototype.toString.call(A).slice(8,-1);return"Object"===w&&A.constructor&&(w=A.constructor.name),"Map"===w||"Set"===w?Array.from(A):"Arguments"===w||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?sr(A,S):void 0}}function sr(A,S){(null==S||S>A.length)&&(S=A.length);for(var w=0,H=new Array(S);w<S;w++)H[w]=A[w];return H}function Or(A){var w,W=(A=A||{}).requestModifier,Y=A.lowLatencyThroughputModel,k=A.boxParser,X=(0,ot.Z)(this.context).getInstance();function le(ee){var de,ae=new Date,He=ee.request,Ne=new Headers;if(He.range&&Ne.append("Range","bytes="+He.range),ee.headers)for(var Fe in ee.headers){var Ze=ee.headers[Fe];Ze&&Ne.append(Fe,Ze)}He.requestStartDate||(He.requestStartDate=ae),W&&W.modifyRequestHeader&&W.modifyRequestHeader({setRequestHeader:function(P,oe){Ne.append(P,oe)}},{url:ee.url}),"function"==typeof window.AbortController&&(de=new AbortController,ee.abortController=de,de.signal.onabort=ee.onabort);var he={method:ee.method,headers:Ne,credentials:ee.withCredentials?"include":void 0,signal:de?de.signal:void 0},Oe=X.get().streaming.abr.fetchThroughputCalculationMode,me=Date.now(),Ve=0;new Promise(function(P){if(Oe===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&Y&&(Ve=Y.getThroughputCapacityDelayMS(He,1e3*w.getCurrentBufferLevel(He.mediaType))))return setTimeout(P,Ve);P()}).then(function(){var P=Date.now();fetch(ee.url,he).then(function(oe){ee.response||(ee.response={}),ee.response.status=oe.status,ee.response.statusText=oe.statusText,ee.response.responseURL=oe.url,oe.ok||ee.onerror();var te,re="",z=function(_t,Yt){var Kt;if(typeof Symbol>"u"||null==_t[Symbol.iterator]){if(Array.isArray(_t)||(Kt=Tn(_t))){Kt&&(_t=Kt);var Wt=0,Un=function(){};return{s:Un,n:function(){return Wt>=_t.length?{done:!0}:{done:!1,value:_t[Wt++]}},e:function(At){throw At},f:Un}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Mn,er=!0,Jn=!1;return{s:function(){Kt=_t[Symbol.iterator]()},n:function(){var At=Kt.next();return er=At.done,At},e:function(At){Jn=!0,Mn=At},f:function(){try{er||null==Kt.return||Kt.return()}finally{if(Jn)throw Mn}}}}(oe.headers.keys());try{for(z.s();!(te=z.n()).done;){var xe=te.value;re+=xe+": "+oe.headers.get(xe)+"\r\n"}}catch(_t){z.e(_t)}finally{z.f()}if(ee.response.responseHeaders=re,!oe.body)return oe.arrayBuffer().then(function(_t){ee.response.response=_t,ee.progress({loaded:_t.byteLength,total:_t.byteLength,stream:!1}),ee.onload(),ee.onend()});var be,ke,we,Re=parseInt(oe.headers.get("Content-Length"),10),qe=0,ft=!1,nt=new Uint8Array,dt=0;if(Oe===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&Y){var st=P,Ft=0,Gt=(2,function(_t){if(Array.isArray(_t))return _t}(we=oe.body.tee())||function(_t,Yt){if(typeof Symbol<"u"&&Symbol.iterator in Object(_t)){var Kt=[],Wt=!0,Un=!1,Mn=void 0;try{for(var er,Jn=_t[Symbol.iterator]();!(Wt=(er=Jn.next()).done)&&(Kt.push(er.value),2!==Kt.length);Wt=!0);}catch(At){Un=!0,Mn=At}finally{try{Wt||null==Jn.return||Jn.return()}finally{if(Un)throw Mn}}return Kt}}(we)||Tn(we,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),kt=Gt[1];be=Gt[0].getReader(),ke=[],be.read().then(function _t(Yt){var Kt=Yt.value,Wt=Yt.done;if(Ft=Date.now(),Kt&&Kt.length){var Un=Ft-st,Mn=Kt.length;ke.push({chunkDownloadTimeRelativeMS:Ft-P,chunkDownloadDurationMS:Un,chunkBytes:Mn,kbps:Math.round(8*Mn/(Un/1e3)),bufferLevel:w.getCurrentBufferLevel(He.mediaType)})}if(Wt){var er=Ft-P,Jn=ke.reduce(function(At,$t){return At+$t.chunkBytes},0);return Y.addMeasurement(He,er,ke,me,Ve,re),void ee.progress({loaded:Jn,total:Jn,lengthComputable:!0,time:Y.getEstimatedDownloadDurationMS(He),stream:!0})}return st=Date.now(),be.read().then(_t)}),ee.reader=kt.getReader()}else ee.reader=oe.body.getReader();var wn=[],tt=[],Ye=[],Lt=!0;ve(ee,function _t(Yt){var Kt=Yt.value;if(Yt.done){if(nt){if(Oe!==E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Wt=null,Un=null;Oe===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Wt=function(At,$t){try{var Ut,rn;Ut=At.filter(function(Dn,Fn){return Fn<At.length-1}),rn=$t.filter(function(Dn,Fn){return Fn<$t.length-1});var mn=[];if(Ut.length>1){for(var Zn=0,Bn=0,Hn=0;Hn<Ut.length;Hn++)if(Ut[Hn]&&rn[Hn]){var nr=rn[Hn].ts-Ut[Hn].ts;if(nr>1)mn.push(8*rn[Hn].bytes/nr),Bn=0;else{0===Bn&&(Bn=Ut[Hn].ts,Zn=0);var Xt=rn[Hn].ts-Bn;Xt>1?(mn.push(8*(Zn+=rn[Hn].bytes)/Xt),Bn=0):Zn+=rn[Hn].bytes}}if(mn.length>0)return mn.reduce(function(Dn,Fn){return Dn+Fn},0)/mn.length}return null}catch{return null}}(tt,Ye))&&(Un=8*qe/Wt):Oe===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(Un=fe(wn,qe)),ee.progress({loaded:qe,total:isNaN(Re)?qe:Re,lengthComputable:!0,time:Un,stream:!0})}ee.response.response=nt.buffer}return ee.onload(),void ee.onend()}if(Kt&&Kt.length>0){nt=function(At,$t){if(0===At.length)return $t;var Ut=new Uint8Array(At.length+$t.length);return Ut.set(At),Ut.set($t,At.length),Ut}(nt,Kt),qe+=Kt.length,wn.push({ts:Date.now(),bytes:Kt.length}),Oe===E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&Lt&&k.findLastTopIsoBoxCompleted(["moof"],nt,dt).found&&(Lt=!1,tt.push({ts:performance.now(),bytes:Kt.length}));var Mn=k.findLastTopIsoBoxCompleted(["moov","mdat"],nt,dt);if(Mn.found){var er,Jn=Mn.lastCompletedOffset+Mn.size;Oe!==E.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||Lt||(Lt=!0,Ye.push({ts:performance.now(),bytes:nt.length})),Jn===nt.length?(er=nt,nt=new Uint8Array):(er=new Uint8Array(nt.subarray(0,Jn)),nt=nt.subarray(Jn)),ee.progress({data:er.buffer,lengthComputable:!1,noTrace:!0}),dt=0}else dt=Mn.lastCompletedOffset,ft||(ee.progress({lengthComputable:!1,noTrace:!0}),ft=!0)}ve(ee,_t)})}).catch(function(oe){ee.onerror&&ee.onerror(oe)})})}function ve(ee,de){ee.reader.read().then(de).catch(function(ae){ee.onerror&&200===ee.response.status&&ee.onerror(ae)})}function fe(ee,de){try{if((ee=ee.filter(function(Ne){return Ne.bytes>de/4/ee.length})).length>1){var ae=0,He=(ee[ee.length-1].ts-ee[0].ts)/ee.length;return ee.forEach(function(Ne,Fe){var Ze=ee[Fe+1];if(Ze){var he=Ze.ts-Ne.ts;ae+=he<He?he:0}}),ae}return null}catch{return null}}return{load:function(ee){W&&W.modifyRequest?(0,rt.k)(ee,W).then(function(){return le(ee)}):le(ee)},abort:function(ee){if(ee.abortController)ee.abortController.abort();else if(ee.reader)try{ee.reader.cancel(),ee.onabort()}catch{}},calculateDownloadedTime:fe,setup:function(ee){w=ee.dashMetrics}}}Or.__dashjs_factory_name="FetchLoader";var ei=j.Z.getClassFactory(Or),ti=ne(1180);var zi=function(){function A(){(function(H,W){if(!(H instanceof W))throw new TypeError("Cannot call a class as a function")})(this,A),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var w;return(w=[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==_.Z.BASE_URL&&this.segmentInfoType!==_.Z.SEGMENT_BASE&&!this.indexRange}}])&&function yi(A,S){for(var w=0;w<S.length;w++){var H=S[w];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(A,H.key,H)}}(A.prototype,w),A}(),ni=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.period=null,this.index=-1,this.type=null},xo=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};xo.DEFAULT_ID="defaultId";var Ui=xo,mo=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},Zo=ne(2610),vo=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},ea=function A(S,w,H,W){(function(Y,k){if(!(Y instanceof k))throw new TypeError("Cannot call a class as a function")})(this,A),this.url=S||"",this.serviceLocation=w||S||"",this.dvbPriority=H||1,this.dvbWeight=W||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};ea.DEFAULT_DVB_PRIORITY=1,ea.DEFAULT_DVB_WEIGHT=1;var ha=ea,Co=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},dn=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},fn=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};var Tt=function(){function A(){(function(H,W){if(!(H instanceof W))throw new TypeError("Cannot call a class as a function")})(this,A),this.schemeIdUri=null,this.value=null,this.id=null}var w;return(w=[{key:"init",value:function(H){return H&&(this.schemeIdUri=H.schemeIdUri?H.schemeIdUri:null,this.value=H.value?H.value:null,this.id=H.id?H.id:null,H[_.Z.DVB_URL]&&(this.dvbUrl=H[_.Z.DVB_URL]),H[_.Z.DVB_MIMETYPE]&&(this.dvbMimeType=H[_.Z.DVB_MIMETYPE]),H[_.Z.DVB_FONTFAMILY]&&(this.dvbFontFamily=H[_.Z.DVB_FONTFAMILY])),this}}])&&function sn(A,S){for(var w=0;w<S.length;w++){var H=S[w];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(A,H.key,H)}}(A.prototype,w),A}(),en=ne(3101),wt=ne.n(en);function Pt(){return{areEqual:function(A,S){return wt()(A,S)}}}Pt.__dashjs_factory_name="ObjectUtils";var In=j.Z.getSingletonFactory(Pt),Qt=ne(7803),jn=function A(S,w){(function(H,W){if(!(H instanceof W))throw new TypeError("Cannot call a class as a function")})(this,A),this.url=S||"",this.serviceLocation=w||null,this.queryParams={}},Xn=function A(S,w,H){(function(W,Y){if(!(W instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,A),this.url=S||"",this.serviceLocation=w||null,this.ttl=H||NaN,this.queryParams={}};function Pn(A,S){var w=Object.keys(A);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(A);S&&(H=H.filter(function(W){return Object.getOwnPropertyDescriptor(A,W).enumerable})),w.push.apply(w,H)}return w}function cn(A){for(var S=1;S<arguments.length;S++){var w=null!=arguments[S]?arguments[S]:{};S%2?Pn(Object(w),!0).forEach(function(H){En(A,H,w[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(w)):Pn(Object(w)).forEach(function(H){Object.defineProperty(A,H,Object.getOwnPropertyDescriptor(w,H))})}return A}function En(A,S,w){return S in A?Object.defineProperty(A,S,{value:w,enumerable:!0,configurable:!0,writable:!0}):A[S]=w,A}function qn(A,S){var w;if(typeof Symbol>"u"||null==A[Symbol.iterator]){if(Array.isArray(A)||(w=fr(A))||S&&A&&"number"==typeof A.length){w&&(A=w);var H=0,W=function(){};return{s:W,n:function(){return H>=A.length?{done:!0}:{done:!1,value:A[H++]}},e:function(le){throw le},f:W}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Y,k=!0,X=!1;return{s:function(){w=A[Symbol.iterator]()},n:function(){var le=w.next();return k=le.done,le},e:function(le){X=!0,Y=le},f:function(){try{k||null==w.return||w.return()}finally{if(X)throw Y}}}}function fr(A,S){if(A){if("string"==typeof A)return Fr(A,S);var w=Object.prototype.toString.call(A).slice(8,-1);return"Object"===w&&A.constructor&&(w=A.constructor.name),"Map"===w||"Set"===w?Array.from(A):"Arguments"===w||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?Fr(A,S):void 0}}function Fr(A,S){(null==S||S>A.length)&&(S=A.length);for(var w=0,H=new Array(S);w<S;w++)H[w]=A[w];return H}function Ur(){var A,S,w,H,W=this.context,Y=(0,xt.Z)(W).getInstance(),k=Number.isInteger||function(P){return"number"==typeof P&&isFinite(P)&&Math.floor(P)===P};function X(P,oe){if(!P)throw new Error("adaptation is not defined");if(!oe)throw new Error("type is not defined");if(P.Representation_asArray&&P.Representation_asArray.length){var te=Fe(P.Representation_asArray[0]);if(te&&te.length>0&&Qt.Y.indexOf(te[0].schemeIdUri)>=0)return oe===E.Z.IMAGE}if(P.ContentComponent_asArray&&P.ContentComponent_asArray.length>0){if(P.ContentComponent_asArray.length>1)return oe===E.Z.MUXED;if(P.ContentComponent_asArray[0].contentType===oe)return!0}var re=oe===E.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(oe);if(P.Representation_asArray&&P.Representation_asArray.length&&re.test(P.Representation_asArray[0].codecs))return!0;if(P.hasOwnProperty(_.Z.MIME_TYPE))return re.test(P.mimeType);if(P.Representation_asArray)for(var xe,be=0;be<P.Representation_asArray.length;be++)if((xe=P.Representation_asArray[be]).hasOwnProperty(_.Z.MIME_TYPE))return re.test(xe.mimeType);return!1}function le(P){if(!P)throw new Error("adaptation is not defined");if(P.hasOwnProperty(_.Z.SEGMENT_TEMPLATE)||P.hasOwnProperty(_.Z.SEGMENT_TIMELINE)||P.hasOwnProperty(_.Z.SEGMENT_LIST)||P.hasOwnProperty(_.Z.SEGMENT_BASE))return!0;if(P.Representation_asArray&&P.Representation_asArray.length>0){var oe=P.Representation_asArray[0];if(oe.hasOwnProperty(_.Z.SEGMENT_TEMPLATE)||oe.hasOwnProperty(_.Z.SEGMENT_TIMELINE)||oe.hasOwnProperty(_.Z.SEGMENT_LIST)||oe.hasOwnProperty(_.Z.SEGMENT_BASE))return!0}return!1}function ve(P){return X(P,E.Z.VIDEO)}function fe(P){return X(P,E.Z.TEXT)}function ee(P){return X(P,E.Z.IMAGE)}function de(P){return P&&Array.isArray(P.Representation_asArray)&&P.Representation_asArray.sort(function(oe,te){return oe.bandwidth-te.bandwidth}),P}function ae(P,oe){return P&&P.Period_asArray&&k(oe)&&P.Period_asArray[oe]?P.Period_asArray[oe].AdaptationSet_asArray:[]}function He(P){return P&&P.Period_asArray?P.Period_asArray:[]}function Ne(P){var oe=!1;return P&&P.hasOwnProperty("type")&&(oe=P.type===_.Z.DYNAMIC),oe}function Fe(P){return P&&P.EssentialProperty_asArray&&P.EssentialProperty_asArray.length?P.EssentialProperty_asArray.map(function(oe){return{schemeIdUri:oe.schemeIdUri,value:oe.value}}):null}function Ze(P){if(!P||!P.S_asArray)return NaN;var oe=P.S_asArray[0],te=P.S_asArray[1];return oe.hasOwnProperty("d")?oe.d:te.t-oe.t}function he(P,oe){if(!P)throw new Error("Period cannot be null or undefined");var te=Ui.DEFAULT_ID+"_"+oe;return P.hasOwnProperty(_.Z.ID)&&P.id.length>0&&"__proto__"!==P.id&&(te=P.id),te}function Oe(P,oe,te){var re,z=[];if(!P)return z;for(re=0;re<P.length;re++){var xe=new Co;if(xe.timescale=1,xe.representation=oe,!P[re].hasOwnProperty(E.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");xe.schemeIdUri=P[re].schemeIdUri,P[re].hasOwnProperty(_.Z.TIMESCALE)&&(xe.timescale=P[re].timescale),P[re].hasOwnProperty(_.Z.VALUE)&&(xe.value=P[re].value),z.push(xe),xe.period=te}return z}function me(P){var oe=[],re=!1;return(P.BaseURL_asArray||[P.baseUri]).some(function(z){if(z){var xe=new ha,be=z.__text||z;return Y.isRelative(be)&&(re=!0,P.baseUri&&(be=Y.resolve(be,P.baseUri))),xe.url=be,xe.serviceLocation=z.hasOwnProperty(_.Z.SERVICE_LOCATION)&&z.serviceLocation.length?z.serviceLocation:be,z.hasOwnProperty(_.Z.DVB_PRIORITY)&&(xe.dvbPriority=z[_.Z.DVB_PRIORITY]),z.hasOwnProperty(_.Z.DVB_WEIGHT)&&(xe.dvbWeight=z[_.Z.DVB_WEIGHT]),z.hasOwnProperty(_.Z.AVAILABILITY_TIME_OFFSET)&&(xe.availabilityTimeOffset=z[_.Z.AVAILABILITY_TIME_OFFSET]),z.hasOwnProperty(_.Z.AVAILABILITY_TIME_COMPLETE)&&(xe.availabilityTimeComplete="false"!==z[_.Z.AVAILABILITY_TIME_COMPLETE]),oe.push(xe),re}}),oe}function Ve(P){var oe=new fn;return oe.serverUrl=P.__text,P.hasOwnProperty(_.Z.DEFAULT_SERVICE_LOCATION)&&(oe.defaultServiceLocation=P[_.Z.DEFAULT_SERVICE_LOCATION],oe.defaultServiceLocationArray=oe.defaultServiceLocation.split(" ")),P.hasOwnProperty(_.Z.QUERY_BEFORE_START)&&(oe.queryBeforeStart="true"===P[_.Z.QUERY_BEFORE_START].toLowerCase()),P.hasOwnProperty(_.Z.CLIENT_REQUIREMENT)&&(oe.clientRequirement="false"!==P[_.Z.CLIENT_REQUIREMENT].toLowerCase()),oe}return A={getIsTypeOf:X,getIsText:fe,getIsFragmented:le,getProducerReferenceTimesForAdaptation:function(P){var oe=P&&P.hasOwnProperty(_.Z.PRODUCERREFERENCETIME_ASARRAY)?P[_.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(P&&P.hasOwnProperty(_.Z.REPRESENTATION_ASARRAY)?P[_.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(re){var z;re.hasOwnProperty(_.Z.PRODUCERREFERENCETIME_ASARRAY)&&oe.push.apply(oe,function(xe){if(Array.isArray(xe))return Fr(xe)}(z=re[_.Z.PRODUCERREFERENCETIME_ASARRAY])||function(xe){if(typeof Symbol<"u"&&Symbol.iterator in Object(xe))return Array.from(xe)}(z)||fr(z)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())});var te=[];return oe.forEach(function(re){var z=new dn;re.hasOwnProperty(_.Z.ID)&&(z[_.Z.ID]=re[_.Z.ID],re.hasOwnProperty(_.Z.WALL_CLOCK_TIME)&&(z[_.Z.WALL_CLOCK_TIME]=re[_.Z.WALL_CLOCK_TIME],re.hasOwnProperty(_.Z.PRESENTATION_TIME)&&(z[_.Z.PRESENTATION_TIME]=re[_.Z.PRESENTATION_TIME],re.hasOwnProperty(_.Z.INBAND)&&(z[_.Z.INBAND]="false"!==re[_.Z.INBAND]),re.hasOwnProperty(_.Z.TYPE)&&(z[_.Z.TYPE]=re[_.Z.TYPE]),te.push(z))))}),te},getLanguageForAdaptation:function(P){var oe="";return P&&P.hasOwnProperty(_.Z.LANG)&&(oe=P.lang),oe},getViewpointForAdaptation:function(P){return P&&P.hasOwnProperty(_.Z.VIEWPOINT_ASARRAY)&&P[_.Z.VIEWPOINT_ASARRAY].length?P[_.Z.VIEWPOINT_ASARRAY].map(function(oe){return(new Tt).init(oe)}):[]},getRolesForAdaptation:function(P){return P&&P.hasOwnProperty(_.Z.ROLE_ASARRAY)&&P[_.Z.ROLE_ASARRAY].length?P[_.Z.ROLE_ASARRAY].map(function(oe){return(new Tt).init(oe)}):[]},getAccessibilityForAdaptation:function(P){return P&&P.hasOwnProperty(_.Z.ACCESSIBILITY_ASARRAY)&&P[_.Z.ACCESSIBILITY_ASARRAY].length?P[_.Z.ACCESSIBILITY_ASARRAY].map(function(oe){return(new Tt).init(oe)}):[]},getAudioChannelConfigurationForAdaptation:function(P){return P&&P.hasOwnProperty(_.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&P[_.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?P[_.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(oe){return(new Tt).init(oe)}):[]},getAudioChannelConfigurationForRepresentation:function(P){return P&&P.hasOwnProperty(_.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&P[_.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?P[_.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(oe){return(new Tt).init(oe)}):[]},getAdaptationForIndex:function(P,oe,te){var re=ae(oe,te);return re.length>0&&k(P)?re[P]:null},getIndexForAdaptation:function(P,oe,te){if(!P)return-1;for(var re=ae(oe,te),z=0;z<re.length;z++)if(In(W).getInstance().areEqual(re[z],P))return z;return-1},getAdaptationForId:function(P,oe,te){var re,z,xe=ae(oe,te);for(re=0,z=xe.length;re<z;re++)if(xe[re].hasOwnProperty(_.Z.ID)&&xe[re].id===P)return xe[re];return null},getAdaptationsForType:function(P,oe,te){var re,z,xe=ae(P,oe),be=[];for(re=0,z=xe.length;re<z;re++)X(xe[re],te)&&be.push(de(xe[re]));return be},getRealPeriods:He,getRealPeriodForIndex:function(P,oe){var te=He(oe);return te.length>0&&k(P)?te[P]:null},getCodec:function(P,oe,te){var re=null;if(P&&P.Representation_asArray&&P.Representation_asArray.length>0){var z=k(oe)&&oe>=0&&oe<P.Representation_asArray.length?P.Representation_asArray[oe]:P.Representation_asArray[0];z&&(re=z.mimeType+';codecs="'+z.codecs+'"',te&&void 0!==z.width&&(re+=';width="'+z.width+'";height="'+z.height+'"'))}return re&&(re=re.replace(/\sprofiles=[^;]*/g,"")),re},getSelectionPriority:function(P){try{var oe=P&&void 0!==P.selectionPriority?parseInt(P.selectionPriority):1;return isNaN(oe)?1:oe}catch{return 1}},getMimeType:function(P){return P&&P.Representation_asArray&&P.Representation_asArray.length>0?P.Representation_asArray[0].mimeType:null},getKID:function(P){return P&&P.hasOwnProperty(_.Z.CENC_DEFAULT_KID)?P[_.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(P){if(!P||!Array.isArray(P.Label_asArray))return[];for(var oe=[],te=0;te<P.Label_asArray.length;te++)oe.push({lang:P.Label_asArray[te].lang,text:P.Label_asArray[te].__text||P.Label_asArray[te]});return oe},getContentProtectionData:function(P){return P&&P.hasOwnProperty(_.Z.CONTENTPROTECTION_ASARRAY)&&0!==P.ContentProtection_asArray.length?P.ContentProtection_asArray:null},getIsDynamic:Ne,getId:function(P){return P&&P[_.Z.ID]||null},hasProfile:function(P,oe){var te=!1;return P&&P.profiles&&P.profiles.length>0&&(te=-1!==P.profiles.indexOf(oe)),te},getDuration:function(P){return P&&P.hasOwnProperty(_.Z.MEDIA_PRESENTATION_DURATION)?P.mediaPresentationDuration:P&&"dynamic"==P.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(P){return P&&P.bandwidth?P.bandwidth:NaN},getManifestUpdatePeriod:function(P){var oe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,te=NaN;return P&&P.hasOwnProperty(_.Z.MINIMUM_UPDATE_PERIOD)&&(te=P.minimumUpdatePeriod),isNaN(te)?te:Math.max(te-oe,1)},getPublishTime:function(P){return P&&P.hasOwnProperty(_.Z.PUBLISH_TIME)?new Date(P[_.Z.PUBLISH_TIME]):null},getRepresentationCount:function(P){return P&&Array.isArray(P.Representation_asArray)?P.Representation_asArray.length:0},getBitrateListForAdaptation:function(P){var oe=de(P);return(oe&&Array.isArray(oe.Representation_asArray)?oe.Representation_asArray:[]).map(function(te){return{bandwidth:te.bandwidth,width:te.width||0,height:te.height||0,scanType:te.scanType||null,id:te.id||null}})},getRepresentationFor:function(P,oe){return oe&&oe.Representation_asArray&&oe.Representation_asArray.length>0&&k(P)?oe.Representation_asArray[P]:null},getRepresentationsForAdaptation:function(P){var oe,te,re,z,xe=[],be=function(nt){if(nt&&nt.period&&k(nt.period.index)){var dt=nt.period.mpd.manifest.Period_asArray[nt.period.index];if(dt&&dt.AdaptationSet_asArray&&k(nt.index))return de(dt.AdaptationSet_asArray[nt.index])}}(P);if(be&&be.Representation_asArray){if(P&&P.period&&k(P.period.index)){var ke=me(P.period.mpd.manifest);ke&&(te=ke[0])}for(var we=0,ie=be.Representation_asArray.length;we<ie;++we){var Re=be.Representation_asArray[we],qe=new zi;if(qe.index=we,qe.adaptation=P,Re.hasOwnProperty(_.Z.ID)&&(qe.id=Re.id),Re.hasOwnProperty(_.Z.CODECS)&&(qe.codecs=Re.codecs),Re.hasOwnProperty(_.Z.MIME_TYPE)&&(qe.mimeType=Re[_.Z.MIME_TYPE]),Re.hasOwnProperty(_.Z.CODEC_PRIVATE_DATA)&&(qe.codecPrivateData=Re.codecPrivateData),Re.hasOwnProperty(_.Z.BANDWITH)&&(qe.bandwidth=Re.bandwidth),Re.hasOwnProperty(_.Z.WIDTH)&&(qe.width=Re.width),Re.hasOwnProperty(_.Z.HEIGHT)&&(qe.height=Re.height),Re.hasOwnProperty(_.Z.SCAN_TYPE)&&(qe.scanType=Re.scanType),Re.hasOwnProperty(_.Z.MAX_PLAYOUT_RATE)&&(qe.maxPlayoutRate=Re.maxPlayoutRate),Re.hasOwnProperty(_.Z.SEGMENT_BASE)?(oe=Re.SegmentBase,qe.segmentInfoType=_.Z.SEGMENT_BASE):Re.hasOwnProperty(_.Z.SEGMENT_LIST)?qe.segmentInfoType=(oe=Re.SegmentList).hasOwnProperty(_.Z.SEGMENT_TIMELINE)?_.Z.SEGMENT_TIMELINE:_.Z.SEGMENT_LIST:Re.hasOwnProperty(_.Z.SEGMENT_TEMPLATE)?(qe.segmentInfoType=(oe=Re.SegmentTemplate).hasOwnProperty(_.Z.SEGMENT_TIMELINE)?_.Z.SEGMENT_TIMELINE:_.Z.SEGMENT_TEMPLATE,oe.hasOwnProperty(_.Z.INITIALIZATION_MINUS)&&(qe.initialization=oe.initialization.split("$Bandwidth$").join(Re.bandwidth).split("$RepresentationID$").join(Re.id))):qe.segmentInfoType=_.Z.BASE_URL,qe.essentialProperties=Fe(Re),oe){if(oe.hasOwnProperty(_.Z.INITIALIZATION)){var ft=oe.Initialization;ft.hasOwnProperty(_.Z.SOURCE_URL)&&(qe.initialization=ft.sourceURL),ft.hasOwnProperty(_.Z.RANGE)&&(qe.range=ft.range)}else fe(be)&&le(be)&&be.mimeType&&-1===be.mimeType.indexOf("application/mp4")&&(qe.range=0);oe.hasOwnProperty(_.Z.TIMESCALE)&&(qe.timescale=oe.timescale),oe.hasOwnProperty(_.Z.DURATION)?qe.segmentDuration=oe.duration/qe.timescale:Re.hasOwnProperty(_.Z.SEGMENT_TEMPLATE)&&(oe=Re.SegmentTemplate).hasOwnProperty(_.Z.SEGMENT_TIMELINE)&&(qe.segmentDuration=Ze(oe.SegmentTimeline)/qe.timescale),oe.hasOwnProperty(_.Z.MEDIA)&&(qe.media=oe.media),oe.hasOwnProperty(_.Z.START_NUMBER)&&(qe.startNumber=oe.startNumber),oe.hasOwnProperty(_.Z.INDEX_RANGE)&&(qe.indexRange=oe.indexRange),oe.hasOwnProperty(_.Z.PRESENTATION_TIME_OFFSET)&&(qe.presentationTimeOffset=oe.presentationTimeOffset/qe.timescale),oe.hasOwnProperty(_.Z.AVAILABILITY_TIME_OFFSET)?qe.availabilityTimeOffset=oe.availabilityTimeOffset:te&&void 0!==te.availabilityTimeOffset&&(qe.availabilityTimeOffset=te.availabilityTimeOffset),oe.hasOwnProperty(_.Z.AVAILABILITY_TIME_COMPLETE)?qe.availabilityTimeComplete="false"!==oe.availabilityTimeComplete:te&&void 0!==te.availabilityTimeComplete&&(qe.availabilityTimeComplete=te.availabilityTimeComplete)}qe.MSETimeOffset=(z=(re=qe).presentationTimeOffset,re.adaptation.period.start-z),qe.path=[P.period.index,P.index,we],xe.push(qe)}}return xe},getAdaptationsForPeriod:function(P){var oe,te,re,z=P&&k(P.index)?P.mpd.manifest.Period_asArray[P.index]:null,xe=[];if(z&&z.AdaptationSet_asArray)for(re=0;re<z.AdaptationSet_asArray.length;re++)te=z.AdaptationSet_asArray[re],oe=new ni,te.hasOwnProperty(_.Z.ID)&&(oe.id=te.id),oe.index=re,oe.period=P,X(te,E.Z.MUXED)?oe.type=E.Z.MUXED:X(te,E.Z.AUDIO)?oe.type=E.Z.AUDIO:ve(te)?oe.type=E.Z.VIDEO:fe(te)?oe.type=E.Z.TEXT:ee(te)?oe.type=E.Z.IMAGE:S.warn("Unknown Adaptation stream type"),xe.push(oe);return xe},getRegularPeriods:function(P){var oe,te,re=!!P&&Ne(P.manifest),z=[],xe=null,be=null,ke=null,we=null;for(te=0,oe=P&&P.manifest&&P.manifest.Period_asArray?P.manifest.Period_asArray.length:0;te<oe;te++)(be=P.manifest.Period_asArray[te]).hasOwnProperty(_.Z.START)?(we=new Ui).start=be.start:null!==xe&&xe.hasOwnProperty(_.Z.DURATION)&&null!==ke?(we=new Ui).start=parseFloat((ke.start+ke.duration).toFixed(5)):0!==te||re||((we=new Ui).start=0),null!==ke&&isNaN(ke.duration)&&(null!==we?ke.duration=parseFloat((we.start-ke.start).toFixed(5)):S.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==we&&(we.id=he(be,te),we.index=te,we.mpd=P,be.hasOwnProperty(_.Z.DURATION)&&(we.duration=be.duration),ke&&(ke.nextPeriodId=we.id),z.push(we),xe=be,ke=we),be=null,we=null;return 0===z.length||null!==ke&&isNaN(ke.duration)&&(ke.duration=parseFloat((function(ie){!function(){if(!w||!w.hasOwnProperty("error"))throw new Error(E.Z.MISSING_CONFIG_ERROR)}();var Re,qe=Ne(ie.mpd.manifest);return ie.mpd.manifest.mediaPresentationDuration?Re=ie.mpd.manifest.mediaPresentationDuration:ie.duration?Re=ie.duration:qe?Re=Number.POSITIVE_INFINITY:w.error(new Le.Z(De.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",ie)),Re}(ke)-ke.start).toFixed(5))),z},getMpd:function(P){var oe=new mo;return P&&(oe.manifest=P,P.hasOwnProperty(_.Z.AVAILABILITY_START_TIME)?oe.availabilityStartTime=new Date(P.availabilityStartTime.getTime()):P.loadedTime&&(oe.availabilityStartTime=new Date(P.loadedTime.getTime())),P.hasOwnProperty(_.Z.AVAILABILITY_END_TIME)&&(oe.availabilityEndTime=new Date(P.availabilityEndTime.getTime())),P.hasOwnProperty(_.Z.MINIMUM_UPDATE_PERIOD)&&(oe.minimumUpdatePeriod=P.minimumUpdatePeriod),P.hasOwnProperty(_.Z.MEDIA_PRESENTATION_DURATION)&&(oe.mediaPresentationDuration=P.mediaPresentationDuration),P.hasOwnProperty(_.Z.SUGGESTED_PRESENTATION_DELAY)&&(oe.suggestedPresentationDelay=P.suggestedPresentationDelay),P.hasOwnProperty(_.Z.TIMESHIFT_BUFFER_DEPTH)&&(oe.timeShiftBufferDepth=P.timeShiftBufferDepth),P.hasOwnProperty(_.Z.MAX_SEGMENT_DURATION)&&(oe.maxSegmentDuration=P.maxSegmentDuration),P.hasOwnProperty(_.Z.PUBLISH_TIME)&&(oe.publishTime=new Date(P.publishTime))),oe},getEventsForPeriod:function(P){var oe,te,re=P&&P.mpd&&P.mpd.manifest?P.mpd.manifest:null,z=re?re.Period_asArray:null,xe=z&&P&&k(P.index)?z[P.index].EventStream_asArray:null,be=[];if(xe)for(oe=0;oe<xe.length;oe++){var ke=new Co;if(ke.period=P,ke.timescale=1,!xe[oe].hasOwnProperty(E.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(ke.schemeIdUri=xe[oe][E.Z.SCHEME_ID_URI],xe[oe].hasOwnProperty(_.Z.TIMESCALE)&&(ke.timescale=xe[oe][_.Z.TIMESCALE]),xe[oe].hasOwnProperty(_.Z.VALUE)&&(ke.value=xe[oe][_.Z.VALUE]),xe[oe].hasOwnProperty(_.Z.PRESENTATION_TIME_OFFSET)&&(ke.presentationTimeOffset=xe[oe][_.Z.PRESENTATION_TIME_OFFSET]),te=0;xe[oe].Event_asArray&&te<xe[oe].Event_asArray.length;te++){var we=xe[oe].Event_asArray[te],ie=new vo;ie.presentationTime=0,ie.eventStream=ke,we.hasOwnProperty(_.Z.PRESENTATION_TIME)&&(ie.presentationTime=we.presentationTime),ie.calculatedPresentationTime=ie.presentationTime/ke.timescale+P.start-(ke.presentationTimeOffset?ke.presentationTimeOffset/ke.timescale:0),we.hasOwnProperty(_.Z.DURATION)&&(ie.duration=we.duration/ke.timescale),ie.id=we.hasOwnProperty(_.Z.ID)?we.id:null,ie.messageData=we.Signal&&we.Signal.Binary?H.decodeArray(we.Signal.Binary.toString()):we.messageData||we.__cdata||we.__text,be.push(ie)}}return be},getEssentialPropertiesForAdaptation:function(P){var oe={};if(P&&P.hasOwnProperty(_.Z.ESSENTIAL_PROPERTY_ASARRAY)){var te,re=qn(P.EssentialProperty_asArray);try{for(re.s();!(te=re.n()).done;){var z=te.value;z.hasOwnProperty(E.Z.SCHEME_ID_URI)&&(oe[z[E.Z.SCHEME_ID_URI]]=cn({},z))}}catch(xe){re.e(xe)}finally{re.f()}}return oe},getEssentialPropertiesAsArrayForAdaptation:function(P){return P&&P.hasOwnProperty(_.Z.ESSENTIAL_PROPERTY_ASARRAY)&&P.EssentialProperty_asArray.length?P.EssentialProperty_asArray.map(function(oe){return(new Tt).init(oe)}):[]},getEssentialPropertiesForRepresentation:Fe,getEventStreamForAdaptationSet:function(P,oe,te){var re,z,xe;return P&&P.Period_asArray&&oe&&oe.period&&k(oe.period.index)&&(z=P.Period_asArray[oe.period.index])&&z.AdaptationSet_asArray&&k(oe.index)&&(xe=z.AdaptationSet_asArray[oe.index])&&(re=xe.InbandEventStream_asArray),Oe(re,null,te)},getEventStreamForRepresentation:function(P,oe,te){var re,z,xe,be;return P&&P.Period_asArray&&oe&&oe.adaptation&&oe.adaptation.period&&k(oe.adaptation.period.index)&&(z=P.Period_asArray[oe.adaptation.period.index])&&z.AdaptationSet_asArray&&k(oe.adaptation.index)&&(xe=z.AdaptationSet_asArray[oe.adaptation.index])&&xe.Representation_asArray&&k(oe.index)&&(be=xe.Representation_asArray[oe.index])&&(re=be.InbandEventStream_asArray),Oe(re,oe,te)},getUTCTimingSources:function(P){var oe=Ne(P),te=!!P&&P.hasOwnProperty(_.Z.AVAILABILITY_START_TIME),re=P?P.UTCTiming_asArray:null,z=[];return(oe||te)&&re&&re.forEach(function(xe){var be=new Zo.Z;xe.hasOwnProperty(E.Z.SCHEME_ID_URI)&&(be.schemeIdUri=xe.schemeIdUri,xe.hasOwnProperty(_.Z.VALUE)&&(be.value=xe.value.toString(),z.push(be)))}),z},getBaseURLsFromElement:me,getRepresentationSortFunction:function(){return function(P,oe){return P.bandwidth-oe.bandwidth}},getContentSteering:function(P){if(P&&P.hasOwnProperty(_.Z.CONTENT_STEERING_AS_ARRAY))return Ve(P[_.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(P){return P&&P.hasOwnProperty(_.Z.LOCATION_AS_ARRAY)?P[_.Z.LOCATION_AS_ARRAY].map(function(oe){var te=oe.__text||oe,re=oe.hasOwnProperty(_.Z.SERVICE_LOCATION)?oe[_.Z.SERVICE_LOCATION]:null;return new jn(te,re)}):[]},getPatchLocation:function(P){return P&&P.hasOwnProperty(_.Z.PATCH_LOCATION_AS_ARRAY)?P[_.Z.PATCH_LOCATION_AS_ARRAY].map(function(oe){var te=oe.__text||oe,re=oe.hasOwnProperty(_.Z.SERVICE_LOCATION)?oe[_.Z.SERVICE_LOCATION]:null,z=oe.hasOwnProperty(_.Z.TTL)?1e3*parseFloat(oe[_.Z.TTL]):NaN;return new Xn(te,re,z)}):[]},getSuggestedPresentationDelay:function(P){return P&&P.hasOwnProperty(_.Z.SUGGESTED_PRESENTATION_DELAY)?P.suggestedPresentationDelay:null},getAvailabilityStartTime:function(P){return P&&P.hasOwnProperty(_.Z.AVAILABILITY_START_TIME)&&null!==P.availabilityStartTime?P.availabilityStartTime.getTime():null},getServiceDescriptions:function(P){var oe=[];if(P&&P.hasOwnProperty(_.Z.SERVICE_DESCRIPTION)){var te,re=qn(P.ServiceDescription_asArray);try{for(re.s();!(te=re.n()).done;){var z=te.value,xe=null,be=null,ke=null,we=null,ie=null,Re=null,qe=null;for(var ft in z)z.hasOwnProperty(ft)&&(ft===_.Z.ID?xe=z[ft]:ft===_.Z.SERVICE_DESCRIPTION_SCOPE?be=z[ft].schemeIdUri:ft===_.Z.SERVICE_DESCRIPTION_LATENCY?ke={target:parseInt(z[ft].target),max:parseInt(z[ft].max),min:parseInt(z[ft].min),referenceId:parseInt(z[ft].referenceId)}:ft===_.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?we={max:parseFloat(z[ft].max),min:parseFloat(z[ft].min)}:ft===_.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?ie={mediaType:z[ft].mediaType,max:parseInt(z[ft].max),min:parseInt(z[ft].min),target:parseInt(z[ft].target),type:z[ft].type,maxQualityDifference:parseInt(z[ft].maxQualityDifference)}:ft===_.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?Re={mediaType:z[ft].mediaType,max:parseInt(z[ft].max),min:parseInt(z[ft].min),target:parseInt(z[ft].target)}:ft===_.Z.CONTENT_STEERING&&(qe=Ve(z[ft])));oe.push({id:xe,schemeIdUri:be,latency:ke,playbackRate:we,operatingQuality:ie,operatingBandwidth:Re,contentSteering:qe})}}catch(nt){re.e(nt)}finally{re.f()}}return oe},getSegmentAlignment:function(P){return!(!P||!P.hasOwnProperty(_.Z.SEGMENT_ALIGNMENT))&&"true"===P[_.Z.SEGMENT_ALIGNMENT]},getSubSegmentAlignment:function(P){return!(!P||!P.hasOwnProperty(_.Z.SUB_SEGMENT_ALIGNMENT))&&"true"===P[_.Z.SUB_SEGMENT_ALIGNMENT]},getSupplementalPropertiesForAdaptation:function(P){var oe={};if(P&&P.hasOwnProperty(_.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var te,re=qn(P.SupplementalProperty_asArray);try{for(re.s();!(te=re.n()).done;){var z=te.value;z.hasOwnProperty(E.Z.SCHEME_ID_URI)&&(oe[z[E.Z.SCHEME_ID_URI]]=cn({},z))}}catch(xe){re.e(xe)}finally{re.f()}}return oe},getSupplementalPropertiesAsArrayForAdaptation:function(P){return P&&P.hasOwnProperty(_.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&P.SupplementalProperty_asArray.length?P.SupplementalProperty_asArray.map(function(oe){return(new Tt).init(oe)}):[]},getSupplementalPropertiesForRepresentation:function(P){var oe={};if(P&&P.hasOwnProperty(_.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var te,re=qn(P.SupplementalProperty_asArray);try{for(re.s();!(te=re.n()).done;){var z=te.value;z.hasOwnProperty(E.Z.SCHEME_ID_URI)&&(oe[z[E.Z.SCHEME_ID_URI]]=cn({},z))}}catch(xe){re.e(xe)}finally{re.f()}}return oe},getSupplementalPropertiesAsArrayForRepresentation:function(P){return P&&P.hasOwnProperty(_.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&P.SupplementalProperty_asArray.length?P.SupplementalProperty_asArray.map(function(oe){return(new Tt).init(oe)}):[]},setConfig:function(P){P&&(P.errHandler&&(w=P.errHandler),P.BASE64&&(H=P.BASE64))}},S=(0,B.Z)(W).getInstance().getLogger(A),A}Ur.__dashjs_factory_name="DashManifestModel";var rr=j.Z.getSingletonFactory(Ur),tn=ne(703);function pn(A,S){var w;if(typeof Symbol>"u"||null==A[Symbol.iterator]){if(Array.isArray(A)||(w=function(le,ve){if(le){if("string"==typeof le)return On(le,undefined);var fe=Object.prototype.toString.call(le).slice(8,-1);return"Object"===fe&&le.constructor&&(fe=le.constructor.name),"Map"===fe||"Set"===fe?Array.from(le):"Arguments"===fe||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(fe)?On(le,undefined):void 0}}(A))||S&&A&&"number"==typeof A.length){w&&(A=w);var H=0,W=function(){};return{s:W,n:function(){return H>=A.length?{done:!0}:{done:!1,value:A[H++]}},e:function(le){throw le},f:W}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Y,k=!0,X=!1;return{s:function(){w=A[Symbol.iterator]()},n:function(){var le=w.next();return k=le.done,le},e:function(le){X=!0,Y=le},f:function(){try{k||null==w.return||w.return()}finally{if(X)throw Y}}}}function On(A,S){(null==S||S>A.length)&&(S=A.length);for(var w=0,H=new Array(S);w<S;w++)H[w]=A[w];return H}function gr(){var A,S,w,H,W,Y,k,X,le,ve,fe=this.context,ee=(0,V.Z)(fe).getInstance(),de=(0,ot.Z)(fe).getInstance();function ae(){w={pr:1,nor:null,st:null,sf:null,sid:"".concat(tn.Z.generateUuid()),cid:null},le={},X={},ve={},Ne()}function He(){Ne()}function Ne(){if(Y){var z=Y.getStreamController();if(z&&"function"==typeof z.getActiveStream){var xe=z.getActiveStream();xe&&(k=xe.getProcessors())}}}function Fe(z,xe){var be,ke={},we=pn(xe);try{for(we.s();!(be=we.n()).done;){var ie=be.value;z[ie]&&(ke[ie]=z[ie])}}catch(Re){we.e(Re)}finally{we.f()}return ke}function Ze(z){var xe=de.get().streaming.cmcd.enabledKeys;return z.filter(function(be){return xe.includes(be)})}function he(z){try{return z.type===gt.w.MPD_TYPE?((be=Oe()).ot="m",be):z.type===gt.w.MEDIA_SEGMENT_TYPE?(ve.hasOwnProperty(xe=z.mediaType)||(ve[xe]=!1),X.hasOwnProperty(xe)||(X[xe]=!1),le.hasOwnProperty(xe)||(le[xe]=!1),function(ke){var we,ie=Oe(),Re=function(kt){try{return parseInt(kt.mediaInfo.bitrateList[kt.quality].bandwidth/1e3)}catch{return null}}(ke),qe=function(kt){try{return isNaN(kt.duration)?NaN:Math.round(1e3*kt.duration)}catch{return null}}(ke),ft=function(kt){try{return 100*parseInt(H.getThroughputHistory().getSafeAverageThroughput(kt)/100)}catch{return null}}(ke.mediaType),nt=function(kt){try{var wn=w.pr,tt=W.getCurrentBufferLevel(kt);return isNaN(wn)||isNaN(tt)?null:100*parseInt(tt/wn*10)}catch{return null}}(ke.mediaType),dt=me(ke.mediaType),st=function(kt){try{var wn=H.getTopBitrateInfoFor(kt);return Math.round(wn.bitrate/1e3)}catch{return null}}(ke.mediaType),Ft=w.pr,Gt=function(kt){if(k&&0!==k.length){var wn,tt=pn(k);try{for(tt.s();!(wn=tt.n()).done;){var Ye=wn.value;if(Ye.getType()===kt)return Ye.probeNextRequest()}}catch(Lt){tt.e(Lt)}finally{tt.f()}}}(ke.mediaType);ke.mediaType===E.Z.VIDEO&&(we="v"),ke.mediaType===E.Z.AUDIO&&(we="a"),ke.mediaType===E.Z.TEXT&&(we="application/mp4"===ke.mediaInfo.mimeType?"tt":"c");var Ot=de.get().streaming.cmcd.rtp;return Ot||(Ot=function(kt){try{var wn=Y.getPlaybackRate();wn||(wn=1);var tt=kt.quality,Lt=kt.mediaInfo,_t=kt.duration;if(!Lt)return NaN;var Yt=me(kt.mediaType);0===Yt&&(Yt=500);var Kt=Lt.bitrateList[tt].bandwidth*_t/1e3/(Yt/wn/1e3),Wt=de.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(de.get().streaming.cmcd.rtpSafetyFactor)?de.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(Kt*Wt/100)+1)}catch{return NaN}}(ke)),isNaN(Ot)||(ie.rtp=Ot),Gt&&(ke.url!==Gt.url?ie.nor=encodeURIComponent(tn.Z.getRelativeUrl(ke.url,Gt.url)):Gt.range&&(ie.nrr=Gt.range)),Re&&(ie.br=Re),we&&(ie.ot=we),isNaN(qe)||(ie.d=qe),isNaN(ft)||(ie.mtp=ft),isNaN(nt)||(ie.dl=nt),isNaN(dt)||(ie.bl=dt),isNaN(st)||(ie.tb=st),isNaN(Ft)||1===Ft||(ie.pr=Ft),le[ke.mediaType]&&(ie.bs=!0,le[ke.mediaType]=!1),!X[ke.mediaType]&&ve[ke.mediaType]||(ie.su=!0,X[ke.mediaType]=!1,ve[ke.mediaType]=!0),ie}(z)):z.type===gt.w.INIT_SEGMENT_TYPE?((ke=Oe()).ot="i",ke.su=!0,ke):z.type===gt.w.OTHER_TYPE||z.type===gt.w.XLINK_EXPANSION_TYPE?function(){var ke=Oe();return ke.ot="o",ke}():z.type===gt.w.LICENSE?((we=Oe()).ot="k",we):null}catch{return null}var we,ke,xe,be}function Oe(){var z={},xe=de.get().streaming.cmcd.cid?de.get().streaming.cmcd.cid:w.cid;return z.v=1,z.sid=de.get().streaming.cmcd.sid?de.get().streaming.cmcd.sid:w.sid,z.sid="".concat(z.sid),xe&&(z.cid="".concat(xe)),isNaN(w.pr)||1===w.pr||null===w.pr||(z.pr=w.pr),w.st&&(z.st=w.st),w.sf&&(z.sf=w.sf),z}function me(z){try{var xe=W.getCurrentBufferLevel(z);return isNaN(xe)?null:100*parseInt(10*xe)}catch{return null}}function Ve(z){try{w.pr=z.playbackRate}catch{}}function P(z){try{var xe=A.getIsDynamic(z.data)?"l":"v",be=z.protocol&&"MSS"===z.protocol?"s":"d";w.st="".concat(xe),w.sf="".concat(be)}catch{}}function oe(z){try{z.state&&z.mediaType&&z.state===T.Z.BUFFER_EMPTY&&(le[z.mediaType]||(le[z.mediaType]=!0),X[z.mediaType]||(X[z.mediaType]=!0))}catch{}}function te(){for(var z in le)le.hasOwnProperty(z)&&(le[z]=!0);for(var xe in X)X.hasOwnProperty(xe)&&(X[xe]=!0)}function re(z){try{if(!z)return null;var xe=Object.keys(z).sort(function(we,ie){return we.localeCompare(ie)}),be=xe.length,ke=xe.reduce(function(we,ie,Re){return"v"===ie&&1===z[ie]||(we+="string"==typeof z[ie]&&"ot"!==ie&&"sf"!==ie&&"st"!==ie?"".concat(ie,"=").concat(JSON.stringify(z[ie])):"".concat(ie,"=").concat(z[ie]),Re<be-1&&(we+=",")),we},"");return(ke=ke.replace(/=true/g,"")).replace(/,\s*$/,"")}catch{return null}}return S={getQueryParameter:function(z){try{if(de.get().streaming.cmcd&&de.get().streaming.cmcd.enabled){var xe=he(z),ke=re(function(we){try{var ie=de.get().streaming.cmcd.enabledKeys;return Object.keys(we).filter(function(Re){return ie.includes(Re)}).reduce(function(Re,qe){return Re[qe]=we[qe],Re},{})}catch{return we}}(xe));return ee.trigger(ti.Z.CMCD_DATA_GENERATED,{url:z.url,mediaType:z.mediaType,cmcdData:xe,cmcdString:ke}),{key:"CMCD",value:ke}}return null}catch{return null}},getHeaderParameters:function(z){try{if(de.get().streaming.cmcd&&de.get().streaming.cmcd.enabled){var xe=he(z),be=Fe(xe,Ze(["br","d","ot","tb"])),ke=Fe(xe,Ze(["bl","dl","mtp","nor","nrr","su"])),we=Fe(xe,Ze(["bs","rtp"])),ie=Fe(xe,Ze(["cid","pr","sf","sid","st","v"])),Re={"CMCD-Object":re(be),"CMCD-Request":re(ke),"CMCD-Status":re(we),"CMCD-Session":re(ie)};return ee.trigger(ti.Z.CMCD_DATA_GENERATED,{url:z.url,mediaType:z.mediaType,cmcdData:xe,headers:Re}),Re}return null}catch{return null}},setConfig:function(z){z&&(z.abrController&&(H=z.abrController),z.dashMetrics&&(W=z.dashMetrics),z.playbackController&&(Y=z.playbackController))},reset:function(){ee.off(T.Z.PLAYBACK_RATE_CHANGED,Ve,this),ee.off(T.Z.MANIFEST_LOADED,P,this),ee.off(T.Z.BUFFER_LEVEL_STATE_CHANGED,oe,S),ee.off(T.Z.PLAYBACK_SEEKED,te,S),ae()},initialize:function(){ee.on(T.Z.PLAYBACK_RATE_CHANGED,Ve,S),ee.on(T.Z.MANIFEST_LOADED,P,S),ee.on(T.Z.BUFFER_LEVEL_STATE_CHANGED,oe,S),ee.on(T.Z.PLAYBACK_SEEKED,te,S),ee.on(T.Z.PERIOD_SWITCH_COMPLETED,He,S)}},A=rr(fe).getInstance(),ae(),S}gr.__dashjs_factory_name="CmcdModel";var vr=j.Z.getSingletonFactory(gr);function qr(A){return(qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(A)}function Qr(A,S){Qr=function(X,le){return new Y(X,void 0,le)};var w=pi(RegExp),H=RegExp.prototype,W=new WeakMap;function Y(X,le,ve){var fe=w.call(this,X,le);return W.set(fe,ve||W.get(X)),fe}function k(X,le){var ve=W.get(le);return Object.keys(ve).reduce(function(fe,ee){return fe[ee]=X[ve[ee]],fe},Object.create(null))}return function uo(A,S){if("function"!=typeof S&&null!==S)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(S&&S.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),S&&Mi(A,S)}(Y,w),Y.prototype.exec=function(X){var le=H.exec.call(this,X);return le&&(le.groups=k(le,this)),le},Y.prototype[Symbol.replace]=function(X,le){if("string"==typeof le){var ve=W.get(this);return H[Symbol.replace].call(this,X,le.replace(/\$<([^>]+)>/g,function(ee,de){return"$"+ve[de]}))}if("function"==typeof le){var fe=this;return H[Symbol.replace].call(this,X,function(){var ee=[];return ee.push.apply(ee,arguments),"object"!==qr(ee[ee.length-1])&&ee.push(k(ee,fe)),le.apply(this,ee)})}return H[Symbol.replace].call(this,X,le)},Qr.apply(this,arguments)}function pi(A){var S="function"==typeof Map?new Map:void 0;return pi=function(w){if(null===w||-1===Function.toString.call(w).indexOf("[native code]"))return w;if("function"!=typeof w)throw new TypeError("Super expression must either be null or a function");if(void 0!==S){if(S.has(w))return S.get(w);S.set(w,W)}function W(){return Ei(w,arguments,to(this).constructor)}return W.prototype=Object.create(w.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),Mi(W,w)},pi(A)}function Ei(A,S,w){return(Ei=function Gi(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(H,W,Y){var k=[null];k.push.apply(k,W);var X=new(Function.bind.apply(H,k));return Y&&Mi(X,Y.prototype),X}).apply(null,arguments)}function Mi(A,S){return(Mi=Object.setPrototypeOf||function(w,H){return w.__proto__=H,w})(A,S)}function to(A){return(to=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(A)}var ta="dynamic",Kl="cmsd-"+ta,ja="stream",qa=["mb","st","sf","v"],Yl={video:"v",audio:"a",text:"tt",stream:ja},El=/^[-0-9]/;function Ka(){var A,S,w,H,W=this.context,Y=(0,V.Z)(W).getInstance();function k(){w={},H={}}function X(ae){ae&&Object.keys(ae).forEach(function(He){qa.includes(He)||delete ae[He]})}function le(ae){return!ae||"false"!==ae.toLowerCase()&&(El.test(ae)?parseInt(ae,10):ae.replace(/["]+/g,""))}function ve(ae){try{for(var He={},Ne=ae.split(","),Fe=0;Fe<Ne.length;Fe++){var Ze=Ne[Fe].split("="),he=Ze[0],Oe=le(Ze[1]);He[he]=Oe}return He}catch(me){S.error("Failed to parse CMSD-Static response header value:",me)}}function fe(ae){try{for(var He={},Ne=ae.split(","),Fe=Ne[Ne.length-1].split(";"),Ze=1;Ze<Fe.length;Ze++){var he=Fe[Ze].split("="),Oe=he[0],me=le(he[1]);He[Oe]=me}return He}catch(Ve){return S.error("Failed to parse CMSD-Dynamic response header value:",Ve),[]}}function ee(ae){return Yl[ae]||"o"}function de(ae,He,Ne){var Fe="static"===ae?w:H;return(Fe[He]||{})[Ne]||(Fe[ja]||{})[Ne]}return A={setConfig:function(){},initialize:function(){},reset:function(){k()},parseResponseHeaders:function(ae,He){for(var Ne=null,Fe=null,Ze=ae.split("\r\n"),he=Ze.length-1;he>=0;he--){var Oe=Ze[he].match(Qr(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(Oe&&Oe.groups){var me=Oe.groups.key.toLowerCase(),Ve=Oe.groups.value;switch(me){case"cmsd-static":Ne=ve(Ve),Y.trigger(D.Z.CMSD_STATIC_HEADER,Ne);break;case Kl:Fe||(Fe=fe(Ve))}}}var P=ja;return Ne&&Ne.ot?P=Ne.ot:He&&(P=ee(He)),X(w[P]),X(H[P]),Ne&&(w[P]=Object.assign(w[P]||{},Ne)),Fe&&(H[P]=Object.assign(H[P]||{},Fe)),{static:Ne,dynamic:Fe}},getMaxBitrate:function(ae){var He=ee(ae);return de(ta,He,"mb")||-1},getEstimatedThroughput:function(ae){var He=ee(ae);return de(ta,He,"etp")||null},getResponseDelay:function(ae){var He=ee(ae);return de(ta,He,"rd")||null},getRoundTripTime:function(ae){var He=ee(ae);return de(ta,He,"rtt")||null}},S=(0,B.Z)(W).getInstance().getLogger(A),k(),A}Ka.__dashjs_factory_name="CmsdModel";var yn=j.Z.getSingletonFactory(Ka);function ir(){var A,S,w=this.context,H={};function W(){S=(0,B.Z)(w).getInstance().getLogger(A)}function Y(X){for(var le={},ve=0,fe=0,ee=0,de=0,ae=X.length,He=0;He<ae;++He)ve+=X[He].chunkDownloadTimeRelativeMS,fe+=X[He].bufferLevel,ee+=X[He].chunkDownloadTimeRelativeMS*X[He].bufferLevel,de+=X[He].chunkDownloadTimeRelativeMS*X[He].chunkDownloadTimeRelativeMS;return le.m=(ee-ve*fe/ae)/(de-ve*ve/ae),le.b=fe/ae-le.m*ve/ae,function(Ne){return le.m*Ne+le.b}}function k(X){var le,ve=!0,fe=X.reduce(function(ee,de){return ee+de.bufferLevelAtSegmentEnd},0)/X.length;return X.forEach(function(ee){Math.abs(ee.bufferLevelAtSegmentEnd/ee.bufferLevelAtSegmentStart)<.95&&(ve=!1),ee.bufferLevelAtSegmentEnd/fe<.8&&(ve=!1),le?le>ee.bitrate&&(ve=!1):le=ee.bitrate}),ve}return A={setup:W,addMeasurement:function(X,le,ve,fe,ee){X&&X.mediaType&&!H[X.mediaType]&&(H[X.mediaType]=[]);var de=X.mediaInfo.bitrateList.find(function(ae){return ae.id===X.representationId});H[X.mediaType].push({index:X.index,repId:X.representationId,mediaType:X.mediaType,requestTimeMS:fe,adjustedAvailabilityStartTimeMS:X.availabilityStartTime.getTime(),segDurationMS:1e3*X.duration,chunksDurationMS:ve.reduce(function(ae,He){return ae+He.chunkDownloadDurationMS},0),segmentBytes:ve.reduce(function(ae,He){return ae+He.chunkBytes},0),bitrate:de&&de.bandwidth,bitrateList:X.mediaInfo.bitrateList,chunkMeasurements:ve,fetchDownloadDurationMS:le,throughputCapacityDelayMS:ee,getEstimatedBufferLevel:Y(ve.slice(1))}),H[X.mediaType].length>10&&H[X.mediaType].shift()},getThroughputCapacityDelayMS:function(X,le){var ve=H[X.mediaType]&&H[X.mediaType].slice(-3);return!ve||ve.length<3?0:k(ve)?le/4>250?250:le/4:0},getEstimatedDownloadDurationMS:function(X){var le=H[X.mediaType].slice(-1).pop(),ve=H[X.mediaType].slice(-3),fe=le.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;le.bufferLevelAtSegmentStart=le.getEstimatedBufferLevel(fe/2),le.bufferLevelAtSegmentEnd=le.getEstimatedBufferLevel(fe);var ee=k(ve),de=ee?.6:.8;if(le.isBufferStable&&1.05*le.segDurationMS<le.fetchDownloadDurationMS)return le.fetchDownloadDurationMS;if(!ee||le.segDurationMS<le.fetchDownloadDurationMS||le.adjustedAvailabilityStartTimeMS<=le.requestTimeMS+le.throughputCapacityDelayMS-le.segDurationMS)return.8*le.fetchDownloadDurationMS;for(var ae=le.requestTimeMS+le.throughputCapacityDelayMS-le.adjustedAvailabilityStartTimeMS,He=0,Ne=0,Fe=0,Ze=0;Ze<le.chunkMeasurements.length;Ze++){var he=le.chunkMeasurements[Ze];if(ae<Ne+he.chunkDownloadDurationMS)break;Ne+=he.chunkDownloadDurationMS,He+=he.chunkBytes,Fe++}if(ae<0&&S.warn("request time was before adjusted availibitly start time"),He&&Ne&&Fe>.2*le.chunkMeasurements.length){var me=le.segmentBytes/(He/Ne);return le.fetchDownloadDurationMS<me?le.fetchDownloadDurationMS*de:me*de}var Ve=le.bitrate;return le.bitrateList.some(function(P){if(P.bandwidth>le.bitrate)return Ve=P.bandwidth,!0}),Ve===le.bitrate?le.fetchDownloadDurationMS*de:de*le.segmentBytes*8*1e3/Ve}},W(),A}ir.__dashjs_factory_name="LowLatencyThroughputModel";var Ar=j.Z.getSingletonFactory(ir),Oi=ne(5717);function Kr(A,S,w){return S in A?Object.defineProperty(A,S,{value:w,enumerable:!0,configurable:!0,writable:!0}):A[S]=w,A}function Dr(A){var S,w,H,W,Y,k,X,le,ve,fe,ee,de=this.context,ae=(A=A||{}).errHandler,He=A.dashMetrics,Ne=A.mediaPlayerModel,Fe=A.requestModifier,Ze=A.boxParser,he=A.errors,Oe=A.requestTimeout||0,me=(0,V.Z)(de).getInstance(),Ve=(0,ot.Z)(de).getInstance();function P(oe,te){var re,z=oe.request,xe=[],be=!0,ke=!0,we=new Date,ie=we,Re=0,qe=null,ft=null;if(!Fe||!He||!ae)throw new Error("config object is not correct or missing");var nt,dt=function(Yt){z.requestStartDate=we,z.requestEndDate=new Date,z.firstByteDate=z.firstByteDate||we,z.fileLoaderType=ft;var Kt=re.response?re.response.responseURL:null,Wt=re.response?re.response.status:null,Un=re.response&&re.response.getAllResponseHeaders?re.response.getAllResponseHeaders():re.response?re.response.responseHeaders:null,Mn=Un&&Ve.get().streaming.cmsd&&Ve.get().streaming.cmsd.enabled?X.parseResponseHeaders(Un,z.mediaType):null;He.addHttpRequest(z,Kt,Wt,Un,Yt?xe:null,Mn)},st=function(Yt){ke=!1,dt(Yt),z.type===gt.w.MPD_TYPE&&(He.addManifestUpdate(z),me.trigger(D.Z.MANIFEST_LOADING_FINISHED,{request:z}))},Ft=function(){if(qe&&(clearTimeout(qe),qe=null),-1!==w.indexOf(re)&&(w.splice(w.indexOf(re),1),ke))if(st(!1),te>0){try{Ve.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&z.type===gt.w.MEDIA_SEGMENT_TYPE&&Ne.getRetryAttemptsForType(gt.w.MEDIA_SEGMENT_TYPE)===te&&me.trigger(D.Z.ATTEMPT_BACKGROUND_SYNC)}catch{}te--;var Yt={config:oe};W.push(Yt),Yt.timeout=setTimeout(function(){-1!==W.indexOf(Yt)&&(W.splice(W.indexOf(Yt),1),P(oe,te))},Ne.getRetryIntervalsForType(z.type))}else{if(z.type===gt.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;ae.error(new Le.Z(Y[z.type],z.url+" is not available",{request:z,response:re.response})),oe.error&&oe.error(z,"error",re.response.statusText,re.response),oe.complete&&oe.complete(z,re.response.statusText)}};z.hasOwnProperty("availabilityTimeComplete")&&!1===z.availabilityTimeComplete&&window.fetch&&"arraybuffer"===z.responseType&&z.type===gt.w.MEDIA_SEGMENT_TYPE?((nt=ei(de).create({requestModifier:Fe,lowLatencyThroughputModel:ve,boxParser:Ze})).setup({dashMetrics:He}),ft=E.Z.FILE_LOADER_TYPES.FETCH):(nt=(0,xn.Z)(de).create({requestModifier:Fe}),ft=E.Z.FILE_LOADER_TYPES.XHR);var Gt=null,Ot=Fe.modifyRequestURL?Fe.modifyRequestURL(z.url):z.url;if(Ve.get().streaming.cmcd&&Ve.get().streaming.cmcd.enabled){var kt=Ve.get().streaming.cmcd.mode;if(kt===E.Z.CMCD_MODE_QUERY){var wn=function(Yt){try{var Kt=[],Wt=k.getQueryParameter(Yt);return Wt&&Kt.push(Wt),Kt}catch{return[]}}(z);Ot=tn.Z.addAditionalQueryParameterToUrl(Ot,wn)}else kt===E.Z.CMCD_MODE_HEADER&&(Gt=k.getHeaderParameters(z))}var tt=le.getXHRWithCredentialsForType(z.type);if(z.queryParams){var Ye=Object.keys(z.queryParams).map(function(Yt){return{key:Yt,value:z.queryParams[Yt]}});Ot=tn.Z.addAditionalQueryParameterToUrl(Ot,Ye)}z.url=Ot,re={url:Ot,method:gt.w.GET,withCredentials:tt,request:z,onload:function(){re.response.status>=200&&re.response.status<=299&&(st(!0),oe.success&&oe.success(re.response.response,re.response.statusText,re.response.responseURL),oe.complete&&oe.complete(z,re.response.statusText))},onend:Ft,onerror:Ft,progress:function(Yt){var Kt=new Date;be&&(be=!1,(!Yt.lengthComputable||Yt.lengthComputable&&Yt.total!==Yt.loaded)&&(z.firstByteDate=Kt)),Yt.lengthComputable&&(z.bytesLoaded=Yt.loaded,z.bytesTotal=Yt.total),Yt.noTrace||(xe.push({s:ie,d:Yt.time?Yt.time:Kt.getTime()-ie.getTime(),b:[Yt.loaded?Yt.loaded-Re:0]}),ie=Kt,Re=Yt.loaded),qe&&(clearTimeout(qe),qe=null),Ve.get().streaming.fragmentRequestProgressTimeout>0&&(qe=setTimeout(function(){fe.warn("Abort request "+re.url+" due to progress timeout"),re.response.onabort=null,re.loader.abort(re),Ft()},Ve.get().streaming.fragmentRequestProgressTimeout)),oe.progress&&Yt&&oe.progress(Yt)},onabort:function(){dt(!0),qe&&(clearTimeout(qe),qe=null),oe.abort&&oe.abort(z)},ontimeout:function(Yt){var Kt;Kt=Yt.lengthComputable?"Request timeout: loaded: "+Yt.loaded+", out of: "+Yt.total+" : "+(Yt.loaded/Yt.total*100).toFixed(3)+"% Completed":"Request timeout: non-computable download size",fe.warn(Kt)},loader:nt,timeout:Oe,headers:Gt};var Lt=(new Date).getTime();if(isNaN(z.delayLoadingTime)||Lt>=z.delayLoadingTime)w.push(re),nt.load(re);else{var _t={httpRequest:re};H.push(_t),_t.delayTimeout=setTimeout(function(){if(-1!==H.indexOf(_t)){H.splice(H.indexOf(_t),1);try{ie=we=new Date,w.push(_t.httpRequest),nt.load(_t.httpRequest)}catch{_t.httpRequest.onerror()}}},z.delayLoadingTime-Lt)}}return S={load:function(oe){oe.request?P(oe,Ne.getRetryAttemptsForType(oe.request.type)):oe.error&&oe.error(oe.request,"error")},abort:function(){W.forEach(function(oe){clearTimeout(oe.timeout),oe.config.request&&oe.config.abort&&oe.config.abort(oe.config.request)}),W=[],H.forEach(function(oe){return clearTimeout(oe.delayTimeout)}),H=[],w.forEach(function(oe){oe.request.type!==gt.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(oe.onloadend=oe.onerror=oe.onprogress=void 0,oe.loader.abort(oe))}),w=[]}},fe=(0,B.Z)(de).getInstance().getLogger(S),w=[],H=[],W=[],k=vr(de).getInstance(),X=yn(de).getInstance(),ve=Ar(de).getInstance(),le=(0,Oi.Z)(de).getInstance(),Kr(ee={},gt.w.MPD_TYPE,he.DOWNLOAD_ERROR_ID_MANIFEST_CODE),Kr(ee,gt.w.XLINK_EXPANSION_TYPE,he.DOWNLOAD_ERROR_ID_XLINK_CODE),Kr(ee,gt.w.INIT_SEGMENT_TYPE,he.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),Kr(ee,gt.w.MEDIA_SEGMENT_TYPE,he.DOWNLOAD_ERROR_ID_CONTENT_CODE),Kr(ee,gt.w.INDEX_SEGMENT_TYPE,he.DOWNLOAD_ERROR_ID_CONTENT_CODE),Kr(ee,gt.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,he.DOWNLOAD_ERROR_ID_CONTENT_CODE),Kr(ee,gt.w.OTHER_TYPE,he.DOWNLOAD_ERROR_ID_CONTENT_CODE),Y=ee,S}Dr.__dashjs_factory_name="HTTPLoader";var ri=j.Z.getClassFactory(Dr);function hi(){var A;function S(){A={}}function w(){S()}return w(),{getLoader:function(H){for(var W in A)if(A.hasOwnProperty(W)&&H.startsWith(W))return A[W];return ri},registerLoader:function(H,W){A[H]=W},unregisterLoader:function(H){A[H]&&delete A[H]},unregisterAllLoader:S,reset:w}}hi.__dashjs_factory_name="SchemeLoaderFactory";var Ni=j.Z.getSingletonFactory(hi);function _i(A){A=A||{};var S,w,H=this.context;return S=Ni(H).getInstance(),{load:function(W){if(!w){var Y=S.getLoader(W&&W.request?W.request.url:null);w=Y(H).create({errHandler:A.errHandler,mediaPlayerModel:A.mediaPlayerModel,requestModifier:A.requestModifier,dashMetrics:A.dashMetrics,boxParser:A.boxParser?A.boxParser:null,constants:A.constants?A.constants:null,dashConstants:A.dashConstants?A.dashConstants:null,urlUtils:A.urlUtils?A.urlUtils:null,requestTimeout:isNaN(A.requestTimeout)?0:A.requestTimeout,errors:A.errors})}w.load(W)},abort:function(){w&&w.abort()}}}_i.__dashjs_factory_name="URLLoader";var Nr=j.Z.getClassFactory(_i);function dr(A){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(A)}function Io(A,S){return(Io=Object.setPrototypeOf||function(w,H){return w.__proto__=H,w})(A,S)}function xa(A){return(xa=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(A)}var Ya=function(A){!function(Y,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(k&&k.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),k&&Io(Y,k)}(W,A);var S,w,H=(S=W,w=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Y,k=xa(S);if(w){var X=xa(this).constructor;Y=Reflect.construct(k,arguments,X)}else Y=k.apply(this,arguments);return function Do(A,S){return!S||"object"!==dr(S)&&"function"!=typeof S?function(w){if(void 0===w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(A):S}(this,Y)});function W(Y){var k;return function(X,le){if(!(X instanceof le))throw new TypeError("Cannot call a class as a function")}(this,W),(k=H.call(this,Y)).checkForExistenceOnly=!0,k}return W}(K.Z);function Yn(A){var S,w,W=(A=A||{}).eventBus,Y=A.events,k=A.urlUtils,X=A.errors,le=A.streamId;return S={checkForExistence:function(ve){var fe=function(de){W.trigger(Y.CHECK_FOR_EXISTENCE_COMPLETED,{request:ve,exists:de})};if(ve){var ee=new Ya(ve.url);w.load({request:ee,success:function(){fe(!0)},error:function(){fe(!1)}})}else fe(!1)},load:function(ve){var fe=function(ee,de){W.trigger(Y.LOADING_COMPLETED,{request:ve,response:ee||null,error:de||null,sender:S})};ve?w.load({request:ve,progress:function(ee){W.trigger(Y.LOADING_PROGRESS,{request:ve,stream:ee.stream,streamId:le}),ee.data&&W.trigger(Y.LOADING_DATA_PROGRESS,{request:ve,response:ee.data||null,error:null,sender:S})},success:function(ee){fe(ee)},error:function(ee,de,ae){fe(void 0,new Le.Z(X.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,ae,de))},abort:function(ee){ee&&W.trigger(Y.LOADING_ABANDONED,{mediaType:ee.mediaType,request:ee,sender:S})}}):fe(void 0,new Le.Z(X.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,X.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){w&&w.abort()},reset:function(){w&&(w.abort(),w=null)}},w=Nr(this.context).create({errHandler:A.errHandler,errors:X,dashMetrics:A.dashMetrics,mediaPlayerModel:A.mediaPlayerModel,requestModifier:A.requestModifier,urlUtils:k,constants:E.Z,boxParser:A.boxParser,dashConstants:A.dashConstants,requestTimeout:A.settings.get().streaming.fragmentRequestTimeout}),S}Yn.__dashjs_factory_name="FragmentLoader";var La=j.Z.getClassFactory(Yn);function Cr(){return{modifyResponseAsync:function(A){return Promise.resolve(A)}}}Cr.__dashjs_factory_name="SegmentResponseModifier";var si=j.Z.getSingletonFactory(Cr);function _l(A){A=A||{};var S,w,H,W=this.context,Y=(0,V.Z)(W).getInstance(),k=A.errHandler,X=A.mediaPlayerModel,le=A.dashMetrics,ve=(0,B.Z)(W).getInstance(),fe=si(W).getInstance(),ee=A.streamInfo;function de(){return ee.id}function ae(){for(var Ne in H)H[Ne].reset();H={}}function He(Ne){if(Ne.sender){var Fe=Ne.request,Ze=Ne.response,he=Fe.isInitializationRequest(),Oe=Fe.mediaInfo.streamInfo;if(Ne.error&&(Fe.mediaType===E.Z.AUDIO||Fe.mediaType===E.Z.VIDEO||Fe.mediaType===E.Z.TEXT&&Fe.mediaInfo.isFragmented)&&Y.trigger(D.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:Ne.request.serviceLocation}),Ze&&Oe){var me=(Ve=Ze,P=Fe,oe=ee.id,te=Ne.type!==D.Z.FRAGMENT_LOADING_PROGRESS,(re=new vn).streamId=oe,re.mediaInfo=P.mediaInfo,re.segmentType=P.type,re.start=P.startTime,re.duration=P.duration,re.end=re.start+re.duration,re.bytes=Ve,re.index=P.index,re.quality=P.quality,re.representationId=P.representationId,re.endFragment=te,re);fe.modifyResponseAsync(me).then(function(Ve){Y.trigger(he?D.Z.INIT_FRAGMENT_LOADED:D.Z.MEDIA_FRAGMENT_LOADED,{chunk:Ve,request:Fe},{streamId:Oe.id,mediaType:Fe.mediaType})}).catch(function(Ve){w.error(Ve),Y.trigger(he?D.Z.INIT_FRAGMENT_LOADED:D.Z.MEDIA_FRAGMENT_LOADED,{chunk:me,request:Fe},{streamId:Oe.id,mediaType:Fe.mediaType})})}else w.warn("No "+Fe.mediaType+" bytes to push or stream is inactive.")}var Ve,P,oe,te,re}return w=ve.getLogger(S={getStreamId:de,getModel:function(Ne){var Fe=H[Ne];return Fe||(Fe=Se(W).create({streamInfo:ee,type:Ne,dashMetrics:le,fragmentLoader:La(W).create({dashMetrics:le,mediaPlayerModel:X,errHandler:k,requestModifier:(0,rt.Z)(W).getInstance(),settings:A.settings,boxParser:A.boxParser,eventBus:Y,events:D.Z,errors:De,dashConstants:A.dashConstants,urlUtils:A.urlUtils,streamId:de()}),debug:ve,eventBus:Y,events:D.Z}),H[Ne]=Fe),Fe},reset:function(){Y.off(T.Z.FRAGMENT_LOADING_COMPLETED,He,this),Y.off(T.Z.FRAGMENT_LOADING_PROGRESS,He,this),ae()}}),ae(),Y.on(T.Z.FRAGMENT_LOADING_COMPLETED,He,S),Y.on(T.Z.FRAGMENT_LOADING_PROGRESS,He,S),S}_l.__dashjs_factory_name="FragmentController";var Pc=j.Z.getClassFactory(_l),zl=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},Ys=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function Xi(A){var S,w,H=this.context,W=A.streamInfo;function Y(X){w.setTrackByIndex(X)}function k(){w&&w.reset()}return S={getStreamId:function(){return W.id},initialize:function(){w.addTracks();var X=w.getTracks();X&&X.length>0&&Y(0)},provide:function(X,le){if("function"==typeof le){var fe,ee=w.getCurrentTrack();if(!ee||ee.segmentDuration<=0||null==X)le(null);else{(fe=w.getThumbnailRequestForTime(X))&&(ee.segmentDuration=fe.duration);var de=Math.floor(X%ee.segmentDuration*ee.tilesHor*ee.tilesVert/ee.segmentDuration),ae=new zl;if(ae.width=Math.floor(ee.widthPerTile),ae.height=Math.floor(ee.heightPerTile),ae.x=Math.floor(de%ee.tilesHor)*ee.widthPerTile,ae.y=Math.floor(de/ee.tilesHor)*ee.heightPerTile,"readThumbnail"in ee)return ee.readThumbnail(X,function(Ne){ae.url=Ne,le(ae)});if(fe)ae.url=fe.url,ee.segmentDuration=NaN;else{var He=Math.floor(X/ee.segmentDuration);ae.url=(he=(0,I.vi)((Ne=ee).templateUrl,"Number",Ze=He+Ne.startNumber),he=(0,I.vi)(he,"Time",(Ze-1)*Ne.segmentDuration*Ne.timescale),he=(0,I.vi)(he,"Bandwidth",Ne.bandwidth),(0,I.eR)(he))}le(ae)}}var Ne,Ze,he},setTrackByIndex:Y,getCurrentTrackIndex:function(){return w.getCurrentTrackIndex()},getBitrateList:function(){var X=w.getTracks(),le=0;return X.map(function(ve){var fe=new Ys;return fe.mediaType=E.Z.IMAGE,fe.qualityIndex=le++,fe.bitrate=ve.bitrate,fe.width=ve.width,fe.height=ve.height,fe})},reset:k},k(),w=(0,Qt.Z)(H).create({streamInfo:W,adapter:A.adapter,baseURLController:A.baseURLController,timelineConverter:A.timelineConverter,debug:A.debug,eventBus:A.eventBus,events:A.events,dashConstants:A.dashConstants,dashMetrics:A.dashMetrics,segmentBaseController:A.segmentBaseController}),S}Xi.__dashjs_factory_name="ThumbnailController";var Lu=j.Z.getClassFactory(Xi),zs=ne(7417);function Ou(A){var S;A=A||{};var w=[],H=(0,V.Z)(this.context).getInstance(),W=A.updateEventName,Y=A.addBlacklistEventName;function k(X){-1===w.indexOf(X)&&(w.push(X),H.trigger(W,{entry:X}))}return S={add:k,contains:function(X){return!!(w.length&&X&&X.length)&&-1!==w.indexOf(X)},reset:function(){w=[]}},Y&&H.on(Y,function(X){k(X.entry)},S),S}Ou.__dashjs_factory_name="BlackListController";var jo=j.Z.getClassFactory(Ou),Fc=[E.Z.VIDEO,E.Z.AUDIO,E.Z.TEXT,E.Z.MUXED,E.Z.IMAGE];function Ti(A){A=A||{};var S,w,H,W,Y,k,X,le,ve,fe,ee,de,ae,He,Ne,Fe,Ze,he,Oe=this.context,me=(0,V.Z)(Oe).getInstance(),Ve=(0,xt.Z)(Oe).getInstance(),P=A.manifestModel,oe=A.mediaPlayerModel,te=A.dashMetrics,re=A.manifestUpdater,z=A.adapter,xe=A.timelineConverter,be=A.capabilities,ke=A.errHandler,we=A.abrController,ie=A.playbackController,Re=A.eventController,qe=A.mediaController,ft=A.protectionController,nt=A.textController,dt=A.videoModel,st=A.streamInfo,Ft=A.settings;function Gt(Xt,Dn){return new Promise(function(Fn,Ln){Kt(),fe=!0,Un();var Gn=dt.getElement(),Ct=[];Fc.forEach(function(ct){(ct!==E.Z.TEXT||Xt)&&(ct!==E.Z.VIDEO||!Gn||Gn&&/^VIDEO$/i.test(Gn.nodeName))&&Ct.push(Ot(ct,Xt))}),Promise.all(Ct).then(function(){return ct=Dn,new Promise(function(jt){var Ge={},We=H.map(function(Mt){return Mt.createBufferSinks(ct)});Promise.all(We).then(function(Mt){Mt.forEach(function(gn){gn&&(Ge[gn.getType()]=gn)}),jt(Ge)}).catch(function(){jt(Ge)})});var ct}).then(function(ct){if(fe=!1,0===H.length){var jt="No streams to play.";ke.error(new Le.Z(De.MANIFEST_ERROR_ID_NOSTREAMS_CODE,jt,P.getValue())),w.fatal(jt)}else Mn();Xt&&nt.createTracks(st),Fn(ct)}).catch(function(ct){Ln(ct)})})}function Ot(Xt,Dn){var Fn,Ln=z.getAllMediaInfoForType(st,Xt),Gn=[],Ct=null;if(!Ln||0===Ln.length)return w.info("No "+Xt+" data."),Promise.resolve();Xt===E.Z.VIDEO&&(X=!0),Xt===E.Z.AUDIO&&(le=!0);for(var ct=0,jt=Ln.length;ct<jt;ct++)Ct=Ln[ct],Xt===E.Z.TEXT&&Ct.isEmbedded&&(nt.addEmbeddedTrack(st,Ct),Gn.push(Ct)),kt(Ct)&&qe.addTrack(Ct);if(Gn.length>0&&(qe.setInitialMediaSettingsForType(Xt,st),nt.addMediaInfosToBuffer(st,Xt,Gn)),0===(Ln=Ln.filter(function(We){return!We.isEmbedded})).length)return Promise.resolve();if(Xt===E.Z.IMAGE)return(de=Lu(Oe).create({streamInfo:st,adapter:z,baseURLController:A.baseURLController,timelineConverter:A.timelineConverter,debug:Fe,eventBus:me,events:D.Z,dashConstants:_.Z,dashMetrics:A.dashMetrics,segmentBaseController:A.segmentBaseController})).initialize(),Promise.resolve();me.trigger(D.Z.STREAM_INITIALIZING,{streamInfo:st,mediaInfo:Ct}),qe.setInitialMediaSettingsForType(Xt,st);var Ge=function(We,Mt){var gn=We&&We.length>0?We[0]:null,An=ee.getModel(gn?gn.type:null),pr=gn?gn.type:null,ci=gn?gn.mimeType:null,Bi=gn?gn.isFragmented:null,di=kn(Oe).create({streamInfo:st,type:pr,mimeType:ci,timelineConverter:xe,adapter:z,manifestModel:P,mediaPlayerModel:oe,fragmentModel:An,dashMetrics:A.dashMetrics,baseURLController:A.baseURLController,segmentBaseController:A.segmentBaseController,abrController:we,playbackController:ie,mediaController:qe,textController:nt,errHandler:ke,settings:Ft,boxParser:Ne,segmentBlacklistController:ae});di.initialize(Mt,X,Bi),H.push(di);for(var Si=0;Si<We.length;Si++)di.addMediaInfo(We[Si]);return pr===E.Z.TEXT&&nt.addMediaInfosToBuffer(st,pr,We,An),di}(Ln,Dn);return(Fn=qe.getCurrentTrackFor(Xt,st.id))?(we.updateTopQualityIndex(Fn),Ge.selectMediaInfo(Xt===E.Z.TEXT&&Fn.isEmbedded?Ln[0]:Fn)):Promise.resolve()}function kt(Xt){var Fn=Xt?Xt.type:null;return Fn===E.Z.MUXED?(w.fatal("Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines"),ke.error(new Le.Z(De.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,"Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",P.getValue())),!1):!(Fn!==E.Z.TEXT&&Fn!==E.Z.IMAGE&&Xt.contentProtection&&!be.supportsEncryptedMedia()&&(ke.error(new Le.Z(De.CAPABILITY_MEDIAKEYS_ERROR_CODE,De.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function wn(Xt){for(var Dn=H?H.length:0,Fn=0;Fn<Dn;Fn++){var Ln=H[Fn].getFragmentModel();Ln.abortRequests(),Ln.resetInitialSettings(),H[Fn].reset(!1,Xt)}nt&&nt.deactivateStream(st),H=[],Y=!1,k=!1,Hn(!1),Ye(!1),me.trigger(D.Z.STREAM_DEACTIVATED,{streamInfo:st})}function tt(Xt){wn(Xt),W=!1,X=!1,le=!1,ve={},fe=!1,Ze=!1,he=[]}function Ye(Xt){Ze=Xt}function Lt(){return st?st.start:NaN}function _t(){return st?st.id:null}function Yt(){return st}function Kt(){if(!dt||!we)throw new Error(E.Z.MISSING_CONFIG_ERROR)}function Wt(Xt){Xt.error&&(ke.error(Xt.error),w.fatal(Xt.error.message))}function Un(){if(Re){var Xt=z.getEventsFor(st);Xt&&Xt.length>0&&Re.addInlineEvents(Xt,st.id)}}function Mn(){for(var Xt=H.length,Dn=ve.audio||ve.video?new Le.Z(De.DATA_UPDATE_FAILED_ERROR_CODE,De.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,Fn=0;Fn<Xt;Fn++)if(H[Fn].isUpdating()||fe)return;if(ft){ft.clearMediaInfoArray();for(var Ln=0;Ln<Xt&&H[Ln];Ln++){var Gn=H[Ln].getType(),Ct=H[Ln].getMediaInfo();if(Gn===E.Z.AUDIO||Gn===E.Z.VIDEO||Gn===E.Z.TEXT&&Ct.isFragmented){var ct=H[Ln].getMediaInfo();ct&&ft.initializeForMedia(ct)}}ft.handleKeySystemFromManifest()}Dn?ke.error(Dn):W||(W=!0,dt.waitForReadyState(E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){me.trigger(D.Z.STREAM_INITIALIZED,{streamInfo:st})}))}function er(){var Xt=rn(),Dn=Xt.length;if(0!==Dn){for(var Fn=0;Fn<Dn;Fn++)if(!Xt[Fn].isBufferingCompleted()&&(Xt[Fn].getType()===E.Z.AUDIO||Xt[Fn].getType()===E.Z.VIDEO))return void w.debug("onBufferingCompleted - One streamProcessor has finished but",Xt[Fn].getType(),"one is not buffering completed");w.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),k=!0,me.trigger(D.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:st},{streamInfo:st})}else w.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function Jn(Xt){ve[Xt.mediaType]=Xt.error,Mn()}function At(Xt){Re&&Re.addInbandEvents(Xt.events,st.id)}function $t(Xt){return Xt&&Xt.type?Ut(Xt.type):null}function Ut(Xt){return Xt?rn().filter(function(Dn){return Dn.getType()===Xt})[0]:null}function rn(){for(var Xt,Dn,Fn=[],Ln=0;Ln<H.length;Ln++)(Xt=(Dn=H[Ln]).getType())!==E.Z.AUDIO&&Xt!==E.Z.VIDEO&&Xt!==E.Z.TEXT||Fn.push(Dn);return Fn}function mn(Xt,Dn){var Fn=Yt(),Ln=Dn.getStreamInfo();if(!Ln||!Fn)return!0;var Gn=z.getAdaptationForType(Ln.index,Xt,Ln),Ct=z.getAdaptationForType(Fn.index,Xt,Fn);return Gn&&Ct?!(!Zn(Ct)&&Zn(Gn)):!Gn&&!Ct}function Zn(Xt){return!!Xt&&!!(Xt.ContentProtection||Xt.Representation_asArray&&Xt.Representation_asArray.length>0&&Xt.Representation_asArray[0].ContentProtection)}function Bn(Xt,Dn){var Fn=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Xt||!Xt.hasOwnProperty("getStreamInfo"))return!1;var Ln=Xt.getStreamInfo(),Gn=Fn?Fn.getStreamInfo():Yt();if(!Ln||!Gn)return!1;var Ct=z.getAdaptationForType(Ln.index,Dn,Ln),ct=z.getAdaptationForType(Gn.index,Dn,Gn);if(!Ct||!ct)return!Ct&&!ct;var jt=Ct&&ct&&Ct.mimeType===ct.mimeType,Ge=ct.Representation_asArray.map(function(An){return An.codecs}),We=Ct.Representation_asArray.map(function(An){return An.codecs}),Mt=We.some(function(An){return Ge.indexOf(An)>-1}),gn=We.some(function(An){return Ge.some(function(pr){return be.codecRootCompatibleWithCodec(pr,An)})});return Mt||gn&&jt}function Hn(Xt){He=Xt}function nr(){return He}return S={initialize:function(){me.on(D.Z.BUFFERING_COMPLETED,er,S),me.on(D.Z.DATA_UPDATE_COMPLETED,Jn,S),me.on(D.Z.INBAND_EVENTS,At,S),ft&&(me.on(D.Z.KEY_ERROR,Wt,S),me.on(D.Z.SERVER_CERTIFICATE_UPDATED,Wt,S),me.on(D.Z.LICENSE_REQUEST_COMPLETE,Wt,S),me.on(D.Z.KEY_SYSTEM_SELECTED,Wt,S),me.on(D.Z.KEY_SESSION_CREATED,Wt,S),me.on(D.Z.KEY_STATUSES_CHANGED,Wt,S)),nt.initializeForStream(st),me.trigger(D.Z.STREAM_UPDATED,{streamInfo:st})},getStreamId:function(){return st?st.id:null},activate:function(Xt,Dn){return new Promise(function(Fn,Ln){if(!Y)return nr()?(Y=!0,me.trigger(D.Z.STREAM_ACTIVATED,{streamInfo:st}),void Fn(Dn)):void(Gn=Xt,Ct=Dn,Gt(Gn,Ct)).then(function(Gn){Y=!0,me.trigger(D.Z.STREAM_ACTIVATED,{streamInfo:st}),Fn(Gn)}).catch(function(Gn){Ln(Gn)});var Gn,Ct;Fn(Dn)})},deactivate:wn,getIsActive:function(){return Y},getDuration:function(){return st?st.duration:NaN},getStartTime:Lt,getId:_t,getStreamInfo:Yt,getHasAudioTrack:function(){return le},getHasVideoTrack:function(){return X},startPreloading:function(Xt,Dn){return new Promise(function(Fn,Ln){nr()?Ln():(w.info("[startPreloading] Preloading next stream with id ".concat(_t())),Hn(!0),Gt(Xt,Dn).then(function(){for(var Gn=0;Gn<H.length&&H[Gn];Gn++)H[Gn].setExplicitBufferingTime(Lt()),H[Gn].getScheduleController().startScheduleTimer();Fn()}).catch(function(){Hn(!1),Ln()}))})},initializeForTextWithMediaSource:function(Xt){return new Promise(function(Dn,Fn){Ot(E.Z.TEXT,Xt).then(function(){return(Ln=Ut(E.Z.TEXT))?Ln.createBufferSinks():Promise.resolve();var Ln}).then(function(){nt.createTracks(st),Dn()}).catch(function(Ln){Fn(Ln)})})},getThumbnailController:function(){return de},getBitrateListFor:function(Xt){if(Kt(),Xt===E.Z.IMAGE)return de?de.getBitrateList():[];var Dn=function(Fn){for(var Ln=null,Gn=0;Gn<H.length;Gn++)if((Ln=H[Gn]).getType()===Fn)return Ln.getMediaInfo();return null}(Xt);return we.getBitrateList(Dn)},updateData:function(Xt){return new Promise(function(Dn){fe=!0,st=Xt,Re&&Un();for(var Fn=[],Ln=0,Gn=H.length;Ln<Gn;Ln++){var Ct=H[Ln],ct=Ct.getMediaInfo();Fn.push(Ct.updateStreamInfo(st));var jt=z.getAllMediaInfoForType(st,Ct.getType());if(jt=jt.filter(function(Mt){return!Mt.isEmbedded})){Ct.clearMediaInfoArray();for(var Ge=0;Ge<jt.length;Ge++){var We=jt[Ge];Ct.addMediaInfo(jt[Ge]),z.areMediaInfosEqual(ct,We)&&(we.updateTopQualityIndex(We),Fn.push(Ct.selectMediaInfo(We)))}}}Promise.all(Fn).then(function(){for(Fn=[];he.length>0;){var Mt=he.pop(),gn=Mt.newMediaInfo,An=$t(Mt.oldMediaInfo);if(!An)return;Fn.push(An.prepareTrackSwitch()),Fn.push(An.selectMediaInfo(gn))}return Promise.all(Fn)}).then(function(){fe=!1,Mn(),me.trigger(D.Z.STREAM_UPDATED,{streamInfo:st}),Dn()})})},reset:function(Xt){ee&&(ee.reset(),ee=null),we&&st&&we.clearDataForStream(st.id),ae&&(ae.reset(),ae=null),tt(Xt),st=null,me.off(D.Z.DATA_UPDATE_COMPLETED,Jn,S),me.off(D.Z.BUFFERING_COMPLETED,er,S),me.off(D.Z.INBAND_EVENTS,At,S),ft&&(me.off(D.Z.KEY_ERROR,Wt,S),me.off(D.Z.SERVER_CERTIFICATE_UPDATED,Wt,S),me.off(D.Z.LICENSE_REQUEST_COMPLETE,Wt,S),me.off(D.Z.KEY_SYSTEM_SELECTED,Wt,S),me.off(D.Z.KEY_SESSION_CREATED,Wt,S),me.off(D.Z.KEY_STATUSES_CHANGED,Wt,S))},getProcessors:rn,setMediaSource:function(Xt){return new Promise(function(Dn,Fn){for(var Ln=[],Gn=0;Gn<H.length;)kt(H[Gn].getMediaInfo())?(Ln.push(H[Gn].setMediaSource(Xt)),Gn++):(H[Gn].reset(),H.splice(Gn,1));Promise.all(Ln).then(function(){for(var Ct=0;Ct<H.length;Ct++)H[Ct].dischargePreBuffer();if(0===H.length){var ct="No streams to play.";ke.error(new Le.Z(De.MANIFEST_ERROR_ID_NOSTREAMS_CODE,ct+"nostreams",P.getValue())),w.fatal(ct)}Dn()}).catch(function(Ct){w.error(Ct),Fn(Ct)})})},isMediaCodecCompatible:function(Xt){var Dn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Bn(Xt,E.Z.VIDEO,Dn)&&Bn(Xt,E.Z.AUDIO,Dn)},isProtectionCompatible:function(Xt){return!Xt||mn(E.Z.VIDEO,Xt)&&mn(E.Z.AUDIO,Xt)},getPreloaded:nr,getIsEndedEventSignaled:function(){return Ze},setIsEndedEventSignaled:Ye,getAdapter:function(){return z},getHasFinishedBuffering:function(){return k},setPreloaded:Hn,startScheduleControllers:function(){for(var Xt=H.length,Dn=0;Dn<Xt&&H[Dn];Dn++)H[Dn].getScheduleController().startScheduleTimer()},prepareTrackChange:function(Xt){if(Y&&st){k=!1;var Dn=Xt.newMediaInfo,Fn=P.getValue();z.setCurrentMediaInfo(st.id,Dn.type,Dn);var Ln=$t(Dn);if(Ln){var Gn=ie.getTime();w.info("Stream -  Process track changed at current time "+Gn),Fn.refreshManifestOnSwitchTrack?(he.push(Xt),re.getIsUpdating()||(w.debug("Stream -  Refreshing manifest for switch track"),re.refreshManifest())):Ln.selectMediaInfo(Dn).then(function(){Dn.type!==E.Z.VIDEO&&Dn.type!==E.Z.AUDIO||we.updateTopQualityIndex(Dn),Ln.prepareTrackSwitch()})}}},prepareQualityChange:function(Xt){var Dn=Ut(Xt.mediaType);Dn&&Dn.prepareQualityChange(Xt)}},function(){try{Fe=(0,B.Z)(Oe).getInstance(),w=Fe.getLogger(S),tt(),Ne=(0,zs.Z)(Oe).getInstance(),ae=jo(Oe).create({updateEventName:D.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:D.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),ee=Pc(Oe).create({streamInfo:st,mediaPlayerModel:oe,dashMetrics:te,errHandler:ke,settings:Ft,boxParser:Ne,dashConstants:_.Z,urlUtils:Ve})}catch(Xt){throw Xt}}(),S}Ti.__dashjs_factory_name="Stream";var bs=j.Z.getClassFactory(Ti),Ws=function A(S){(function(w,H){if(!(w instanceof H))throw new TypeError("Cannot call a class as a function")})(this,A),this.url=S||null,this.type=gt.w.CONTENT_STEERING_TYPE,this.responseType="json"},Gr=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function Tr(){var A,S,w,H,W,Y,k,X,le,ve,fe,ee,de,ae,He,Ne=this.context,Fe=(0,xt.Z)(Ne).getInstance();function Ze(we){P(we,"baseUrl")}function he(we){P(we,"location")}function Oe(we){if(we&&we.request&&we.request.serviceLocation&&we.request.requestStartDate&&we.request.requestEndDate&&!isNaN(we.request.bytesTotal)){var ie=we.request.serviceLocation,Re=we.request.requestEndDate.getTime()-we.request.requestStartDate.getTime();Ve(ie,parseInt(8*we.request.bytesTotal/Re*1e3))}}function me(we){we&&we.httpRequest&&we.httpRequest._serviceLocation&&!isNaN(we.throughput)&&Ve(we.httpRequest._serviceLocation,1e3*we.throughput)}function Ve(we,ie){W[we]||(W[we]=[]),W[we].push(ie),W[we].length>4&&W[we].shift()}function P(we,ie){if(we&&we.request&&we.request.serviceLocation){var Re=we.request.serviceLocation;-1===H[ie].all.indexOf(Re)&&H[ie].all.push(Re),H[ie].current=Re}}function oe(){var we=fe.getValue(),ie=He.getContentSteering(we);return ie||(ie=de.getServiceDescriptionSettings().contentSteering),ie}function te(){return new Promise(function(we){try{var ie=oe();if(!ie||!ie.serverUrl)return void we();var Re=function(ft){var nt=ft.serverUrl;w&&w.reloadUri&&(nt=Fe.isRelative(w.reloadUri)?Fe.resolve(w.reloadUri,ft.serverUrl):w.reloadUri);var dt=[],st=H.baseUrl.all.concat(H.location.all);if(st.length>0){var Ft=st.map(function(kt){return{serviceLocation:kt,throughput:function(tt){if(!tt||!W[tt]||0===W[tt].length)return-1;var Ye=W[tt].reduce(function(Lt,_t){return Lt+_t})/W[tt].length;return parseInt(Ye)}(kt)}});Ft.sort(function(kt,wn){return wn.throughput-kt.throughput});var Gt="",Ot="";Ft.forEach(function(kt,wn){0!==wn&&(Gt="".concat(Gt,","),kt.throughput>-1&&(Ot="".concat(Ot,","))),Gt="".concat(Gt).concat(kt.serviceLocation),kt.throughput>-1&&(Ot="".concat(Ot).concat(kt.throughput))}),dt.push({key:"_DASH_pathway",value:'"'.concat(Gt,'"')}),dt.push({key:"_DASH_throughput",value:Ot})}return tn.Z.addAditionalQueryParameterToUrl(nt,dt)}(ie),qe=new Ws(Re);k.load({request:qe,success:function(ft){var nt;(nt=ft)&&nt[_.Z.CONTENT_STEERING_RESPONSE.VERSION]&&1===parseInt(nt[_.Z.CONTENT_STEERING_RESPONSE.VERSION])&&((w=new Gr).version=nt[_.Z.CONTENT_STEERING_RESPONSE.VERSION],nt[_.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(nt[_.Z.CONTENT_STEERING_RESPONSE.TTL])&&(w.ttl=nt[_.Z.CONTENT_STEERING_RESPONSE.TTL]),nt[_.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(w.reloadUri=nt[_.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),nt[_.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(w.pathwayPriority=nt[_.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),nt[_.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(w.pathwayClones=nt[_.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],w.pathwayClones=w.pathwayClones.filter(function(dt){return(st=dt)[_.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&st[_.Z.CONTENT_STEERING_RESPONSE.ID]&&st[_.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&st[_.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][_.Z.CONTENT_STEERING_RESPONSE.HOST];var st})),xe()),ae.trigger(T.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:w,url:Re}),we()},error:function(ft,nt,dt,st){(function(Ft,Gt){try{switch(S.warn("Error fetching data from content steering server",Ft),Gt.status){case 410:break;case 429:var Ot=Gt&&Gt.getResponseHeader?Gt.getResponseHeader("retry-after"):null;null!==Ot&&(w||(w={}),w.ttl=parseInt(Ot)),xe();break;default:xe()}}catch(kt){S.error(kt)}})(ft,st),we(ft)},complete:function(){H.baseUrl.all=re(H.baseUrl),H.location.all=re(H.location)}})}catch(ft){we(ft)}})}function re(we){return we.all&&0!==we.all.length&&we.current?we.all.filter(function(ie){return ie===we.current}):[]}function z(we){try{var ie=[];return we&&0!==we.length&&w&&w.pathwayClones&&0!==w.pathwayClones.length&&w.pathwayClones.forEach(function(Re){var qe=we.filter(function(Ft){return Re[_.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===Ft.serviceLocation}),ft=null;if(qe&&qe.length>0&&(ft=qe[0]),ft){var nt=new URL(ft.url),dt=Re[_.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][_.Z.CONTENT_STEERING_RESPONSE.HOST];dt=tn.Z.stringHasProtocol(dt)?dt:"".concat(nt.protocol,"//").concat(dt);var st={synthesizedUrl:"".concat(dt).concat(nt.pathname),serviceLocation:Re[_.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:Re[_.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][_.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:ft};ie.push(st)}}),ie}catch(Re){return S.error(Re),[]}}function xe(){w&&w.ttl&&!isNaN(w.ttl)&&(Y&&clearTimeout(Y),Y=setTimeout(function(){te()},1e3*w.ttl))}function be(){Y&&clearTimeout(Y),Y=null}function ke(){w=null,W={},H={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},be()}return A={reset:function(){ke(),ae.off(T.Z.FRAGMENT_LOADING_STARTED,Ze,A),ae.off(T.Z.MANIFEST_LOADING_STARTED,he,A),ae.off(T.Z.MANIFEST_LOADING_FINISHED,Oe,A),ae.off(T.Z.THROUGHPUT_MEASUREMENT_STORED,me,A)},setConfig:function(we){we&&(we.adapter&&(He=we.adapter),we.errHandler&&(X=we.errHandler),we.dashMetrics&&(le=we.dashMetrics),we.mediaPlayerModel&&(ve=we.mediaPlayerModel),we.requestModifier&&(ee=we.requestModifier),we.manifestModel&&(fe=we.manifestModel),we.serviceDescriptionController&&(de=we.serviceDescriptionController),we.eventBus&&(ae=we.eventBus))},loadSteeringData:te,getCurrentSteeringResponseData:function(){return w},shouldQueryBeforeStart:function(){var we=oe();return!!we&&we.queryBeforeStart},getSteeringDataFromManifest:oe,stopSteeringRequestTimer:be,getSynthesizedBaseUrlElements:function(we){try{return z(we).map(function(ie){var Re=new ha(ie.synthesizedUrl,ie.serviceLocation);return Re.queryParams=ie.queryParams,Re.dvbPriority=ie.reference.dvbPriority,Re.dvbWeight=ie.reference.dvbWeight,Re.availabilityTimeOffset=ie.reference.availabilityTimeOffset,Re.availabilityTimeComplete=ie.reference.availabilityTimeComplete,Re})}catch(ie){return S.error(ie),[]}},getSynthesizedLocationElements:function(we){try{return z(we).map(function(ie){var Re=new jn(ie.synthesizedUrl,ie.serviceLocation);return Re.queryParams=ie.queryParams,Re})}catch(ie){return S.error(ie),[]}},initialize:function(){k=Nr(Ne).create({errHandler:X,dashMetrics:le,mediaPlayerModel:ve,requestModifier:ee,errors:De}),ae.on(T.Z.FRAGMENT_LOADING_STARTED,Ze,A),ae.on(T.Z.MANIFEST_LOADING_STARTED,he,A),ae.on(T.Z.MANIFEST_LOADING_FINISHED,Oe,A),ae.on(T.Z.THROUGHPUT_MEASUREMENT_STORED,me,A)}},S=(0,B.Z)(Ne).getInstance().getLogger(A),ke(),A}Tr.__dashjs_factory_name="ContentSteeringController";var qo=j.Z.getSingletonFactory(Tr);function Tl(){var A,S,w,H=this.context,W=(0,ot.Z)(H).getInstance();return A={select:function(Y){if(!Y||0===Y.length)return null;var X,le,k=null;return W.get().streaming.applyContentSteering&&(X=Y,k=(le=w.getCurrentSteeringResponseData())&&le.pathwayPriority&&le.pathwayPriority.length>0?function(){for(var ve=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],ee=0,de=null,ae=function(){var He=ve[ee],Ne=fe.findIndex(function(Fe){return Fe.serviceLocation&&Fe.serviceLocation===He});if(-1!==Ne&&!S.contains(fe[Ne].serviceLocation))return de=fe[Ne],"break";ee+=1};ee<ve.length&&"break"!==ae(););return de}(le.pathwayPriority,X):null),k||(k=function(X){return X[0]}(Y)),k},setConfig:function(Y){Y.blacklistController&&(S=Y.blacklistController),Y.contentSteeringController&&(w=Y.contentSteeringController)},reset:function(){S.reset()}},S=jo(H).create({updateEventName:D.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:D.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),w=qo(H).getInstance(),A}Tl.__dashjs_factory_name="LocationSelector";var no=j.Z.getClassFactory(Tl);function Sr(){var A,S,w,H,W,Y,k,X,le,ve,fe,ee,de,ae,He=this.context,Ne=(0,V.Z)(He).getInstance(),Fe=(0,xt.Z)(He).getInstance();function Ze(){w=NaN,k=!1,W=!0,Y=!1,he()}function he(){null!==H&&(clearTimeout(H),H=null)}function Oe(be){he(),Y||(isNaN(be)&&!isNaN(w)&&(be=1e3*w),isNaN(be)||(S.debug("Refresh manifest in "+be+" milliseconds."),H=setTimeout(oe,be)))}function me(){var be=arguments.length>0&&void 0!==arguments[0]&&arguments[0];k=!0;var ke=le.getValue(),we=ke.url,ie=null,Re=fe.getPatchLocation(ke),qe=ve.select(Re),ft=null;if(qe&&!be)we=qe.url,ie=qe.serviceLocation,ft=qe.queryParams;else{var nt=function Ve(be){var ke=fe.getLocation(be),we=de.getSynthesizedLocationElements(ke);return ke.concat(we)}(ke),dt=ve.select(nt);dt&&(we=dt.url,ie=dt.serviceLocation,ft=dt.queryParams)}Fe.isRelative(we)&&(we=Fe.resolve(we,ke.url)),X.load(we,ie,ft)}function P(be){if(be){if(fe.getIsPatch(be)){var ke=be;be=le.getValue();var we=fe.isPatchValid(be,ke),ie=we;if(we){var Re=fe.getPublishTime(be);ie=fe.applyPatchToManifest(be,ke);var qe=fe.getPublishTime(be);ie=Re.getTime()!=qe.getTime()}if(!ie)return S.debug("Patch provided is invalid, performing full manifest refresh"),void me(!0);be.loadedTime=new Date}}else(be=le.getValue()).loadedTime=new Date;if(le.getValue()&&le.getValue().type===_.Z.DYNAMIC&&be.type===_.Z.STATIC)return Ne.trigger(D.Z.DYNAMIC_TO_STATIC),k=!1,void(Y=!0);le.setValue(be);var ft=new Date,nt=(ft.getTime()-be.loadedTime.getTime())/1e3;1e3*(w=fe.getManifestUpdatePeriod(be,nt))>2147483647&&(w=2147483.647),Ne.trigger(D.Z.MANIFEST_UPDATED,{manifest:be}),S.info("Manifest has been refreshed at "+ft+"["+ft.getTime()/1e3+"] "),W||Oe()}function oe(){W||(k?Oe(ae.get().streaming.manifestUpdateRetryInterval):me())}function te(be){be.error?be.error.code===De.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&ee.error(be.error):P(be.manifest)}function re(){W=!1,Oe()}function z(){(W=!ae.get().streaming.scheduling.scheduleWhilePaused)&&he()}function xe(){k=!1}return A={initialize:function(){Ze(),Ne.on(D.Z.STREAMS_COMPOSED,xe,this),Ne.on(T.Z.PLAYBACK_STARTED,re,this),Ne.on(T.Z.PLAYBACK_PAUSED,z,this),Ne.on(D.Z.INTERNAL_MANIFEST_LOADED,te,this)},setManifest:function(be){P(be)},refreshManifest:me,getIsUpdating:function(){return k},setConfig:function(be){be&&(be.manifestModel&&(le=be.manifestModel),be.adapter&&(fe=be.adapter),be.manifestLoader&&(X=be.manifestLoader),be.errHandler&&(ee=be.errHandler),be.locationSelector&&(ve=be.locationSelector),be.settings&&(ae=be.settings),be.contentSteeringController&&(de=be.contentSteeringController))},reset:function(){Ne.off(T.Z.PLAYBACK_STARTED,re,this),Ne.off(T.Z.PLAYBACK_PAUSED,z,this),Ne.off(D.Z.STREAMS_COMPOSED,xe,this),Ne.off(D.Z.INTERNAL_MANIFEST_LOADED,te,this),Ze()}},S=(0,B.Z)(He).getInstance().getLogger(A),ve=no(He).create(),A}Sr.__dashjs_factory_name="ManifestUpdater";var kc=j.Z.getClassFactory(Sr);function As(){var A,S,w,H,W,Y,k,X,le,ve,fe,ee,de,ae,He,Ne,Fe=this.context,Ze=(0,V.Z)(Fe).getInstance(),he=(0,xt.Z)(Fe).getInstance();function Oe(){X=[],le=[],ve=null,fe=null,de=null,ee=NaN,w=!1,H=!1,ae=W.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function me(){W.get().streaming.utcSynchronization.enabled&&!w&&!H&&de&&de.value&&de.schemeIdUri&&!isNaN(ee)&&!isNaN(W.get().streaming.utcSynchronization.backgroundAttempts)&&(fe&&(Date.now()-fe)/1e3<30||(X=[],H=!0,Ve(isNaN(W.get().streaming.utcSynchronization.backgroundAttempts)?2:W.get().streaming.utcSynchronization.backgroundAttempts)))}function Ve(dt){try{if(dt<=0)return void ft();var st=Date.now();Y[de.schemeIdUri](de.value,function(Ft){var Gt=Date.now(),Ot=oe(st,Gt,Ft);X.push(Ot),Ve(dt-1)},function(){ft()})}catch{ft()}}function P(){var st=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||0;if(!le||0===le.length||st>=le.length)te();else{var Ft=le[st];if(Ft)if(Y.hasOwnProperty(Ft.schemeIdUri)){var Gt=(new Date).getTime();Y[Ft.schemeIdUri](Ft.value,function(Ot){var kt=(new Date).getTime(),wn=oe(Gt,kt,Ot);de=Ft,te(wn)},function(){P(st+1)})}else P(st+1);else te()}}function oe(dt,st,Ft){return Ft-(st-(st-dt)/2)}function te(){var dt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,st=isNaN(dt);st&&W.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?function Re(){var dt=k.getLatestMPDRequestHeaderValueByID("Date"),st=null!==dt?new Date(dt).getTime():Number.NaN;isNaN(st)?qe(!0):qe(!1,st-Date.now())}():qe(st,dt)}function re(dt){var Gt,Ot,kt,st=Date.parse(dt);return isNaN(st)&&(kt=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(dt),Gt=Date.UTC(parseInt(kt[1],10),parseInt(kt[2],10)-1,parseInt(kt[3],10),parseInt(kt[4],10),parseInt(kt[5],10),kt[6]&&(parseInt(kt[6],10)||0),kt[7]&&1e3*parseFloat(kt[7])||0),kt[9]&&kt[10]&&(Ot=60*parseInt(kt[9],10)+parseInt(kt[10],10),Gt+=("+"===kt[8]?-1:1)*Ot*60*1e3),st=new Date(Gt).getTime()),st}function z(dt){return Date.parse(dt)}function xe(dt){return Date.parse(dt)}function be(dt,st,Ft){Ft()}function ke(dt,st,Ft){var Gt=re(dt);isNaN(Gt)?Ft():st(Gt)}function we(dt,st,Ft,Gt,Ot){var kt,wn,tt=!1,Ye=new XMLHttpRequest,Lt=Ot?gt.w.HEAD:gt.w.GET,_t=st.match(/\S+/g);if(st=_t.shift(),kt=function(){tt||(tt=!0,_t.length?we(dt,_t.join(" "),Ft,Gt,Ot):Gt())},wn=function(){var Kt,Wt;200===Ye.status&&(Kt=Ot?Ye.getResponseHeader("Date"):Ye.response,Wt=dt(Kt),isNaN(Wt)||(Ft(Wt),tt=!0))},he.isRelative(st)){var Yt=Ne.resolve();Yt&&(st=he.resolve(st,Yt.url))}Ye.open(Lt,st),Ye.timeout=5e3,Ye.onload=wn,Ye.onloadend=kt,Ye.send()}function ie(dt,st,Ft){we(xe,dt,st,Ft,!0)}function qe(dt,st){if(isNaN(ee)||isNaN(st)||dt||function(Gt){try{var Ot,kt=nt(Gt),wn=isNaN(ae)?30:ae,tt=isNaN(W.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:W.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,Ye=isNaN(W.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:W.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Lt=isNaN(W.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:W.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;kt?(Ot=Math.min(wn*tt,Ye),S.debug("Increasing timeBetweenSyncAttempts to ".concat(Ot))):(Ot=Math.max(wn/tt,Lt),S.debug("Decreasing timeBetweenSyncAttempts to ".concat(Ot))),ae=Ot}catch{}}(st),!dt&&!isNaN(st)){ve=Date.now(),w=!1;var Ft=isNaN(ee);ee=st,Ft&&me(),S.debug("Completed UTC sync. Setting client - server offset to ".concat(st))}dt&&(de=null,w=!1,He.error(new Le.Z(De.TIME_SYNC_FAILED_ERROR_CODE,De.TIME_SYNC_FAILED_ERROR_MESSAGE))),Ze.trigger(D.Z.UPDATE_TIME_SYNC_OFFSET,{offset:st}),Ze.trigger(D.Z.TIME_SYNCHRONIZATION_COMPLETED)}function ft(){if(X&&0!==X.length){var dt=X.reduce(function(st,Ft){return st+Ft},0)/X.length;nt(dt)?S.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(S.debug("Completed background UTC sync. Setting client - server offset to ".concat(dt)),Ze.trigger(D.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ee=dt})),H=!1,fe=Date.now()}}function nt(dt){try{if(isNaN(ee))return!0;var st=W.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(W.get().streaming.utcSynchronization.maximumAllowedDrift)?W.get().streaming.utcSynchronization.maximumAllowedDrift:100;return dt>=ee-st&&dt<=ee+st}catch{return!0}}return A={initialize:function(){Oe(),Y={"urn:mpeg:dash:utc:http-head:2014":ie,"urn:mpeg:dash:utc:http-xsdate:2014":we.bind(null,re),"urn:mpeg:dash:utc:http-iso:2014":we.bind(null,z),"urn:mpeg:dash:utc:direct:2014":ke,"urn:mpeg:dash:utc:http-head:2012":ie,"urn:mpeg:dash:utc:http-xsdate:2012":we.bind(null,re),"urn:mpeg:dash:utc:http-iso:2012":we.bind(null,z),"urn:mpeg:dash:utc:direct:2012":ke,"urn:mpeg:dash:utc:http-ntp:2014":be,"urn:mpeg:dash:utc:ntp:2014":be,"urn:mpeg:dash:utc:sntp:2014":be}},attemptSync:function(dt,st){le=dt,w||(function(Ft){try{if(!Ft||!W.get().streaming.utcSynchronization.enabled)return!1;var Gt=isNaN(ae)?30:ae;return!(ve&&Gt&&!isNaN(Gt))||(Date.now()-ve)/1e3>=Gt}catch{return!0}}(st)?(w=!0,P()):Ze.trigger(D.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(dt){dt&&(dt.dashMetrics&&(k=dt.dashMetrics),dt.baseURLController&&(Ne=dt.baseURLController),dt.errHandler&&(He=dt.errHandler),dt.settings&&(W=dt.settings))},reset:function(){Oe(),Ze.off(D.Z.ATTEMPT_BACKGROUND_SYNC,me,A)}},S=(0,B.Z)(Fe).getInstance().getLogger(A),Ze.on(D.Z.ATTEMPT_BACKGROUND_SYNC,me,A),A}As.__dashjs_factory_name="TimeSyncController";var Wl=j.Z.getSingletonFactory(As);Wl.HTTP_TIMEOUT_MS=5e3,j.Z.updateSingletonFactory(As.__dashjs_factory_name,Wl);var ii=Wl;function qf(){var A,S,w,H,W,Y=this.context,k=(0,V.Z)(Y).getInstance();return A={attachMediaSource:function(X){var le=window.URL.createObjectURL(S);return X.setSource(le),"managedMediaSource"===H&&(X.setDisableRemotePlayback(!0),S.addEventListener("startstreaming",function(){k.trigger(T.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),S.addEventListener("endstreaming",function(){k.trigger(T.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),le},createMediaSource:function(){var X="WebKitMediaSource"in window,le="MediaSource"in window;return"ManagedMediaSource"in window?(S=new ManagedMediaSource,H="managedMediaSource",W.info("Created ManagedMediaSource")):le?(S=new MediaSource,H="mediaSource",W.info("Created MediaSource")):X&&(S=new WebKitMediaSource,W.info("Created WebkitMediaSource")),S},detachMediaSource:function(X){X.setSource(null)},setConfig:function(X){X&&X.settings&&(w=X.settings)},setDuration:function X(le){S&&"open"===S.readyState&&(null===le&&isNaN(le)||S.duration!==le&&(le!==1/0||w.get().streaming.buffer.mediaSourceDurationInfinity||(le=Math.pow(2,32)),function(ve){for(var fe=ve.sourceBuffers,ee=0;ee<fe.length;ee++)if(fe[ee].updating)return!0;return!1}(S)?setTimeout(X.bind(null,le),50):(W.info("Set MediaSource duration:"+le),S.duration=le)))},setSeekable:function(X,le){S&&"function"==typeof S.setLiveSeekableRange&&"function"==typeof S.clearLiveSeekableRange&&"open"===S.readyState&&X>=0&&X<le&&(S.clearLiveSeekableRange(),S.setLiveSeekableRange(X,le))},signalEndOfStream:function(X){if(X&&"open"===X.readyState){for(var le=X.sourceBuffers,ve=0;ve<le.length;ve++)if(le[ve].updating||0===le[ve].buffered.length)return;W.info("call to mediaSource endOfStream"),X.endOfStream()}}},W=(0,B.Z)(Y).getInstance().getLogger(A),A}qf.__dashjs_factory_name="MediaSourceController";var Ko=j.Z.getSingletonFactory(qf);function Lo(){var A,S,w,H,W,Y,k,X,le,ve,fe,ee="urn:mpeg:dash:event:2012",ae="updated",He="added",Ne=this.context,Fe=(0,V.Z)(Ne).getInstance();function Ze(){if(!k||!X)throw new Error("setConfig function has to be called previously")}function he(){fe=!1,w={},H={},W=null,ve=!1,Y=Date.now()/1e3}function Oe(){try{if(!ve){ve=!0;var be=X.getTime(),ke=be-Y;ke=Y>0?Math.max(0,ke):0,me(H,ke,be),me(w,ke,be),Ve(H),Ve(w),Y=be,ve=!1}}catch(we){ve=!1,S.error(we)}}function me(be,ke,we){try{re(be,function(ie){if(void 0!==ie){var Re=isNaN(ie.duration)?0:ie.duration;ie.calculatedPresentationTime<=we&&ie.calculatedPresentationTime+ke+Re>=we?xe(ie,T.Z.EVENT_MODE_ON_START):(z(we,Re+ke,ie.calculatedPresentationTime)||function(qe){try{return qe.calculatedPresentationTime>qe.eventStream.period.start+qe.eventStream.period.duration}catch(nt){return S.error(nt),!1}}(ie))&&(S.debug("Removing event ".concat(ie.id," from period ").concat(ie.eventStream.period.id," as it is expired or invalid")),function(qe,ft){try{var nt=ft.eventStream.schemeIdUri,dt=ft.eventStream.period.id,st=ft.eventStream.value,Ft=ft.id;qe[dt][nt]=qe[dt][nt].filter(function(Gt){return st&&Gt.eventStream.value&&Gt.eventStream.value!==st||Gt.id!==Ft}),0===qe[dt][nt].length&&delete qe[dt][nt]}catch(Gt){S.error(Gt)}}(be,ie))}})}catch(ie){S.error(ie)}}function Ve(be){try{for(var ke in be)be.hasOwnProperty(ke)&&0===Object.keys(be[ke]).length&&delete be[ke]}catch(we){S.error(we)}}function P(be,ke){var we=arguments.length>2&&void 0!==arguments[2]&&arguments[2],ie=be.eventStream.schemeIdUri,Re=be.eventStream.value,qe=be.id,ft="discarded";ke[ie]||(ke[ie]=[]);var nt=ke[ie].findIndex(function(st){return(!Re||st.eventStream.value&&st.eventStream.value===Re)&&st.id===qe});if(-1===nt)ke[ie].push(be),be.triggeredReceivedEvent=!1,be.triggeredStartEvent=!1,ft=He;else if(we){var dt=ke[ie][nt];be.triggeredReceivedEvent=dt.triggeredReceivedEvent,be.triggeredStartEvent=dt.triggeredStartEvent,ke[ie][nt]=be,ft=ae}return ft}function oe(be){try{1==be.eventStream.value&&Fe.trigger(T.Z.MANIFEST_VALIDITY_CHANGED,{id:be.id,validUntil:be.calculatedPresentationTime,newDuration:4294967295==be.calculatedPresentationTime?NaN:be.calculatedPresentationTime+be.duration,newManifestValidAfter:NaN},{mode:T.Z.EVENT_MODE_ON_START})}catch(ie){S.error(ie)}}function te(be){try{var ke=X.getTime();re(be,function(we){var ie=we.eventStream&&we.eventStream.period&&!isNaN(we.eventStream.period.duration)?we.eventStream.period.duration:NaN,Re=we.eventStream&&we.eventStream.period&&!isNaN(we.eventStream.period.start)?we.eventStream.period.start:NaN;isNaN(ie)||isNaN(Re)||Math.abs(we.calculatedPresentationTime-ke)<300&&xe(we,T.Z.EVENT_MODE_ON_START)})}catch(we){S.error(we)}}function re(be,ke){try{if(be)for(var we=Object.keys(be),ie=0;ie<we.length;ie++)for(var Re=be[we[ie]],qe=Object.keys(Re),ft=0;ft<qe.length;ft++)Re[qe[ft]].forEach(function(nt){void 0!==nt&&ke(nt)})}catch(nt){S.error(nt)}}function z(be,ke,we){try{return be-ke>we}catch(ie){return S.error(ie),!1}}function xe(be,ke){try{var we=X.getTime(),ie=be.id;if(ke===T.Z.EVENT_MODE_ON_RECEIVE&&!be.triggeredReceivedEvent)return S.debug("Received event ".concat(ie)),be.triggeredReceivedEvent=!0,void Fe.trigger(be.eventStream.schemeIdUri,{event:be},{mode:ke});be.triggeredStartEvent||(be.eventStream.schemeIdUri===ee&&1==be.eventStream.value?0===be.duration&&0===be.presentationTimeDelta||(S.debug("Starting manifest refresh event ".concat(ie," at ").concat(we)),function(){try{Ze(),k.refreshManifest()}catch(Re){S.error(Re)}}()):"urn:mpeg:dash:event:callback:2015"===be.eventStream.schemeIdUri&&1==be.eventStream.value?(S.debug("Starting callback event ".concat(ie," at ").concat(we)),function(Re){try{(0,xn.Z)(Ne).create({}).load({method:"get",url:Re,request:{responseType:"arraybuffer"}})}catch(qe){S.error(qe)}}(be.messageData)):(S.debug("Starting event ".concat(ie," from period ").concat(be.eventStream.period.id," at ").concat(we)),Fe.trigger(be.eventStream.schemeIdUri,{event:be},{mode:ke})),be.triggeredStartEvent=!0)}catch(Re){S.error(Re)}}return A={addInlineEvents:function(be,ke){try{if(Ze(),w[ke]||(w[ke]={}),be)for(var we=0;we<be.length;we++){var ie=be[we];if(!z(X.getTime(),isNaN(ie.duration)?0:ie.duration,ie.calculatedPresentationTime)){var Re=P(ie,w[ke],!0);Re===He?(S.debug("Added inline event with id ".concat(ie.id," from period ").concat(ke)),xe(ie,T.Z.EVENT_MODE_ON_RECEIVE)):Re===ae&&S.debug("Updated inline event with id ".concat(ie.id," from period ").concat(ke))}}}catch(qe){throw qe}},addInbandEvents:function(be,ke){try{Ze(),H[ke]||(H[ke]={});for(var we=0;we<be.length;we++){var ie=be[we];z(X.getTime(),isNaN(ie.duration)?0:ie.duration,ie.calculatedPresentationTime)||(P(ie,H[ke],!1)===He?(ie.eventStream.schemeIdUri===ee&&oe(ie),S.debug("Added inband event with id ".concat(ie.id," from period ").concat(ke)),xe(ie,T.Z.EVENT_MODE_ON_RECEIVE)):S.debug("Inband event with scheme_id_uri ".concat(ie.eventStream.schemeIdUri,", value ").concat(ie.eventStream.value,", period id ").concat(ke," and event id ").concat(ie.id," was ignored because it has been added before.")))}Oe()}catch(Re){throw Re}},getInbandEvents:function(){return H},getInlineEvents:function(){return w},start:function(){try{Ze(),S.debug("Start Event Controller");var be=le.get().streaming.eventControllerRefreshDelay;fe||isNaN(be)||(fe=!0,W=setInterval(Oe,be))}catch(ke){throw ke}},setConfig:function(be){try{if(!be)return;be.manifestUpdater&&(k=be.manifestUpdater),be.playbackController&&(X=be.playbackController),be.settings&&(le=be.settings)}catch(ke){throw ke}},reset:function(){(function(){try{null!==W&&fe&&(clearInterval(W),W=null,fe=!1,function(){try{te(H),te(w)}catch(be){S.error(be)}}())}catch(be){throw be}})(),he()}},S=(0,B.Z)(Ne).getInstance().getLogger(A),he(),A}Lo.__dashjs_factory_name="EventController";var dh=j.Z.getSingletonFactory(Lo),za={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function $l(A,S){(null==S||S>A.length)&&(S=A.length);for(var w=0,H=new Array(S);w<S;w++)H[w]=A[w];return H}function as(){var A,S,w,H,W,Y,k,X,le,ve,fe,ee,de,ae,He,Ne,Fe,Ze,he,Oe,me,Ve,P,oe,te,re,z,xe,be,ke,we,ie,Re,qe,ft,nt,dt,st,Ft,Gt,Ot,kt,wn,tt,Ye,Lt,_t,Yt,Kt=this.context,Wt=(0,V.Z)(Kt).getInstance();function Un(){if(!(Y&&Y.hasOwnProperty("load")&&me&&me.hasOwnProperty("initialize")&&me.hasOwnProperty("reset")&&me.hasOwnProperty("getClientTimeOffset")&&k&&Oe&&le&&Re))throw new Error(E.Z.MISSING_CONFIG_ERROR)}function er(){!function(){try{var Rt=X.getStreamsInfo();if(!P&&0===Rt.length)throw new Error("There are no periods in the MPD");P&&Rt.length>0&&le.updateManifestUpdateInfo({currentTime:Re.getTime(),buffered:ie.getBufferRange(),presentationStartTime:Rt[0].start,clientTimeOffset:me.getClientTimeOffset()}),Ve.length>0&&(0!==(jr=Rt).length?Ve=Ve.filter(function(yr){var Di=jr.filter(function(gi){return gi.id===yr.getId()}).length>0||yr.getId()===P.getId();return Di||(S.debug("Removing stream ".concat(yr.getId())),yr.reset(!0)),Di}):S.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects."));for(var bn=[],$n=0,lr=Rt.length;$n<lr;$n++){var Vr=Rt[$n];bn.push(At(Vr)),le.addManifestUpdateStreamInfo(Vr)}Promise.all(bn).then(function(){return new Promise(function(jr,yr){P?jr():$t(Rt,jr,yr)})}).then(function(){Wt.trigger(D.Z.STREAMS_COMPOSED),An()}).catch(function(jr){throw jr})}catch(jr){Oe.error(new Le.Z(De.MANIFEST_ERROR_ID_NOSTREAMS_CODE,jr.message+" nostreamscomposed",k.getValue())),ke=!0,Aa()}var jr}()}function Jn(){Ye=!0}function At(Rt){var bn=Ol(Rt.id);return bn?bn.updateData(Rt):(bn=bs(Kt).create({manifestModel:k,mediaPlayerModel:ft,dashMetrics:le,manifestUpdater:W,adapter:X,timelineConverter:me,capabilities:w,capabilitiesFilter:H,errHandler:Oe,baseURLController:de,segmentBaseController:ae,textController:te,abrController:Ne,playbackController:Re,eventController:Ze,mediaController:Fe,protectionController:oe,videoModel:ie,streamInfo:Rt,settings:tt}),Ve.push(bn),bn.initialize(),Promise.resolve())}function $t(Rt,bn,$n){try{Gn();var lr=le.getCurrentDVRInfo().range;if(lr.end<lr.start){Lt&&clearTimeout(Lt);var Vr=Math.min(1e3*(-1*(lr.end-lr.start)+2),2147483647);return S.debug("Waiting for ".concat(Vr," ms before playback can start")),Wt.trigger(D.Z.AST_IN_FUTURE,{delay:Vr}),void(Lt=setTimeout(function(){$t(Rt,bn,$n)},Vr))}tt.get().streaming.applyProducerReferenceTime&&qe.calculateProducerReferenceTimeOffsets(Rt);var jr=Rt[0].manifestInfo;if(tt.get().streaming.applyServiceDescription&&qe.applyServiceDescription(jr),X.getIsDynamic()){var yr=vs(Rt,jr);Re.computeAndSetLiveDelay(yr,jr)}(tt.get().streaming.applyContentSteering&&ee.shouldQueryBeforeStart()?ee.loadSteeringData():Promise.resolve()).then(function(){var Di=k.getValue();Di&&de.update(Di),Ut(),bn()}).catch(function(Di){S.error(Di),Ut(),bn()})}catch(Di){$n(Di)}}function Ut(){var Rt=function(){var lr;if(X.getIsDynamic()){var Vr=le.getCurrentDVRInfo();lr=(Vr&&Vr.range?Vr.range.end:0)-Re.getOriginalLiveDelay();var jr=Vr?Vr.range:null;if(jr){if(isNaN(_t)&&-1===_t.toString().indexOf("posix:")){var yr=Si(!0);isNaN(yr)||(S.info("Start time from URI parameters: ".concat(yr)),lr=Math.min(lr,yr))}else{S.info("Start time provided by the app: ".concat(_t));var Di=Li(!0,_t);isNaN(Di)||(lr=Math.min(lr,Di))}var gi=tt.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;lr=Math.max(lr,jr.start+gi)}}else if(lr=ys()[0].getStreamInfo().start,isNaN(_t)){var ts=Si(!1);isNaN(ts)||(S.info("Start time from URI parameters: ".concat(ts)),lr=Math.max(lr,ts))}else{S.info("Start time provided by the app: ".concat(_t));var Pl=Li(!1,_t);isNaN(Pl)||(lr=Math.max(lr,Pl))}return lr}(),bn=Ln(Rt),$n=null!==bn?bn:Ve[0];Wt.trigger(D.Z.INITIAL_STREAM_SWITCH,{startTime:Rt}),rn($n,null,Rt),Gt||(Gt=setInterval(function(){!xe&&Re.getTimeToStreamEnd()<=0&&!Re.isSeeking()&&Wt.trigger(D.Z.PLAYBACK_ENDED,{isLast:ao().isLast})},200))}function rn(Rt,bn,$n){try{if(xe||!Rt||bn===Rt&&Rt.getIsActive())return;xe=!0,Wt.trigger(D.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:bn?bn.getStreamInfo():null,toStreamInfo:Rt.getStreamInfo()});var lr=!1;P=Rt,bn&&(lr=Dn(Rt,bn),bn.deactivate(lr)),$n=isNaN($n)?!lr&&bn?Rt.getStreamInfo().start:NaN:$n,S.info("Switch to stream ".concat(Rt.getId(),". Seektime is ").concat($n,", current playback time is ").concat(Re.getTime(),". Seamless period switch is set to ").concat(lr)),kt=kt.filter(function(Vr){return Vr.getId()!==P.getId()}),Re.initialize(ao(),!!bn),ie.getElement()?mn($n,lr,!1):Zn($n,lr)}catch{xe=!1}}function mn(Rt,bn){var $n,lr=arguments.length>2&&void 0!==arguments[2]&&arguments[2];function Vr(){if(we&&"open"===we.readyState){S.debug("MediaSource is open!"),window.URL.revokeObjectURL($n),we.removeEventListener("sourceopen",Vr),we.removeEventListener("webkitsourceopen",Vr),di();var yr=le.getCurrentDVRInfo();ve.setSeekable(yr.range.start,yr.range.end),lr?(isNaN(Rt)||Re.seek(Rt,!0,!0),P.setMediaSource(we).then(function(){P.initializeForTextWithMediaSource(we)})):Zn(Rt,bn)}}function jr(){we.addEventListener("sourceopen",Vr,!1),we.addEventListener("webkitsourceopen",Vr,!1),$n=ve.attachMediaSource(ie),S.debug("MediaSource attached to element.  Waiting on open...")}we?bn?Zn(Rt,bn):(ve.detachMediaSource(ie),jr()):(we=ve.createMediaSource(),jr())}function Zn(Rt,bn){P.activate(we,bn?Ot:void 0,Rt).then(function($n){if($n){var lr=Object.keys($n);lr.length>0&&$n[lr[0]].getBuffer().changeType&&(wn=!0),Ot=$n}isNaN(Rt)||(Wt.trigger(D.Z.SEEK_TARGET,{time:Rt},{streamId:P.getId()}),Re.seek(Rt,!1,!0),P.startScheduleControllers()),xe=!1,Wt.trigger(D.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:ao()})})}function Bn(Rt){var $n,lr,Vr,jr,bn=Ln(Rt.seekTime);bn&&bn!==P?bn&&bn!==P&&(Hn(),lr=bn,Vr=($n=Rt)&&!isNaN($n.seekTime)?$n.seekTime:NaN,jr=P.getProcessors().map(function(yr){return yr.prepareOuterPeriodPlaybackSeeking($n)}),Promise.all(jr).then(function(){rn(lr,P,Vr)}).catch(function(yr){Oe.error(yr)})):(Hn(),function($n){P.getProcessors().forEach(function(lr){return lr.prepareInnerPeriodPlaybackSeeking($n)}),To(it.USER_REQUEST_STOP_REASON)}(Rt)),Ja(ut.SEEK_START_REASON)}function Hn(){nr()}function nr(){kt&&kt.length>0&&(kt.forEach(function(Rt){Rt.deactivate(!0)}),kt=[])}function Xt(Rt){if(Rt.newMediaInfo.streamInfo.id===P.getId()){if(nr(),tt.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&Rt.oldMediaInfo&&Rt.oldMediaInfo.codec!==Rt.newMediaInfo.codec){var bn=Re.getTime();return P.deactivate(!1),void mn(bn,!1,!1)}P.prepareTrackChange(Rt)}}function Dn(Rt,bn){try{return tt.get().streaming.buffer.reuseExistingSourceBuffers&&(bn.isProtectionCompatible(Rt)||Ye)&&(wn&&tt.get().streaming.buffer.useChangeTypeForTrackSwitch||bn.isMediaCodecCompatible(Rt,bn))}catch{return!1}}function Fn(Rt){var bn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;we&&!Rt.getPreloaded()&&Dn(Rt,bn)&&Rt.startPreloading(we,Ot).then(function(){kt.push(Rt)})}function Ln(Rt){if(isNaN(Rt))return null;for(var bn=Ve.length,$n=0;$n<bn;$n++){var lr=Ve[$n];if(Rt<parseFloat((lr.getStartTime()+lr.getDuration()).toFixed(5)))return lr}return null}function Gn(){try{var Rt=X.getIsDynamic(),bn=X.getStreamsInfo()[0].manifestInfo,$n=Re.getTime(),lr=me.calcTimeShiftBufferWindow(Ve,Rt),Vr=ci();if(void 0===lr.start||void 0===lr.end)return;Vr&&0!==Vr.length?Vr.forEach(function(jr){le.addDVRInfo(jr.getType(),$n,bn,lr)}):le.addDVRInfo(E.Z.VIDEO,$n,bn,lr)}catch{}}function Ct(Rt){if(st&&z){var bn=ft.getInitialBufferLevel(),$n=[E.Z.TEXT];(isNaN(bn)||bn<=Re.getBufferLevel($n)||X.getIsDynamic()&&bn>Re.getLiveDelay())&&(st=!1,Ja(ut.INITIAL_PLAYOUT_START_REASON),Re.play())}Rt&&Rt.mediaType&&le.addBufferLevel(Rt.mediaType,new Date,1e3*Rt.bufferLevel)}function ct(Rt){Rt.streamInfo.id===P.getId()&&Rt.reason&&Rt.reason.forceReplace&&nr(),Ol(Rt.streamInfo.id).prepareQualityChange(Rt)}function jt(){if(X.getIsDynamic()&&0!==Re.getOriginalLiveDelay()&&P){var Rt=X.getStreamsInfo();if(Rt.length>0){var bn=Rt[0].manifestInfo,$n=vs(Rt,bn);Re.computeAndSetLiveDelay($n,bn)}}}function Ge(){if($o()){var Rt=ie.getPlaybackQuality();Rt&&le.addDroppedFrames(Rt)}}function We(){S.debug("[onPlaybackStarted]"),!st&&dt&&Ja(ut.RESUME_FROM_PAUSE_START_REASON),st&&(st=!1),Ft&&(Ft=!1,tt.get().streaming.applyContentSteering&&!ee.shouldQueryBeforeStart()&&ee.loadSteeringData()),dt=!1}function Mt(Rt){S.debug("[onPlaybackPaused]"),Rt.ended||(dt=!0,To(it.USER_REQUEST_STOP_REASON))}function gn(Rt){S.debug("Stream with id ".concat(Rt.streamInfo.id," finished buffering")),we&&Rt.streamInfo.isLast?(S.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),ve.signalEndOfStream(we)):An()}function An(){if(P&&P.getHasFinishedBuffering())for(var Rt=function(){var Vr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var jr=Vr||P||null;if(jr){var yr=jr.getStreamInfo();return Ve.filter(function(Di){var gi=Di.getStreamInfo();return gi.start>yr.start&&yr.id!==gi.id})}}catch{return[]}}(P),bn=0;bn<Rt.length;){var $n=Rt[bn],lr=0===bn?P:Rt[bn-1];!$n.getPreloaded()&&lr.getHasFinishedBuffering()&&we&&Fn($n,lr),bn+=1}}function pr(){Gt&&(clearInterval(Gt),Gt=null)}function ci(){return P?P.getProcessors():[]}function Bi(Rt){if(P&&!P.getIsEndedEventSignaled()){P.setIsEndedEventSignaled(!0);var bn=function(){var lr=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||P||null;if(!lr)return null;for(var Vr=lr.getStreamInfo(),jr=Vr.start,yr=0,Di=-1,gi=NaN;yr<Ve.length;){var ts=Ve[yr].getStreamInfo(),Pl=ts.start-jr;Pl>0&&(isNaN(gi)||Pl<gi)&&Vr.id!==ts.id&&(gi=Pl,Di=yr),yr+=1}return Di>=0?Ve[Di]:null}();bn?(S.debug("StreamController onEnded, found next stream with id ".concat(bn.getStreamInfo().id,". Switching from ").concat(P.getStreamInfo().id," to ").concat(bn.getStreamInfo().id)),rn(bn,P,NaN)):(S.debug("StreamController no next stream found"),P.setIsEndedEventSignaled(!1)),To(bn?it.END_OF_PERIOD_STOP_REASON:it.END_OF_CONTENT_STOP_REASON)}Rt&&Rt.isLast&&(pr(),ee.stopSteeringRequestTimer())}function di(Rt){var bn=Rt||ao().manifestInfo.duration;ve.setDuration(bn)}function Si(Rt){var bn=He.getURIFragmentData();if(!bn||!bn.t)return NaN;var $n=ys()[0].getStreamInfo().start;return bn.t=bn.t.split(",")[0],mi(Rt,bn.t,$n)}function Li(Rt,bn){var $n=0;return Rt||($n=ys()[0].getStreamInfo().start),mi(Rt,bn,$n)}function mi(Rt,bn,$n){var lr=X.getRegularPeriods()[0],Vr=bn.toString(),jr=-1!==Vr.indexOf("posix:")?"now"===Vr.substring(6)?Date.now()/1e3:parseFloat(Vr.substring(6)):NaN;return Rt&&!isNaN(jr)?me.calcPresentationTimeFromWallTime(new Date(1e3*jr),lr):parseFloat(Vr)+$n}function vs(Rt,bn){try{var $n=NaN;if(bn&&!isNaN(bn.maxFragmentDuration)&&isFinite(bn.maxFragmentDuration))return bn.maxFragmentDuration;if(Rt&&1===Rt.length){var lr=Rt[0],Vr=[E.Z.VIDEO,E.Z.AUDIO,E.Z.TEXT].reduce(function(yr,Di){var gi=X.getMediaInfoForType(lr,Di);return gi&&!1!==gi.isFragmented&&yr.push(gi),yr},[]).reduce(function(yr,Di){var gi=X.getVoRepresentations(Di);return gi&&gi.length>0&&gi.forEach(function(ts){ts&&yr.push(ts)}),yr},[]).reduce(function(yr,Di){var gi=X.convertRepresentationToRepresentationInfo(Di);return gi&&gi.fragmentDuration&&!isNaN(gi.fragmentDuration)&&yr.push(gi.fragmentDuration),yr},[]);$n=Math.max.apply(Math,function(yr){if(Array.isArray(yr))return $l(yr)}(jr=Vr)||function(yr){if(typeof Symbol<"u"&&Symbol.iterator in Object(yr))return Array.from(yr)}(jr)||function(yr,Di){if(yr){if("string"==typeof yr)return $l(yr,undefined);var gi=Object.prototype.toString.call(yr).slice(8,-1);return"Object"===gi&&yr.constructor&&(gi=yr.constructor.name),"Map"===gi||"Set"===gi?Array.from(yr):"Arguments"===gi||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(gi)?$l(yr,undefined):void 0}}(jr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite($n)?$n:NaN}catch{return NaN}var jr}function Qa(Rt){if(Rt.error)ke=!0,Aa();else{S.info("Manifest updated... updating data system wide.");var bn=Rt.manifest;X.updatePeriods(bn);var $n=X.getUTCTimingSources();!X.getIsDynamic()||$n&&0!==$n.length||Wt.trigger(T.Z.CONFORMANCE_VIOLATION,{level:za.LEVELS.WARNING,event:za.EVENTS.NO_UTC_TIMING_ELEMENT});var lr=X.getIsDynamic()?$n.concat(nt.getUTCTimingSources()):$n;H.filterUnsupportedFeatures(bn).then(function(){de.initialize(bn),fe.attemptSync(lr,X.getIsDynamic())})}}function $o(){return!!P&&P.getHasVideoTrack()}function ba(){return!!P&&P.getHasAudioTrack()}function To(Rt,bn){bn=bn||new Date,ci().forEach(function($n){$n.finalisePlayList(bn,Rt)}),le.addPlayList()}function Ja(Rt){le.createPlaylistMetrics(1e3*Re.getTime(),Rt)}function Ba(Rt){if(Rt.error){var bn="";switch(Rt.error.code){case 1:bn="MEDIA_ERR_ABORTED";break;case 2:bn="MEDIA_ERR_NETWORK";break;case 3:bn="MEDIA_ERR_DECODE",Yt.counts.mediaErrorDecode+=1;break;case 4:bn="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:bn="MEDIA_ERR_ENCRYPTED";break;default:bn="UNKNOWN"}"MEDIA_ERR_DECODE"===bn&&tt.get().errors.recoverAttempts.mediaErrorDecode>=Yt.counts.mediaErrorDecode?function(){S.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var $n=Re.getTime();P.deactivate(!1),S.warn("MediaSource has been resetted. Resuming playback from time ".concat($n)),mn($n,!1,!1)}():(be=!0,Rt.error.message&&(bn+=" ("+Rt.error.message+")"),Rt.error.msExtendedCode&&(bn+=" (0x"+(Rt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),S.fatal("Video Element Error: "+bn),Rt.error&&S.fatal(Rt.error),Oe.error(new Le.Z(Rt.error.code,bn)),Aa())}}function ao(){return P?P.getStreamInfo():null}function Ol(Rt){for(var bn=0,$n=Ve.length;bn<$n;bn++)if(Ve[bn].getId()===Rt)return Ve[bn];return null}function Us(Rt){isNaN(Rt.newDuration)||di(Rt.newDuration)}function Bs(){Ve=[],_t=NaN,oe=null,xe=!1,P=null,be=!1,ke=!1,st=!0,Ft=!0,dt=!1,z=!0,Gt=null,Ye=!1,wn=!1,kt=[],Lt=null,Yt={counts:{mediaErrorDecode:0}}}function Aa(){Un(),fe.reset(),To(be||ke?it.FAILURE_STOP_REASON:it.USER_REQUEST_STOP_REASON);for(var Rt=0,bn=Ve?Ve.length:0;Rt<bn;Rt++)Ve[Rt].reset(be);Wt.off(T.Z.PLAYBACK_TIME_UPDATED,Ge,A),Wt.off(T.Z.PLAYBACK_SEEKING,Bn,A),Wt.off(T.Z.PLAYBACK_ERROR,Ba,A),Wt.off(T.Z.PLAYBACK_STARTED,We,A),Wt.off(T.Z.PLAYBACK_PAUSED,Mt,A),Wt.off(T.Z.PLAYBACK_ENDED,Bi,A),Wt.off(T.Z.METRIC_ADDED,es,A),Wt.off(T.Z.MANIFEST_VALIDITY_CHANGED,Us,A),Wt.off(T.Z.BUFFER_LEVEL_UPDATED,Ct,A),Wt.off(T.Z.QUALITY_CHANGE_REQUESTED,ct,A),D.Z.KEY_SESSION_UPDATED&&Wt.off(D.Z.KEY_SESSION_UPDATED,Jn,A),Wt.off(D.Z.MANIFEST_UPDATED,Qa,A),Wt.off(D.Z.STREAM_BUFFERING_COMPLETED,gn,A),Wt.off(D.Z.TIME_SYNCHRONIZATION_COMPLETED,er,A),Wt.off(D.Z.CURRENT_TRACK_CHANGED,Xt,A),Wt.off(D.Z.SETTING_UPDATED_LIVE_DELAY,jt,A),Wt.off(D.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,jt,A),de.reset(),W.reset(),Ze.reset(),le.clearAllCurrentMetrics(),k.setValue(null),Y.reset(),me.reset(),he.reset(),we&&(ve.detachMediaSource(ie),we=null),ie=null,oe&&(oe=null,re=null,k.getValue()&&Wt.trigger(D.Z.PROTECTION_DESTROYED,{data:k.getValue().url})),pr(),Wt.trigger(D.Z.STREAM_TEARDOWN_COMPLETE),Bs()}function es(Rt){if(Rt.metric===F.Z.DVR_INFO){var bn=ba()?E.Z.AUDIO:E.Z.VIDEO;Rt.mediaType===bn&&ve.setSeekable(Rt.value.range.start,Rt.value.range.end)}}function ys(){return Ve}return A={initialize:function(Rt,bn){Un(),z=Rt,re=bn,me.initialize(),(W=kc(Kt).create()).setConfig({manifestModel:k,adapter:X,manifestLoader:Y,errHandler:Oe,settings:tt,contentSteeringController:ee}),W.initialize(),(Ze=dh(Kt).getInstance()).setConfig({manifestUpdater:W,playbackController:Re,settings:tt}),Ze.start(),fe.setConfig({dashMetrics:le,baseURLController:de,errHandler:Oe,settings:tt}),fe.initialize(),ve.setConfig({settings:tt}),oe&&(Wt.trigger(D.Z.PROTECTION_CREATED,{controller:oe}),oe.setMediaElement(ie.getElement()),re&&oe.setProtectionData(re)),Wt.on(T.Z.PLAYBACK_TIME_UPDATED,Ge,A),Wt.on(T.Z.PLAYBACK_SEEKING,Bn,A),Wt.on(T.Z.PLAYBACK_ERROR,Ba,A),Wt.on(T.Z.PLAYBACK_STARTED,We,A),Wt.on(T.Z.PLAYBACK_PAUSED,Mt,A),Wt.on(T.Z.PLAYBACK_ENDED,Bi,A),Wt.on(T.Z.METRIC_ADDED,es,A),Wt.on(T.Z.MANIFEST_VALIDITY_CHANGED,Us,A),Wt.on(T.Z.BUFFER_LEVEL_UPDATED,Ct,A),Wt.on(T.Z.QUALITY_CHANGE_REQUESTED,ct,A),D.Z.KEY_SESSION_UPDATED&&Wt.on(D.Z.KEY_SESSION_UPDATED,Jn,A),Wt.on(D.Z.MANIFEST_UPDATED,Qa,A),Wt.on(D.Z.STREAM_BUFFERING_COMPLETED,gn,A),Wt.on(D.Z.TIME_SYNCHRONIZATION_COMPLETED,er,A),Wt.on(D.Z.CURRENT_TRACK_CHANGED,Xt,A),Wt.on(D.Z.SETTING_UPDATED_LIVE_DELAY,jt,A),Wt.on(D.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,jt,A)},getActiveStreamInfo:ao,addDVRMetric:Gn,hasVideoTrack:$o,hasAudioTrack:ba,getStreamById:Ol,getStreamForTime:Ln,getTimeRelativeToStreamId:function(Rt,bn){for(var $n=null,lr=0,Vr=0,jr=null,yr=0;yr<Ve.length;yr++){if(Vr=($n=Ve[yr]).getStartTime(),jr=$n.getDuration(),Number.isFinite(Vr)&&(lr=Vr),$n.getId()===bn)return Rt-lr;Number.isFinite(jr)&&(lr+=jr)}return null},load:function(Rt){var bn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;Un(),_t=bn,Y.load(Rt)},loadWithManifest:function(Rt){var bn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;(function Mn(){if(!W||!W.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")})(),_t=bn,W.setManifest(Rt)},getActiveStreamProcessors:ci,setConfig:function(Rt){Rt&&(Rt.capabilities&&(w=Rt.capabilities),Rt.capabilitiesFilter&&(H=Rt.capabilitiesFilter),Rt.manifestLoader&&(Y=Rt.manifestLoader),Rt.manifestModel&&(k=Rt.manifestModel),Rt.mediaPlayerModel&&(ft=Rt.mediaPlayerModel),Rt.customParametersModel&&(nt=Rt.customParametersModel),Rt.protectionController&&(oe=Rt.protectionController),Rt.adapter&&(X=Rt.adapter),Rt.dashMetrics&&(le=Rt.dashMetrics),Rt.errHandler&&(Oe=Rt.errHandler),Rt.timelineConverter&&(me=Rt.timelineConverter),Rt.videoModel&&(ie=Rt.videoModel),Rt.playbackController&&(Re=Rt.playbackController),Rt.serviceDescriptionController&&(qe=Rt.serviceDescriptionController),Rt.contentSteeringController&&(ee=Rt.contentSteeringController),Rt.textController&&(te=Rt.textController),Rt.abrController&&(Ne=Rt.abrController),Rt.mediaController&&(Fe=Rt.mediaController),Rt.settings&&(tt=Rt.settings),Rt.baseURLController&&(de=Rt.baseURLController),Rt.uriFragmentModel&&(He=Rt.uriFragmentModel),Rt.segmentBaseController&&(ae=Rt.segmentBaseController),Rt.manifestUpdater&&(W=Rt.manifestUpdater))},setProtectionData:function(Rt){re=Rt,oe&&oe.setProtectionData(re)},getIsStreamSwitchInProgress:function(){return xe},switchToVideoElement:function(Rt){P&&(Re.initialize(ao()),mn(Rt,!1,!0))},getHasMediaOrInitialisationError:function(){return be||ke},getStreams:ys,getActiveStream:function(){return P},getInitialPlayback:function(){return st},getAutoPlay:function(){return z},refreshManifest:function(){W.getIsUpdating()||W.refreshManifest()},reset:Aa},S=(0,B.Z)(Kt).getInstance().getLogger(A),fe=ii(Kt).getInstance(),ve=Ko(Kt).getInstance(),he=$e(Kt).getInstance(),Bs(),A}as.__dashjs_factory_name="StreamController";var Cs=j.Z.getSingletonFactory(as);function Xl(){var A,S,w,H,W,Y,k,X,le,ve,fe,ee,de=this.context,ae=(0,V.Z)(de).getInstance();function He(){ee.debug("Stopping the gap controller"),W&&(clearInterval(W),W=null),function(){ae.off(D.Z.WALLCLOCK_TIME_UPDATED,Oe,this),ae.off(D.Z.INITIAL_STREAM_SWITCH,he,this),ae.off(D.Z.PLAYBACK_SEEKING,Ne,this),ae.off(D.Z.BUFFER_REPLACEMENT_STARTED,Fe,A),ae.off(D.Z.TRACK_CHANGE_RENDERED,Ze,A)}(),W=null,Y=NaN,H=0,ve=null,fe={}}function Ne(){ve&&(clearTimeout(ve),ve=null)}function Fe(re){try{if(re.streamId!==X.getActiveStreamInfo().id||re.mediaType!==E.Z.VIDEO&&re.mediaType!==E.Z.AUDIO)return;re.streamId===X.getActiveStreamInfo().id&&(fe[re.mediaType]=!0)}catch(z){ee.error(z)}}function Ze(re){re&&re.mediaType&&(fe[re.mediaType]=!1)}function he(){W||function(){try{W||(ee.debug("Starting the gap controller"),W=setInterval(function(){me()&&te(k.getTime())},100))}catch{}}()}function Oe(){if(me(w.get().streaming.gaps.enableSeekFix)&&++H>=10){var re=k.getTime();S===re?te(re,!0):(S=re,Y=NaN),H=0}}function me(){var re=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!X.getActiveStream())return!1;var z=Object.keys(fe).some(function(be){return fe[be]}),xe=!!re&&function Ve(){var re=X.getActiveStream(),z=parseFloat((re.getStartTime()+re.getDuration()).toFixed(5));return k.getTime()+w.get().streaming.gaps.threshold>=z}();return!z&&w.get().streaming.gaps.jumpGaps&&X.getActiveStreamProcessors().length>0&&(!k.isSeeking()||xe)&&!k.isPaused()&&!X.getIsStreamSwitchInProgress()&&!X.getHasMediaOrInitialisationError()}function te(re){var z,xe=arguments.length>1&&void 0!==arguments[1]&&arguments[1],be=w.get().streaming.gaps.enableStallFix,ke=w.get().streaming.gaps.stallSeek,we=w.get().streaming.gaps.smallGapLimit,ie=w.get().streaming.gaps.jumpLargeGaps,Re=le.getBufferRange(),qe=NaN,ft=!1;if(z=function P(re,z){try{if(!re||re.length<=1&&z>0)return NaN;for(var xe=NaN,be=0;isNaN(xe)&&be<re.length;){var ke=be>0?re.end(be-1):0;z<re.start(be)&&ke-z<w.get().streaming.gaps.threshold&&(xe=be),be+=1}return xe}catch{return null}}(Re,re),!isNaN(z)){var nt=Re.start(z),dt=nt-re;dt>0&&(dt<=we||ie)&&(qe=nt)}var st=k.getTimeToStreamEnd();if(isNaN(qe)&&xe&&isFinite(st)&&!isNaN(st)&&st<we&&(qe=parseFloat(k.getStreamEndTime().toFixed(5)),ft=!0),be&&isNaN(qe)&&xe&&isNaN(z)&&function oe(re,z){for(var xe=0,be=re.length;xe<be;xe++)if(z>=re.start(xe)&&z<=re.end(xe))return!0;return!1}(Re,re)&&(0===ke?(ee.warn("Toggle play pause to break stall"),le.pause(),le.play()):(ee.warn("Jumping ".concat(ke,"s to break stall")),qe=re+ke)),qe>0&&Y!==qe&&qe>re&&!ve){var Ft=qe-re;if(ft){var Gt=X.getStreamForTime(qe),Ot=Gt&&!!Gt.getPreloaded();ee.warn("Jumping to end of stream because of gap from ".concat(re," to ").concat(qe,". Gap duration: ").concat(Ft)),k.seek(qe,!0,Ot)}else{var kt=k.getIsDynamic(),wn=z>0?Re.end(z-1):re,tt=kt?1e3*Math.max(0,Ft-.1):0;ve=window.setTimeout(function(){k.seek(qe,!0,!0),ee.warn("Jumping gap occuring in period ".concat(X.getActiveStream().getStreamId()," starting at ").concat(wn," and ending at ").concat(qe,". Jumping by: ").concat(qe-wn)),ve=null},tt)}Y=qe}}return A={reset:He,setConfig:function(re){re&&(re.settings&&(w=re.settings),re.playbackController&&(k=re.playbackController),re.streamController&&(X=re.streamController),re.videoModel&&(le=re.videoModel))},initialize:function(){!function(){ae.on(D.Z.WALLCLOCK_TIME_UPDATED,Oe,this),ae.on(D.Z.INITIAL_STREAM_SWITCH,he,this),ae.on(D.Z.PLAYBACK_SEEKING,Ne,this),ae.on(D.Z.BUFFER_REPLACEMENT_STARTED,Fe,A),ae.on(D.Z.TRACK_CHANGE_RENDERED,Ze,A)}()}},ee=(0,B.Z)(de).getInstance().getLogger(A),He(),A}Xl.__dashjs_factory_name="GapController";var Uc=j.Z.getSingletonFactory(Xl);function Bc(){var A,S,w,H,W,Y,k,X,le,ve,fe=this.context,ee=(0,V.Z)(fe).getInstance();function de(){S=!1;var Ve=tn.Z.parseUserAgent();w=Ve&&Ve.browser&&Ve.browser.name&&"safari"===Ve.browser.name.toLowerCase()}function ae(){S=!1}function He(Ve){if(Ve.streamId===Y.getActiveStreamInfo().id&&le){var P=k.getLiveDelay();k.getBufferLevel()>P/2&&(le=!1)}}function Ne(Ve){Ve.streamId===Y.getActiveStreamInfo().id&&(le=Ve.state===F.Z.BUFFER_EMPTY)}function Fe(){X.getCatchupModeEnabled()||H.setPlaybackRate(1)}function Ze(){k.getIsDynamic()&&X.getCatchupModeEnabled()&&(X.getCatchupPlaybackRates().max>0||X.getCatchupPlaybackRates().min<0)&&!k.isPaused()&&!k.isSeeking()&&function(){try{return!(!k.getTime()>0||S)&&(Oe()===E.Z.LIVE_CATCHUP_MODE_LOLP?function(Ve,P){try{return Math.abs(he())>0||Ve<P}catch{return!1}}(k.getBufferLevel(),W.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(he())>0}catch{return!1}}())}catch{return!1}}()&&function(){if(!S&&H){var Ve,P=H.getPlaybackRate(),oe=X.getCatchupPlaybackRates(),te=k.getBufferLevel(),re=he(),z=X.getCatchupMaxDrift();if(!isNaN(z)&&z>0&&re>z)ve.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),S=!0,k.seekToCurrentLive(!0,!1);else{var xe=k.getCurrentLiveLatency(),be=k.getLiveDelay();Ve=Oe()===E.Z.LIVE_CATCHUP_MODE_LOLP?function(we,ie,Re,qe,ft){var nt;if(ft<qe){var dt=Math.abs(we.min);nt=1-dt+2*dt/(1+Math.pow(Math.E,-5*(ft-qe))),ve.debug("[LoL+ playback control_buffer-based] bufferLevel: "+ft+", newRate: "+nt)}else{if(Math.abs(ie-Re)<=.02*Re)nt=1;else{var Ft=ie-Re,Gt=Ft<0?Math.abs(we.min):we.max;nt=1-Gt+2*Gt/(1+Math.pow(Math.E,-5*Ft))}ve.debug("[LoL+ playback control_latency-based] latency: "+ie+", newRate: "+nt)}return nt}(oe,xe,be,W.get().streaming.liveCatchup.playbackBufferMin,te):function(we,ie,Re,qe){if(le)return 1;var ft=ie-Re,nt=ft<0?Math.abs(we.min):we.max,st=1-nt+2*nt/(1+Math.pow(Math.E,-5*ft));return k.getPlaybackStalled()&&qe<=Re/2&&ft>0&&(st=1),st}(oe,xe,be,te);var ke=w?.25:.02/(.5/oe.max);Ve&&Math.abs(P-Ve)>=ke&&(ve.debug("[CatchupController]: Setting playback rate to ".concat(Ve)),H.setPlaybackRate(Ve))}}}()}function he(){return k.getCurrentLiveLatency()-k.getLiveDelay()}function Oe(){var Ve=W.get().streaming.liveCatchup.playbackBufferMin;return W.get().streaming.liveCatchup.mode!==E.Z.LIVE_CATCHUP_MODE_LOLP||null===Ve||isNaN(Ve)?E.Z.LIVE_CATCHUP_MODE_DEFAULT:E.Z.LIVE_CATCHUP_MODE_LOLP}function me(){X.getCatchupPlaybackRates(!0)}return A={reset:function(){ee.off(T.Z.BUFFER_LEVEL_UPDATED,He,A),ee.off(T.Z.BUFFER_LEVEL_STATE_CHANGED,Ne,A),ee.off(T.Z.PLAYBACK_PROGRESS,Ze,A),ee.off(T.Z.PLAYBACK_TIME_UPDATED,Ze,A),ee.off(T.Z.PLAYBACK_SEEKED,ae,A),ee.off(D.Z.SETTING_UPDATED_CATCHUP_ENABLED,Fe,A),ee.off(D.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,me,A),ee.off(D.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,me,A),ee.off(T.Z.STREAM_INITIALIZED,me,A),de(),H.setPlaybackRate(1,!0)},setConfig:function(Ve){Ve&&(Ve.settings&&(W=Ve.settings),Ve.videoModel&&(H=Ve.videoModel),Ve.streamController&&(Y=Ve.streamController),Ve.playbackController&&(k=Ve.playbackController),Ve.mediaPlayerModel&&(X=Ve.mediaPlayerModel))},initialize:function(){ee.on(T.Z.BUFFER_LEVEL_UPDATED,He,A),ee.on(T.Z.BUFFER_LEVEL_STATE_CHANGED,Ne,A),ee.on(T.Z.PLAYBACK_PROGRESS,Ze,A),ee.on(T.Z.PLAYBACK_TIME_UPDATED,Ze,A),ee.on(T.Z.PLAYBACK_SEEKED,ae,A),ee.on(D.Z.SETTING_UPDATED_CATCHUP_ENABLED,Fe,A),ee.on(D.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,me,A),ee.on(D.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,me,A),ee.on(T.Z.STREAM_INITIALIZED,me,A),me()}},ve=(0,B.Z)(fe).getInstance().getLogger(A),de(),A}Bc.__dashjs_factory_name="CatchupController";var zr=j.Z.getSingletonFactory(Bc),Pu=[E.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME];function Xs(){var A,S,w,H,W;function k(){S={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},w=[]}function X(le,ve,fe){try{S[le][ve]=fe/1e3}catch(ee){H.error(ee)}}return A={getServiceDescriptionSettings:function(){return S},getProducerReferenceTimeOffsets:function(){return w},calculateProducerReferenceTimeOffsets:function(le){try{var ve=[];if(le&&le.length>0){var fe=[E.Z.VIDEO,E.Z.AUDIO,E.Z.TEXT],ee=W.getAvailabilityStartTime()/1e3;le.forEach(function(de){var ae=fe.reduce(function(He,Ne){return He.concat(W.getAllMediaInfoForType(de,Ne))},[]).reduce(function(He,Ne){return W.getProducerReferenceTimes(de,Ne).forEach(function(Fe){var Ze=W.getVoRepresentations(Ne);if(Ze&&Ze.length>0&&Ze[0].adaptation&&Ze[0].segmentInfoType===_.Z.SEGMENT_TEMPLATE){var he=Ze[0],Oe=new Date(Fe[_.Z.WALL_CLOCK_TIME]).getTime()/1e3-(Fe[_.Z.PRESENTATION_TIME]/he[_.Z.TIMESCALE]-he[_.Z.PRESENTATION_TIME_OFFSET]+de.start);He.push({id:Fe[_.Z.ID],to:ee-Oe})}}),He},[]);ve=ve.concat(ae)})}w=ve}catch(de){H.error(de),w=[]}},applyServiceDescription:function(le){if(le&&le.serviceDescriptions){var ve=le.serviceDescriptions.filter(function(de){return Pu.includes(de.schemeIdUri)}),fe=le.serviceDescriptions.filter(function(de){return null==de.schemeIdUri}),ee=ve.length>0?ve[ve.length-1]:fe[fe.length-1];ee&&(ee.latency&&ee.latency.target>0&&function(de){var ae,Ze;if(ae={liveDelay:(Ze=de).latency.target/1e3,maxDrift:!isNaN(Ze.latency.max)&&Ze.latency.max>Ze.latency.target?(Ze.latency.max-Ze.latency.target+500)/1e3:NaN,referenceId:Ze.latency.referenceId||NaN},w.length>0){var He=function(Ze){var he,Oe=0,me=w.filter(function(Ve){return Ve.id===Ze.referenceId});return 0===me.length?(Oe=w.length>0?w[0].to:0,he=w[0].id||NaN):(Oe=me[0].to||0,he=me[0].id||NaN),{to:Oe,id:he}}(ae),Ne=He.to,Fe=He.id;S.liveDelay=ae.liveDelay-Ne,S.liveCatchup.maxDrift=ae.maxDrift,H.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(Ne," from ProducerReferenceTime element with id ").concat(Fe,".\n                Live Delay: ").concat(ae.liveDelay-Ne,", Live catchup max drift: ").concat(ae.maxDrift,"\n            "))}else S.liveDelay=ae.liveDelay,S.liveCatchup.maxDrift=ae.maxDrift,H.debug("Found latency properties coming from service description: Live Delay: ".concat(ae.liveDelay,", Live catchup max drift: ").concat(ae.maxDrift))}(ee),ee.playbackRate&&(ae=(de=ee).playbackRate.min?Math.round(1e3*(de.playbackRate.min-1))/1e3:NaN,He=de.playbackRate.max?Math.round(1e3*(de.playbackRate.max-1))/1e3:NaN,S.liveCatchup.playbackRate.min=ae,S.liveCatchup.playbackRate.max=He,H.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(ae)),H.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(He))),ee.operatingBandwidth&&function(de){if(de&&de.operatingBandwidth&&de.operatingBandwidth.mediaType&&"all"!==de.operatingBandwidth.mediaType){var ae={};ae.minBandwidth=de.operatingBandwidth.min,ae.maxBandwidth=de.operatingBandwidth.max,ae.targetBandwidth=de.operatingBandwidth.target;var He=[];"video"===de.operatingBandwidth.mediaType||"audio"===de.operatingBandwidth.mediaType?He.push(de.operatingBandwidth.mediaType):"any"===de.operatingBandwidth.mediaType&&(He.push("audio"),He.push("video")),He.forEach(function(Ne){isNaN(ae.minBandwidth)||X("minBitrate",Ne,ae.minBandwidth),isNaN(ae.maxBandwidth)||X("maxBitrate",Ne,ae.maxBandwidth),isNaN(ae.targetBandwidth)||X("initialBitrate",Ne,ae.targetBandwidth)})}}(ee),ee.contentSteering&&function(de){S.contentSteering=de.contentSteering}(ee))}var de,ae,He},reset:function(){k()},setConfig:function(le){le&&le.adapter&&(W=le.adapter)}},H=(0,B.Z)(this.context).getInstance().getLogger(A),k(),A}Xs.__dashjs_factory_name="ServiceDescriptionController";var Kf=j.Z.getSingletonFactory(Xs),Ii=ne(3973),ss=ne.n(Ii),Vc=ne(3039);function ur(){var A,S,w,H,W,Y,k,X,le=this.context,ve=(0,V.Z)(le).getInstance();function fe(ie,Re){return ie&&w[Re]&&w[Re][ie]?w[Re][ie].list:[]}function ee(ie,Re){return ie&&w[Re]&&w[Re][ie]?w[Re][ie].current:null}function de(ie){var Re=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ie&&ie.streamInfo){var qe=ie.type,nt=ie.streamInfo.id,dt=ee(qe,nt);if(w[nt]&&w[nt][qe]&&(w[nt][qe].current=ie,w[nt][qe].current&&(qe!==E.Z.TEXT&&!Ne(ie,dt)||qe===E.Z.TEXT&&ie.isFragmented)&&ve.trigger(D.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:dt,newMediaInfo:ie,switchMode:H.get().streaming.trackSwitchMode[qe]},{streamId:nt}),!Re)){var st=function Ze(ie){var Re={lang:ie.lang,viewpoint:ie.viewpoint,roles:ie.roles,accessibility:ie.accessibility,audioChannelConfiguration:ie.audioChannelConfiguration,codec:ie.codec};return Re.lang||Re.viewpoint||Re.role&&Re.role.length>0||Re.accessibility&&Re.accessibility.length>0||Re.audioChannelConfiguration&&Re.audioChannelConfiguration.length>0?Re:null}(ie);if(!st||!w[nt][qe].storeLastSettings)return;st.roles&&(st.role=st.roles[0],delete st.roles),st.accessibility&&(st.accessibility=st.accessibility[0]),st.audioChannelConfiguration&&(st.audioChannelConfiguration=st.audioChannelConfiguration[0]),Y[qe]=st,X.setSavedMediaSettings(qe,st)}}}function ae(ie,Re){ie&&Re&&(W[ie]=Re)}function He(ie){return ie?W[ie]:null}function Ne(ie,Re){if(!ie&&!Re)return!0;if(!ie||!Re)return!1;var qe=ie.id===Re.id,ft=ie.viewpoint===Re.viewpoint,nt=JSON.stringify(ie.viewpointsWithSchemeIdUri)===JSON.stringify(Re.viewpointsWithSchemeIdUri),dt=ie.lang===Re.lang,st=ie.codec===Re.codec,Ft=ie.roles.toString()===Re.roles.toString(),Gt=JSON.stringify(ie.rolesWithSchemeIdUri)===JSON.stringify(Re.rolesWithSchemeIdUri),Ot=ie.accessibility.toString()===Re.accessibility.toString(),kt=JSON.stringify(ie.accessibilitiesWithSchemeIdUri)===JSON.stringify(Re.accessibilitiesWithSchemeIdUri),wn=ie.audioChannelConfiguration.toString()===Re.audioChannelConfiguration.toString(),tt=JSON.stringify(ie.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(Re.audioChannelConfigurationsWithSchemeIdUri);return qe&&st&&ft&&nt&&dt&&Ft&&Gt&&Ot&&kt&&wn&&tt}function Fe(){w={},Y={},W={audio:null,video:null,text:null}}function he(ie,Re,qe){var ft=[];return ie.forEach(function(nt){Re(qe,nt)&&ft.push(nt)}),0!==ft.length?ft:ie}function Oe(ie,Re){try{return!ie.lang||ie.lang instanceof RegExp?Re.lang.match(ie.lang):""!==Re.lang&&(0,Vc.extendedFilter)(Re.lang,ss()(ie.lang)).length>0}catch{return!1}}function me(ie,Re){return null==ie.index||Re.index===ie.index}function Ve(ie,Re){return!ie.viewpoint||ie.viewpoint===Re.viewpoint}function P(ie,Re){var qe=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!ie.role||!!Re.roles.filter(function(nt){return nt===ie.role})[0]||Re.type===E.Z.AUDIO&&qe}function oe(ie,Re){return ie.accessibility?!!Re.accessibility.filter(function(qe){return qe===ie.accessibility})[0]:!Re.accessibility.length}function te(ie,Re){return!ie.audioChannelConfiguration||!!Re.audioChannelConfiguration.filter(function(qe){return qe===ie.audioChannelConfiguration})[0]}function re(ie,Re){return!ie.codec||ie.codec===Re.codec}function z(ie){var Re,qe=0,ft=[];return ie.forEach(function(nt){(Re=Math.max.apply(Math,nt.bitrateList.map(function(dt){return dt.bandwidth})))>qe?(qe=Re,ft=[nt]):Re===qe&&ft.push(nt)}),ft}function xe(ie){var Re,qe=1/0,ft=[];return ie.forEach(function(nt){var dt=nt.bitrateList.reduce(function(st,Ft){var Gt=Math.max(1,Ft.width*Ft.height);return st+Ft.bandwidth/Gt},0);(Re=dt/nt.bitrateList.length)<qe?(qe=Re,ft=[nt]):Re===qe&&ft.push(nt)}),ft}function be(ie){var Re,qe=0,ft=[];return ie.forEach(function(nt){(Re=nt.representationCount)>qe?(qe=Re,ft=[nt]):Re===qe&&ft.push(nt)}),ft}function ke(ie,Re){if(ie===E.Z.TEXT)return Re[0];var qe,st,Ft,Gt,ft=H.get().streaming.selectionModeForInitialTrack,nt=k.getCustomInitialTrackSelectionFunction();if(nt&&"function"==typeof nt)qe=nt(Re);else switch(ft){case E.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:st=0,Ft=[],Re.forEach(function(Ot){isNaN(Ot.selectionPriority)||(Ot.selectionPriority>st?(st=Ot.selectionPriority,Ft=[Ot]):Ot.selectionPriority===st&&Ft.push(Ot))}),(Gt=Ft).length>1&&(Gt=z(Gt)),Gt.length>1&&(Gt=be(Gt)),qe=Gt;break;case E.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:qe=function(dt){var st=z(dt);return st.length>1&&(st=be(st)),st}(Re);break;case E.Z.TRACK_SELECTION_MODE_FIRST_TRACK:qe=we(Re);break;case E.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:qe=function(dt){var st=xe(dt);return st.length>1&&(st=z(st)),st}(Re);break;case E.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:qe=function(dt){var st=be(dt);return st.length>1&&(st=z(dt)),st}(Re);break;default:S.warn("Track selection mode ".concat(ft," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),qe=we(Re)}return qe.length>0?qe[0]:Re[0]}function we(ie){return ie[0]}return A={setInitialMediaSettingsForType:function(ie,Re){var qe=Y[ie]||He(ie),ft=fe(ie,Re.id),nt=[];qe||((qe=X.getSavedMediaSettings(ie))&&delete qe.codec,ae(ie,qe)),ft&&0!==ft.length&&(qe&&(nt=he(nt=Array.from(ft),Oe,qe),nt=he(nt,me,qe),nt=he(nt,Ve,qe),ie===E.Z.AUDIO&&Y[ie]||(nt=he(nt,P,qe)),nt=he(nt,oe,qe),nt=he(nt,te,qe),nt=he(nt,re,qe)),0===nt.length?de(ke(ie,ft),!0):de(nt.length>1?ke(ie,nt):nt[0]))},addTrack:function(ie){if(ie){var Re=ie.type;if((qe=Re)===E.Z.AUDIO||qe===E.Z.VIDEO||qe===E.Z.TEXT||qe===E.Z.IMAGE){var qe,ft,nt=ie.streamInfo.id;w[nt]||(w[nt]={audio:{list:[],storeLastSettings:ft=H.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:ft,current:null},text:{list:[],storeLastSettings:ft,current:null},image:{list:[],storeLastSettings:ft,current:null}});for(var dt=w[nt][Re].list,st=0,Ft=dt.length;st<Ft;++st)if(Ne(dt[st],ie))return;dt.push(ie)}}},getTracksFor:fe,getCurrentTrackFor:ee,isCurrentTrack:function(ie){if(!ie)return!1;var Re=ie.type,qe=ie.streamInfo.id;return w[qe]&&w[qe][Re]&&Ne(w[qe][Re].current,ie)},setTrack:de,selectInitialTrack:ke,setInitialSettings:ae,getInitialSettings:He,getTracksWithHighestBitrate:z,getTracksWithHighestEfficiency:xe,getTracksWithWidestRange:be,isTracksEqual:Ne,matchSettings:function(ie,Re){var qe=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var ft=!1;if(ie.lang){if(ie.lang instanceof RegExp)ft=Re.lang.match(ie.lang);else if(""!==Re.lang){var nt=ss()(ie.lang);nt&&(ft=(0,Vc.extendedFilter)(Re.lang,nt).length>0)}}else ft=!0;var dt=null==ie.index||Re.index===ie.index,st=!ie.viewpoint||ie.viewpoint===Re.viewpoint,Ft=!ie.role||!!Re.roles.filter(function(kt){return kt===ie.role})[0],Gt=!ie.accessibility||!!Re.accessibility.filter(function(kt){return kt===ie.accessibility})[0],Ot=!ie.audioChannelConfiguration||!!Re.audioChannelConfiguration.filter(function(kt){return kt===ie.audioChannelConfiguration})[0];return ft&&dt&&st&&(Ft||Re.type===E.Z.AUDIO&&qe)&&Gt&&Ot}catch{return!1}},matchSettingsLang:Oe,matchSettingsIndex:me,matchSettingsViewPoint:Ve,matchSettingsRole:P,matchSettingsAccessibility:oe,matchSettingsAudioChannelConfig:te,saveTextSettingsDisabled:function(){X.setSavedMediaSettings(E.Z.TEXT,null)},setConfig:function(ie){ie&&(ie.domStorage&&(X=ie.domStorage),ie.settings&&(H=ie.settings),ie.customParametersModel&&(k=ie.customParametersModel))},reset:Fe},S=(0,B.Z)(le).getInstance().getLogger(A),Fe(),A}ur.__dashjs_factory_name="MediaController";var Sl=j.Z.getSingletonFactory(ur);j.Z.updateSingletonFactory(ur.__dashjs_factory_name,Sl);var Fu=Sl,Ql=function A(S,w){(function(H,W){if(!(H instanceof W))throw new TypeError("Cannot call a class as a function")})(this,A),this.data={baseUrls:S||null,selectedIdx:w||NaN},this.children=[]};function Hc(){var A,S,w,H,Y=In(this.context).getInstance();function k(fe,ee,de){var ae=X(de);fe[ee]?Y.areEqual(ae,fe[ee].data.baseUrls)||(fe[ee].data.baseUrls=ae,fe[ee].data.selectedIdx=NaN):fe[ee]=new Ql(ae)}function X(fe){var ee=w.getBaseURLsFromElement(fe),de=H.getSynthesizedBaseUrlElements(ee);return de&&de.length>0&&(ee=ee.concat(de)),ee}function le(fe,ee){var de=ee||S;fe(de.data),de.children&&de.children.forEach(function(ae){return le(fe,ae)})}function ve(){S=new Ql}return A={reset:ve,update:function(fe){!function(ee){!function(){if(!w||!w.hasOwnProperty("getBaseURLsFromElement")||!w.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var de=X(ee);Y.areEqual(de,S.data.baseUrls)||(S.data.baseUrls=de,S.data.selectedIdx=NaN),ee&&ee.Period_asArray&&ee.Period_asArray.forEach(function(ae,He){k(S.children,He,ae),ae.AdaptationSet_asArray&&ae.AdaptationSet_asArray.forEach(function(Ne,Fe){k(S.children[He].children,Fe,Ne),Ne.Representation_asArray&&Ne.Representation_asArray.sort(w.getRepresentationSortFunction()).forEach(function(Ze,he){k(S.children[He].children[Fe].children,he,Ze)})})})}(fe)},getForPath:function(fe){var ee=S,de=[ee.data];return fe&&fe.forEach(function(ae){(ee=ee.children[ae])&&de.push(ee.data)}),de.filter(function(ae){return ae.baseUrls.length})},invalidateSelectedIndexes:function(fe){le(function(ee){isNaN(ee.selectedIdx)||fe===ee.baseUrls[ee.selectedIdx].serviceLocation&&(ee.selectedIdx=NaN)})},setConfig:function(fe){fe.adapter&&(w=fe.adapter),fe.contentSteeringController&&(H=fe.contentSteeringController)},getBaseUrls:function(fe){return X(fe)}},ve(),A}Hc.__dashjs_factory_name="BaseURLTreeModel";var Jl=j.Z.getClassFactory(Hc);function ku(A){var S=(A=A||{}).blacklistController;return{select:function(w){return w&&function(W){var Y,k,X=0,le=[],ve=0;if((k=W.sort(function(fe,ee){var de=fe.dvbPriority-ee.dvbPriority;return isNaN(de)?0:de}).filter(function(fe,ee,de){return!ee||de[0].dvbPriority&&fe.dvbPriority&&de[0].dvbPriority===fe.dvbPriority})).length)return k.length>1&&(k.forEach(function(fe){le.push(X+=fe.dvbWeight)}),Y=Math.floor(Math.random()*(X-1)),le.every(function(fe,ee){return ve=ee,!(Y<fe)})),k[ve]}((H=[],w.filter(function(W){return!S.contains(W.serviceLocation)||(W.dvbPriority&&H.push(W.dvbPriority),!1)}).filter(function(W){return!H.length||!W.dvbPriority||-1===H.indexOf(W.dvbPriority)})));var H}}}ku.__dashjs_factory_name="DVBSelector";var hh=j.Z.getClassFactory(ku);function Yf(A){var S=(A=A||{}).blacklistController;return{select:function(w){var H,W=0;return w&&w.some(function(Y,k){return W=k,!S.contains(Y.serviceLocation)})&&(H=w[W]),H}}}Yf.__dashjs_factory_name="BasicSelector";var zf=j.Z.getClassFactory(Yf);function Gc(){var A,S,w;function W(){for(var Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],X=0,le=NaN,ve=function(){var ee=Y[X],de=k.findIndex(function(ae){return ae.serviceLocation&&ae.serviceLocation===ee});if(-1!==de&&!w.contains(k[de].serviceLocation))return le=de,"break";X+=1};X<Y.length&&"break"!==ve(););return le}return A={selectBaseUrlIndex:function(Y){var k=NaN;if(isNaN(Y.selectedIdx)){var X=S.getSteeringDataFromManifest();X&&X.defaultServiceLocationArray.length>0&&(k=W(X.defaultServiceLocationArray,Y.baseUrls))}var le=S.getCurrentSteeringResponseData();return Y.baseUrls&&Y.baseUrls.length&&le&&le.pathwayPriority&&le.pathwayPriority.length&&(k=W(le.pathwayPriority,Y.baseUrls)),k},setConfig:function(Y){Y.blacklistController&&(w=Y.blacklistController),Y.contentSteeringController&&(S=Y.contentSteeringController)}},S=qo(this.context).getInstance(),A}Gc.__dashjs_factory_name="ContentSteeringSelector";var Qs=j.Z.getClassFactory(Gc);function Is(){var A,S,w,H,W,Y,k=this.context,X=(0,V.Z)(k).getInstance(),le=(0,ot.Z)(k).getInstance();function ve(){S.reset()}return A={chooseSelector:function(fe){(0,Ie.PS)(fe,"boolean"),Y=fe?H:w},select:function(fe){if(fe){if(le.get().streaming.applyContentSteering){var ee=W.selectBaseUrlIndex(fe);isNaN(ee)||-1===ee||(fe.selectedIdx=ee)}if(!isNaN(fe.selectedIdx))return fe.baseUrls[fe.selectedIdx];var de=Y.select(fe.baseUrls);return de?(fe.selectedIdx=fe.baseUrls.indexOf(de),de):(X.trigger(D.Z.URL_RESOLUTION_FAILED,{error:new Le.Z(De.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,De.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(Y===w&&ve()))}},reset:ve,setConfig:function(fe){fe.selector&&(Y=fe.selector),fe.contentSteeringSelector&&(W=fe.contentSteeringSelector)}},S=jo(k).create({updateEventName:D.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:D.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),w=zf(k).create({blacklistController:S}),H=hh(k).create({blacklistController:S}),(W=Qs(k).create()).setConfig({blacklistController:S}),Y=w,A}Is.__dashjs_factory_name="BaseURLSelector";var Al=j.Z.getClassFactory(Is);function eu(){var A,S,w,H,W,Y=this.context,k=(0,V.Z)(Y).getInstance(),X=(0,xt.Z)(Y).getInstance();function le(fe){w.update(fe),H.chooseSelector(S.getIsDVB(fe)),k.trigger(T.Z.BASE_URLS_UPDATED,{baseUrls:ve(fe)})}function ve(fe){return w.getBaseUrls(fe)}return A={reset:function(){w.reset(),H.reset()},initialize:function(fe){w.setConfig({adapter:S,contentSteeringController:W}),le(fe)},resolve:function(fe){var ee=w.getForPath(fe).reduce(function(de,ae){var He=H.select(ae);return He?(X.isRelative(He.url)?de.url=X.resolve(He.url,de.url):(de.url=He.url,de.serviceLocation=He.serviceLocation),de.availabilityTimeOffset=He.availabilityTimeOffset,de.availabilityTimeComplete=He.availabilityTimeComplete,de.queryParams=He.queryParams,de):new ha},new ha);if(!X.isRelative(ee.url))return ee},setConfig:function(fe){fe.baseURLTreeModel&&(w=fe.baseURLTreeModel),fe.baseURLSelector&&(H=fe.baseURLSelector),fe.adapter&&(S=fe.adapter),fe.contentSteeringController&&(W=fe.contentSteeringController)},getBaseUrls:ve,update:le},w=Jl(Y).create(),H=Al(Y).create(),k.on(D.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(fe){w.invalidateSelectedIndexes(fe.entry)},A),A}eu.__dashjs_factory_name="BaseURLController";var Zc=j.Z.getClassFactory(eu);function Js(A){return(Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(A)}function tu(A,S){return(tu=Object.setPrototypeOf||function(w,H){return w.__proto__=H,w})(A,S)}function nu(A){return(nu=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(A)}var na=function(A){!function(Y,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(k&&k.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),k&&tu(Y,k)}(W,A);var S,w,H=(S=W,w=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Y,k=nu(S);if(w){var X=nu(this).constructor;Y=Reflect.construct(k,arguments,X)}else Y=k.apply(this,arguments);return function Ds(A,S){return!S||"object"!==Js(S)&&"function"!=typeof S?function(w){if(void 0===w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(A):S}(this,Y)});function W(Y,k){var X;return function(le,ve){if(!(le instanceof ve))throw new TypeError("Cannot call a class as a function")}(this,W),(X=H.call(this)).url=Y||null,X.type=k||null,X.mediaType=E.Z.STREAM,X.responseType="",X}return W}(K.Z);function ru(A){A=A||{};var S=this.context,w=(0,V.Z)(S).getInstance(),H=Nr(S).create({errHandler:A.errHandler,dashMetrics:A.dashMetrics,mediaPlayerModel:A.mediaPlayerModel,requestModifier:A.requestModifier,errors:De});return{load:function(W,Y,k){var X=function(ve,fe){Y.resolved=!0,Y.resolvedContent=ve||null,w.trigger(D.Z.XLINK_ELEMENT_LOADED,{element:Y,resolveObject:k,error:ve||fe?null:new Le.Z(De.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,De.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+W)})};if("urn:mpeg:dash:resolve-to-zero:2013"===W)X(null,!0);else{var le=new na(W,gt.w.XLINK_EXPANSION_TYPE);H.load({request:le,success:function(ve){X(ve)},error:function(){X(null)}})}},reset:function(){H&&(H.abort(),H=null)}}}ru.__dashjs_factory_name="XlinkLoader";var Br=j.Z.getClassFactory(ru),Uu=function(A){function S(he){var Oe=he.localName;return null==Oe&&(Oe=he.baseName),null!=Oe&&""!=Oe||(Oe=he.nodeName),Oe}function w(he){return"string"==typeof he?he.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):he}function H(he,Oe,me,Ve){for(var P=0;P<he.length;P++){var oe=he[P];if("string"==typeof oe){if(oe==Ve)break}else if(oe instanceof RegExp){if(oe.test(Ve))break}else if("function"==typeof oe&&oe(Oe,me,Ve))break}return P!=he.length}function W(he,Oe,me){"property"===A.arrayAccessForm&&(he[Oe+"_asArray"]=he[Oe]instanceof Array?he[Oe]:[he[Oe]]),!(he[Oe]instanceof Array)&&A.arrayAccessFormPaths.length>0&&H(A.arrayAccessFormPaths,he,Oe,me)&&(he[Oe]=[he[Oe]])}function Y(he){var Oe=he.split(/[-T:+Z]/g),me=new Date(Oe[0],Oe[1]-1,Oe[2]),Ve=Oe[5].split(".");if(me.setHours(Oe[3],Oe[4],Ve[0]),Ve.length>1&&me.setMilliseconds(Ve[1]),Oe[6]&&Oe[7]){var P=60*Oe[6]+Number(Oe[7]);P=0+("-"==(/\d\d-\d\d:\d\d$/.test(he)?"-":"+")?-1*P:P),me.setMinutes(me.getMinutes()-P-me.getTimezoneOffset())}else-1!==he.indexOf("Z",he.length-1)&&(me=new Date(Date.UTC(me.getFullYear(),me.getMonth(),me.getDate(),me.getHours(),me.getMinutes(),me.getSeconds(),me.getMilliseconds())));return me}function k(he,Oe,me,Ve){return!(1==Oe&&A.xmlElementsFilter.length>0)||H(A.xmlElementsFilter,he,me,Ve)}function X(he,Oe){if(9==he.nodeType){for(var me=new Object,Ve=he.childNodes,P=0;P<Ve.length;P++)1==(te=Ve[P]).nodeType&&(A.ignoreRoot?me=X(te):(me={})[re=S(te)]=X(te));return me}if(1==he.nodeType){(me=new Object).__cnt=0;var oe=[];for(Ve=he.childNodes,P=0;P<Ve.length;P++){var te,re=S(te=Ve[P]);if(8!=te.nodeType){var z=Oe+"."+re;if(k(me,te.nodeType,re,z))if(me.__cnt++,null==me[re]){var xe=X(te,z);("#text"!=re||/[^\s]/.test(xe))&&((be={})[re]=xe,oe.push(be)),me[re]=xe,W(me,re,z)}else{var be;null!=me[re]&&(me[re]instanceof Array||(me[re]=[me[re]],W(me,re,z))),xe=X(te,z),("#text"!=re||/[^\s]/.test(xe))&&((be={})[re]=xe,oe.push(be)),me[re][me[re].length]=xe}}}me.__children=oe;for(var ke=S(he),we=0;we<he.attributes.length;we++){var ie=he.attributes[we];me.__cnt++;for(var Re=ie.value,qe=0,ft=A.matchers.length;qe<ft;qe++){var nt=A.matchers[qe];nt.test(ie,ke)&&(Re=nt.converter(ie.value))}me[A.attributePrefix+ie.name]=Re}var dt=he.prefix;return null!=dt&&""!=dt&&(me.__cnt++,me.__prefix=dt),null!=me["#text"]&&(me.__text=me["#text"],me.__text instanceof Array&&(me.__text=me.__text.join("\n")),A.stripWhitespaces&&(me.__text=me.__text.trim()),delete me["#text"],"property"==A.arrayAccessForm&&delete me["#text_asArray"],me.__text=function(st,Ft,Gt){if(A.datetimeAccessFormPaths.length>0){var Ot=Gt.split(".#")[0];return H(A.datetimeAccessFormPaths,st,Ft,Ot)?Y(st):st}return st}(me.__text,re,Oe+"."+re)),null!=me["#cdata-section"]&&(me.__cdata=me["#cdata-section"],delete me["#cdata-section"],"property"==A.arrayAccessForm&&delete me["#cdata-section_asArray"]),0==me.__cnt&&"text"==A.emptyNodeForm?me="":1==me.__cnt&&null!=me.__text?me=me.__text:1!=me.__cnt||null==me.__cdata||A.keepCData?me.__cnt>1&&null!=me.__text&&A.skipEmptyTextNodesForObj&&(A.stripWhitespaces&&""==me.__text||""==me.__text.trim())&&delete me.__text:me=me.__cdata,delete me.__cnt,!A.enableToStringFunc||null==me.__text&&null==me.__cdata||(me.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),me}if(3==he.nodeType||4==he.nodeType)return he.nodeValue}function le(he,Oe,me,Ve){var P="<"+(null!=he&&null!=he.__prefix?he.__prefix+":":"")+Oe;if(null!=me)for(var oe=0;oe<me.length;oe++){var te=me[oe],re=he[te];A.escapeMode&&(re=w(re)),P+=" "+te.substr(A.attributePrefix.length)+"=",P+=A.useDoubleQuotes?'"'+re+'"':"'"+re+"'"}return P+(Ve?"/>":">")}function ve(he,Oe){return"</"+(null!=he.__prefix?he.__prefix+":":"")+Oe+">"}function fe(he,Oe){return"property"==A.arrayAccessForm&&(Ve="_asArray",-1!==(me=Oe.toString()).indexOf(Ve,me.length-8))||0==Oe.toString().indexOf(A.attributePrefix)||0==Oe.toString().indexOf("__")||he[Oe]instanceof Function;var me,Ve}function ee(he){var Oe=0;if(he instanceof Object)for(var me in he)fe(he,me)||Oe++;return Oe}function de(he,Oe,me){return 0==A.jsonPropertiesFilter.length||""==me||H(A.jsonPropertiesFilter,he,Oe,me)}function ae(he){var Oe=[];if(he instanceof Object)for(var me in he)-1==me.toString().indexOf("__")&&0==me.toString().indexOf(A.attributePrefix)&&Oe.push(me);return Oe}function He(he){var me,Ve,Oe="";return he instanceof Object?Oe+=(Ve="",null!=(me=he).__cdata&&(Ve+="<![CDATA["+me.__cdata+"]]>"),null!=me.__text&&(Ve+=A.escapeMode?w(me.__text):me.__text),Ve):null!=he&&(Oe+=A.escapeMode?w(he):he),Oe}function Ne(he,Oe){return""===he?Oe:he+"."+Oe}function Fe(he,Oe,me,Ve){var P="";if(0==he.length)P+=le(he,Oe,me,!0);else for(var oe=0;oe<he.length;oe++)P+=le(he[oe],Oe,ae(he[oe]),!1),P+=Ze(he[oe],Ne(Ve,Oe)),P+=ve(he[oe],Oe);return P}function Ze(he,Oe){var me="";if(ee(he)>0)for(var Ve in he)if(!fe(he,Ve)&&(""==Oe||de(he,Ve,Ne(Oe,Ve)))){var P=he[Ve],oe=ae(P);null==P||null==P?me+=le(P,Ve,oe,!0):P instanceof Object?P instanceof Array?me+=Fe(P,Ve,oe,Oe):P instanceof Date?(me+=le(P,Ve,oe,!1),me+=P.toISOString(),me+=ve(P,Ve)):ee(P)>0||null!=P.__text||null!=P.__cdata?(me+=le(P,Ve,oe,!1),me+=Ze(P,Ne(Oe,Ve)),me+=ve(P,Ve)):me+=le(P,Ve,oe,!0):(me+=le(P,Ve,oe,!1),me+=He(P),me+=ve(P,Ve))}return me+He(he)}void 0===(A=A||{}).escapeMode&&(A.escapeMode=!0),void 0===A.attributePrefix&&(A.attributePrefix="_"),A.arrayAccessForm=A.arrayAccessForm||"none",A.emptyNodeForm=A.emptyNodeForm||"text",void 0===A.enableToStringFunc&&(A.enableToStringFunc=!0),A.arrayAccessFormPaths=A.arrayAccessFormPaths||[],void 0===A.skipEmptyTextNodesForObj&&(A.skipEmptyTextNodesForObj=!0),void 0===A.stripWhitespaces&&(A.stripWhitespaces=!0),A.datetimeAccessFormPaths=A.datetimeAccessFormPaths||[],void 0===A.useDoubleQuotes&&(A.useDoubleQuotes=!1),A.xmlElementsFilter=A.xmlElementsFilter||[],A.jsonPropertiesFilter=A.jsonPropertiesFilter||[],void 0===A.keepCData&&(A.keepCData=!1),void 0===A.ignoreRoot&&(A.ignoreRoot=!1),this.parseXmlString=function(he){var Oe;if(window,void 0===he)return null;if(window.DOMParser){var me=new window.DOMParser;try{(Oe=me.parseFromString(he,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(Oe=null)}catch{Oe=null}}else 0==he.indexOf("<?")&&(he=he.substr(he.indexOf("?>")+2)),(Oe=new ActiveXObject("Microsoft.XMLDOM")).async="false",Oe.loadXML(he);return Oe},this.asArray=function(he){return void 0===he||null==he?[]:he instanceof Array?he:[he]},this.toXmlDateTime=function(he){return he instanceof Date?he.toISOString():"number"==typeof he?new Date(he).toISOString():null},this.asDateTime=function(he){return"string"==typeof he?Y(he):he},this.xml2json=function(he){return X(he)},this.xml_str2json=function(he){var Oe=this.parseXmlString(he);return null!=Oe?this.xml2json(Oe):null},this.json2xml_str=function(he){return Ze(he,"")},this.json2xml=function(he){var Oe=this.json2xml_str(he);return this.parseXmlString(Oe)},this.getVersion=function(){return"1.2.0"}},Er="onLoad";function Po(A){A=A||{};var S,w,H,W,Y,k,X=this.context,le=(0,V.Z)(X).getInstance(),ve=(0,xt.Z)(X).getInstance();function fe(Ne,Fe,Ze){var he,Oe,me={};me.elements=Ne,me.type=Fe,me.resolveType=Ze,0===me.elements.length&&de(me);for(var Ve=0;Ve<me.elements.length;Ve++)Oe=ve.isHTTPURL((he=me.elements[Ve]).url)?he.url:he.originalContent.BaseURL+he.url,k.load(Oe,he,me)}function ee(Ne){var Fe,Ze,he="";if(Ze=Ne.resolveObject,(Fe=Ne.element).resolvedContent){var Oe=0;0===Fe.resolvedContent.indexOf("<?xml")&&(Oe=Fe.resolvedContent.indexOf("?>")+2),he=Fe.resolvedContent.substr(0,Oe)+"<response>"+Fe.resolvedContent.substr(Oe)+"</response>",Fe.resolvedContent=Y.xml_str2json(he)}(function(me){var Ve;for(Ve=0;Ve<me.elements.length;Ve++)if(!1===me.elements[Ve].resolved)return!1;return!0})(Ze)&&de(Ze)}function de(Ne){var Fe,Ze,he=[];if(function(Oe){var me,Ve,oe,te,re,z=[];for(oe=Oe.elements.length-1;oe>=0;oe--){if(Ve=(me=Oe.elements[oe]).type+"_asArray",me.resolvedContent){if(me.resolvedContent)for(te=0;te<me.resolvedContent[Ve].length;te++)z.push(me.resolvedContent[Ve][te])}else delete me.originalContent["xlink:actuate"],delete me.originalContent["xlink:href"],z.push(me.originalContent);for(me.parentElement[Ve].splice(me.index,1),re=0;re<z.length;re++)me.parentElement[Ve].splice(me.index+re,0,z[re]);z=[]}Oe.elements.length>0&&H.run(W)}(Ne),"onActuate"===Ne.resolveType&&le.trigger(D.Z.XLINK_READY,{manifest:W}),Ne.resolveType===Er)switch(Ne.type){case _.Z.PERIOD:for(Fe=0;Fe<W[_.Z.PERIOD+"_asArray"].length;Fe++)(Ze=W[_.Z.PERIOD+"_asArray"][Fe]).hasOwnProperty(_.Z.ADAPTATION_SET+"_asArray")&&(he=he.concat(ae(Ze[_.Z.ADAPTATION_SET+"_asArray"],Ze,_.Z.ADAPTATION_SET,Er))),Ze.hasOwnProperty(_.Z.EVENT_STREAM+"_asArray")&&(he=he.concat(ae(Ze[_.Z.EVENT_STREAM+"_asArray"],Ze,_.Z.EVENT_STREAM,Er)));fe(he,_.Z.ADAPTATION_SET,Er);break;case _.Z.ADAPTATION_SET:le.trigger(D.Z.XLINK_READY,{manifest:W})}}function ae(Ne,Fe,Ze,he){var Oe,me,Ve,P=[];for(me=Ne.length-1;me>=0;me--)(Oe=Ne[me]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===Oe["xlink:href"]&&Ne.splice(me,1);for(me=0;me<Ne.length;me++)(Oe=Ne[me]).hasOwnProperty("xlink:href")&&Oe.hasOwnProperty("xlink:actuate")&&Oe["xlink:actuate"]===he&&(Ve=He(Oe["xlink:href"],Fe,Ze,me,he,Oe),P.push(Ve));return P}function He(Ne,Fe,Ze,he,Oe,me){return{url:Ne,parentElement:Fe,type:Ze,index:he,resolveType:Oe,originalContent:me,resolvedContent:null,resolved:!1}}return S={resolveManifestOnLoad:function(Ne){Y=new Uu({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:w}),(W=Ne).Period_asArray?fe(ae(W.Period_asArray,W,_.Z.PERIOD,Er),_.Z.PERIOD,Er):le.trigger(D.Z.XLINK_READY,{manifest:W})},setMatchers:function(Ne){Ne&&(w=Ne)},setIron:function(Ne){Ne&&(H=Ne)},reset:function(){le.off(D.Z.XLINK_ELEMENT_LOADED,ee,S),k&&(k.reset(),k=null)}},le.on(D.Z.XLINK_ELEMENT_LOADED,ee,S),k=Br(X).create({errHandler:A.errHandler,dashMetrics:A.dashMetrics,mediaPlayerModel:A.mediaPlayerModel,requestModifier:A.requestModifier,settings:A.settings}),S}Po.__dashjs_factory_name="XlinkController";var Bu=j.Z.getClassFactory(Po);function pa(A){return(pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(A)}function ws(A){function S(W,Y){for(var k in W)Y.hasOwnProperty(k)||(Y[k]=W[k])}function w(W,Y,k){for(var X=0,le=W.length;X<le;++X){var ve=W[X];if(Y[ve.name])if(k[ve.name]){if(ve.merge){var fe=Y[ve.name],ee=k[ve.name];"object"===pa(fe)&&"object"===pa(ee)?S(fe,ee):k[ve.name]=fe+ee}}else k[ve.name]=Y[ve.name]}}function H(W,Y){for(var k=0,X=W.children.length;k<X;++k){var le=W.children[k],ve=Y[le.name+"_asArray"];if(ve)for(var fe=0,ee=ve.length;fe<ee;++fe){var de=ve[fe];w(W.properties,Y,de),H(le,de)}}}return{run:function(W){if(null===W||"object"!==pa(W))return W;if(W.Period_asArray&&"period"in A)for(var Y=A.period,k=W.Period_asArray,X=0,le=k.length;X<le;++X){var ve=k[X];if(H(Y,ve),"adaptationset"in A){var fe=ve.AdaptationSet_asArray;if(fe)for(var ee=A.adaptationset,de=0,ae=fe.length;de<ae;++de)H(ee,fe[de])}}return W}}}ws.__dashjs_factory_name="ObjectIron";var Wf=j.Z.getClassFactory(ws);var Bo=function(){function A(H,W){(function(Y,k){if(!(Y instanceof k))throw new TypeError("Cannot call a class as a function")})(this,A),this._test=H,this._converter=W}var w;return(w=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&function jc(A,S){for(var w=0;w<S.length;w++){var H=S[w];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(A,H.key,H)}}(A.prototype,w),A}();function el(A){return(el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(A)}function Yr(A,S,w){return S in A?Object.defineProperty(A,S,{value:w,enumerable:!0,configurable:!0,writable:!0}):A[S]=w,A}function ra(A,S){return(ra=Object.setPrototypeOf||function(w,H){return w.__proto__=H,w})(A,S)}function Rs(A){return(Rs=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(A)}var Vu=function(A){!function(Y,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(k&&k.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),k&&ra(Y,k)}(W,A);var S,w,H=(S=W,w=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Y,k=Rs(S);if(w){var X=Rs(this).constructor;Y=Reflect.construct(k,arguments,X)}else Y=k.apply(this,arguments);return function fi(A,S){return!S||"object"!==el(S)&&"function"!=typeof S?function(w){if(void 0===w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(A):S}(this,Y)});function W(){return function(Y,k){if(!(Y instanceof k))throw new TypeError("Cannot call a class as a function")}(this,W),H.call(this,function(Y,k){var X,le=(Yr(X={},_.Z.MPD,[_.Z.ID,_.Z.PROFILES]),Yr(X,_.Z.PERIOD,[_.Z.ID]),Yr(X,_.Z.BASE_URL,[_.Z.SERVICE_LOCATION,_.Z.BYTE_RANGE]),Yr(X,_.Z.SEGMENT_BASE,[_.Z.INDEX_RANGE]),Yr(X,_.Z.INITIALIZATION,[_.Z.RANGE]),Yr(X,_.Z.REPRESENTATION_INDEX,[_.Z.RANGE]),Yr(X,_.Z.SEGMENT_LIST,[_.Z.INDEX_RANGE]),Yr(X,_.Z.BITSTREAM_SWITCHING,[_.Z.RANGE]),Yr(X,_.Z.SEGMENT_URL,[_.Z.MEDIA_RANGE,_.Z.INDEX_RANGE]),Yr(X,_.Z.SEGMENT_TEMPLATE,[_.Z.INDEX_RANGE,_.Z.MEDIA,_.Z.INDEX,_.Z.INITIALIZATION_MINUS,_.Z.BITSTREAM_SWITCHING_MINUS]),Yr(X,_.Z.ASSET_IDENTIFIER,[_.Z.VALUE,_.Z.ID]),Yr(X,_.Z.EVENT_STREAM,[_.Z.VALUE]),Yr(X,_.Z.ADAPTATION_SET,[_.Z.PROFILES,_.Z.MIME_TYPE,_.Z.SEGMENT_PROFILES,_.Z.CODECS,_.Z.CONTENT_TYPE]),Yr(X,_.Z.FRAME_PACKING,[_.Z.VALUE,_.Z.ID]),Yr(X,_.Z.AUDIO_CHANNEL_CONFIGURATION,[_.Z.VALUE,_.Z.ID]),Yr(X,_.Z.CONTENT_PROTECTION,[_.Z.VALUE,_.Z.ID]),Yr(X,_.Z.ESSENTIAL_PROPERTY,[_.Z.VALUE,_.Z.ID]),Yr(X,_.Z.SUPPLEMENTAL_PROPERTY,[_.Z.VALUE,_.Z.ID]),Yr(X,_.Z.INBAND_EVENT_STREAM,[_.Z.VALUE,_.Z.ID]),Yr(X,_.Z.ACCESSIBILITY,[_.Z.VALUE,_.Z.ID]),Yr(X,_.Z.ROLE,[_.Z.VALUE,_.Z.ID]),Yr(X,_.Z.RATING,[_.Z.VALUE,_.Z.ID]),Yr(X,_.Z.VIEWPOINT,[_.Z.VALUE,_.Z.ID]),Yr(X,_.Z.CONTENT_COMPONENT,[_.Z.CONTENT_TYPE]),Yr(X,_.Z.REPRESENTATION,[_.Z.ID,_.Z.DEPENDENCY_ID,_.Z.MEDIA_STREAM_STRUCTURE_ID]),Yr(X,_.Z.SUBSET,[_.Z.ID]),Yr(X,_.Z.METRICS,[_.Z.METRICS_MINUS]),Yr(X,_.Z.REPORTING,[_.Z.VALUE,_.Z.ID]),X);if(le.hasOwnProperty(k)){var ve=le[k];return void 0!==ve&&ve.indexOf(Y.name)>=0}return!1},function(Y){return String(Y)})}return W}(Bo);function Yo(A){return(Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(A)}function iu(A,S){return(iu=Object.setPrototypeOf||function(w,H){return w.__proto__=H,w})(A,S)}function Eo(A){return(Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(A)}var ls=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,qc=function(A){!function(Y,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(k&&k.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),k&&iu(Y,k)}(W,A);var S,w,H=(S=W,w=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Y,k=Eo(S);if(w){var X=Eo(this).constructor;Y=Reflect.construct(k,arguments,X)}else Y=k.apply(this,arguments);return function Wa(A,S){return!S||"object"!==Yo(S)&&"function"!=typeof S?function(w){if(void 0===w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(A):S}(this,Y)});function W(){return function(Y,k){if(!(Y instanceof k))throw new TypeError("Cannot call a class as a function")}(this,W),H.call(this,function(Y){for(var k=[_.Z.MIN_BUFFER_TIME,_.Z.MEDIA_PRESENTATION_DURATION,_.Z.MINIMUM_UPDATE_PERIOD,_.Z.TIMESHIFT_BUFFER_DEPTH,_.Z.MAX_SEGMENT_DURATION,_.Z.MAX_SUBSEGMENT_DURATION,_.Z.SUGGESTED_PRESENTATION_DELAY,_.Z.START,E.Z.START_TIME,_.Z.DURATION],X=k.length,le=0;le<X;le++)if(Y.nodeName===k[le])return ls.test(Y.value);return!1},function(Y){var k=ls.exec(Y),X=31536e3*parseFloat(k[3]||0)+2592e3*parseFloat(k[5]||0)+86400*parseFloat(k[7]||0)+3600*parseFloat(k[9]||0)+60*parseFloat(k[11]||0)+parseFloat(k[13]||0);return void 0!==k[1]&&(X=-X),X})}return W}(Bo);function Oa(A){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(A)}function ou(A,S){return(ou=Object.setPrototypeOf||function(w,H){return w.__proto__=H,w})(A,S)}function us(A){return(us=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(A)}var Gu=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,ro=function(A){!function(Y,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(k&&k.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),k&&ou(Y,k)}(W,A);var S,w,H=(S=W,w=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Y,k=us(S);if(w){var X=us(this).constructor;Y=Reflect.construct(k,arguments,X)}else Y=k.apply(this,arguments);return function Hu(A,S){return!S||"object"!==Oa(S)&&"function"!=typeof S?function(w){if(void 0===w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(A):S}(this,Y)});function W(){return function(Y,k){if(!(Y instanceof k))throw new TypeError("Cannot call a class as a function")}(this,W),H.call(this,function(Y){return Gu.test(Y.value)},function(Y){var k,X=Gu.exec(Y);if(k=Date.UTC(parseInt(X[1],10),parseInt(X[2],10)-1,parseInt(X[3],10),parseInt(X[4],10),parseInt(X[5],10),X[6]&&parseInt(X[6],10)||0,X[7]&&1e3*parseFloat(X[7])||0),X[9]&&X[10]){var le=60*parseInt(X[9],10)+parseInt(X[10],10);k+=("+"===X[8]?-1:1)*le*60*1e3}return new Date(k)})}return W}(Bo);function Zu(A){return(Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(A)}function Ms(A,S){return(Ms=Object.setPrototypeOf||function(w,H){return w.__proto__=H,w})(A,S)}function au(A){return(au=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(A)}var ui=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,ju=function(A){!function(Y,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(k&&k.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),k&&Ms(Y,k)}(W,A);var S,w,H=(S=W,w=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Y,k=au(S);if(w){var X=au(this).constructor;Y=Reflect.construct(k,arguments,X)}else Y=k.apply(this,arguments);return function tl(A,S){return!S||"object"!==Zu(S)&&"function"!=typeof S?function(w){if(void 0===w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(A):S}(this,Y)});function W(){return function(Y,k){if(!(Y instanceof k))throw new TypeError("Cannot call a class as a function")}(this,W),H.call(this,function(Y){return ui.test(Y.value)},function(Y){return parseFloat(Y)})}return W}(Bo);function Ns(A){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(A)}function cs(A,S,w){return S in A?Object.defineProperty(A,S,{value:w,enumerable:!0,configurable:!0,writable:!0}):A[S]=w,A}function qu(A,S){return(qu=Object.setPrototypeOf||function(w,H){return w.__proto__=H,w})(A,S)}function Cl(A){return(Cl=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(A)}var Ku=function(A){!function(Y,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(k&&k.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),k&&qu(Y,k)}(W,A);var S,w,H=(S=W,w=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Y,k=Cl(S);if(w){var X=Cl(this).constructor;Y=Reflect.construct(k,arguments,X)}else Y=k.apply(this,arguments);return function $f(A,S){return!S||"object"!==Ns(S)&&"function"!=typeof S?function(w){if(void 0===w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(A):S}(this,Y)});function W(){return function(Y,k){if(!(Y instanceof k))throw new TypeError("Cannot call a class as a function")}(this,W),H.call(this,function(Y,k){var X,le=(cs(X={},_.Z.ADAPTATION_SET,[_.Z.LANG]),cs(X,_.Z.REPRESENTATION,[_.Z.LANG]),cs(X,_.Z.CONTENT_COMPONENT,[_.Z.LANG]),cs(X,_.Z.LABEL,[_.Z.LANG]),cs(X,_.Z.GROUP_LABEL,[_.Z.LANG]),X);if(le.hasOwnProperty(k)){var ve=le[k];return void 0!==ve&&ve.indexOf(Y.name)>=0}return!1},function(Y){return ss()(Y)||String(Y)})}return W}(Bo);var Qf=function(){function A(H){var W;(function(Y,k){if(!(Y instanceof k))throw new TypeError("Cannot call a class as a function")})(this,A),this._name=H,this._merge=(W=H)&&W.length&&W.charAt(0)===W.charAt(0).toUpperCase()}var w;return(w=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&function Xf(A,S){for(var w=0;w<S.length;w++){var H=S[w];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(A,H.key,H)}}(A.prototype,w),A}();var zo=function(){function A(H,W,Y){var k=this;(function(X,le){if(!(X instanceof le))throw new TypeError("Cannot call a class as a function")})(this,A),this._name=H||"",this._properties=[],this._children=Y||[],Array.isArray(W)&&W.forEach(function(X){k._properties.push(new Qf(X))})}var w;return(w=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&function su(A,S){for(var w=0;w<S.length;w++){var H=S[w];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(A,H.key,H)}}(A.prototype,w),A}();function Yu(A){return(Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(A)}function lu(A,S){return(lu=Object.setPrototypeOf||function(w,H){return w.__proto__=H,w})(A,S)}function Qi(A){return(Qi=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(A)}var Jf=function(A){!function(Y,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(k&&k.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),k&&lu(Y,k)}(W,A);var S,w,H=(S=W,w=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Y,k=Qi(S);if(w){var X=Qi(this).constructor;Y=Reflect.construct(k,arguments,X)}else Y=k.apply(this,arguments);return function Kc(A,S){return!S||"object"!==Yu(S)&&"function"!=typeof S?function(w){if(void 0===w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(A):S}(this,Y)});function W(){!function(k,X){if(!(k instanceof X))throw new TypeError("Cannot call a class as a function")}(this,W);var Y=[_.Z.PROFILES,_.Z.WIDTH,_.Z.HEIGHT,_.Z.SAR,_.Z.FRAMERATE,_.Z.AUDIO_SAMPLING_RATE,_.Z.MIME_TYPE,_.Z.SEGMENT_PROFILES,_.Z.CODECS,_.Z.MAXIMUM_SAP_PERIOD,_.Z.START_WITH_SAP,_.Z.MAX_PLAYOUT_RATE,_.Z.CODING_DEPENDENCY,_.Z.SCAN_TYPE,_.Z.FRAME_PACKING,_.Z.AUDIO_CHANNEL_CONFIGURATION,_.Z.CONTENT_PROTECTION,_.Z.ESSENTIAL_PROPERTY,_.Z.ESSENTIAL_PROPERTY+"_asArray",_.Z.SUPPLEMENTAL_PROPERTY,_.Z.INBAND_EVENT_STREAM];return H.call(this,_.Z.ADAPTATION_SET,Y,[new zo(_.Z.REPRESENTATION,Y,[new zo(_.Z.SUB_REPRESENTATION,Y)])])}return W}(zo);function uu(A){return(uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(A)}function Mr(A,S){return(Mr=Object.setPrototypeOf||function(w,H){return w.__proto__=H,w})(A,S)}function Wr(A){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(A)}var io=function(A){!function(Y,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(k&&k.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),k&&Mr(Y,k)}(W,A);var S,w,H=(S=W,w=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Y,k=Wr(S);if(w){var X=Wr(this).constructor;Y=Reflect.construct(k,arguments,X)}else Y=k.apply(this,arguments);return function Vo(A,S){return!S||"object"!==uu(S)&&"function"!=typeof S?function(w){if(void 0===w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(A):S}(this,Y)});function W(){!function(k,X){if(!(k instanceof X))throw new TypeError("Cannot call a class as a function")}(this,W);var Y=[_.Z.SEGMENT_BASE,_.Z.SEGMENT_TEMPLATE,_.Z.SEGMENT_LIST];return H.call(this,_.Z.PERIOD,Y,[new zo(_.Z.ADAPTATION_SET,Y,[new zo(_.Z.REPRESENTATION,Y)])])}return W}(zo);function wo(A){var S,w,H,W,Y,k=this.context;return S={parse:function(le){var ve,fe=window.performance.now();if(!(ve=W.xml_str2json(le)))throw new Error("parsing the manifest failed");var ee=window.performance.now();ve.Patch?((ve=ve.Patch).add_asArray&&ve.add_asArray.forEach(function(ae){return Y.run(ae)}),ve.replace_asArray&&ve.replace_asArray.forEach(function(ae){return Y.run(ae)})):Y.run(ve=ve.MPD);var de=window.performance.now();return w.info("Parsing complete: ( xml2json: "+(ee-fe).toPrecision(3)+"ms, objectiron: "+(de-ee).toPrecision(3)+"ms, total: "+((de-fe)/1e3).toPrecision(3)+"s)"),ve.protocol="DASH",ve},getMatchers:function(){return H},getIron:function(){return Y}},w=(A=A||{}).debug.getLogger(S),H=[new qc,new ro,new ju,new Ku,new Vu],W=new Uu({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:H}),Y=Wf(k).create({adaptationset:new Jf,period:new io}),S}wo.__dashjs_factory_name="DashParser";var Nn=j.Z.getClassFactory(wo);function Ro(A){var S,w,H,W,Y,k=this.context,X=(A=A||{}).debug,le=A.settings,ve=(0,V.Z)(k).getInstance(),fe=(0,xt.Z)(k).getInstance(),ee=A.mssHandler,de=A.errHandler;function ae(Ne){ve.trigger(D.Z.INTERNAL_MANIFEST_LOADED,{manifest:Ne.manifest})}return S={load:function(Ne){var Fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,Ze=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,he=new Date,Oe=new na(Ne,gt.w.MPD_TYPE);Fe&&(Oe.serviceLocation=Fe),Ze&&(Oe.queryParams=Ze),Oe.requestStartDate||(Oe.requestStartDate=he),ve.trigger(D.Z.MANIFEST_LOADING_STARTED,{request:Oe}),H.load({request:Oe,success:function(me,Ve,P){var oe,te,re;if(W)if(P&&P!==Ne?(te=fe.parseBaseUrl(P),oe=P):(fe.isRelative(Ne)&&(Ne=fe.resolve(Ne,window.location.href)),te=fe.parseBaseUrl(Ne)),"No Content"!=Ve)if(null===Y&&(Y=function He(Ne){var Fe=null;return Ne.indexOf("SmoothStreamingMedia")>-1?(ee&&(Fe=ee.createMssParser(),ee.createMssFragmentProcessor(),ee.registerEvents()),Fe):Ne.indexOf("MPD")>-1||Ne.indexOf("Patch")>-1?Nn(k).create({debug:X}):Fe}(me)),null!==Y){W.setMatchers(Y.getMatchers()),W.setIron(Y.getIron());try{re=Y.parse(me)}catch{return void ve.trigger(D.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Le.Z(De.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,De.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Ne))})}if(re){if(re.url=oe||Ne,re.originalUrl||(re.originalUrl=re.url),le&&le.get().streaming.enableManifestDurationMismatchFix&&re.mediaPresentationDuration&&re.Period_asArray.length>1){var z=re.Period_asArray.reduce(function(xe,be){return xe+be.duration},0);!isNaN(z)&&re.mediaPresentationDuration>z&&(w.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),re.mediaPresentationDuration=z)}re.baseUri=te,re.loadedTime=new Date,W.resolveManifestOnLoad(re),ve.trigger(D.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:me})}else ve.trigger(D.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Le.Z(De.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,De.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Ne))})}else ve.trigger(D.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Le.Z(De.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,De.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Ne))});else ve.trigger(D.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(me,Ve,P){ve.trigger(D.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Le.Z(De.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,De.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(Ne,", ").concat(P))})}})},reset:function(){ve.off(D.Z.XLINK_READY,ae,S),ee&&ee.reset(),W&&(W.reset(),W=null),H&&(H.abort(),H=null)}},w=X.getLogger(S),ve.on(D.Z.XLINK_READY,ae,S),H=Nr(k).create({errHandler:A.errHandler,dashMetrics:A.dashMetrics,mediaPlayerModel:A.mediaPlayerModel,requestModifier:A.requestModifier,urlUtils:fe,constants:E.Z,dashConstants:_.Z,errors:De,requestTimeout:A.settings.get().streaming.manifestRequestTimeout}),W=Bu(k).create({errHandler:de,dashMetrics:A.dashMetrics,mediaPlayerModel:A.mediaPlayerModel,requestModifier:A.requestModifier,settings:A.settings}),Y=null,S}Ro.__dashjs_factory_name="ManifestLoader";var zu=j.Z.getClassFactory(Ro);function Wu(){var S=(0,V.Z)(this.context).getInstance();return{error:function(w){S.trigger(D.Z.ERROR,{error:w})}}}Wu.__dashjs_factory_name="ErrorHandler";var Wo=j.Z.getSingletonFactory(Wu),cu=ne(1715);function Yc(){var A,S,w,H,W,Y,k=this.context,X=(0,V.Z)(k).getInstance();function le(ve,fe){if(!fe||!fe.Period_asArray||0===fe.Period_asArray.length)return Promise.resolve();var ee=[];return fe.Period_asArray.forEach(function(de){var ae,He;ee.push((ae=de,He=ve,new Promise(function(Ne){if(ae&&ae.AdaptationSet_asArray&&0!==ae.AdaptationSet_asArray.length){var Fe=[];ae.AdaptationSet_asArray.forEach(function(Ze){var he,Oe;S.getIsTypeOf(Ze,He)&&Fe.push((he=Ze,Oe=He,new Promise(function(me){if(he.Representation_asArray&&0!==he.Representation_asArray.length){var Ve=[],P=[];he.Representation_asArray.forEach(function(oe,te){var re=S.getCodec(he,te,!1),z=function(xe,be,ke){switch(xe){case E.Z.VIDEO:return{codec:ke,width:(we=be).width||null,height:we.height||null,framerate:we.frameRate||null,bitrate:we.bandwidth||null};case E.Z.AUDIO:return function(we,ie){return{codec:ie,bitrate:we.bandwidth||null,samplerate:we.audioSamplingRate||null}}(be,ke);default:return null}var we}(Oe,oe,re);P.push(z),Ve.push(w.supportsCodec(z,Oe))}),Promise.all(Ve).then(function(oe){he.Representation_asArray=he.Representation_asArray.filter(function(te,re){return oe[re]||Y.debug("[Stream] Codec ".concat(P[re].codec," not supported ")),oe[re]}),me()}).catch(function(){me()})}else me()})))}),Promise.all(Fe).then(function(){ae.AdaptationSet_asArray=ae.AdaptationSet_asArray.filter(function(Ze){var he=Ze.Representation_asArray&&Ze.Representation_asArray.length>0;return he||(X.trigger(D.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:Ze}),Y.warn("AdaptationSet has been removed because of no supported Representation")),he}),Ne()}).catch(function(){Ne()})}else Ne()})))}),Promise.all(ee)}return A={setConfig:function(ve){ve&&(ve.adapter&&(S=ve.adapter),ve.capabilities&&(w=ve.capabilities),ve.settings&&(H=ve.settings),ve.customParametersModel&&(W=ve.customParametersModel))},filterUnsupportedFeatures:function(ve){return new Promise(function(fe){var ee=[];ee.push(le(E.Z.VIDEO,ve)),ee.push(le(E.Z.AUDIO,ve)),Promise.all(ee).then(function(){var de;H.get().streaming.capabilities.filterUnsupportedEssentialProperties&&(de=ve)&&de.Period_asArray&&0!==de.Period_asArray.length&&de.Period_asArray.forEach(function(ae){ae.AdaptationSet_asArray=ae.AdaptationSet_asArray.filter(function(He){return!He.Representation_asArray||0===He.Representation_asArray.length||(He.Representation_asArray=He.Representation_asArray.filter(function(Ne){var Fe=S.getEssentialPropertiesForRepresentation(Ne);if(Fe&&Fe.length>0)for(var Ze=0;Ze<Fe.length;){if(!w.supportsEssentialProperty(Fe[Ze]))return Y.debug("[Stream] EssentialProperty not supported: "+Fe[Ze].schemeIdUri),!1;Ze+=1}return!0}),He.Representation_asArray&&He.Representation_asArray.length>0)})}),function(de){var ae=W.getCustomCapabilitiesFilters();ae&&0!==ae.length&&de&&de.Period_asArray&&0!==de.Period_asArray.length&&de.Period_asArray.forEach(function(He){He.AdaptationSet_asArray=He.AdaptationSet_asArray.filter(function(Ne){return!Ne.Representation_asArray||0===Ne.Representation_asArray.length||(Ne.Representation_asArray=Ne.Representation_asArray.filter(function(Fe){return!ae.some(function(Ze){return!Ze(Fe)})}),Ne.Representation_asArray&&Ne.Representation_asArray.length>0)})})}(ve),fe()}).catch(function(){fe()})})}},Y=(0,B.Z)(k).getInstance().getLogger(A),A}Yc.__dashjs_factory_name="CapabilitiesFilter";var Zi=j.Z.getSingletonFactory(Yc),tr=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function xr(){var A;return{initialize:function(S){if(A=new tr,!S)return null;var w=S.indexOf("#");if(-1!==w)for(var H=S.substr(w+1).split("&"),W=0,Y=H.length;W<Y;++W){var k=H[W],X=k.indexOf("=");if(-1!==X){var le=k.substring(0,X);A.hasOwnProperty(le)&&(A[le]=k.substr(X+1))}}},getURIFragmentData:function(){return A}}}xr.__dashjs_factory_name="URIFragmentModel";var xi=j.Z.getSingletonFactory(xr);function ia(){var A,w=(0,V.Z)(this.context).getInstance();return{getValue:function(){return A},setValue:function(H){A=H,H&&w.trigger(D.Z.MANIFEST_LOADED,{data:H})}}}ia.__dashjs_factory_name="ManifestModel";var fs=j.Z.getSingletonFactory(ia);function xs(){var A,S,w,H,W=this.context,Y=(0,ot.Z)(W).getInstance();function k(ve,fe){return isNaN(ve)?0:ve>0?(fe&&S.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):ve<-.5?(fe&&S.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(-.5,": ").concat(-50,"% playback speed.")),-.5):ve}function X(ve,fe){return isNaN(ve)?0:ve<0?(fe&&S.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):ve>1?(fe&&S.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):ve}function le(){var ve=Y.get().streaming.buffer.stableBufferTime>0?Y.get().streaming.buffer.stableBufferTime:Y.get().streaming.buffer.fastSwitchEnabled?20:12,fe=w.getLiveDelay();return!isNaN(fe)&&fe>0?Math.min(ve,fe):ve}return A={getCatchupMaxDrift:function(){if(!isNaN(Y.get().streaming.liveCatchup.maxDrift)&&Y.get().streaming.liveCatchup.maxDrift>0)return Y.get().streaming.liveCatchup.maxDrift;var ve=H.getServiceDescriptionSettings();return ve&&ve.liveCatchup&&!isNaN(ve.liveCatchup.maxDrift)&&ve.liveCatchup.maxDrift>0?ve.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return null!==Y.get().streaming.liveCatchup.enabled?Y.get().streaming.liveCatchup.enabled:w.getInitialCatchupModeActivated()},getStableBufferTime:le,getInitialBufferLevel:function(){var ve=Y.get().streaming.buffer.initialBufferLevel;return isNaN(ve)||ve<0?0:Math.min(le(),ve)},getRetryAttemptsForType:function(ve){var fe=isNaN(Y.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:Y.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return w.getLowLatencyModeEnabled()?Y.get().streaming.retryAttempts[ve]*fe:Y.get().streaming.retryAttempts[ve]},getRetryIntervalsForType:function(ve){var fe=isNaN(Y.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:Y.get().streaming.retryIntervals.lowLatencyReductionFactor;return w.getLowLatencyModeEnabled()?Y.get().streaming.retryIntervals[ve]/fe:Y.get().streaming.retryIntervals[ve]},getCatchupPlaybackRates:function(ve){var fe=Y.get().streaming.liveCatchup.playbackRate;if(!isNaN(fe.min)||!isNaN(fe.max))return{min:k(fe.min,ve),max:X(fe.max,ve)};var ee=H.getServiceDescriptionSettings();if(ee&&ee.liveCatchup&&(!isNaN(ee.liveCatchup.playbackRate.min)||!isNaN(ee.liveCatchup.playbackRate.max))){var de=ee.liveCatchup.playbackRate;return{min:k(de.min,ve),max:X(de.max,ve)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(ve,fe){try{var ee=Y.get().streaming.abr[ve][fe];if(!isNaN(ee)&&-1!==ee)return ee;var de=H.getServiceDescriptionSettings();return de&&de[ve]&&!isNaN(de[ve][fe])?de[ve][fe]:-1}catch{return-1}},setConfig:function(ve){ve.playbackController&&(w=ve.playbackController),ve.serviceDescriptionController&&(H=ve.serviceDescriptionController)},reset:function(){}},S=(0,B.Z)(W).getInstance().getLogger(A),A}xs.__dashjs_factory_name="MediaPlayerModel";var ji=j.Z.getSingletonFactory(xs),$a=ne(1767);function Ls(A){var S=(A=A||{}).abrController,w=A.switchHistory,H=A.droppedFramesHistory,W=A.currentRequest,Y=A.useBufferOccupancyABR,k=A.useL2AABR,X=A.useLoLPABR,le=A.streamProcessor?A.streamProcessor.getScheduleController():null,ve=A.streamProcessor?A.streamProcessor.getRepresentationInfo():null,fe=A.videoModel?A.videoModel:null;function ee(){return ve?ve.mediaInfo:null}return{getMediaType:function(){var de=ee();return de?de.type:null},getMediaInfo:ee,getDroppedFramesHistory:function(){return H},getCurrentRequest:function(){return W},getSwitchHistory:function(){return w},getStreamInfo:function(){var de=ee();return de?de.streamInfo:null},getScheduleController:function(){return le},getAbrController:function(){return S},getRepresentationInfo:function(){return ve},useBufferOccupancyABR:function(){return Y},useL2AABR:function(){return k},useLoLPABR:function(){return X},getVideoModel:function(){return fe}}}Ls.__dashjs_factory_name="RulesContext";var Rr=j.Z.getClassFactory(Ls),ma=ne(2068);function $u(){var A=[],S=[];return{push:function(w){w.newValue===ma.Z.NO_CHANGE&&(w.newValue=w.oldValue),A[w.oldValue]||(A[w.oldValue]={noDrops:0,drops:0,dropSize:0});var H=w.newValue-w.oldValue,W=H<0?1:0,Y=W?-H:0,k=W?0:1;if(A[w.oldValue].drops+=W,A[w.oldValue].dropSize+=Y,A[w.oldValue].noDrops+=k,S.push({idx:w.oldValue,noDrop:k,drop:W,dropSize:Y}),S.length>8){var X=S.shift();A[X.idx].drops-=X.drop,A[X.idx].dropSize-=X.dropSize,A[X.idx].noDrops-=X.noDrop}},getSwitchRequests:function(){return A},reset:function(){A=[],S=[]}}}$u.__dashjs_factory_name="SwitchRequestHistory";var nl=j.Z.getClassFactory($u);function qi(){var A={},S={},w={};return{push:function(H,W,Y){if(W){A[H]||(A[H]=[],S[H]=0,w[H]=0);var k=Y&&Y.droppedVideoFrames?Y.droppedVideoFrames:0,X=Y&&Y.totalVideoFrames?Y.totalVideoFrames:0,le=k-S[H];S[H]=k;var ve=X-w[H];w[H]=X;var fe=A[H];isNaN(W)||(fe[W]?(fe[W].droppedVideoFrames+=le,fe[W].totalVideoFrames+=ve):fe[W]={droppedVideoFrames:le,totalVideoFrames:ve})}},getFrameHistory:function(H){return A[H]},clearForStream:function(H){try{delete A[H],delete S[H],delete w[H]}catch{}},reset:function(){A={},S={},w={}}}}qi.__dashjs_factory_name="DroppedFramesHistory";var Il=j.Z.getClassFactory(qi);function ds(A){var S,w,H,W,Y,X=(A=A||{}).settings,le=(0,V.Z)(this.context).getInstance();function ve(Ne,Fe,Ze,he){var Oe=Math.pow(.5,Ze/he.fast);Ne.fastEstimate=(1-Oe)*Fe+Oe*Ne.fastEstimate;var me=Math.pow(.5,Ze/he.slow);Ne.slowEstimate=(1-me)*Fe+me*Ne.slowEstimate,Ne.totalWeight+=Ze}function fe(Ne,Fe,Ze){return X.get().streaming.abr.movingAverageMethod!==E.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(he,Oe){var me=he?Y.throughputHalfLife:Y.latencyHalfLife,Ve=he?H[Oe]:W[Oe];if(!Ve||Ve.totalWeight<=0)return NaN;var P=Ve.fastEstimate/(1-Math.pow(.5,Ve.totalWeight/me.fast)),oe=Ve.slowEstimate/(1-Math.pow(.5,Ve.totalWeight/me.slow));return he?Math.min(P,oe):Math.max(P,oe)}(Ne,Fe):(Ve=function(oe,te,re){var z,xe;if(oe?(z=S[te],xe=re?3:4):(z=w[te],xe=4),z){if(xe>=z.length)xe=z.length;else if(oe)for(var be=1;be<xe;++be){var ke=z[z.length-be]/z[z.length-be-1];if((ke>=1.3||ke<=.7692307692307692)&&(xe+=1)===z.length)break}}else xe=0;return xe}(he=Ne,Oe=Fe,Ze),P=(he?S:w)[Oe],0!==Ve&&P&&0!==P.length?(P=P.slice(-Ve)).reduce(function(oe,te){return oe+te})/P.length:NaN);var he,Oe,Ve,P}function ee(Ne,Fe){return fe(!0,Ne,Fe)}function de(Ne){S[Ne]=S[Ne]||[],w[Ne]=w[Ne]||[],H[Ne]=H[Ne]||{fastEstimate:0,slowEstimate:0,totalWeight:0},W[Ne]=W[Ne]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function ae(){S={},w={},H={},W={}}var He={push:function(Ne,Fe,Ze){if(Fe.trace&&Fe.trace.length){var he,Oe=Fe.tresponse.getTime()-Fe.trequest.getTime()||1,me=Fe._tfinish.getTime()-Fe.tresponse.getTime()||1,Ve=Fe.trace.reduce(function(re,z){return re+z.b[0]},0),P=0;if(0!==(he=Fe._fileLoaderType&&Fe._fileLoaderType===E.Z.FILE_LOADER_TYPES.FETCH?Fe.trace.reduce(function(re,z){return re+z.d},0):Ze?me:Oe+me)&&(P=Math.round(8*Ve/he)),Fe.cmsd){var oe=Fe.cmsd.dynamic&&Fe.cmsd.dynamic.etp?Fe.cmsd.dynamic.etp:null;if(oe){var te=X.get().streaming.cmsd.abr.etpWeightRatio;te>0&&te<=1&&(P=P*(1-te)+oe*te)}}if(de(Ne),xe=me,(re=Ne)===E.Z.VIDEO?xe<X.get().streaming.cacheLoadThresholds[E.Z.VIDEO]:re===E.Z.AUDIO?xe<X.get().streaming.cacheLoadThresholds[E.Z.AUDIO]:void 0){if(S[Ne].length>0&&!S[Ne].hasCachedEntries)return;S[Ne].hasCachedEntries=!0}else S[Ne]&&S[Ne].hasCachedEntries&&function(re){delete S[re],delete w[re],delete H[re],delete W[re],de(re)}(Ne);S[Ne].push(P),le.trigger(T.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:P,mediaType:Ne,httpRequest:Fe}),S[Ne].length>20&&S[Ne].shift(),w[Ne].push(Oe),w[Ne].length>20&&w[Ne].shift(),ve(H[Ne],P,.001*me,Y.throughputHalfLife),ve(W[Ne],Oe,1,Y.latencyHalfLife)}var re,xe},getAverageThroughput:ee,getSafeAverageThroughput:function(Ne,Fe){var Ze=ee(Ne,Fe);return isNaN(Ze)||(Ze*=X.get().streaming.abr.bandwidthSafetyFactor),Ze},getAverageLatency:function(Ne){return fe(!1,Ne)},reset:ae};return Y={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},ae(),He}ds.__dashjs_factory_name="ThroughputHistory";var va=j.Z.getClassFactory(ds);function Xa(){var A,S,w,H,W,Y,k,X,le,ve,fe,ee,de,ae,He,Ne,Fe,Ze,he,Oe,me,Ve,P,oe,te,re,z,xe=this.context,be=(0,B.Z)(xe).getInstance(),ke=(0,V.Z)(xe).getInstance();function we(){W={},Y={},X={},k={},Oe={},P={},oe={},te={},void 0===ve&&(ve=!1),me&&me.reset(),he=void 0,me=void 0,Ve=void 0,clearTimeout(le),le=null}function ie(tt){var Ye=tt.request.mediaType,Lt=tt.streamId;if(Ye&&Lt&&k[Lt]&&z.get().streaming.abr.autoSwitchBitrate[Ye]){var _t=k[Lt][Ye];if(_t){var Yt=Rr(xe).create({abrController:A,streamProcessor:_t,currentRequest:tt.request,useBufferOccupancyABR:P[Ye],useL2AABR:oe[Ye],useLoLPABR:te[Ye],videoModel:ae}),Kt=w.shouldAbandonFragment(Yt,Lt);Kt.quality>ma.Z.NO_CHANGE&&_t.getFragmentModel().getRequests({state:Se.FRAGMENT_MODEL_LOADING,index:tt.request.index})[0]&&(X[Lt][Ye].state=F.Z.ABANDON_LOAD,Oe[Lt][Ye].reset(),Oe[Lt][Ye].push({oldValue:dt(Ye,Lt),newValue:Kt.quality,confidence:1,reason:Kt.reason}),st(Ye,H.getActiveStreamInfo(),Kt.quality,Kt.reason),clearTimeout(le),le=setTimeout(function(){X[Lt][Ye].state=F.Z.ALLOW_LOAD,le=null},z.get().streaming.abandonLoadTimeout))}}}function Re(tt){tt.mediaType===E.Z.VIDEO&&(void 0!==he&&me.push(tt.streamId,he,ae.getPlaybackQuality()),he=tt.newQuality)}function qe(tt){var Ye,Lt;tt.metric!==F.Z.HTTP_REQUEST||!tt.value||tt.value.type!==gt.w.MEDIA_SEGMENT_TYPE||tt.mediaType!==E.Z.AUDIO&&tt.mediaType!==E.Z.VIDEO||Ve.push(tt.mediaType,tt.value,z.get().streaming.abr.useDeadTimeLatency),tt.metric!==F.Z.BUFFER_LEVEL||tt.mediaType!==E.Z.AUDIO&&tt.mediaType!==E.Z.VIDEO||(Ye=tt.mediaType,Lt=.001*tt.value.level,z.get().streaming.abr.ABRStrategy===E.Z.ABR_STRATEGY_DYNAMIC&&function(_t,Yt){try{var Kt=He.getStableBufferTime(),Mn=P[_t],er=Yt>(Mn?.5*Kt:Kt);P[_t]=er,er!==Mn&&S.info(er?"["+_t+"] switching from throughput to buffer occupancy ABR rule (buffer: "+Yt.toFixed(3)+").":"["+_t+"] switching from buffer occupancy to throughput ABR rule (buffer: "+Yt.toFixed(3)+").")}catch(Jn){S.error(Jn)}}(Ye,Lt))}function ft(tt,Ye){try{var Lt;return W[Ye]=W[Ye]||{},W[Ye].hasOwnProperty(tt)||(W[Ye][tt]=0),Lt=function(_t,Yt){var Kt=W[Yt][_t],Wt=Kt;if(!k[Yt]||!k[Yt][_t])return Wt;var Un=nt(_t,Yt);void 0!==Un&&(Wt=Math.max(Kt,Un));var Mn=function(er,Jn){try{var At=He.getAbrBitrateParameter("maxBitrate",er);return At>-1?Ot(k[Jn][er].getMediaInfo(),At,Jn):void 0}catch{return}}(_t,Yt);return void 0!==Mn&&(Wt=Math.min(Wt,Mn)),Wt}(tt,Ye),_t=Lt,Wt=W[Ye][Yt=tt],Un=z.get().streaming.abr.maxRepresentationRatio[Yt],Lt=function(_t,Yt,Kt){if(Yt!==E.Z.VIDEO||!z.get().streaming.abr.limitBitrateByPortal||!k[Kt]||!k[Kt][Yt])return _t;ve||wn();var Wt=k[Kt][Yt].getStreamInfo(),Un=de.getAdaptationForType(Wt.index,Yt,Wt).Representation_asArray,Mn=_t;if(fe>0&&ee>0){for(;Mn>0&&Un[Mn]&&fe<Un[Mn].width&&fe-Un[Mn-1].width<Un[Mn].width-fe;)Mn-=1;for(;Mn<Un.length-1&&Un[Mn].width===Un[Mn+1].width;)Mn+=1}return Mn}(Lt=isNaN(Un)||Un>=1||Un<0?_t:Math.min(_t,Math.round(Wt*Un)),tt,Ye),z.get().streaming.cmsd.enabled&&z.get().streaming.cmsd.abr.applyMb&&(Lt=function(_t,Yt,Kt){if("video"!==Yt)return _t;var Wt=Fe.getMaxBitrate(Yt);if(Wt<0)return _t;var Un=Gt(Kt,"audio",dt("audio",Kt));Wt-=Un?Un.bitrate/1e3:0;var Mn=Ot(k[Kt][Yt].getMediaInfo(),Wt,Kt);return S.debug("Stream ID: "+Kt+" ["+Yt+"] Apply max bit rate from CMSD: "+Wt),Math.min(_t,Mn)}(Lt,tt,Ye)),Lt}catch{return}var _t,Yt,Wt,Un}function nt(tt,Ye){try{return function(Lt,_t){try{var Yt=He.getAbrBitrateParameter("minBitrate",Lt);if(Yt>-1){var Kt=k[_t][Lt].getMediaInfo(),Wt=kt(Kt),Un=Ot(Kt,Yt,_t);return Wt[Un]&&Un<Wt.length-1&&Wt[Un].bitrate<1e3*Yt&&Un++,Un}return}catch{return}}(tt,Ye)}catch{return}}function dt(tt){var Ye=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return Ye||(Ye=H.getActiveStreamInfo().id),tt&&k[Ye]&&k[Ye][tt]&&Ye?(Y[Ye]=Y[Ye]||{},Y[Ye].hasOwnProperty(tt)||(Y[Ye][tt]=0),Y[Ye][tt]):0}catch{return 0}}function st(tt,Ye,Lt){var _t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(Ye&&Ye.id&&tt){var Yt=Ye.id,Kt=dt(tt,Yt);(0,Ie.SE)(Lt);var Wt=ft(tt,Yt);Lt!==Kt&&Lt>=0&&Lt<=Wt&&Ft(tt,Kt,Lt,Wt,_t,Yt)}}function Ft(tt,Ye,Lt,_t,Yt,Kt){if(tt&&k[Kt]&&k[Kt][tt]){var Wt=k[Kt][tt].getStreamInfo(),Un=Wt&&Wt.manifestInfo&&Wt.manifestInfo.isDynamic,Mn=re.getCurrentBufferLevel(tt);S.info("Stream ID: "+Kt+" ["+tt+"] switch from "+Ye+" to "+Lt+"/"+_t+" (buffer: "+Mn+") "+(Yt?JSON.stringify(Yt):".")),Y[Kt]=Y[Kt]||{},Y[Kt][tt]=Lt;var er=Gt(Kt,tt,Lt);ke.trigger(D.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:Ye,newQuality:Lt,reason:Yt,streamInfo:Wt,bitrateInfo:er,maxIdx:_t,mediaType:tt},{streamId:Wt.id,mediaType:tt});var Jn=Ve.getAverageThroughput(tt,Un);isNaN(Jn)||Ze.setSavedBitrateSettings(tt,Jn)}}function Gt(tt,Ye,Lt){if(Ye&&k&&k[tt]&&k[tt][Ye]){var _t=kt(k[tt][Ye].getMediaInfo());return _t[Lt]?_t[Lt]:null}return null}function Ot(tt,Ye,Lt){var _t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,Yt=tt&&tt.type?k[Lt][tt.type].getRepresentationInfo():null;if(z.get().streaming.abr.useDeadTimeLatency&&_t&&Yt&&Yt.fragmentDuration){var Kt=Yt.fragmentDuration;if((_t/=1e3)>Kt)return 0;Ye*=1-_t/Kt}for(var Un=kt(tt),Mn=Un.length-1;Mn>=0;Mn--)if(1e3*Ye>=Un[Mn].bitrate)return Mn;return 0}function kt(tt){var Ye=[];if(!tt||!tt.bitrateList)return Ye;for(var Lt,_t=tt.bitrateList,Yt=tt.type,Kt=0,Wt=_t.length;Kt<Wt;Kt++)(Lt=new Ys).mediaType=Yt,Lt.qualityIndex=Kt,Lt.bitrate=_t[Kt].bandwidth,Lt.width=_t[Kt].width,Lt.height=_t[Kt].height,Lt.scanType=_t[Kt].scanType,Ye.push(Lt);return Ye}function wn(){if(ae){var tt=z.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;fe=ae.getClientWidth()*tt,ee=ae.getClientHeight()*tt}}return A={initialize:function(){me=Il(xe).create(),Ve=va(xe).create({settings:z}),(w=(0,$a.Z)(xe).create({dashMetrics:re,customParametersModel:Ne,mediaPlayerModel:He,settings:z})).initialize(),ke.on(T.Z.QUALITY_CHANGE_RENDERED,Re,A),ke.on(T.Z.METRIC_ADDED,qe,A),ke.on(D.Z.LOADING_PROGRESS,ie,A)},isPlayingAtTopQuality:function(tt){var Ye=tt?tt.id:null,Lt=dt(E.Z.AUDIO,Ye),_t=dt(E.Z.VIDEO,Ye);return Lt===ft(E.Z.AUDIO,Ye)&&_t===ft(E.Z.VIDEO,Ye)},updateTopQualityIndex:function(tt){var Ye=tt.type,Lt=tt.streamInfo.id,_t=tt.representationCount-1;return W[Lt]=W[Lt]||{},W[Lt][Ye]=_t,_t},clearDataForStream:function(tt){me&&me.clearForStream(tt),k[tt]&&delete k[tt],Oe[tt]&&delete Oe[tt],X[tt]&&delete X[tt]},getThroughputHistory:function(){return Ve},getBitrateList:kt,getQualityForBitrate:Ot,getTopBitrateInfoFor:function(tt){var Ye=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Ye||(Ye=H.getActiveStreamInfo().id),tt&&k&&k[Ye]&&k[Ye][tt]){var Lt=ft(tt,Ye),_t=kt(k[Ye][tt].getMediaInfo());return _t[Lt]?_t[Lt]:null}return null},getMinAllowedIndexFor:nt,getMaxAllowedIndexFor:ft,getInitialBitrateFor:function(tt,Ye){if(function(){if(!Ze||!Ze.hasOwnProperty("getSavedBitrateSettings"))throw new Error(E.Z.MISSING_CONFIG_ERROR)}(),tt===E.Z.TEXT)return NaN;var Lt=Ze.getSavedBitrateSettings(tt),_t=He.getAbrBitrateParameter("initialBitrate",tt),Yt=z.get().streaming.abr.initialRepresentationRatio[tt];if(-1===_t)if(Yt>-1){var Kt=k[Ye][tt].getStreamInfo(),Wt=de.getAdaptationForType(Kt.index,tt,Kt).Representation_asArray;_t=Array.isArray(Wt)?Wt[Math.max(Math.round(Wt.length*Yt)-1,0)].bandwidth/1e3:0}else _t=isNaN(Lt)?tt===E.Z.VIDEO?1e3:100:Lt;return _t},getQualityFor:dt,getAbandonmentStateFor:function(tt,Ye){return X[tt]&&X[tt][Ye]?X[tt][Ye].state:null},setPlaybackQuality:st,checkPlaybackQuality:function(tt,Ye){try{if(!(tt&&k&&k[Ye]&&k[Ye][tt]))return!1;if(me){var Lt=ae.getPlaybackQuality();Lt&&me.push(Ye,he,Lt)}if(!z.get().streaming.abr.autoSwitchBitrate[tt])return!1;var _t=dt(tt,Ye),Yt=Rr(xe).create({abrController:A,switchHistory:Oe[Ye][tt],droppedFramesHistory:me,streamProcessor:k[Ye][tt],currentValue:_t,useBufferOccupancyABR:P[tt],useL2AABR:oe[tt],useLoLPABR:te[tt],videoModel:ae}),Kt=nt(tt,Ye),Wt=ft(tt,Ye),Un=w.getMaxQuality(Yt),Mn=Un.quality;return void 0!==Kt&&(Mn>ma.Z.NO_CHANGE?Mn:_t)<Kt&&(Mn=Kt),Mn>Wt&&(Mn=Wt),Oe[Ye][tt].push({oldValue:_t,newValue:Mn}),Mn>ma.Z.NO_CHANGE&&Mn!==_t&&(X[Ye][tt].state===F.Z.ALLOW_LOAD||Mn<_t)&&(Ft(tt,_t,Mn,Wt,Un.reason,Ye),!0)}catch{return!1}},setElementSize:wn,setWindowResizeEventCalled:function(tt){ve=tt},registerStreamType:function(tt,Ye){var _t,Yt,Lt=Ye.getStreamInfo().id;k[Lt]||(k[Lt]={}),Oe[Lt]||(Oe[Lt]={}),X[Lt]||(X[Lt]={}),Oe[Lt][tt]=nl(xe).create(),k[Lt][tt]=Ye,X[Lt][tt]={},X[Lt][tt].state=F.Z.ALLOW_LOAD,_t=tt,(Yt=z.get().streaming.abr.ABRStrategy)===E.Z.ABR_STRATEGY_L2A?(P[_t]=!1,te[_t]=!1,oe[_t]=!0):Yt===E.Z.ABR_STRATEGY_LoLP?(P[_t]=!1,te[_t]=!0,oe[_t]=!1):Yt===E.Z.ABR_STRATEGY_BOLA?(P[_t]=!0,te[_t]=!1,oe[_t]=!1):Yt===E.Z.ABR_STRATEGY_THROUGHPUT?(P[_t]=!1,te[_t]=!1,oe[_t]=!1):Yt===E.Z.ABR_STRATEGY_DYNAMIC&&(P[_t]=!(!P||!P[_t])&&P[_t],te[_t]=!1,oe[_t]=!1),tt===E.Z.VIDEO&&wn()},unRegisterStreamType:function(tt,Ye){try{k[tt]&&k[tt][Ye]&&delete k[tt][Ye],Oe[tt]&&Oe[tt][Ye]&&delete Oe[tt][Ye],X[tt]&&X[tt][Ye]&&delete X[tt][Ye]}catch{}},setConfig:function(tt){tt&&(tt.streamController&&(H=tt.streamController),tt.domStorage&&(Ze=tt.domStorage),tt.mediaPlayerModel&&(He=tt.mediaPlayerModel),tt.customParametersModel&&(Ne=tt.customParametersModel),tt.cmsdModel&&(Fe=tt.cmsdModel),tt.dashMetrics&&(re=tt.dashMetrics),tt.adapter&&(de=tt.adapter),tt.videoModel&&(ae=tt.videoModel),tt.settings&&(z=tt.settings))},reset:function(){we(),ke.off(D.Z.LOADING_PROGRESS,ie,A),ke.off(T.Z.QUALITY_CHANGE_RENDERED,Re,A),ke.off(T.Z.METRIC_ADDED,qe,A),w&&w.reset()}},S=be.getLogger(A),we(),A}Xa.__dashjs_factory_name="AbrController";var Dl=j.Z.getSingletonFactory(Xa);Dl.QUALITY_DEFAULT=0,j.Z.updateSingletonFactory(Xa.__dashjs_factory_name,Dl);var hs=Dl,Pa=new Map([[E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function rl(){var A,S,w,H,W,Y,k,X,le=this.context,ve=(0,V.Z)(le).getInstance(),fe=[];function ee(){w&&(w.playbackRate=1,w.removeEventListener("canplay",ee))}function de(){return fe.length>0}function ae(){if(w&&de()&&0===w.playbackRate){var me=document.createEvent("Event");me.initEvent("waiting",!0,!1),w.dispatchEvent(me)}}function He(me,Ve){w&&w.addEventListener(me,Ve)}function Ne(me,Ve){w&&w.removeEventListener(me,Ve)}function Fe(){return w?w.readyState:NaN}function Ze(){return w?w.buffered:null}function he(me,Ve,P,oe,te){if(w)for(var re=0;re<w.textTracks.length;re++)if(w.textTracks[re].kind===me&&(!Ve||w.textTracks[re].label==Ve)&&w.textTracks[re].language===P&&w.textTracks[re].isTTML===oe&&w.textTracks[re].isEmbedded===te)return w.textTracks[re];return null}function Oe(me,Ve){return me===E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||Fe()>=me?(Ve(),null):(P=Pa.get(me),oe=Ve,He(P,te=function re(){Ne(P,re),oe(P)}),{func:te,event:P});var P,oe,te}return A={addEventListener:He,addTextTrack:function(me,Ve,P,oe,te){if(!w)return null;var re=he(me,Ve,P,oe,te);return re||((re=w.addTextTrack(me,Ve,P)).isEmbedded=te,re.isTTML=oe),re},appendChild:function(me){w&&(w.appendChild(me),void 0!==me.isTTML&&(w.textTracks[w.textTracks.length-1].isTTML=me.isTTML,w.textTracks[w.textTracks.length-1].isEmbedded=me.isEmbedded))},getBufferRange:Ze,getClientHeight:function(){return w?w.clientHeight:NaN},getClientWidth:function(){return w?w.clientWidth:NaN},getElement:function(){return w},getEnded:function(){return w?w.ended:null},getPlaybackQuality:function(){if(!w)return null;var me="webkitDroppedFrameCount"in w&&"webkitDecodedFrameCount"in w,Ve=null;return"getVideoPlaybackQuality"in w?Ve=w.getVideoPlaybackQuality():me&&(Ve={droppedVideoFrames:w.webkitDroppedFrameCount,totalVideoFrames:w.webkitDroppedFrameCount+w.webkitDecodedFrameCount,creationTime:new Date}),Ve},getPlaybackRate:function(){return w?w.playbackRate:null},getPlayedRanges:function(){return w?w.played:null},getReadyState:Fe,getSource:function(){return w?w.src:null},getTTMLRenderingDiv:function(){return Y},getTextTrack:he,getTextTracks:function(){return w?w.textTracks:[]},getTime:function(){return w?isNaN(H)?w.currentTime:H:null},getVideoHeight:function(){return w?w.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(w){var me=w.parentNode.host||w.parentNode;return me?w.getBoundingClientRect().left-me.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(w){var me=w.parentNode.host||w.parentNode;return me?w.getBoundingClientRect().top-me.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return w?w.videoWidth:NaN},getVttRenderingDiv:function(){return k},initialize:function(){ve.on(D.Z.PLAYBACK_PLAYING,ae,this)},isPaused:function(){return w?w.paused:null},isSeeking:function(){return w?w.seeking||!isNaN(H):null},isStalled:de,pause:function(){w&&(w.pause(),w.autoplay=!1)},play:function(){if(w){w.autoplay=!0;var me=w.play();me&&me.catch&&typeof Promise<"u"&&me.catch(function(Ve){"NotAllowedError"===Ve.name&&ve.trigger(D.Z.PLAYBACK_NOT_ALLOWED),S.warn("Caught pending play exception - continuing (".concat(Ve,")"))})}},removeChild:function(me){w&&w.removeChild(me)},removeEventListener:Ne,reset:function(){clearTimeout(X),ve.off(D.Z.PLAYBACK_PLAYING,ae,this)},setCurrentTime:function(me,Ve){w&&(W&&W.func&&W.event&&Ne(W.event,W.func),H=me,W=Oe(E.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(w)if(w.currentTime!==H)try{H=Ve?function(P){var oe=Ze(),te=P,re=9999999999;if(oe)for(var z=0;z<oe.length;z++){var xe=oe.start(z),be=oe.end(z),ke=Math.abs(xe-P),we=Math.abs(be-P);if(P>=xe&&P<=be)return P;ke<re&&(re=ke,te=xe),we<re&&(re=we,te=be)}return te}(H):H,isNaN(H)||(w.currentTime=H),H=NaN}catch(P){0===w.readyState&&P.code===P.INVALID_STATE_ERR&&(X=setTimeout(function(){w.currentTime=H,H=NaN},400))}else H=NaN}))},setElement:function(me){if(!(null==me||me&&/^(VIDEO|AUDIO)$/i.test(me.nodeName)))throw"element is not video or audio DOM type!";(w=me)&&(w.preload="auto")},setPlaybackRate:function(me){w&&(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&w.readyState<=2&&me>0?w.addEventListener("canplay",ee):w.playbackRate=me)},setSource:function(me){w&&(me?w.src=me:(w.removeAttribute("src"),w.load()))},setStallState:function(me,Ve){var P,te;P=me,Ve?null!==(te=P)&&w&&!w.seeking&&-1===fe.indexOf(te)&&fe.push(te):function(te){var re=fe.indexOf(te);null!==te&&-1!==re&&fe.splice(re,1)}(P)},setTTMLRenderingDiv:function(me){(Y=me).style.position="absolute",Y.style.display="flex",Y.style.overflow="hidden",Y.style.pointerEvents="none",Y.style.top=0,Y.style.left=0},setVttRenderingDiv:function(me){k=me},waitForReadyState:Oe,setDisableRemotePlayback:function(me){w&&(w.disableRemotePlayback=me)}},S=(0,B.Z)(le).getInstance().getLogger(A),H=NaN,A}rl.__dashjs_factory_name="VideoModel";var wl=j.Z.getSingletonFactory(rl),$r=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],zc="dashjs_?_bitrate",fu="dashjs_?_settings",gs="localStorage",ya="lastBitrate",il="lastMediaSettings";function Os(A){var S,w,H,Y=(A=A||{}).settings;function k(fe){if(void 0!==H)return H;var ee;H=!1;try{typeof window<"u"&&(ee=window[fe])}catch(de){return w.warn("DOMStorage access denied: "+de.message),H}if(!ee||fe!==gs&&"sessionStorage"!==fe)return H;try{ee.setItem("1","1"),ee.removeItem("1"),H=!0}catch(de){w.warn("DOMStorage is supported, but cannot be used: "+de.message)}return H}function X(){return 6e5*Math.round((new Date).getTime()/6e5)}function le(fe,ee){return k(fe)&&Y.get().streaming[ee+"CachingInfo"].enabled}function ve(){if(!Y)throw new Error(E.Z.MISSING_CONFIG_ERROR)}return S={getSavedBitrateSettings:function(fe){if(ve(),!Y.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var ee=NaN;if(le(gs,ya)){var de=zc.replace(/\?/,fe);try{var ae=JSON.parse(localStorage.getItem(de))||{},He=(new Date).getTime()-parseInt(ae.timestamp,10)>=Y.get().streaming.lastBitrateCachingInfo.ttl||!1,Ne=parseFloat(ae.bitrate);isNaN(Ne)||He?He&&localStorage.removeItem(de):(ee=Ne,w.debug("Last saved bitrate for "+fe+" was "+Ne))}catch{return null}}return ee},setSavedBitrateSettings:function(fe,ee){if(le(gs,ya)&&ee){var de=zc.replace(/\?/,fe);try{localStorage.setItem(de,JSON.stringify({bitrate:ee.toFixed(3),timestamp:X()}))}catch(ae){w.error(ae.message)}}},getSavedMediaSettings:function(fe){if(ve(),!Y.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var ee=null;if(le(gs,il)){var de=fu.replace(/\?/,fe);try{var ae=JSON.parse(localStorage.getItem(de))||{},He=(new Date).getTime()-parseInt(ae.timestamp,10)>=Y.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;ee=ae.settings,He&&(localStorage.removeItem(de),ee=null)}catch{return null}}return ee},setSavedMediaSettings:function(fe,ee){if(le(gs,il)){var de=fu.replace(/\?/,fe);try{localStorage.setItem(de,JSON.stringify({settings:ee,timestamp:X()}))}catch(ae){w.error(ae.message)}}}},w=(0,B.Z)(this.context).getInstance().getLogger(S),k(gs)&&$r.forEach(function(fe){var ee=localStorage.getItem(fe.oldKey);if(ee){localStorage.removeItem(fe.oldKey);try{localStorage.setItem(fe.newKey,ee)}catch(de){w.error(de.message)}}}),S}Os.__dashjs_factory_name="DOMStorage";var Rl=j.Z.getSingletonFactory(Os),li=ne(2032),ed=ne(2011);function _o(){var A,S,w,H,W,Y,k,X,le,ve,fe,ee,de,ae=this.context;function He(he,Oe,me,Ve){var P=null,oe=he?de.resolve(he.path):null,te=Ve||{init:!0,url:oe?oe.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:Oe};S.debug("Start searching for initialization.");var re=Ze(te);X.load({request:re,success:function(z){if(te.bytesLoaded=te.range.end,!(P=H.findInitRange(z)))return te.range.end=te.bytesLoaded+te.bytesToLoad,He(he,Oe,me,te);he.range=P,me(he)},error:function(){me(he)}}),S.debug("Perform init search: "+te.url)}function Ne(he,Oe,me,Ve,P,oe){if(me&&(void 0===me.start||void 0===me.end)){var te=me?me.toString().split("-"):null;me=te?{start:parseFloat(te[0]),end:parseFloat(te[1])}:null}P=P||Fe;var re=null,z=null,xe=!!me,be=he?de.resolve(he.path):null,ke={init:!1,url:be?be.url:void 0,range:xe?me:{start:0,end:1500},searching:!xe,bytesLoaded:oe?oe.bytesLoaded:0,bytesToLoad:1500,mediaType:Oe},we=Ze(ke);X.load({request:we,success:function(ie){var Re=ke.bytesToLoad,qe=ie.byteLength;if(ke.bytesLoaded=ke.range.end-ke.range.start,re=H.parse(ie),(z=re.getBox("sidx"))&&z.isComplete){var ft,nt,dt=z.references;if(null!=dt&&dt.length>0&&(ft=1===dt[0].reference_type),ft){var st,Ft,Gt,Ot;S.debug("Initiate multiple SIDX load."),ke.range.end=ke.range.start+z.size;var kt=[],wn=0,tt=(z.offset||ke.range.start)+z.size,Ye=function(_t){_t?(kt=kt.concat(_t),++wn>=Ft&&(kt.sort(function(Yt,Kt){return Yt.startTime-Kt.startTime<0?-1:0}),P(kt,he,Ve))):P(null,he,Ve)};for(st=0,Ft=dt.length;st<Ft;st++)Gt=tt,Ot=tt+dt[st].referenced_size-1,tt+=dt[st].referenced_size,Ne(he,Oe,{start:Gt,end:Ot},Ve,Ye,ke)}else S.debug("Parsing segments from SIDX. representation "+Oe+" - id: "+he.id+" for range : "+ke.range.start+" - "+ke.range.end),nt=function(_t,Yt){for(var Kt,Un,Mn,er=_t.references,Jn=er.length,At=_t.timescale,$t=_t.earliest_presentation_time,Ut=Yt.range.start+_t.offset+_t.first_offset+_t.size,rn=[],mn=0;mn<Jn;mn++)Un=er[mn].subsegment_duration,Mn=er[mn].referenced_size,(Kt=new ed.Z).duration=Un,Kt.startTime=$t,Kt.timescale=At,Kt.mediaRange=Ut+"-"+(Ut+Mn-1),rn.push(Kt),$t+=Un,Ut+=Mn;return rn}(z,ke),P(nt,he,Ve)}else{if(z)ke.range.start=z.offset||ke.range.start,ke.range.end=ke.range.start+(z.size||Re);else{if(qe<ke.bytesLoaded)return void P(null,he,Ve);var Lt=re.getLastBox();Lt&&Lt.size?(ke.range.start=Lt.offset+Lt.size,ke.range.end=ke.range.start+Re):ke.range.end+=Re}Ne(he,Oe,ke.range,Ve,null,ke)}},error:function(){P(null,he,Ve)}}),S.debug("Perform SIDX load for type ".concat(Oe," : ").concat(ke.url," with range ").concat(ke.range.start," - ").concat(ke.range.end))}function Fe(he,Oe,me){me({segments:he,representation:Oe,error:he?void 0:new Le.Z(le.SEGMENT_BASE_LOADER_ERROR_CODE,le.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function Ze(he){if(he.url){var Oe=new K.Z;return Oe.setInfo(he),Oe}}return A={setConfig:function(he){he.baseURLController&&(de=he.baseURLController),he.dashMetrics&&(Y=he.dashMetrics),he.mediaPlayerModel&&(k=he.mediaPlayerModel),he.errHandler&&(w=he.errHandler),he.boxParser&&(H=he.boxParser),he.debug&&(S=he.debug.getLogger(A)),he.requestModifier&&(W=he.requestModifier),he.errors&&(le=he.errors),he.urlUtils&&(ee=he.urlUtils),he.constants&&(ve=he.constants),he.dashConstants&&(fe=he.dashConstants)},initialize:function(){X=Nr(ae).create({errHandler:w,dashMetrics:Y,mediaPlayerModel:k,requestModifier:W,boxParser:H,errors:le,urlUtils:ee,constants:ve,dashConstants:fe})},loadInitialization:function(he,Oe){return new Promise(function(me){He(he,Oe,me)})},loadSegments:function(he,Oe,me){return new Promise(function(Ve){Ne(he,Oe,me,Ve)})},reset:function(){X&&(X.abort(),X=null)}}}_o.__dashjs_factory_name="SegmentBaseLoader";var Fo=j.Z.getSingletonFactory(_o);function du(A){var S;A=A||{};var w=new DataView(A.data),H=0;function W(k,X){var le=!0,ve=0;if(void 0===X&&(X=!1),k.tag>16777215?(w.getUint32(H)!==k.tag&&(le=!1),ve=4):k.tag>65535?(256*w.getUint16(H)+w.getUint8(H+2)!==k.tag&&(le=!1),ve=3):k.tag>255?(w.getUint16(H)!==k.tag&&(le=!1),ve=2):(w.getUint8(H)!==k.tag&&(le=!1),ve=1),!le&&k.required&&!X)throw new Error("required tag not found");return le&&(H+=ve),le}function Y(k){var X=1,le=128,ve=-1,fe=0,ee=w.getUint8(H),de=0;for(de=0;de<8;de+=1){if((ee&le)===le){fe=void 0===k?ee&~le:ee,ve=de;break}le>>=1}for(de=0;de<ve;de+=1,X+=1)fe=fe<<8|255&w.getUint8(H+X);return H+=X,fe}return S={getPos:function(){return H},setPos:function(k){H=k},consumeTag:W,consumeTagAndSize:function(k,X){var le=W(k,X);return le&&Y(),le},parseTag:function(k){var X;return W(k),X=Y(),S[k.parse](X)},skipOverElement:function(k,X){var le,ve=W(k,X);return ve&&(le=Y(),H+=le),ve},getMatroskaCodedNum:Y,getMatroskaFloat:function(k){var X;switch(k){case 4:X=w.getFloat32(H),H+=4;break;case 8:X=w.getFloat64(H),H+=8}return X},getMatroskaUint:function(k){if(k>4)return function(ve){for(var fe=Math.floor(Number.MAX_SAFE_INTEGER/256),ee=0,de=0;de<ve;de+=1){if(ee>fe)throw new Error("Value exceeds safe integer limit");ee*=256;var ae=w.getUint8(H+de);if(ee>Number.MAX_SAFE_INTEGER-ae)throw new Error("Value exceeds safe integer limit");ee+=ae}return H+=ve,ee}(k);for(var X=0,le=0;le<k;le+=1)X<<=8,X|=255&w.getUint8(H+le);return H+=k,X>>>0},moreData:function(){return H<w.byteLength}}}du.__dashjs_factory_name="EBMLParser";var Fa=j.Z.getClassFactory(du);function ka(){var A,S,w,H,W,Y,k,X,le,ve,fe=this.context;function ee(de){var ae=new K.Z;return ae.setInfo(de),ae}return A={setConfig:function(de){if(!(de.baseURLController&&de.dashMetrics&&de.mediaPlayerModel&&de.errHandler))throw new Error(E.Z.MISSING_CONFIG_ERROR);ve=de.baseURLController,Y=de.dashMetrics,k=de.mediaPlayerModel,H=de.errHandler,le=de.errors,S=de.debug.getLogger(A),W=de.requestModifier},initialize:function(){X=Nr(fe).create({errHandler:H,dashMetrics:Y,mediaPlayerModel:k,requestModifier:W,errors:le})},loadInitialization:function(de,ae){return new Promise(function(He){var Ne=null,Fe=de?ve.resolve(de.path):null,Ze=de?de.range.split("-"):null,he={range:{start:Ze?parseFloat(Ze[0]):null,end:Ze?parseFloat(Ze[1]):null},request:Ne,url:Fe?Fe.url:void 0,init:!0,mediaType:ae};S.info("Start loading initialization."),Ne=ee(he),X.load({request:Ne,success:function(){He(de)},error:function(){He(de)}}),S.debug("Perform init load: "+he.url)})},loadSegments:function(de,ae,He){return new Promise(function(Ne){var Fe=null,Ze=de?ve.resolve(de.path):null,he=Ze?Ze.url:void 0;Fe=ee({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:Fe,url:he,init:!1,mediaType:ae}),S.debug("Parsing ebml header"),X.load({request:Fe,success:function(Oe){!function(me,Ve,P,oe){if(me&&0!==me.byteLength){var te,re,z,xe,be=Fa(fe).create({data:me}),ke=P?P.split("-"):null,we=null,ie={url:Ve,range:{start:ke?parseFloat(ke[0]):null,end:ke?parseFloat(ke[1]):null},request:we};for(S.debug("Parse EBML header: "+ie.url),be.skipOverElement(w.EBML),be.consumeTag(w.Segment),z=be.getMatroskaCodedNum(),z+=be.getPos(),xe=be.getPos();be.moreData()&&!be.consumeTagAndSize(w.Segment.Info,!0);)if(!(be.skipOverElement(w.Segment.SeekHead,!0)||be.skipOverElement(w.Segment.Tracks,!0)||be.skipOverElement(w.Segment.Cues,!0)||be.skipOverElement(w.Void,!0)))throw new Error("no valid top level element found");for(;void 0===te;){var Re=be.getMatroskaCodedNum(!0),qe=be.getMatroskaCodedNum();Re===w.Segment.Info.Duration.tag?te=be[w.Segment.Info.Duration.parse](qe):be.setPos(be.getPos()+qe)}we=ee(ie),X.load({request:we,success:function(ft){re=function(nt,dt,st,Ft){var Ot,kt,wn,tt,Ye;for(kt=[],tt=0,Ye=(Ot=function(Yt){var Kt,Wt,Un=[],Mn=Fa(fe).create({data:Yt});for(Mn.consumeTagAndSize(w.Segment.Cues);Mn.moreData()&&Mn.consumeTagAndSize(w.Segment.Cues.CuePoint,!0);){for((Kt={}).CueTime=Mn.parseTag(w.Segment.Cues.CuePoint.CueTime),Kt.CueTracks=[];Mn.moreData()&&Mn.consumeTag(w.Segment.Cues.CuePoint.CueTrackPositions,!0);){var er=Mn.getMatroskaCodedNum(),Jn=Mn.getPos();if((Wt={}).Track=Mn.parseTag(w.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===Wt.Track)throw new Error("Cue track cannot be 0");Wt.ClusterPosition=Mn.parseTag(w.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),Kt.CueTracks.push(Wt),Mn.setPos(Jn+er)}if(0===Kt.CueTracks.length)throw new Error("Mandatory cuetrack not found");Un.push(Kt)}if(0===Un.length)throw new Error("mandatory cuepoint not found");return Un}(nt)).length;tt<Ye;tt+=1)(wn=new ed.Z).duration=tt<Ot.length-1?Ot[tt+1].CueTime-Ot[tt].CueTime:Ft-Ot[tt].CueTime,wn.startTime=Ot[tt].CueTime,wn.timescale=1e3,wn.mediaRange=Ot[tt].CueTracks[0].ClusterPosition+dt+"-"+(tt<Ot.length-1?Ot[tt+1].CueTracks[0].ClusterPosition+dt-1:st-1),kt.push(wn);return S.debug("Parsed cues: "+kt.length+" cues."),kt}(ft,xe,z,te),oe(re)},error:function(){S.error("Download Error: Cues "+ie.url),oe(null)}}),S.debug("Perform cues load: "+ie.url+" bytes="+ie.range.start+"-"+ie.range.end)}else oe(null)}(Oe,he,He,function(me){Ne({segments:me,representation:de,error:me?void 0:new Le.Z(le.SEGMENT_BASE_LOADER_ERROR_CODE,le.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){Ne({representation:de,error:new Le.Z(le.SEGMENT_BASE_LOADER_ERROR_CODE,le.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){X&&(X.abort(),X=null)}},w={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},A}ka.__dashjs_factory_name="WebmSegmentBaseLoader";var Ea=j.Z.getSingletonFactory(ka);function Ml(A){var S,w,H,W=this.context,Y=(A=A||{}).eventBus,k=A.events,X=A.dashMetrics,le=A.mediaPlayerModel,ve=A.errHandler,fe=A.baseURLController,ee=A.debug,de=A.boxParser,ae=A.requestModifier,He=A.errors;function Ne(Fe){return"webm"===(Fe?Fe.split("/")[1]:"").toLowerCase()}return S={initialize:function(){w.initialize(),H.initialize()},getSegmentBaseInitSegment:function(Fe){return Ne(Fe.representation.mimeType)?H.loadInitialization(Fe.representation,Fe.mediaType):w.loadInitialization(Fe.representation,Fe.mediaType)},getSegmentList:function(Fe){return Ne(Fe.mimeType)?H.loadSegments(Fe.representation,Fe.mediaType,Fe.representation?Fe.representation.indexRange:null):w.loadSegments(Fe.representation,Fe.mediaType,Fe.representation?Fe.representation.indexRange:null)},reset:function(){w.reset(),H.reset()}},w=Fo(W).getInstance(),H=Ea(W).getInstance(),w.setConfig({baseURLController:fe,dashMetrics:X,mediaPlayerModel:le,errHandler:ve,eventBus:Y,events:k,errors:He,debug:ee,boxParser:de,requestModifier:ae}),H.setConfig({baseURLController:fe,dashMetrics:X,mediaPlayerModel:le,errHandler:ve,eventBus:Y,events:k,errors:He,debug:ee,requestModifier:ae}),S}Ml.__dashjs_factory_name="SegmentBaseController";var ps=j.Z.getSingletonFactory(Ml),fo=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},Xu=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},hu=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},td=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};var gh=function(){function A(H){var W=this;(function(Y,k){if(!(Y instanceof k))throw new TypeError("Cannot call a class as a function")})(this,A),this.valid="/"==H[0],this.path=H.split("/").filter(function(Y){return 0!==Y.length}).map(function(Y){var k={name:Y},X=Y.indexOf("[");if(-1!=X){k.name=Y.substring(0,X);var le=Y.substring(X+1,Y.length-1);W.valid=W.valid&&-1==le.indexOf("[");var ve=le.indexOf("=");-1!=ve?(k.attribute={name:le.substring(1,ve),value:le.substring(ve+1)},-1!=["'",'"'].indexOf(k.attribute.value[0])&&(k.attribute.value=k.attribute.value.substring(1,k.attribute.value.length-1))):k.position=parseInt(le,10)-1}return k})}var w;return(w=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return"text()"===this.path[this.path.length-1].name}},{key:"getMpdTarget",value:function(H,W){for(var Y=null,k=H,X=1,le="MPD";X<this.path.length&&null!==k;){Y=k;var ve=this.path[X];if(le=ve.name,X!==this.path.length-1||!le.startsWith("@")&&"text()"!==le){var fe=Y[le+"_asArray"]||[];0===fe.length&&Y[le]&&fe.push(Y[le]),ve.position?k=fe[ve.position]||null:ve.attribute?function(){var ee=ve.attribute;k=fe.filter(function(de){return de[ee.name]==ee.value})[0]||null}():k=fe[0]||null}X++}return null===k?null:le.startsWith("@")?{name:le.substring(1),leaf:k,target:k}:"text()"===le?{name:"__text",leaf:k,target:k}:{name:le,leaf:k,target:W?Y:k}}}])&&function gu(A,S){for(var w=0;w<S.length;w++){var H=S[w];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(A,H.key,H)}}(A.prototype,w),A}();var nd=function(){function A(H,W,Y){(function(k,X){if(!(k instanceof X))throw new TypeError("Cannot call a class as a function")})(this,A),this.action=H,this.xpath=W,this.value=Y,this.position=null}var w;return(w=[{key:"getMpdTarget",value:function(H){return this.xpath.getMpdTarget(H,"remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position)}}])&&function ph(A,S){for(var w=0;w<S.length;w++){var H=S[w];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(A,H.key,H)}}(A.prototype,w),A}();function rd(){var A,S;return A={getIsPatch:function(H){return H&&H.hasOwnProperty(_.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(H){return H&&H.hasOwnProperty(_.Z.PUBLISH_TIME)?new Date(H[_.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(H){return H&&H.hasOwnProperty(_.Z.ORIGINAL_PUBLISH_TIME)?new Date(H[_.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(H){return H&&H[_.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(H){return H?(H.__children||[]).map(function(W){var Y=Object.keys(W)[0];if("add"!==Y&&"remove"!==Y&&"replace"!==Y)return S.warn("Ignoring node of invalid action: ".concat(Y)),null;var k=W[Y],X=k.sel;if("add"===Y&&k.type){if(!k.type.startsWith("@"))return S.warn("Ignoring add action for prefixed namespace declaration: ".concat(k.type,"=").concat(k.__text)),null;X="".concat(X,"/").concat(k.type)}var le=new gh(X);if(!le.isValid())return S.warn("Ignoring action with invalid selector: ".concat(Y," - ").concat(X)),null;var ve=null;le.findsAttribute()||le.findsTextReplace()?ve=k.__text||"":"remove"!==Y&&(ve=k.__children.reduce(function(ee,de){var ae=Object.keys(de)[0];return"#text"!==ae&&(ee[ae]=ee[ae]||[],ee[ae].push(de[ae])),ee},{}));var fe=new nd(Y,le,ve);return"add"===Y&&(fe.position=k.pos),fe}).filter(function(W){return!!W}):[]}},S=(0,B.Z)(this.context).getInstance().getLogger(A),A}rd.__dashjs_factory_name="PatchManifestModel";var mh=j.Z.getSingletonFactory(rd);function ol(){var A,S,w,H,W,Y,k,X=this.context;function le(te,re,z){var be=S.getAdaptationsForType(H[0].mpd.manifest,te,re);if(!be||0===be.length)return null;if(be.length>1&&z){var ke=ee(z,re);if(W[z.id]&&W[z.id][re])for(var we=0,ie=be.length;we<ie;we++)if(ve(W[z.id][re],ke[we]))return be[we];for(var Re=0,qe=be.length;Re<qe;Re++)if(S.getRolesForAdaptation(be[Re]).filter(function(ft){return ft.value===_.Z.MAIN})[0])return be[Re]}return be[0]}function ve(te,re){if(!te||!re)return!1;var z=te.id===re.id,xe=te.codec===re.codec,be=te.viewpoint===re.viewpoint,ke=JSON.stringify(te.viewpointsWithSchemeIdUri)===JSON.stringify(re.viewpointsWithSchemeIdUri),we=te.lang===re.lang,ie=te.roles.toString()===re.roles.toString(),Re=JSON.stringify(te.rolesWithSchemeIdUri)===JSON.stringify(re.rolesWithSchemeIdUri),qe=te.accessibility.toString()===re.accessibility.toString(),ft=JSON.stringify(te.accessibilitiesWithSchemeIdUri)===JSON.stringify(re.accessibilitiesWithSchemeIdUri),nt=te.audioChannelConfiguration.toString()===re.audioChannelConfiguration.toString(),dt=JSON.stringify(te.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(re.audioChannelConfigurationsWithSchemeIdUri);return z&&xe&&be&&ke&&we&&ie&&Re&&qe&&ft&&nt&&dt}function fe(te,re,z,xe,be,ke){var ie,Re,qe,ft,nt,dt=[];if(!xe||0===xe.length)return[];var st=S.getAdaptationsForPeriod(re);for(qe=0,nt=xe.length;qe<nt;qe++)if(ie=he(st[Re=S.getIndexForAdaptation(xe[qe],te,z.index)]),ke){var Ft=ie.accessibility.length;for(ft=0;ft<Ft;ft++)if(ie){var Gt=ie.accessibility[ft];if(0===Gt.indexOf("cea-608:")){var Ot=Gt.substring(8).split(";");if("CC"===Ot[0].substring(0,2))for(ft=0;ft<Ot.length;ft++)ie||(ie=he.call(this,st[Re])),Oe(ie,Ot[ft].substring(0,3),Ot[ft].substring(4)),dt.push(ie),ie=null;else for(ft=0;ft<Ot.length;ft++)ie||(ie=he.call(this,st[Re])),Oe(ie,"CC"+(ft+1),Ot[ft]),dt.push(ie),ie=null}else 0===Gt.indexOf("cea-608")&&(Oe(ie,Y.CC1,"eng"),dt.push(ie),ie=null)}}else be===Y.IMAGE?(ie.type=Y.IMAGE,dt.push(ie),ie=null):ie&&dt.push(ie);return dt}function ee(te,re,z){var xe=H,be=z,ke=[];if(be)Ve(),xe=de(be);else{if(!(H.length>0))return ke;be=H[0].mpd.manifest}var we=Ze(te,xe),ie=S.getAdaptationsForType(be,te?te.index:null,re);return ke=fe(be,we,te,ie,re),re===Y.TEXT&&(ie=S.getAdaptationsForType(be,te?te.index:null,Y.VIDEO),ke=ke.concat(fe(be,we,te,ie,re,!0))),ke}function de(te){var re=ae(te);return S.getRegularPeriods(re)}function ae(te){var re=Ne(te);return S.getMpd(re)}function He(){H=[],W={}}function Ne(te){return te||(H.length>0?H[0].mpd.manifest:null)}function Fe(te){try{var re=Ze(te.streamInfo,H),z=S.getAdaptationsForPeriod(re);return te&&te.streamInfo&&void 0!==te.streamInfo.id&&z?z[te.index]:null}catch{return null}}function Ze(te,re){for(var z=re.length,xe=0;xe<z;xe++){var be=re[xe];if(te&&te.id===be.id)return be}return null}function he(te){if(!te)return null;var re,z,xe,be,ke,we=new Xu,ie=te.period.mpd.manifest.Period_asArray[te.period.index].AdaptationSet_asArray[te.index];if(we.id=te.id,we.index=te.index,we.type=te.type,we.streamInfo=me(te.period),we.representationCount=S.getRepresentationCount(ie),we.labels=S.getLabelsForAdaptation(ie),we.lang=S.getLanguageForAdaptation(ie),we.segmentAlignment=S.getSegmentAlignment(ie),we.subSegmentAlignment=S.getSubSegmentAlignment(ie),re=S.getViewpointForAdaptation(ie),we.viewpoint=re.length?re[0].value:void 0,we.viewpointsWithSchemeIdUri=re,ke=S.getAccessibilityForAdaptation(ie),we.accessibility=ke.map(function(dt){var st=dt.value,Ft=st;return dt.schemeIdUri&&dt.schemeIdUri.search("cea-608")>=0&&void 0!==k&&(Ft=st?"cea-608:"+st:"cea-608",we.embeddedCaptions=!0),Ft}),we.accessibilitiesWithSchemeIdUri=ke,z=S.getAudioChannelConfigurationForAdaptation(ie),we.audioChannelConfiguration=z.map(function(dt){return dt.value}),we.audioChannelConfigurationsWithSchemeIdUri=z,0===we.audioChannelConfiguration.length&&Array.isArray(ie.Representation_asArray)&&ie.Representation_asArray.length>0&&(xe=S.getAudioChannelConfigurationForRepresentation(ie.Representation_asArray[0]),we.audioChannelConfiguration=xe.map(function(dt){return dt.value}),we.audioChannelConfigurationsWithSchemeIdUri=xe),be=S.getRolesForAdaptation(ie),we.roles=be.map(function(dt){return dt.value}),we.rolesWithSchemeIdUri=be,we.codec=S.getCodec(ie),we.mimeType=S.getMimeType(ie),we.contentProtection=S.getContentProtectionData(ie),we.bitrateList=S.getBitrateListForAdaptation(ie),we.selectionPriority=S.getSelectionPriority(ie),we.contentProtection){var Re=we.contentProtection.map(function(dt){return S.getKID(dt)}).filter(function(dt){return null!==dt});if(Re.length){var qe=Re[0];we.contentProtection.forEach(function(dt){dt.keyId=qe})}}if(we.isText=S.getIsText(ie),we.supplementalProperties=S.getSupplementalPropertiesForAdaptation(ie),(!we.supplementalProperties||0===Object.keys(we.supplementalProperties).length)&&Array.isArray(ie.Representation_asArray)&&ie.Representation_asArray.length>0){var ft=ie.Representation_asArray.map(function(dt){return S.getSupplementalPropertiesForRepresentation(dt)});ft.every(function(dt){return JSON.stringify(dt)===JSON.stringify(ft[0])})&&(we.supplementalProperties=ft[0])}if(we.supplementalPropertiesAsArray=S.getSupplementalPropertiesAsArrayForAdaptation(ie),(!we.supplementalPropertiesAsArray||0===we.supplementalPropertiesAsArray.length)&&Array.isArray(ie.Representation_asArray)&&ie.Representation_asArray.length>0){var nt=ie.Representation_asArray.map(function(dt){return S.getSupplementalPropertiesAsArrayForRepresentation(dt)});nt.every(function(dt){return JSON.stringify(dt)===JSON.stringify(nt[0])})&&(we.supplementalPropertiesAsArray=nt[0])}return we.essentialProperties=S.getEssentialPropertiesForAdaptation(ie),we.essentialPropertiesAsArray=S.getEssentialPropertiesAsArrayForAdaptation(ie),we.isFragmented=S.getIsFragmented(ie),we.isEmbedded=!1,we}function Oe(te,re,z){te.id=re,te.index=100+parseInt(re.substring(2,3)),te.type=Y.TEXT,te.codec="cea-608-in-SEI",te.isEmbedded=!0,te.isFragmented=!1;var xe=ss()(z);te.lang=xe||z,te.roles=["caption"],te.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function me(te){var re,z,xe=new hu;return xe.id=te.id,xe.index=te.index,xe.start=te.start,xe.duration=te.duration,xe.manifestInfo=(re=te.mpd,(z=new td).dvrWindowSize=re.timeShiftBufferDepth,z.loadedTime=re.manifest.loadedTime,z.availableFrom=re.availabilityStartTime,z.minBufferTime=re.manifest.minBufferTime,z.maxFragmentDuration=re.maxSegmentDuration,z.duration=S.getDuration(re.manifest),z.isDynamic=S.getIsDynamic(re.manifest),z.serviceDescriptions=S.getServiceDescriptions(re.manifest),z.protocol=re.manifest.protocol,z),xe.isLast=1===te.mpd.manifest.Period_asArray.length||Math.abs(xe.start+xe.duration-xe.manifestInfo.duration)<1,xe}function Ve(){if(!Y)throw new Error("setConfig function has to be called previously")}function P(te){return H.length>0?H[0].mpd.manifest.Period_asArray[te]:null}function oe(te,re,z){var xe,be,ke,we,ie;if(te)for(xe=te.AdaptationSet_asArray,we=0;we<xe.length;we+=1)for(ke=xe[we].Representation_asArray,ie=0;ie<ke.length;ie+=1)if(re===(be=ke[ie]).id)return z?ie:be;return null}return A={getBandwidthForRepresentation:function(te,re){var z;return(z=oe(P(re),te))?z.bandwidth:null},getIndexForRepresentation:function(te,re){return null!==(be=oe(P(re),te,!0))?be:-1;var be},getMaxIndexForBufferType:function(te,re){return function(z,xe){var be,ke,we,ie;if(!z||!xe)return-1;for(ke=z.AdaptationSet_asArray,ie=0;ie<ke.length;ie+=1)if(we=(be=ke[ie]).Representation_asArray,S.getIsTypeOf(be,xe))return we.length;return-1}(P(re),te)},convertRepresentationToRepresentationInfo:function(te){if(te){var re=new fo,xe=S.getRepresentationFor(te.index,te.adaptation.period.mpd.manifest.Period_asArray[te.adaptation.period.index].AdaptationSet_asArray[te.adaptation.index]);return re.id=te.id,re.quality=te.index,re.bandwidth=S.getBandwidth(xe),re.fragmentDuration=te.segmentDuration||(te.segments&&te.segments.length>0?te.segments[0].duration:NaN),re.MSETimeOffset=te.MSETimeOffset,re.mediaInfo=he(te.adaptation),re}return null},getStreamsInfo:function(te,re){var z=[],xe=H;if(te&&(Ve(),xe=de(te)),xe.length>0){(!re||re>xe.length)&&(re=xe.length);for(var be=0;be<re;be++)z.push(me(xe[be]))}return z},getMediaInfoForType:function(te,re){if(0===H.length||!te)return null;var z=Ze(te,H);if(!z)return null;var xe=S.getAdaptationsForPeriod(z),be=le(te.index,re,te);return be?he(xe[S.getIndexForAdaptation(be,H[0].mpd.manifest,te.index)]):null},getAllMediaInfoForType:ee,getAdaptationForType:le,getRealAdaptation:function(te,re){var z,xe,be=Ze(te,H);return z=re?re.id:null,H.length>0&&be&&(xe=z?S.getAdaptationForId(z,H[0].mpd.manifest,be.index):S.getAdaptationForIndex(re?re.index:null,H[0].mpd.manifest,be.index)),xe},getProducerReferenceTimes:function(te,re){var z,xe,be=Ze(te,H);return z=re?re.id:null,H.length>0&&be&&(xe=z?S.getAdaptationForId(z,H[0].mpd.manifest,be.index):S.getAdaptationForIndex(re?re.index:null,H[0].mpd.manifest,be.index)),xe?S.getProducerReferenceTimesForAdaptation(xe):[]},getRealPeriodByIndex:function(te){return S.getRealPeriodForIndex(te,H[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(te){try{return S.getEssentialPropertiesForRepresentation(te)}catch{return[]}},getVoRepresentations:function(te){var re=Fe(te);return S.getRepresentationsForAdaptation(re)},getEventsFor:function(te,re,z){var xe=[];if(H.length>0){var be=H[0].mpd.manifest;if(te instanceof hu){var ke=Ze(te,H);xe=S.getEventsForPeriod(ke)}else if(te instanceof Xu){var we=Ze(z,H);xe=S.getEventStreamForAdaptationSet(be,Fe(te),we)}else if(te instanceof fo){var ie=Ze(z,H);xe=S.getEventStreamForRepresentation(be,re,ie)}}return xe},getEvent:function(te,re,z,xe){try{if(!te||!re||isNaN(z)||!xe)return null;var be=te.scheme_id_uri,ke=te.value;if(!re[be+"/"+ke])return null;var we,ie=new vo,Re=te.timescale||1,qe=xe.adaptation.period.start,ft=re[be+"/"+ke],nt=isNaN(xe.presentationTimeOffset)?isNaN(ft.presentationTimeOffset)?0:ft.presentationTimeOffset:xe.presentationTimeOffset,dt=te.presentation_time_delta/Re;we=0===te.version?qe+z-nt+dt:qe-nt+dt;var st=te.event_duration/Re,Ft=te.id,Gt=te.message_data;return ie.eventStream=ft,ie.eventStream.value=ke,ie.eventStream.timescale=Re,ie.duration=st,ie.id=Ft,ie.calculatedPresentationTime=we,ie.messageData=Gt,ie.presentationTimeDelta=dt,ie}catch{return null}},getMpd:ae,setConfig:function(te){te&&(te.constants&&(Y=te.constants),te.cea608parser&&(k=te.cea608parser),te.errHandler&&S.setConfig({errHandler:te.errHandler}),te.BASE64&&S.setConfig({BASE64:te.BASE64}))},updatePeriods:function(te){if(!te)return null;Ve(),H=de(te)},getIsTextTrack:function(te){return S.getIsText(te)},getUTCTimingSources:function(){var te=Ne();return S.getUTCTimingSources(te)},getSuggestedPresentationDelay:function(){return S.getSuggestedPresentationDelay(H.length>0?H[0].mpd:null)},getAvailabilityStartTime:function(te){var re=ae(te);return S.getAvailabilityStartTime(re)},getIsTypeOf:function(te,re){return S.getIsTypeOf(te,re)},getIsDynamic:function(te){var re=Ne(te);return S.getIsDynamic(re)},getDuration:function(te){var re=Ne(te);return S.getDuration(re)},getRegularPeriods:de,getContentSteering:function(te){return S.getContentSteering(te)},getLocation:function(te){return S.getLocation(te)},getPatchLocation:function(te){var re=S.getPatchLocation(te),z=S.getPublishTime(te);return re&&0!==re.length&&z?re.filter(function(xe){return isNaN(xe.ttl)||z.getTime()+xe.ttl>(new Date).getTime()}):[]},getManifestUpdatePeriod:function(te){return S.getManifestUpdatePeriod(te,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)},getPublishTime:function(te){return S.getPublishTime(te)},getIsDVB:function(te){return S.hasProfile(te,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(te){return w.getIsPatch(te)},getBaseURLsFromElement:function(te){return S.getBaseURLsFromElement(te)},getRepresentationSortFunction:function(){return S.getRepresentationSortFunction()},getCodec:function(te,re,z){return S.getCodec(te,re,z)},getPeriodById:function(te){if(!te||0===H.length)return null;var re=H.filter(function(z){return z.id===te});return re&&re.length>0?re[0]:null},setCurrentMediaInfo:function(te,re,z){W[te]=W[te]||{},W[te][re]=W[te][re]||{},W[te][re]=z},isPatchValid:function(te,re){var z=S.getId(te),xe=w.getMpdId(re),be=S.getPublishTime(te),ke=w.getPublishTime(re),we=w.getOriginalPublishTime(re);return!!(z&&xe&&z==xe&&be&&we&&be.getTime()==we.getTime()&&ke&&be.getTime()<ke.getTime())},applyPatchToManifest:function(te,re){w.getPatchOperations(re).forEach(function(z){var xe=z.getMpdTarget(te);if(null!==xe){var be=xe.name,ke=xe.target,we=xe.leaf;if(z.xpath.findsAttribute()||"__text"===be)switch(z.action){case"add":case"replace":ke[be]=z.value;break;case"remove":delete ke[be]}else{var ie=(ke[be+"_asArray"]||[]).indexOf(we),Re="prepend"===z.position||"before"===z.position;if(("remove"===z.action||"replace"===z.action)&&(delete ke[be],-1!=ie)){var qe=ke[be+"_asArray"];qe.splice(ie,1),qe.length>1?ke[be]=qe:1==qe.length?ke[be]=qe[0]:delete ke[be+"_asArray"]}"add"!==z.action&&"replace"!==z.action||Object.keys(z.value).forEach(function(ft){var nt=z.value[ft],dt=ke[ft+"_asArray"]||[];0===dt.length&&ke[ft]&&dt.push(ke[ft]),0===dt.length?dt=nt:dt.splice.apply(dt,[ft==be&&-1!=ie?ie+(Re?0:1)+("replace"==z.action?-1:0):Re?0:dt.length,0].concat(nt)),ke[ft+"_asArray"]=dt,ke[ft]=1==dt.length?dt[0]:dt})}}})},areMediaInfosEqual:ve,reset:He},S=rr(X).getInstance(),w=mh(X).getInstance(),He(),A}ol.__dashjs_factory_name="DashAdapter";var Wc=j.Z.getSingletonFactory(ol);var _a=function(){function A(){!function(H,W){if(!(H instanceof W))throw new TypeError("Cannot call a class as a function")}(this,A)}var w;return(w=[{key:"round10",value:function(H,W){return Y="round",k=H,void 0===(X=W)||0==+X?Math[Y](k):(X=+X,null===(k=+k)||isNaN(k)||"number"!=typeof X||X%1!=0?NaN:(k=k.toString().split("e"),+((k=(k=Math[Y](+(k[0]+"e"+(k[1]?+k[1]-X:-X)))).toString().split("e"))[0]+"e"+(k[1]?+k[1]+X:X))));var Y,k,X}}])&&function Qu(A,S){for(var w=0;w<S.length;w++){var H=S[w];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(A,H.key,H)}}(A,w),A}(),vh=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},id=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.t=null,this.mt=null,this.to=null,this.lto=null},Ju=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.t=null,this.level=null},ec=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.target=null,this.state=F.Z.BUFFER_EMPTY},yh=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.time=null,this.range=null,this.manifestInfo=null},Eh=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.time=null,this.droppedFrames=null};function tc(A,S){if(!(A instanceof S))throw new TypeError("Cannot call a class as a function")}var ko=function A(){tc(this,A),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},Ta=function A(){tc(this,A),this.id=null,this.index=null,this.start=null,this.duration=null},$c=function A(){tc(this,A),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},_h=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},oo=function A(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,A),this.loadingRequests=[],this.executedRequests=[]};function Sa(A){var S,w,H=(A=A||{}).settings,Y=(0,V.Z)(this.context).getInstance();function k(){Y.trigger(D.Z.METRICS_CHANGED)}function X(ae){Y.trigger(D.Z.METRIC_CHANGED,{mediaType:ae}),k()}function le(ae,He,Ne){Y.trigger(D.Z.METRIC_UPDATED,{mediaType:ae,metric:He,value:Ne}),X(ae)}function ve(ae,He,Ne){Y.trigger(D.Z.METRIC_ADDED,{mediaType:ae,metric:He,value:Ne}),X(ae)}function fe(ae,He){var Ne=null;return ae&&(w.hasOwnProperty(ae)?Ne=w[ae]:He||(Ne=new vh,w[ae]=Ne)),Ne}function ee(ae,He,Ne){var Fe=fe(ae);null!==Fe&&(Fe[He].push(Ne),Fe[He].length>H.get().streaming.metrics.maxListDepth&&Fe[He].shift())}function de(ae,He,Ne){ee(ae,He,Ne),ve(ae,He,Ne)}return S={clearCurrentMetricsForType:function(ae){delete w[ae],X(ae)},clearAllCurrentMetrics:function(){w={},k()},getMetricsFor:fe,addHttpRequest:function ae(He,Ne,Fe,Ze,he,Oe,me,Ve,P,oe,te,re,z,xe,be,ke,we){var ie=new gt.w;null!=Oe&&Oe!==Ze&&(ae(He,null,Fe,Ze,he,null,null,Ve,P,null,null,null,z,null,null,ke,we),ie.actualurl=Oe),ie.tcpid=Ne,ie.type=Fe,ie.url=Ze,ie.range=Ve,ie.trequest=P,ie.tresponse=oe,ie.responsecode=re,ie.cmsd=we,ie._tfinish=te,ie._stream=He,ie._mediaduration=z,ie._quality=he,ie._responseHeaders=xe,ie._serviceLocation=me,ie._fileLoaderType=ke,be?be.forEach(function(Re){var qe,ft,nt,dt,st;qe=ie,ft=Re.s,nt=Re.d,dt=Re.b,(st=new gt.O).s=ft,st.d=nt,st.b=dt,qe.trace.push(st),qe.interval||(qe.interval=0),qe.interval+=nt}):(delete ie.interval,delete ie.trace),de(He,F.Z.HTTP_REQUEST,ie)},addRepresentationSwitch:function(ae,He,Ne,Fe,Ze){var he=new id;he.t=He,he.mt=Ne,he.to=Fe,Ze?he.lto=Ze:delete he.lto,de(ae,F.Z.TRACK_SWITCH,he)},addBufferLevel:function(ae,He,Ne){var Fe=new Ju;Fe.t=He,Fe.level=Ne,de(ae,F.Z.BUFFER_LEVEL,Fe)},addBufferState:function(ae,He,Ne){var Fe=new ec;Fe.target=Ne,Fe.state=He,de(ae,F.Z.BUFFER_STATE,Fe)},addDVRInfo:function(ae,He,Ne,Fe){var Ze=new yh;Ze.time=He,Ze.range=Fe,Ze.manifestInfo=Ne,de(ae,F.Z.DVR_INFO,Ze)},addDroppedFrames:function(ae,He){var Ne=new Eh,Fe=fe(ae).DroppedFrames;He&&(Ne.time=He.creationTime,Ne.droppedFrames=He.droppedVideoFrames,Fe.length>0&&Fe[Fe.length-1]==Ne||de(ae,F.Z.DROPPED_FRAMES,Ne))},addSchedulingInfo:function(ae,He,Ne,Fe,Ze,he,Oe,me,Ve){var P=new _h;P.mediaType=ae,P.t=He,P.type=Ne,P.startTime=Fe,P.availabilityStartTime=Ze,P.duration=he,P.quality=Oe,P.range=me,P.state=Ve,de(ae,F.Z.SCHEDULING_INFO,P)},addRequestsQueue:function(ae,He,Ne){var Fe=new oo;Fe.loadingRequests=He,Fe.executedRequests=Ne,fe(ae).RequestsQueue=Fe,ve(ae,F.Z.REQUESTS_QUEUE,Fe)},addManifestUpdate:function(ae,He,Ne,Fe,Ze,he,Oe,me,Ve,P){var oe=new ko;oe.mediaType=ae,oe.type=He,oe.requestTime=Ne,oe.fetchTime=Fe,oe.availabilityStartTime=Ze,oe.presentationStartTime=he,oe.clientTimeOffset=Oe,oe.currentTime=me,oe.buffered=Ve,oe.latency=P,ee(E.Z.STREAM,F.Z.MANIFEST_UPDATE,oe),ve(ae,F.Z.MANIFEST_UPDATE,oe)},updateManifestUpdateInfo:function(ae,He){if(ae){for(var Ne in He)ae[Ne]=He[Ne];le(ae.mediaType,F.Z.MANIFEST_UPDATE,ae)}},addManifestUpdateStreamInfo:function(ae,He,Ne,Fe,Ze){if(ae){var he=new Ta;he.id=He,he.index=Ne,he.start=Fe,he.duration=Ze,ae.streamInfo.push(he),le(ae.mediaType,F.Z.MANIFEST_UPDATE_STREAM_INFO,ae)}},addManifestUpdateRepresentationInfo:function(ae,He,Ne,Fe,Ze,he,Oe,me){if(ae&&ae.representationInfo){var Ve=new $c;Ve.id=He,Ve.index=Ne,Ve.streamIndex=Fe,Ve.mediaType=Ze,Ve.startNumber=Oe,Ve.fragmentInfoType=me,Ve.presentationTimeOffset=he,ae.representationInfo.push(Ve),le(ae.mediaType,F.Z.MANIFEST_UPDATE_TRACK_INFO,ae)}},addPlayList:function(ae){ae.trace&&Array.isArray(ae.trace)?ae.trace.forEach(function(He){He.hasOwnProperty("subreplevel")&&!He.subreplevel&&delete He.subreplevel}):delete ae.trace,de(E.Z.STREAM,F.Z.PLAY_LIST,ae)},addDVBErrors:function(ae){de(E.Z.STREAM,F.Z.DVB_ERRORS,ae)}},w={},S}Sa.__dashjs_factory_name="MetricsModel";var oa=j.Z.getSingletonFactory(Sa);function nc(A){var S,w,H,W,k=(A=A||{}).metricsModel;function X(fe){var ee=k.getMetricsFor(fe,!0);if(!ee)return null;var de,ae=ee.HttpList,He=null;if(!ae||ae.length<=0)return null;for(de=ae.length-1;de>=0;){if(ae[de].responsecode){He=ae[de];break}de--}return He}function le(fe){var ee=k.getMetricsFor(fe,!0);return ee&&ee.HttpList?ee.HttpList:[]}function ve(fe,ee){if(!fe)return null;var de=fe[ee];return de&&0!==de.length?de[de.length-1]:null}return S={getCurrentRepresentationSwitch:function(fe){return ve(k.getMetricsFor(fe,!0),F.Z.TRACK_SWITCH)},getCurrentBufferState:function(fe){return ve(k.getMetricsFor(fe,!0),F.Z.BUFFER_STATE)},getCurrentBufferLevel:function(fe){var ee=ve(k.getMetricsFor(fe,!0),F.Z.BUFFER_LEVEL);return ee?_a.round10(ee.level/1e3,-3):0},getCurrentHttpRequest:X,getHttpRequests:le,getCurrentDroppedFrames:function(){return ve(k.getMetricsFor(E.Z.VIDEO,!0),F.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(fe){return ve(k.getMetricsFor(fe,!0),F.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(fe){return ve(fe?k.getMetricsFor(fe,!0):k.getMetricsFor(E.Z.VIDEO,!0)||k.getMetricsFor(E.Z.AUDIO,!0),F.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return ve(k.getMetricsFor(E.Z.STREAM),F.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(fe,ee){if(!ee)return null;var de={},ae=X(fe);ae&&(de=tn.Z.parseHttpHeaders(ae._responseHeaders));var He=de[ee.toLowerCase()];return void 0===He?null:He},getLatestMPDRequestHeaderValueByID:function(fe){if(!fe)return null;var ee,de,ae,He={};for(ae=(ee=le(E.Z.STREAM)).length-1;ae>=0;ae--)if((de=ee[ae]).type===gt.w.MPD_TYPE){He=tn.Z.parseHttpHeaders(de._responseHeaders);break}var Ne=He[fe.toLowerCase()];return void 0===Ne?null:Ne},addRepresentationSwitch:function(fe,ee,de,ae,He){k.addRepresentationSwitch(fe,ee,de,ae,He)},addDVRInfo:function(fe,ee,de,ae){k.addDVRInfo(fe,ee,de,ae)},updateManifestUpdateInfo:function(fe){var ee=this.getCurrentManifestUpdate();k.updateManifestUpdateInfo(ee,fe)},addManifestUpdateStreamInfo:function(fe){if(fe){var ee=this.getCurrentManifestUpdate();k.addManifestUpdateStreamInfo(ee,fe.id,fe.index,fe.start,fe.duration)}},addManifestUpdateRepresentationInfo:function(fe,ee){if(fe){var de=this.getCurrentManifestUpdate();k.addManifestUpdateRepresentationInfo(de,fe.id,fe.index,fe.streamIndex,ee,fe.presentationTimeOffset,fe.startNumber,fe.fragmentInfoType)}},addManifestUpdate:function(fe){k.addManifestUpdate(E.Z.STREAM,fe.type,fe.requestStartDate,fe.requestEndDate)},addHttpRequest:function(fe,ee,de,ae,He,Ne){k.addHttpRequest(fe.mediaType,null,fe.type,fe.url,fe.quality,ee,fe.serviceLocation||null,fe.range||null,fe.requestStartDate,fe.firstByteDate,fe.requestEndDate,de,fe.duration,ae,He,fe.fileLoaderType,Ne)},addSchedulingInfo:function(fe,ee){k.addSchedulingInfo(fe.mediaType,new Date,fe.type,fe.startTime,fe.availabilityStartTime,fe.duration,fe.quality,fe.range,ee)},addRequestsQueue:function(fe,ee,de){k.addRequestsQueue(fe,ee,de)},addBufferLevel:function(fe,ee,de){k.addBufferLevel(fe,ee,de)},addBufferState:function(fe,ee,de){k.addBufferState(fe,ee,de)},addDroppedFrames:function(fe){k.addDroppedFrames(E.Z.VIDEO,fe)},addPlayList:function(){W&&(k.addPlayList(W),W=null)},addDVBErrors:function(fe){k.addDVBErrors(fe)},createPlaylistMetrics:function(fe,ee){(W=new ut).start=new Date,W.mstart=fe,W.starttype=ee},createPlaylistTraceMetrics:function(fe,ee,de){!0===w&&(w=!1,(H=new it).representationid=fe,H.start=new Date,H.mstart=ee,H.playbackspeed=null!==de?de.toString():null)},updatePlayListTraceMetrics:function(fe){if(H)for(var ee in H)H[ee]=fe[ee]},pushPlayListTraceMetrics:function(fe,ee){if(!1===w&&W&&H&&H.start){var de=H.start,ae=fe.getTime()-de.getTime();H.duration=ae,H.stopreason=ee,W.trace.push(H),w=!0}},clearAllCurrentMetrics:function(){k.clearAllCurrentMetrics()}},k=k||oa(this.context).getInstance({settings:A.settings}),w=!0,H=null,W=null,S}nc.__dashjs_factory_name="DashMetrics";var rc=j.Z.getSingletonFactory(nc);function ic(){var A,S,w,H,W=this.context,Y=(0,V.Z)(W).getInstance(),k=(0,ot.Z)(W).getInstance();function X(Ze){H=Ze}function le(Ze,he,Oe,me){var Ve,P=he.adaptation.period.mpd,oe=P.availabilityStartTime;if(me)Ve=Oe&&P.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(oe.getTime()+1e3*(Ze+P.timeShiftBufferDepth)):P.availabilityEndTime;else if(Oe){var te=he.availabilityTimeOffset;Ve=new Date(oe.getTime()+1e3*(Ze-te))}else Ve=oe;return Ve}function ve(Ze,he){return(Ze.getTime()-he.mpd.availabilityStartTime.getTime()+1e3*H)/1e3}function fe(Ze,he){return Ze+(he.adaptation.period.start-he.presentationTimeOffset)}function ee(Ze){var he={start:NaN,end:NaN},Oe=Ze[0].getAdapter().getRegularPeriods()[0],me=ve(new Date,Oe);if(!Ze||0===Ze.length)return{range:he,now:me};Ze.forEach(function(P){var oe=P.getAdapter(),te=oe.getMediaInfoForType(P.getStreamInfo(),E.Z.VIDEO)||oe.getMediaInfoForType(P.getStreamInfo(),E.Z.AUDIO),re=oe.getVoRepresentations(te)[0],z={start:NaN,end:NaN};if(re)if(re.segmentInfoType===_.Z.SEGMENT_TIMELINE)z=function(be){var ke,we,ie,Re,ft=S.getRepresentationFor(be.index,be.adaptation.period.mpd.manifest.Period_asArray[be.adaptation.period.index].AdaptationSet_asArray[be.adaptation.index]),nt=ft.SegmentTemplate||ft.SegmentList,st=nt.timescale,Ft=nt.SegmentTimeline.S_asArray,Gt={start:0,end:0},Ot=Ft[0].t,kt=!isNaN(Ot),wn=kt?Ot:0,tt=0;for(kt&&(Gt.start=fe(wn/st,be)),ie=0,Re=Ft.length;ie<Re;ie++)we=0,(ke=Ft[ie]).hasOwnProperty("r")&&(we=ke.r),tt+=ke.d*(1+we);return Gt.end=fe((wn+tt)/st,be),Gt}(re);else{var xe=re.adaptation.period;z.start=xe.start,z.end=Math.max(me,xe.start+xe.duration)}!isNaN(z.start)&&(isNaN(he.start)||he.start>z.start)&&(he.start=z.start),!isNaN(z.end)&&(isNaN(he.end)||he.end<z.end)&&(he.end=z.end)}),he.end=Math.min(me,he.end);var Ve=ae(Ze,he.end,!0);return he.end=isNaN(Ve)?he.end:Ve,he.start=Oe&&Oe.mpd&&Oe.mpd.timeShiftBufferDepth&&!isNaN(Oe.mpd.timeShiftBufferDepth)&&!isNaN(he.end)?Math.max(he.end-Oe.mpd.timeShiftBufferDepth,he.start):he.start,he.start=ae(Ze,he.start),{range:he,now:me}}function de(Ze,he){w=Ze-he.end}function ae(Ze,he){var Oe=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{for(var me=0,Ve=!1,P=NaN;!Ve&&me<Ze.length;){var oe=Ze[me].getStreamInfo();oe.start<=he&&(!isFinite(oe.duration)||oe.start+oe.duration>=he)?(P=he,Ve=!0):!Oe&&oe.start>he&&(isNaN(P)||oe.start<P)?P=oe.start:Oe&&oe.start+oe.duration<he&&(isNaN(P)||oe.start+oe.duration>P)&&(P=oe.start+oe.duration),me+=1}return P}catch{return he}}function He(Ze){void 0===Ze.offset||isNaN(Ze.offset)||X(Ze.offset/1e3)}function Ne(){H=0,w=0}function Fe(){Y.off(D.Z.UPDATE_TIME_SYNC_OFFSET,He,this),Ne()}return A={initialize:function(){Ne(),Y.on(D.Z.UPDATE_TIME_SYNC_OFFSET,He,this)},getClientTimeOffset:function(){return H},setClientTimeOffset:X,getClientReferenceTime:function(){return Date.now()-1e3*w+1e3*H},calcAvailabilityStartTimeFromPresentationTime:function(Ze,he,Oe){return le(Ze,he,Oe)},calcAvailabilityEndTimeFromPresentationTime:function(Ze,he,Oe){return le(Ze,he,Oe,!0)},calcPresentationTimeFromWallTime:ve,calcPresentationTimeFromMediaTime:fe,calcPeriodRelativeTimeFromMpdRelativeTime:function(Ze,he){return he-Ze.adaptation.period.start},calcMediaTimeFromPresentationTime:function(Ze,he){return Ze-he.adaptation.period.start+he.presentationTimeOffset},calcWallTimeForSegment:function(Ze,he){var me,Ve;return he&&(me=Ze.presentationStartTime+Ze.representation.adaptation.period.mpd.suggestedPresentationDelay,Ve=new Date(Ze.availabilityStartTime.getTime()+1e3*me)),Ve},calcTimeShiftBufferWindow:function(Ze,he){if(!he)return Ve={start:NaN,end:NaN},P=0,oe=NaN,Ze.forEach(function(te){var re=te.getStreamInfo();P+=re.duration,(isNaN(oe)||re.start<oe)&&(oe=re.start)}),Ve.start=oe,Ve.end=oe+P,Ve;var Ve,P,oe;if(k.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var Oe=ee(Ze);return de(Oe.now,Oe.range),Oe.range}return function(me){var Ve={start:NaN,end:NaN};if(!me||0===me.length)return Ve;var P=me[0].getAdapter().getRegularPeriods()[0],oe=ve(new Date,P),te=P.mpd.timeShiftBufferDepth,re=isNaN(te)?0:oe-te;if(Ve.start=ae(me,re),Ve.end=!isNaN(Ve.start)&&oe<Ve.start?oe:ae(me,oe,!0),!isNaN(te)&&Ve.end<oe-te&&(Ve.end=NaN),k.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var z=ee(me);if(z.range.end<Ve.start)return Y.trigger(T.Z.CONFORMANCE_VIOLATION,{level:za.LEVELS.WARNING,event:za.EVENTS.INVALID_DVR_WINDOW}),de(z.now,z.range),z.range}return Ve}(Ze)},reset:Fe},S=rr(W).getInstance(),Fe(),A}ic.__dashjs_factory_name="TimelineConverter";var Nl=j.Z.getSingletonFactory(ic),xl=ne(4593),Ps=ne(6934);function al(A){return(al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(A)}function sl(A,S){return(sl=Object.setPrototypeOf||function(w,H){return w.__proto__=H,w})(A,S)}function Ll(A){return(Ll=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(A)}var Qc=function(A){!function(Y,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(k&&k.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),k&&sl(Y,k)}(W,A);var S,w,H=(S=W,w=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Y,k=Ll(S);if(w){var X=Ll(this).constructor;Y=Reflect.construct(k,arguments,X)}else Y=k.apply(this,arguments);return function Xc(A,S){return!S||"object"!==al(S)&&"function"!=typeof S?function(w){if(void 0===w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(A):S}(this,Y)});function W(){var Y;return function(k,X){if(!(k instanceof X))throw new TypeError("Cannot call a class as a function")}(this,W),(Y=H.call(this)).captionData=null,Y.label=null,Y.defaultTrack=!1,Y.kind=null,Y.isFragmented=!1,Y.isEmbedded=!1,Y.isTTML=null,Y}return W}(Xu),pu=ne(2295);function Fs(){var A=0;function S(X){for(var le="",ve=0;ve<X.length;++ve)le+=X[ve].uchar;return le.length-le.replace(/^\s+/,"").length}function w(X){return"left: "+3.125*X.x+"%; top: "+6.66*X.y1+"%; width: "+(100-3.125*X.x)+"%; height: "+6.66*Math.max(X.y2-1-X.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function H(X){return"red"===X?"rgb(255, 0, 0)":"green"===X?"rgb(0, 255, 0)":"blue"===X?"rgb(0, 0, 255)":"cyan"===X?"rgb(0, 255, 255)":"magenta"===X?"rgb(255, 0, 255)":"yellow"===X?"rgb(255, 255, 0)":"white"===X?"rgb(255, 255, 255)":"black"===X?"rgb(0, 0, 0)":X}function W(X,le){var ve=X.videoHeight/15;return le?"font-size: "+ve+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(le.foreground?H(le.foreground):"rgb(255, 255, 255)")+"; font-style: "+(le.italics?"italic":"normal")+"; text-decoration: "+(le.underline?"underline":"none")+"; white-space: pre; background-color: "+(le.background?H(le.background):"transparent")+";":"font-size: "+ve+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function Y(X){return X.replace(/^\s+/g,"")}function k(X){return X.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(X,le,ve,fe){var ee,de,ae=null,He=!1,Ne=-1,Fe={start:le,end:ve,spans:[]},Ze="style_cea608_white_black",he={},Oe={},me=[];for(ee=0;ee<15;++ee){var Ve=fe.rows[ee],P="",oe=null;if(!1===Ve.isEmpty()){var te=S(Ve.chars);null===ae&&(ae={x:te,y1:ee,y2:ee+1,p:[]}),te!==Ne&&He&&(ae.p.push(Fe),Fe={start:le,end:ve,spans:[]},ae.y2=ee,ae.name="region_"+ae.x+"_"+ae.y1+"_"+ae.y2,!1===he.hasOwnProperty(ae.name)?(me.push(ae),he[ae.name]=ae):he[ae.name].p.contat(ae.p),ae={x:te,y1:ee,y2:ee+1,p:[]});for(var re=0;re<Ve.chars.length;++re){var z=Ve.chars[re],xe=z.penState;if(null===oe||!xe.equals(oe)){P.trim().length>0&&(Fe.spans.push({name:Ze,line:P,row:ee}),P="");var be="style_cea608_"+xe.foreground+"_"+xe.background;xe.underline&&(be+="_underline"),xe.italics&&(be+="_italics"),Oe.hasOwnProperty(be)||(Oe[be]=JSON.parse(JSON.stringify(xe))),oe=xe,Ze=be}P+=z.uchar}P.trim().length>0&&Fe.spans.push({name:Ze,line:P,row:ee}),He=!0,Ne=te}else He=!1,Ne=-1,ae&&(ae.p.push(Fe),Fe={start:le,end:ve,spans:[]},ae.y2=ee,ae.name="region_"+ae.x+"_"+ae.y1+"_"+ae.y2,!1===he.hasOwnProperty(ae.name)?(me.push(ae),he[ae.name]=ae):he[ae.name].p.contat(ae.p),ae=null)}ae&&(ae.p.push(Fe),ae.y2=ee+1,ae.name="region_"+ae.x+"_"+ae.y1+"_"+ae.y2,!1===he.hasOwnProperty(ae.name)?(me.push(ae),he[ae.name]=ae):he[ae.name].p.contat(ae.p),ae=null);var ke=[];for(ee=0;ee<me.length;++ee){var we=me[ee],ie="sub_cea608_"+A++,Re=document.createElement("div");Re.id=ie;var qe=w(we);Re.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+qe;var ft=document.createElement("div");ft.className="paragraph bodyStyle",ft.style.cssText=W(X);var nt=document.createElement("div");nt.className="cueUniWrapper",nt.style.cssText="unicode-bidi: normal; direction: ltr;";for(var dt=0;dt<we.p.length;++dt){var st=we.p[dt],Ft=0;for(de=0;de<st.spans.length;++de){var Gt=st.spans[de];if(Gt.line.length>0){if(0!==de&&Ft!=Gt.row){var Ot=document.createElement("br");Ot.className="lineBreak",nt.appendChild(Ot)}var kt=!1;Ft===Gt.row&&(kt=!0),Ft=Gt.row;var wn=Oe[Gt.name],tt=document.createElement("span");tt.className="spanPadding "+Gt.name+" customSpanColor",tt.style.cssText=W(X,wn),tt.textContent=0!==de&&kt?de===st.spans.length-1?k(Gt.line):Gt.line:st.spans.length>1&&de<st.spans.length-1&&Gt.row===st.spans[de+1].row?Y(Gt.line):Gt.line.trim(),nt.appendChild(tt)}}}ft.appendChild(nt),Re.appendChild(ft);var Ye={bodyStyle:["%",90]};for(var Lt in Oe)Oe.hasOwnProperty(Lt)&&(Ye[Lt]=["%",90]);ke.push({type:"html",start:le,end:ve,cueHTMLElement:Re,cueID:ie,cellResolution:[32,15],isFromCEA608:!0,fontSize:Ye,lineHeight:{},linePadding:{}})}return ke}}}Fs.__dashjs_factory_name="EmbeddedTextHtmlRender";var ks=j.Z.getSingletonFactory(Fs);function ms(A){var S,w,H,W,Y,k,X,le,ve,fe,ee,de,ae,He,Ne,Fe,Ze,he=A.errHandler,Oe=A.manifestModel,me=A.mediaController,Ve=A.videoModel,P=A.textTracks,oe=A.vttParser,te=A.vttCustomRenderingParser,re=A.ttmlParser,z=A.streamInfo,xe=A.settings,be=this.context,ke=(0,V.Z)(be).getInstance(),we=!1;function ie(){k=null,le=NaN,ve=[],fe=null,X=!1,Y=[],W=null}function Re(Ot){var tt,Ye,kt=new Qc;for(var wn in Ot)kt[wn]=Ot[wn];kt.labels=Ot.labels,kt.defaultTrack=(tt=Ot,Ye=!1,de.length>1&&tt.isEmbedded?Ye=tt.id&&tt.id===E.Z.CC1:1===de.length?tt.id&&"string"==typeof tt.id&&"CC"===tt.id.substring(0,2)&&(Ye=!0):0===de.length&&(Ye=tt.index===Y[0].index),Ye),kt.isFragmented=Ot.isFragmented,kt.isEmbedded=!!Ot.isEmbedded,kt.isTTML=function(tt){return tt.codec&&tt.codec.search(E.Z.STPP)>=0||tt.mimeType&&tt.mimeType.search(E.Z.TTML)>=0}(Ot),kt.kind=function(tt,Ye){var Lt=tt.roles&&tt.roles.length>0?Ye[tt.roles[0]]:Ye.caption;return Lt===Ye.caption||Lt===Ye.subtitle?Lt:Ye.caption}(Ot,{subtitle:"subtitles",caption:"captions"}),P.addTextTrack(kt)}function qe(Ot){var kt=Ot.chunk;kt.mediaInfo.embeddedCaptions&&nt(kt.bytes,kt)}function ft(Ot){ee=Ot}function nt(Ot,kt){var wn=kt.mediaInfo,tt=wn.type,Lt=wn.codec||wn.mimeType;Lt?-1!==wn.codec.indexOf("application/mp4")?function(_t,Yt,Kt){var Wt;if("InitializationSegment"===Yt.segmentType)X=!0,le=H.getMediaTimescaleFromMoov(_t);else{if(!X)return;(Wt=H.getSamplesInfo(_t).sampleList).length>0&&(fe=Wt[0].cts-Yt.start*le),Kt.search(E.Z.STPP)>=0?function(Un,Mn,er){var Jn,At;for(W=null!==W?W:Ft(er),Jn=0;Jn<Mn.length;Jn++){var $t=Mn[Jn],Ut=$t.cts,rn=st(),mn=rn+Ut/le;S.buffered.add(mn,mn+$t.duration/le);var Bn=new DataView(Un,$t.offset,$t.subSizes[0]),Hn=Ps.Utils.dataViewToString(Bn,E.Z.UTF8),nr=[],Xt=$t.offset+$t.subSizes[0];for(At=1;At<$t.subSizes.length;At++){var Dn=new Uint8Array(Un,Xt,$t.subSizes[At]),Fn=String.fromCharCode.apply(null,Dn);nr.push(Fn),Xt+=$t.subSizes[At]}try{var Ln=Oe.getValue().ttmlTimeIsRelative?Ut/le:0,Gn=W.parse(Hn,Ln,Ut/le,(Ut+$t.duration)/le,nr);P.addCaptions(ee,rn,Gn)}catch(Ct){k.removeExecutedRequestsBeforeTime(),this.remove(),w.error("TTML parser error: "+Ct.message)}}}(_t,Wt,Kt):function(Un,Mn){var er,Jn,At,$t=[];for(er=0;er<Mn.length;er++){var Ut=Mn[er];Ut.cts-=fe;var rn=st()+Ut.cts/le;S.buffered.add(rn,rn+Ut.duration/le);var Zn=Un.slice(Ut.offset,Ut.offset+Ut.size),Bn=Ps.parseBuffer(Zn);for(Jn=0;Jn<Bn.boxes.length;Jn++){var Hn=Bn.boxes[Jn];if(w.debug("VTT box1: "+Hn.type),"vtte"!==Hn.type&&"vttc"===Hn.type){w.debug("VTT vttc boxes.length = "+Hn.boxes.length);var nr={styles:{}};for(At=0;At<Hn.boxes.length;At++){var Xt=Hn.boxes[At];if(w.debug("VTT box2: "+Xt.type),"payl"===Xt.type)nr.start=Ut.cts/le,nr.end=(Ut.cts+Ut.duration)/le,nr.data=Xt.cue_text;else if("sttg"===Xt.type&&Xt.settings&&""!==Xt.settings)try{var Dn=Xt.settings.split(" ");nr.styles=oe.getCaptionStyles(Dn)}catch{}}nr&&nr.data&&($t.push(nr),w.debug("VTT  ".concat(nr.start," - ").concat(nr.end," :  ").concat(nr.data)))}}}$t.length>0&&P.addCaptions(ee,0,$t)}(_t,Wt)}}(Ot,kt,Lt):tt===E.Z.VIDEO?function(_t,Yt){var Kt,Wt,rn,mn,Bn,Hn;if(Yt.segmentType===gt.w.INIT_SEGMENT_TYPE)0===ae&&(ae=H.getMediaTimescaleFromMoov(_t));else if(Yt.segmentType===gt.w.MEDIA_SEGMENT_TYPE){if(0===ae)return void w.warn("CEA-608: No timescale for embeddedTextTrack yet");var Un=(Wt=H.getSamplesInfo(_t)).lastSequenceNumber,Mn=Math.trunc(Yt.start),er=Math.trunc(Yt.end);if(Fe[0]||Fe[1]||function(){for(var rn,mn=0;mn<de.length;mn++){if(-1===(rn=P.getTrackIdxForId(de[mn].id)))return void w.warn("CEA-608: data before track is ready.");var Zn=dt(rn);Fe[mn]=new(G().Cea608Parser)(mn+1,{newCue:Zn},null)}}(),ae){if(mn=Un,Bn=Ne,Hn=Mn,null!==(rn=He)&&null!==mn&&null!==Bn&&null!==Hn&&(mn===rn?Bn!==Hn:mn!==rn+Wt.numSequences))for(Kt=0;Kt<Fe.length;Kt++)Fe[Kt]&&Fe[Kt].reset();for(var Jn=function(rn,mn){if(0===mn.length)return null;for(var Zn={splits:[],fields:[[],[]]},Bn=new DataView(rn),Hn=0;Hn<mn.length;Hn++)for(var nr=mn[Hn],Xt=G().findCea608Nalus(Bn,nr.offset,nr.size),Dn=null,Fn=0,Ln=0;Ln<Xt.length;Ln++)for(var Gn=G().extractCea608DataFromRange(Bn,Xt[Ln]),Ct=0;Ct<2;Ct++)if(Gn[Ct].length>0){nr.cts!==Dn?Fn=0:Fn+=1;var ct=st();Zn.fields[Ct].push([nr.cts+ct*ae,Gn[Ct],Fn]),Dn=nr.cts}return Zn.fields.forEach(function(jt){jt.sort(function(Ge,We){return Ge[0]===We[0]?Ge[2]-We[2]:Ge[0]-We[0]})}),Zn}(_t,Wt.sampleList),At=0;At<Fe.length;At++){var $t=Jn.fields[At],Ut=Fe[At];if(Ut)for(Kt=0;Kt<$t.length;Kt++)Ut.addData($t[Kt][0]/ae,$t[Kt][1])}He=Un,Ne=er}}}(Ot,kt):function(_t,Yt,Kt){var Wt,Un,Mn=new DataView(_t,0,_t.byteLength);Un=Ps.Utils.dataViewToString(Mn,E.Z.UTF8);try{Wt=Ft(Kt).parse(Un,0),P.addCaptions(P.getCurrentTrackIdx(),0,Wt),S.buffered&&S.buffered.add(Yt.start,Yt.end)}catch(er){he.error(new Le.Z(De.TIMED_TEXT_ERROR_ID_PARSE_CODE,De.TIMED_TEXT_ERROR_MESSAGE_PARSE+er.message,Un))}}(Ot,kt,Lt):w.error("No text type defined")}function dt(Ot){return function(kt,wn,tt){var Ye;(Ye=Ve.getTTMLRenderingDiv()?Ze.createHTMLCaptionsFromScreen(Ve.getElement(),kt,wn,tt):[{start:kt,end:wn,data:tt.getDisplayText(),styles:{}}])&&P.addCaptions(Ot,0,Ye)}}function st(){return isNaN(S.timestampOffset)?0:S.timestampOffset}function Ft(Ot){var kt;return Ot.search(E.Z.VTT)>=0?kt=xe.get().streaming.text.webvtt.customRenderingEnabled&&te?te:oe:(Ot.search(E.Z.TTML)>=0||Ot.search(E.Z.STPP)>=0)&&(kt=re),kt}function Gt(Ot){de.forEach(function(kt){var wn=P.getTrackIdxForId(kt.id);wn>=0&&P.deleteCuesFromTrackIdx(wn,Ot.from,Ot.to)})}return S={initialize:function(){we||(de=[],ee=null,ae=0,Fe=[],He=null,Ne=null,we=!0,Ze=ks(be).getInstance(),ke.on(D.Z.VIDEO_CHUNK_RECEIVED,qe,S),ke.on(D.Z.BUFFER_CLEARED,Gt,S))},addMediaInfos:function(Ot,kt,wn){if(Y=Y.concat(kt),Ot===E.Z.TEXT&&kt[0].isFragmented&&!kt[0].isEmbedded){k=wn,S.buffered=(0,pu.Z)(be).create(),ve=me.getTracksFor(E.Z.TEXT,z.id).filter(function(_t){return _t.isFragmented});for(var tt=me.getCurrentTrackFor(E.Z.TEXT,z.id),Ye=0;Ye<ve.length;Ye++)if(ve[Ye]===tt){ft(Ye);break}}for(var Lt=0;Lt<kt.length;Lt++)Re(kt[Lt])},resetMediaInfos:function(){Y=[]},getStreamId:function(){return z.id},append:nt,abort:function(){},addEmbeddedTrack:function(Ot){if(we&&Ot)if(Ot.id===E.Z.CC1||Ot.id===E.Z.CC3){for(var kt=0;kt<de.length;kt++)if(de[kt].id===Ot.id)return;de.push(Ot)}else w.warn("Embedded track "+Ot.id+" not supported!")},resetEmbedded:function(){ke.off(D.Z.VIDEO_CHUNK_RECEIVED,qe,S),ke.off(D.Z.BUFFER_CLEARED,Gt,S),P&&P.deleteAllTextTracks(),we=!1,de=[],Fe=[null,null],He=null,Ne=null},getConfig:function(){return{fragmentModel:k,fragmentedTracks:ve,videoModel:Ve}},setCurrentFragmentedTrackIdx:ft,remove:function(Ot,kt){void 0===Ot&&Ot===kt&&(Ot=S.buffered.start(0),kt=S.buffered.end(S.buffered.length-1)),S.buffered.remove(Ot,kt),P.deleteCuesFromTrackIdx(ee,Ot,kt)},reset:function(){ie(),Y=[],H=null}},w=(0,B.Z)(be).getInstance().getLogger(S),H=(0,zs.Z)(be).getInstance(),ie(),S}ms.__dashjs_factory_name="TextSourceBuffer";var Jc=j.Z.getClassFactory(ms),oc=ne(4403);function od(A,S){(null==S||S>A.length)&&(S=A.length);for(var w=0,H=new Array(S);w<S;w++)H[w]=A[w];return H}var ad=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function ac(A){var S,w,H,W,Y,k,X,le,ve,fe,ee,de,ae,He,Ne,Fe,Ze,he,Oe,me,Ve=this.context,P=(0,V.Z)(Ve).getInstance(),oe=A.videoModel,te=A.streamInfo,re=A.settings;function z(At,$t,Ut,rn,mn,Zn){var Bn=0,Hn=0;At/$t>Ut/rn?Bn=(Hn=$t)/rn*Ut:Hn=(Bn=At)/Ut*rn;var nr,Xt,Dn=0,Fn=0;return Bn/Hn>mn?(Fn=Hn,Dn=Hn*mn):(Dn=Bn,Fn=Bn/mn),nr=(At-Dn)/2,Xt=($t-Fn)/2,Zn?{x:nr+.1*Dn,y:Xt+.1*Fn,w:.8*Dn,h:.8*Fn}:{x:nr,y:Xt,w:Dn,h:Fn}}function xe(At,$t){var Ut=oe.getClientWidth(),rn=oe.getClientHeight(),mn=oe.getVideoWidth(),Zn=oe.getVideoHeight(),Bn=oe.getVideoRelativeOffsetTop(),Hn=oe.getVideoRelativeOffsetLeft();if(0!==mn&&0!==Zn){var nr=mn/Zn,Xt=!1;At.isFromCEA608&&(nr=1.1666666666666667,Xt=!0);var Dn=z.call(this,Ut,rn,mn,Zn,nr,Xt),Fn=Dn.w,Ln=Dn.h,Gn=Dn.x,Ct=Dn.y;if(Fn!=ve||Ln!=fe||Gn!=X||Ct!=le||$t){if(X=Gn+Hn,le=Ct+Bn,ve=Fn,fe=Ln,ee){var ct=ee.style;ct&&(ct.left=X+"px",ct.top=le+"px",ct.width=ve+"px",ct.height=fe+"px",ct.zIndex=He&&document[He]||Ne?Ze:null,P.trigger(T.Z.CAPTION_CONTAINER_RESIZE))}var jt=At.activeCues;if(jt)for(var Ge=jt.length,We=0;We<Ge;++We){var Mt=jt[We];Mt.scaleCue(Mt)}}}}function be(At){var $t,Ut,rn,mn,Zn;if(At.cellResolution){var nr=[ve/At.cellResolution[0],fe/At.cellResolution[1]];if(At.linePadding)for($t in At.linePadding)if(At.linePadding.hasOwnProperty($t)){Ut=(At.linePadding[$t]*nr[0]).toString();for(var Xt=document.getElementsByClassName("spanPadding"),Dn=0;Dn<Xt.length;Dn++)Xt[Dn].style.cssText=Xt[Dn].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ut),Xt[Dn].style.cssText=Xt[Dn].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ut)}if(At.fontSize){for($t in At.fontSize)if(At.fontSize.hasOwnProperty($t)){"%"===At.fontSize[$t][0]?rn=At.fontSize[$t][1]/100:"c"===At.fontSize[$t][0]&&(rn=At.fontSize[$t][1]),Ut=(rn*nr[1]).toString(),Zn="defaultFontSize"!==$t?document.getElementsByClassName($t):document.getElementsByClassName("paragraph");for(var Fn=0;Fn<Zn.length;Fn++)Zn[Fn].style.cssText=Zn[Fn].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ut)}if(At.lineHeight)for($t in At.lineHeight)if(At.lineHeight.hasOwnProperty($t)){"%"===At.lineHeight[$t][0]?mn=At.lineHeight[$t][1]/100:"c"===At.fontSize[$t][0]&&(mn=At.lineHeight[$t][1]),Ut=(mn*nr[1]).toString(),Zn=document.getElementsByClassName($t);for(var Ln=0;Ln<Zn.length;Ln++)Zn[Ln].style.cssText=Zn[Ln].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ut)}}}if(At.isd){var Gn=document.getElementById(At.cueID);Gn&&ee.removeChild(Gn),we(At)}}function ke(At,$t){var Ut=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,rn=/^#(.*)$/;if(Ut.test($t)){var mn=Ut.exec($t),Zn=parseInt(mn[4],10)-1;return"data:image/png;base64,"+btoa(At.images[Zn])}if(rn.test($t)){var Bn=rn.exec($t)[1];return"data:image/png;base64,"+At.embeddedImages[Bn]}return $t}function we(At){if(ee){Jn.call(this);var $t=document.createElement("div");ee.appendChild($t),Fe=(0,oc.renderHTML)(At.isd,$t,function(Ut){return ke(At,Ut)},ee.clientHeight,ee.clientWidth,re.get().streaming.text.imsc.displayForcedOnlyMode,function(Ut){w.info("renderCaption :",Ut)},Fe,re.get().streaming.text.imsc.enableRollUp),$t.id=At.cueID,P.trigger(T.Z.CAPTION_RENDERED,{captionDiv:$t,currentTrackIdx:k})}}function ie(At,$t){return!!$t&&$t.endTime>=At.startTime}function Re(At,$t){return!!re.get().streaming.text.extendSegmentedCues&&!!function(Ut,rn,mn){for(var Zn=0;Zn<mn.length;Zn++){var Bn=mn[Zn];if(JSON.stringify(Ut[Bn])!==JSON.stringify(rn[Bn]))return!1}return!0}($t,At,ad)&&($t.endTime=Math.max($t.endTime,At.endTime),!0)}function qe(At,$t){$t&&$t.forEach(function(Ut){Ut.kind&&"image"===Ut.kind&&(Ut.src=ke(At,Ut.src)),qe(At,Ut.contents)})}function ft(At,$t,Ut){var rn=Ye(At),mn=re.get().streaming.text.dispatchForManualRendering;if(rn&&Array.isArray(Ut)&&0!==Ut.length)for(var Zn=0;Zn<Ut.length;Zn++){var Bn=null,Hn=Ut[Zn];rn.cellResolution=Hn.cellResolution,rn.isFromCEA608=Hn.isFromCEA608,isNaN(Hn.start)||isNaN(Hn.end)||(mn?Bn=nt(Hn,$t):Ot(Hn)&&ee?Bn=Ft(Hn,$t,rn):Hn.data&&(Bn=Gt(Hn,$t,rn)));try{if(Bn){if(!Yt(rn,Bn))if(re.get().streaming.text.webvtt.customRenderingEnabled)rn.manualCueList||(rn.manualCueList=[]),rn.manualCueList.push(Bn);else{var nr=void 0;rn.cues&&0!==rn.cues.length&&(nr=rn.cues[rn.cues.length-1]),ie(Bn,nr)?Re(Bn,nr)||(nr.isd&&(nr.onexit=function(){}),rn.mode!==E.Z.TEXT_DISABLED&&rn.addCue(Bn)):rn.mode!==E.Z.TEXT_DISABLED&&rn.addCue(Bn)}var Xt=re.get().streaming.buffer.bufferToKeep;Wt(rn,0,oe.getTime()-Xt)}else w.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Dn){throw Un(rn),rn.addCue(Bn),Dn}}}function nt(At,$t){var Ut=kt(At,$t);return Ut.onenter=function(){Ot(At)&&me&&me.cueID!==Ut.cueID&&st(me),delete Ut.type,me=Ut,dt(Ut)},Ut.onexit=function(){st(Ut),me=null},Ut}function dt(At){P.trigger(T.Z.CUE_ENTER,At)}function st(At){P.trigger(T.Z.CUE_EXIT,{cueID:At.cueID})}function Ft(At,$t,Ut){var rn=this,mn=kt(At,$t);return ee.style.left=X+"px",ee.style.top=le+"px",ee.style.width=ve+"px",ee.style.height=fe+"px",mn.onenter=function(){var Zn=this;Ut.mode===E.Z.TEXT_SHOWING&&(this.isd?(Oe?requestAnimationFrame(function(){return we(Zn)}):we(this),w.debug("Cue enter id:"+this.cueID)):(ee.appendChild(this.cueHTMLElement),be.call(rn,this),P.trigger(T.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:k})))},mn.onexit=function(){if(ee)for(var Zn=ee.childNodes,Bn=0;Bn<Zn.length;++Bn)Zn[Bn].id===this.cueID&&(w.debug("Cue exit id:"+Zn[Bn].id),ee.removeChild(Zn[Bn]),--Bn)},mn}function Gt(At,$t,Ut){var rn=kt(At,$t);if(rn.isActive=!1,At.styles)try{void 0!==At.styles.align&&"align"in rn&&(rn.align=At.styles.align),void 0!==At.styles.line&&"line"in rn&&(rn.line=At.styles.line),void 0!==At.styles.snapToLines&&"snapToLines"in rn&&(rn.snapToLines=At.styles.snapToLines),void 0!==At.styles.position&&"position"in rn&&(rn.position=At.styles.position),void 0!==At.styles.size&&"size"in rn&&(rn.size=At.styles.size)}catch(mn){w.error(mn)}return rn.onenter=function(){Ut.mode===E.Z.TEXT_SHOWING&&P.trigger(T.Z.CAPTION_RENDERED,{currentTrackIdx:k})},rn}function Ot(At){return"html"===At.type}function kt(At,$t){return Ot(At)?((mn=new H((Ut=At).start+(rn=$t),Ut.end+rn,"")).cueHTMLElement=Ut.cueHTMLElement,mn.isd=Ut.isd,mn.images=Ut.images,mn.embeddedImages=Ut.embeddedImages,mn.cueID=Ut.cueID,mn.scaleCue=be.bind(self),mn.cellResolution=Ut.cellResolution,mn.lineHeight=Ut.lineHeight,mn.linePadding=Ut.linePadding,mn.fontSize=Ut.fontSize,mn.isd&&qe(mn,mn.isd.contents),mn):function(Ut,rn){var mn=new H(Ut.start-rn,Ut.end-rn,Ut.data);return mn.cueID="".concat(mn.startTime,"_").concat(mn.endTime),mn}(At,$t);var Ut,rn,mn}function wn(At){if(de)for(var $t=de.childNodes,Ut=0;Ut<$t.length;++Ut)$t[Ut].id===At.cueID&&(de.removeChild($t[Ut]),--Ut)}function tt(){var At,$t=[],Ut=function(mn,Zn){var Bn;if(typeof Symbol>"u"||null==mn[Symbol.iterator]){if(Array.isArray(mn)||(Bn=function(Ln,Gn){if(Ln){if("string"==typeof Ln)return od(Ln,undefined);var Ct=Object.prototype.toString.call(Ln).slice(8,-1);return"Object"===Ct&&Ln.constructor&&(Ct=Ln.constructor.name),"Map"===Ct||"Set"===Ct?Array.from(Ln):"Arguments"===Ct||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ct)?od(Ln,undefined):void 0}}(mn))){Bn&&(mn=Bn);var Hn=0,nr=function(){};return{s:nr,n:function(){return Hn>=mn.length?{done:!0}:{done:!1,value:mn[Hn++]}},e:function(Ln){throw Ln},f:nr}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Xt,Dn=!0,Fn=!1;return{s:function(){Bn=mn[Symbol.iterator]()},n:function(){var Ln=Bn.next();return Dn=Ln.done,Ln},e:function(Ln){Fn=!0,Xt=Ln},f:function(){try{Dn||null==Bn.return||Bn.return()}finally{if(Fn)throw Xt}}}}(oe.getTextTracks());try{for(Ut.s();!(At=Ut.n()).done;){var rn=At.value;rn.manualMode===E.Z.TEXT_SHOWING&&$t.push(rn)}}catch(mn){Ut.e(mn)}finally{Ut.f()}return $t}function Ye(At){return At>=0&&W[At]?oe.getTextTrack(W[At].kind,W[At].id,W[At].lang,W[At].isTTML,W[At].isEmbedded):null}function Lt(At){var $t=this;if(At!==k){var Ut=Ye(k=At);_t.call(this,Ut),ae&&(clearInterval(ae),ae=null),Ut&&"html"===Ut.renderingType&&(xe.call(this,Ut,!0),window.ResizeObserver?(he=new window.ResizeObserver(function(){xe.call($t,Ut,!0)})).observe(oe.getElement()):ae=setInterval(xe.bind(this,Ut),500))}}function _t(At){Jn.call(this),At&&"html"===At.renderingType?Mn.call(this):er.call(this)}function Yt(At,$t){if(!At.cues)return!1;for(var Ut=0;Ut<At.cues.length;Ut++)if(At.cues[Ut].startTime===$t.startTime&&At.cues[Ut].endTime===$t.endTime)return!0;return!1}function Kt(At,$t,Ut){var rn=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return!!At&&(isNaN($t)||(rn?At.startTime:At.endTime)>=$t)&&(isNaN(Ut)||(rn?At.endTime:At.startTime)<=Ut)}function Wt(At,$t,Ut){var rn,mn;if(!(Ut<$t)&&At&&(At.cues||At.manualCueList)){var Zn=At.cues&&At.cues.length>0?"native":"custom",Bn="native"===Zn?At.cues:At.manualCueList;if(!Bn||0===Bn.length)return;for(var Hn=Bn.length-1;Hn>=0;Hn--)!Kt(Bn[Hn],$t,Ut,!0)||(rn=Bn[Hn],mn=oe.getTime(),rn.startTime>=mn&&rn.endTime<=mn)||("native"===Zn?At.removeCue(Bn[Hn]):(wn(Bn[Hn]),delete At.manualCueList[Hn]))}}function Un(At,$t,Ut){var rn=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(At&&(At.cues||At.manualCueList)){var mn=At.cues&&At.cues.length>0?"native":"custom",Zn="native"===mn?At.cues:At.manualCueList;if(!Zn||0===Zn.length)return;for(var Hn=Zn.length-1;Hn>=0;Hn--)Kt(Zn[Hn],$t,Ut,rn)&&("native"===mn?(Zn[Hn].onexit&&Zn[Hn].onexit(),At.removeCue(Zn[Hn])):(wn(Zn[Hn]),delete At.manualCueList[Hn]))}}function Mn(){var At=document.getElementById("native-cue-style");if(!At){(At=document.createElement("style")).id="native-cue-style",document.head.appendChild(At);var $t=At.sheet,Ut=oe.getElement();try{Ut&&$t.insertRule(Ut.id?"#"+Ut.id+"::cue {background: transparent}":0!==Ut.classList.length?"."+Ut.className+"::cue {background: transparent}":"video::cue {background: transparent}",0)}catch(rn){w.info(""+rn.message)}}}function er(){var At=document.getElementById("native-cue-style");At&&document.head.removeChild(At)}function Jn(){if(ee)for(;ee.firstChild;)ee.removeChild(ee.firstChild)}return S={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(H=window.VTTCue||window.TextTrackCue,W=[],Y=[],k=-1,X=0,le=0,ve=0,fe=0,ee=null,de=null,ae=null,Ne=!1,Ze=2147483647,Fe=null,Oe="requestAnimationFrame"in window,void 0!==document.fullscreenElement?He="fullscreenElement":void 0!==document.webkitIsFullScreen?He="webkitIsFullScreen":document.msFullscreenElement?He="msFullscreenElement":document.mozFullScreen&&(He="mozFullScreen"))},getStreamId:function(){return te.id},addTextTrack:function(At){W.push(At)},addCaptions:ft,createTracks:function(){var At=re.get().streaming.text.dispatchForManualRendering;W.sort(function(Gn,Ct){return Gn.index-Ct.index}),ee=oe.getTTMLRenderingDiv(),de=oe.getVttRenderingDiv();for(var $t,Ut,Hn=-1,nr=0;nr<W.length;nr++){var Xt=(Ut=($t=W[nr]).kind,oe.addTextTrack(Ut,void 0!==$t.id?$t.id:$t.lang,$t.lang,$t.isTTML,$t.isEmbedded));Y.push(Xt),W[nr].defaultTrack&&(Xt.default=!0,Hn=nr);var Dn=Ye(nr);Dn&&(Dn.mode=E.Z.TEXT_SHOWING,Dn.renderingType=ee&&(W[nr].isTTML||W[nr].isEmbedded)?"html":"default"),ft(nr,0,W[nr].captionData),P.trigger(T.Z.TEXT_TRACK_ADDED)}if(Lt.call(this,Hn),Hn>=0){P.on(T.Z.PLAYBACK_METADATA_LOADED,function Gn(){var Ct=Ye(Hn);Ct&&"html"===Ct.renderingType&&xe.call(this,Ct,!0),P.off(T.Z.PLAYBACK_METADATA_LOADED,Gn,this)},this);for(var Fn=0;Fn<W.length;Fn++){var Ln=Ye(Fn);Ln&&(Ln.mode=Fn!==Hn||At?E.Z.TEXT_HIDDEN:E.Z.TEXT_SHOWING,Ln.manualMode=Fn===Hn?E.Z.TEXT_SHOWING:E.Z.TEXT_HIDDEN)}}P.trigger(D.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:k,tracks:W,streamId:te.id})},getCurrentTrackIdx:function(){return k},setCurrentTrackIdx:Lt,getTrackIdxForId:function(At){for(var $t=-1,Ut=0;Ut<W.length;Ut++)if(W[Ut].id===At){$t=Ut;break}return $t},getCurrentTrackInfo:function(){return W[k]},setModeForTrackIdx:function(At,$t){var Ut=Ye(At);Ut&&Ut.mode!==$t&&(Ut.mode=$t),Ut&&Ut.manualMode!==$t&&(Ut.manualMode=$t)},deleteCuesFromTrackIdx:function(At,$t,Ut){var rn=Ye(At);rn&&Un(rn,$t,Ut)},deleteAllTextTracks:function(){for(var At=Y?Y.length:0,$t=0;$t<At;$t++){var Ut=Ye($t);Ut&&Un.call(this,Ut,te.start,te.start+te.duration,!1)}Y=[],W=[],ae&&(clearInterval(ae),ae=null),he&&oe&&(he.unobserve(oe.getElement()),he=null),k=-1,Jn.call(this)},manualCueProcessing:function(At){var $t=tt();if($t&&$t.length>0){var Ut=$t[0].manualCueList;Ut&&Ut.length>0&&Ut.forEach(function(rn){rn.startTime<=At&&rn.endTime>=At&&!rn.isActive?(rn.isActive=!0,re.get().streaming.text.dispatchForManualRendering?dt(rn):WebVTT.processCues(window,[rn],de,rn.cueID)):rn.isActive&&(rn.startTime>At||rn.endTime<At)&&(rn.isActive=!1,re.get().streaming.text.dispatchForManualRendering?st(rn):wn(rn))})}},disableManualTracks:function(){var At=tt();if(At&&At.length>0){var $t=At[0].manualCueList;$t&&$t.length>0&&$t.forEach(function(Ut){if(Ut.isActive)if(Ut.isActive=!1,re.get().streaming.text.dispatchForManualRendering)st(Ut);else if(de)for(var rn=de.childNodes,mn=0;mn<rn.length;++mn)rn[mn].id===Ut.cueID&&(de.removeChild(rn[mn]),--mn)})}}},w=(0,B.Z)(Ve).getInstance().getLogger(S),S}ac.__dashjs_factory_name="TextTracks";var Th=j.Z.getClassFactory(ac);function sc(){var A,S,w,H,W,Y;function X(ee){var de=ee.split(":"),ae=de.length-1;return ee=60*parseInt(de[ae-1],10)+parseFloat(de[ae]),2===ae&&(ee+=3600*parseInt(de[0],10)),ee}function le(ee){var de=ee.split(H),ae=de[1].split(Y);return ae.shift(),de[1]=ae[0],ae.shift(),{cuePoints:de,styles:ve(ae)}}function ve(ee){var de={};return ee.forEach(function(ae){if(ae.split(/:/).length>1){var He=ae.split(/:/)[1],Ne=!1;He&&-1!=He.search(/%/)&&(Ne=!0,He=parseInt(He.replace(/%/,""),10)),(ae.match(/align/)||ae.match(/A/))&&(de.align=He),(ae.match(/line/)||ae.match(/L/))&&(de.line="auto"===He?He:parseInt(He,10),Ne&&(de.snapToLines=!1)),(ae.match(/position/)||ae.match(/P/))&&(de.position=He),(ae.match(/size/)||ae.match(/S/))&&(de.size=He)}}),de}function fe(ee,de){for(var ae,He=de,Ne="",Fe="";""!==ee[He]&&He<ee.length;)He++;if((ae=He-de)>1)for(var Ze=0;Ze<ae;Ze++){if((Fe=ee[de+Ze]).match(H)){Ne="";break}Ne+=Fe,Ze!==ae-1&&(Ne+="\n")}else(Fe=ee[de]).match(H)||(Ne=Fe);return Ne}return A={parse:function(ee){var de,ae,He=[];if(!ee)return He;de=(ee=ee.split(w)).length,ae=-1;for(var Ne=0;Ne<de;Ne++){var Fe=ee[Ne];if(Fe.length>0&&"WEBVTT"!==Fe&&Fe.match(H)){var Ze=le(Fe),he=Ze.cuePoints,Oe=Ze.styles,me=fe(ee,Ne+1),Ve=X(he[0].replace(W,"")),P=X(he[1].replace(W,""));!isNaN(Ve)&&!isNaN(P)&&Ve>=ae&&P>Ve?""!==me?(ae=Ve,He.push({start:Ve,end:P,data:me,styles:Oe})):S.error("Skipping cue due to empty/malformed cue text"):S.error("Skipping cue due to incorrect cue timing")}}return He},getCaptionStyles:ve},S=(0,B.Z)(this.context).getInstance().getLogger(A),w=/(?:\r\n|\r|\n)/gm,H=/-->/,W=/(^[\s]+|[\s]+$)/g,Y=/\s\b/g,A}sc.__dashjs_factory_name="VTTParser";var lc=j.Z.getSingletonFactory(sc);function ef(){var A,S;return A={parse:function(w){var H=[];return S.oncue=function(W){W.start=W.startTime,W.end=W.endTime,W.data=W.text,W.styles={align:W.align,line:W.line,position:W.position,size:W.size},H.push(W)},S.parse(w),H}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(S=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch{}}(),A}ef.__dashjs_factory_name="VttCustomRenderingParser";var mu=j.Z.getSingletonFactory(ef);function sd(){var A,S,w=this.context,H=(0,V.Z)(w).getInstance(),W=0;return A={parse:function(Y,k,X,le,ve){var fe,ee,de,ae="",He=[],Ne={},Fe={},Ze="",he="",Oe={onOpenTag:function(te,re,z){if(z[" imagetype"]&&!z[" imageType"]&&(H.trigger(T.Z.CONFORMANCE_VIOLATION,{level:za.LEVELS.ERROR,event:za.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),z[" imageType"]=z[" imagetype"]),"image"===re&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===te||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===te)){if(!z[" imageType"]||"PNG"!==z[" imageType"].value)return void S.warn("smpte-tt imageType != PNG. Discarded");Ze=z["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){Ze&&(Fe[Ze]=he.trim()),he="",Ze=""},onText:function(te){Ze&&(he+=te)}};if(!Y)throw ae="no ttml data to parse",new Error(ae);Ne.data=Y,H.trigger(D.Z.TTML_TO_PARSE,Ne);var me=(0,oc.fromXML)(Ne.data,function(te){ae=te},Oe);H.trigger(D.Z.TTML_PARSED,{ttmlString:Ne.data,ttmlDoc:me});var Ve,P=me.getMediaTimeEvents();for(de=0;de<P.length;de++){var oe=(0,oc.generateISD)(me,P[de],function(te){ae=te});oe.contents.some(function(te){return te.contents.length})&&(fe=P[de]+k)<(ee=P[de+1]+k)&&He.push({start:fe,end:ee,type:"html",cueID:(Ve="cue_TTML_"+W,W++,Ve),isd:oe,images:ve,embeddedImages:Fe})}if(""!==ae)throw S.error(ae),new Error(ae);return He}},S=(0,B.Z)(w).getInstance().getLogger(A),A}sd.__dashjs_factory_name="TTMLParser";var ld=j.Z.getSingletonFactory(sd);function tf(A,S){var w=Object.keys(A);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(A);S&&(H=H.filter(function(W){return Object.getOwnPropertyDescriptor(A,W).enumerable})),w.push.apply(w,H)}return w}function vu(A){for(var S=1;S<arguments.length;S++){var w=null!=arguments[S]?arguments[S]:{};S%2?tf(Object(w),!0).forEach(function(H){uc(A,H,w[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(w)):tf(Object(w)).forEach(function(H){Object.defineProperty(A,H,Object.getOwnPropertyDescriptor(w,H))})}return A}function uc(A,S,w){return S in A?Object.defineProperty(A,S,{value:w,enumerable:!0,configurable:!0,writable:!0}):A[S]=w,A}function aa(A,S){(null==S||S>A.length)&&(S=A.length);for(var w=0,H=new Array(S);w<S;w++)H[w]=A[w];return H}function Ua(A){var S,w,H,W=this.context,Y=(0,V.Z)(W).getInstance(),k=(0,xt.Z)(W).getInstance(),X=A.adapter,le=A.baseURLController;function ve(de,ae){var He,Ne,Fe=!1;if(le.resolve()){var Ze=X.getVoRepresentations(de);Ze&&Ze.length>0&&(He=le.resolve(Ze[0].path).url)}var he=de.essentialPropertiesAsArray.filter(function(me){return me.schemeIdUri&&me.schemeIdUri===E.Z.FONT_DOWNLOAD_DVB_SCHEME}),Oe=de.supplementalPropertiesAsArray.filter(function(me){return me.schemeIdUri&&me.schemeIdUri===E.Z.FONT_DOWNLOAD_DVB_SCHEME});he.length>0?(Fe=!0,Ne=he):Ne=Oe,Ne.forEach(function(me){if((te=me).value&&"1"===te.value&&te.dvbUrl&&te.dvbUrl.length>0&&te.dvbFontFamily&&te.dvbFontFamily.length>0&&te.dvbMimeType&&(te.dvbMimeType===E.Z.OFF_MIMETYPE||te.dvbMimeType===E.Z.WOFF_MIMETYPE)){var Ve=(oe=He,k.isPathAbsolute(P=me.dvbUrl)?P:k.isRelative(P)?oe?k.resolve(P,oe):k.resolve(P):P);H.push({fontFamily:me.dvbFontFamily,url:Ve,mimeType:me.dvbMimeType,trackId:de.id,streamId:ae,isEssential:Fe,status:"unloaded",fontFace:new FontFace(me.dvbFontFamily,"url(".concat(Ve,")"),{display:"swap"})})}var te,P,oe})}function fe(de,ae){H[de]=vu(vu({},H[de]),{},{status:ae})}function ee(){H=[]}return S={addFontsFromTracks:function(de,ae){if(de&&Array.isArray(de)&&ae)for(var He=0;He<de.length;He++)ve(de[He],ae)},downloadFonts:function(){for(var de=function(He){var Ne=H[He];document.fonts.add(Ne.fontFace),Y.trigger(T.Z.DVB_FONT_DOWNLOAD_ADDED,Ne),Ne.fontFace.load().then(function(){fe(He,"loaded"),Y.trigger(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,Ne)},function(Fe){fe(He,"error"),w.debug("Font download error: ",Fe),Y.trigger(T.Z.DVB_FONT_DOWNLOAD_FAILED,Ne)})},ae=0;ae<H.length;ae++)de(ae)},getFonts:function(){return H},getFontsForTrackId:function(de){return H.filter(function(ae){return ae.trackId&&ae.trackId===de})},reset:function(){(function(){var de,ae=function(Fe,Ze){var he;if(typeof Symbol>"u"||null==Fe[Symbol.iterator]){if(Array.isArray(Fe)||(he=function(te,re){if(te){if("string"==typeof te)return aa(te,undefined);var z=Object.prototype.toString.call(te).slice(8,-1);return"Object"===z&&te.constructor&&(z=te.constructor.name),"Map"===z||"Set"===z?Array.from(te):"Arguments"===z||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z)?aa(te,undefined):void 0}}(Fe))){he&&(Fe=he);var Oe=0,me=function(){};return{s:me,n:function(){return Oe>=Fe.length?{done:!0}:{done:!1,value:Fe[Oe++]}},e:function(te){throw te},f:me}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ve,P=!0,oe=!1;return{s:function(){he=Fe[Symbol.iterator]()},n:function(){var te=he.next();return P=te.done,te},e:function(te){oe=!0,Ve=te},f:function(){try{P||null==he.return||he.return()}finally{if(oe)throw Ve}}}}(H);try{for(ae.s();!(de=ae.n()).done;){var He=de.value,Ne=document.fonts.delete(He.fontFace);w.debug("Removal of fontFamily: ".concat(He.fontFamily," was ").concat(Ne?"successful":"unsuccessful"))}}catch(Fe){ae.e(Fe)}finally{ae.f()}})(),ee()}},w=(0,B.Z)(W).getInstance().getLogger(S),ee(),S}Ua.__dashjs_factory_name="DVBFonts";var ud=j.Z.getClassFactory(Ua);function cc(A){var S,w,H,W,Y,k,X,le,ve,fe,ee,de,ae,He,Ne=this.context,Fe=A.adapter,Ze=A.errHandler,he=A.manifestModel,Oe=A.mediaController,me=A.baseURLController,Ve=A.videoModel,P=A.settings;function oe(Re){if(He.error("Could not download ".concat(Re.isEssential?"an essential":"a"," font - fontFamily: ").concat(Re.fontFamily,", url: ").concat(Re.url)),Re.isEssential){var qe=W[Re.streamId].getTrackIdxForId(Re.trackId);W[Re.streamId].setModeForTrackIdx(qe,E.Z.TEXT_DISABLED)}}function te(Re){if(He.debug("Successfully downloaded ".concat(Re.isEssential?"an essential":"a"," font - fontFamily: ").concat(Re.fontFamily,", url: ").concat(Re.url)),Re.isEssential){var qe=W[Re.streamId].getTrackIdxForId(Re.trackId);qe===W[Re.streamId].getCurrentTrackIdx()?W[Re.streamId].setModeForTrackIdx(qe,E.Z.TEXT_SHOWING):W[Re.streamId].setModeForTrackIdx(qe,E.Z.TEXT_HIDDEN)}}function re(Re){var qe=Re.tracks,ft=Re.index,nt=Re.streamId;if(!1===P.get().streaming.text.defaultEnabled&&!be()||de)ke(nt,-1);else{var dt=Oe.getCurrentTrackFor(E.Z.TEXT,nt);if(dt){var st={lang:dt.lang,role:dt.roles[0],index:dt.index,codec:dt.codec,accessibility:dt.accessibility[0]};qe.some(function(Ft,Gt){if(Oe.matchSettings(st,Ft))return ke(nt,Gt),ft=Gt,!0})}ve=!1}w[nt].lastEnabledIndex=ft,le.trigger(T.Z.TEXT_TRACKS_ADDED,{enabled:be(),index:ft,tracks:qe,streamId:nt}),ee=!0,ae.addFontsFromTracks(qe,nt),ae.getFonts().forEach(function(Ft){if(Ft.isEssential){var Gt=W[Ft.streamId].getTrackIdxForId(Ft.trackId);W[Ft.streamId].setModeForTrackIdx(Gt,E.Z.TEXT_DISABLED)}}),ae.downloadFonts()}function z(Re){try{var qe=Re.streamId;if(!W[qe]||isNaN(Re.time))return;W[qe].manualCueProcessing(Re.time)}catch{}}function xe(Re){try{var qe=Re.streamId;if(!W[qe])return;W[qe].disableManualTracks()}catch{}}function be(){var Re=!0;return ve&&!fe&&(Re=!1),Re}function ke(Re,qe){(ve=-1===qe)&&Oe&&Oe.saveTextSettingsDisabled();var ft=we(Re);if(ft!==qe&&W[Re]){W[Re].disableManualTracks();var nt=W[Re].getCurrentTrackInfo(),dt=nt?Ve.getTextTrack(nt.kind,nt.id,nt.lang,nt.isTTML,nt.isEmbedded):null;dt&&dt.mode!==E.Z.TEXT_DISABLED&&W[Re].setModeForTrackIdx(ft,E.Z.TEXT_HIDDEN),W[Re].setCurrentTrackIdx(qe),nt=W[Re].getCurrentTrackInfo();var st=P.get().streaming.text.dispatchForManualRendering;nt&&!st&&nt.mode!==E.Z.TEXT_DISABLED&&W[Re].setModeForTrackIdx(qe,E.Z.TEXT_SHOWING),nt&&nt.isFragmented&&!nt.isEmbedded?function(Ft,Gt,Ot){if(H[Ft])for(var kt=H[Ft].getConfig().fragmentedTracks,wn=0;wn<kt.length;wn++){var tt=kt[wn];if(Gt.lang===tt.lang&&(tt.id?Gt.id===tt.id:Gt.index===tt.index)){var Ye=Oe.getCurrentTrackFor(E.Z.TEXT,Ft);(tt.id?Ye.id!==tt.id:Ye.index!==tt.index)?(W[Ft].deleteCuesFromTrackIdx(Ot),H[Ft].setCurrentFragmentedTrackIdx(wn)):-1===Ot&&le.trigger(D.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:Ft,mediaType:E.Z.TEXT})}}}(Re,nt,ft):nt&&!nt.isFragmented&&le.trigger(D.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:nt},{streamId:Re,mediaType:E.Z.TEXT}),Oe.setTrack(nt)}}function we(Re){return W[Re].getCurrentTrackIdx()}function ie(){H={},W={},w={},ve=!0,ee=!1,de=!1}return S={deactivateStream:function(Re){if(Re){var qe=Re.id;H[qe]&&H[qe].resetMediaInfos(),W[qe]&&W[qe].deleteAllTextTracks()}},initialize:function(){ae=ud(Ne).create({adapter:Fe,baseURLController:me}),le.on(D.Z.TEXT_TRACKS_QUEUE_INITIALIZED,re,S),le.on(D.Z.DVB_FONT_DOWNLOAD_FAILED,oe,S),le.on(D.Z.DVB_FONT_DOWNLOAD_COMPLETE,te,S),P.get().streaming.text.webvtt.customRenderingEnabled&&(le.on(D.Z.PLAYBACK_TIME_UPDATED,z,S),le.on(D.Z.PLAYBACK_SEEKING,xe,S))},initializeForStream:function(Re){var qe=Re.id,ft=Th(Ne).create({videoModel:Ve,settings:P,streamInfo:Re});ft.initialize(),W[qe]=ft;var nt=Jc(Ne).create({errHandler:Ze,adapter:Fe,dvbFonts:ae,manifestModel:he,mediaController:Oe,videoModel:Ve,textTracks:ft,vttParser:Y,vttCustomRenderingParser:k,ttmlParser:X,streamInfo:Re,settings:P});nt.initialize(),H[qe]=nt,w[qe]={},w[qe].lastEnabledIndex=-1},createTracks:function(Re){var qe=Re.id;W[qe]&&W[qe].createTracks()},getTextSourceBuffer:function(Re){var qe=Re.id;if(H&&H[qe])return H[qe]},getAllTracksAreDisabled:function(){return ve},addEmbeddedTrack:function(Re,qe){var ft=Re.id;H[ft]&&H[ft].addEmbeddedTrack(qe)},enableText:function(Re,qe){return(0,Ie.PS)(qe,"boolean"),be()!==qe&&(qe&&ke(Re,w[Re].lastEnabledIndex),qe||(w[Re].lastEnabledIndex=we(Re),ee?ke(Re,-1):de=!0)),!0},isTextEnabled:be,setTextTrack:ke,getCurrentTrackIdx:we,enableForcedTextStreaming:function(Re){return(0,Ie.PS)(Re,"boolean"),fe=Re,!0},addMediaInfosToBuffer:function(Re,qe,ft){var dt=Re.id;H[dt]&&H[dt].addMediaInfos(qe,ft,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)},reset:function(){ae.reset(),ie(),le.off(D.Z.TEXT_TRACKS_QUEUE_INITIALIZED,re,S),le.off(D.Z.DVB_FONT_DOWNLOAD_FAILED,oe,S),le.off(D.Z.DVB_FONT_DOWNLOAD_COMPLETE,te,S),P.get().streaming.text.webvtt.customRenderingEnabled&&(le.off(D.Z.PLAYBACK_TIME_UPDATED,z,S),le.off(D.Z.PLAYBACK_SEEKING,xe,S)),Object.keys(H).forEach(function(Re){H[Re].resetEmbedded(),H[Re].reset()})}},fe=!1,ee=!1,de=!1,Y=lc(Ne).getInstance(),k=mu(Ne).getInstance(),X=ld(Ne).getInstance(),le=(0,V.Z)(Ne).getInstance(),He=(0,B.Z)(Ne).getInstance().getLogger(S),ie(),S}cc.__dashjs_factory_name="TextController";var cd=j.Z.getClassFactory(cc);function yu(){var A,S,w,H,W,Y,k,X,le,ve,fe,ee,de,ae,He,Ne,Fe,Ze,he,Oe,me,Ve,P,oe,te,re,z,xe,be,ke,we,ie,Re,qe,ft,nt,dt,st,Ft,Gt="You must first call initialize() and set a source before calling this method",Ot="You must first call initialize() and set a valid source and view before calling this method",kt="You must first call attachView() to set the video element before calling this method",wn="You must first call attachSource() with a valid source before calling this method",tt="MediaPlayer not initialized!",Ye=this.context,Lt=(0,V.Z)(Ye).getInstance(),_t=(0,ot.Z)(Ye).getInstance(),Yt=(0,B.Z)(Ye).getInstance({settings:_t});function Kt(){nr(null),Bn(null),H=null,ae&&(ae.reset(),ae=null),He&&(He.reset(),He=null),Oe&&Oe.reset(),_t.reset(),Fe&&(Fe.reset(),Fe=null)}function Wt(){return!!w&&!!nt.getElement()}function Un(){return(0,li.e)()}function Mn(){if(!k)throw Ot;return xe.isPaused()}function er(){if(!k)throw Ot;return xe.getIsDynamic()}function Jn(Ge){var We=te&&te.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,Mt=ie.getCurrentDVRInfo(We);if(!Mt)return 0;var gn=xe.getOriginalLiveDelay(),An=Mt.range.start+Ge;return An>Mt.range.end-gn&&(An=Mt.range.end-gn),An}function At(Ge){if(!k)throw Ot;var We=Zn().currentTime;if(void 0!==Ge)We=te.getTimeRelativeToStreamId(We,Ge);else if(xe.getIsDynamic()){var Mt=te&&te.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,gn=ie.getCurrentDVRInfo(Mt);We=null===gn||0===We?0:Math.max(0,We-gn.range.start)}return We}function $t(){if(!k)throw Ot;var Ge=Zn().duration;if(xe.getIsDynamic()){var We=te&&te.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,Mt=ie.getCurrentDVRInfo(We);Ge=Mt?Mt.range.end-Mt.range.start:0}return Ge}function Ut(Ge){(0,Ie.PS)(Ge,"boolean"),X=Ge}function rn(){Oe.restoreDefaultUTCTimingSources()}function mn(){return ie}function Zn(){if(!nt.getElement())throw kt;return nt.getElement()}function Bn(Ge){if(!W)throw tt;nt.setElement(Ge),Ge&&(Gn(),function(){if(!He){var We=dashjs.MetricsReporting;if("function"==typeof We){var Mt=We(Ye).create();He=Mt.createMetricsReporting({debug:Yt,eventBus:Lt,mediaElement:Zn(),adapter:Ze,dashMetrics:ie,mediaPlayerModel:he,events:D.Z,constants:E.Z,metricsConstants:F.Z})}}}(),function(){if(!Ne){var We=dashjs.MssHandler;"function"==typeof We&&(De.extend(We.errors),Ne=We(Ye).create({eventBus:Lt,mediaPlayerModel:he,dashMetrics:ie,manifestModel:Re,playbackController:xe,streamController:te,protectionController:ae,baseURLController:Ve,errHandler:me,events:D.Z,constants:E.Z,debug:Yt,initSegmentType:gt.w.INIT_SEGMENT_TYPE,BASE64:xl,ISOBoxer:Ps,settings:_t}))}}(),te&&te.switchToVideoElement(le)),k&&Dn(),jt(le)}function Hn(Ge){if(!Y)throw Gt;var We=te.getActiveStreamInfo();return We?de.getTracksFor(Ge,We.id):[]}function nr(Ge){var We=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;if(!W)throw tt;"string"==typeof Ge&&dt.initialize(Ge),null==We&&(We=NaN),isNaN(We)||(We=Math.max(0,We)),le=We,w=Ge,(Y||k)&&Dn(),Wt()&&jt(le)}function Xt(){if(!Y)throw Gt;var Ge=te.getActiveStreamInfo();return Ge?te.getStreamById(Ge.id):null}function Dn(){k=!1,Y=!1,Ze.reset(),te.reset(),z.reset(),we.reset(),xe.reset(),be.reset(),ke.reset(),ve.reset(),de.reset(),Ft.reset(),ae&&(_t.get().streaming.protection.keepProtectionMediaKeys?ae.stop():(ae.reset(),ae=null,Gn())),re.reset(),qe.reset(),ft.reset()}function Ln(){return zu(Ye).create({debug:Yt,errHandler:me,dashMetrics:ie,mediaPlayerModel:he,requestModifier:(0,rt.Z)(Ye).getInstance(),mssHandler:Ne,settings:_t})}function Gn(){if(ae)return ae;var Ge=dashjs.Protection;if("function"==typeof Ge){var We=Ge(Ye).create();return D.Z.extend(Ge.events),T.Z.extend(Ge.events,{publicOnly:!0}),De.extend(Ge.errors),P||(P=(0,cu.Z)(Ye).getInstance()),ae=We.createProtectionSystem({debug:Yt,errHandler:me,videoModel:nt,customParametersModel:Oe,capabilities:P,eventBus:Lt,events:D.Z,BASE64:xl,constants:E.Z,cmcdModel:qe,settings:_t})}return null}function Ct(){if(!W)throw tt;if(Fe)return Fe;var Ge=dashjs.OfflineController;if("function"==typeof Ge){D.Z.extend(Ge.events),T.Z.extend(Ge.events,{publicOnly:!0}),De.extend(Ge.errors);var We=Ln(),Mt=kc(Ye).create();return Mt.setConfig({manifestModel:Re,adapter:Ze,manifestLoader:We,errHandler:me,contentSteeringController:ke}),Fe=Ge(Ye).create({debug:Yt,manifestUpdater:Mt,baseURLController:Ve,manifestLoader:We,manifestModel:Re,mediaPlayerModel:he,abrController:ve,playbackController:xe,adapter:Ze,errHandler:me,dashMetrics:ie,timelineConverter:ee,segmentBaseController:Ft,schemeLoaderFactory:fe,eventBus:Lt,events:D.Z,errors:De,constants:E.Z,settings:_t,dashConstants:_.Z,urlUtils:(0,xt.Z)(Ye).getInstance()})}return null}function ct(Ge){var We=te&&te.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,Mt=ie.getCurrentDVRInfo(We);return Mt?Ge+(Mt.manifestInfo.availableFrom.getTime()/1e3+Mt.range.start):0}function jt(){var Ge=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN;Fe&&Fe.resetRecords(),!Y&&w&&(Y=!0,S.info("Streaming Initialized"),function Fn(){var Ge=Ln();te||(te=Cs(Ye).getInstance()),re||(re=cd(Ye).create({errHandler:me,manifestModel:Re,adapter:Ze,mediaController:de,baseURLController:Ve,videoModel:nt,settings:_t})),oe.setConfig({capabilities:P,customParametersModel:Oe,adapter:Ze,settings:_t,manifestModel:Re,errHandler:me}),te.setConfig({capabilities:P,capabilitiesFilter:oe,manifestLoader:Ge,manifestModel:Re,mediaPlayerModel:he,customParametersModel:Oe,protectionController:ae,textController:re,adapter:Ze,dashMetrics:ie,errHandler:me,timelineConverter:ee,videoModel:nt,playbackController:xe,serviceDescriptionController:be,contentSteeringController:ke,abrController:ve,mediaController:de,settings:_t,baseURLController:Ve,uriFragmentModel:dt,segmentBaseController:Ft}),z.setConfig({settings:_t,playbackController:xe,streamController:te,videoModel:nt,timelineConverter:ee,adapter:Ze}),xe.setConfig({streamController:te,serviceDescriptionController:be,dashMetrics:ie,adapter:Ze,videoModel:nt,timelineConverter:ee,settings:_t}),we.setConfig({streamController:te,playbackController:xe,mediaPlayerModel:he,videoModel:nt,settings:_t}),ve.setConfig({streamController:te,domStorage:st,mediaPlayerModel:he,customParametersModel:Oe,cmsdModel:ft,dashMetrics:ie,adapter:Ze,videoModel:nt,settings:_t}),qe.setConfig({abrController:ve,dashMetrics:ie,playbackController:xe}),ft.setConfig({}),ve.initialize(),te.initialize(X,H),re.initialize(),z.initialize(),we.initialize(),qe.initialize(),ft.initialize(),ke.initialize(),Ft.initialize()}(),"string"==typeof w?te.load(w,Ge):te.loadWithManifest(w,Ge)),!k&&Wt()&&(k=!0,S.info("Playback Initialized"))}return A={initialize:function(Ge,We,Mt){var gn=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;P||(P=(0,cu.Z)(Ye).getInstance()).setConfig({settings:_t}),me||(me=Wo(Ye).getInstance()),P.supportsMediaSource()?(W||(W=!0,ee=Nl(Ye).getInstance(),ve||(ve=hs(Ye).getInstance()).setConfig({settings:_t}),fe||(fe=Ni(Ye).getInstance()),xe||(xe=L(Ye).getInstance()),de||(de=Fu(Ye).getInstance()),te||(te=Cs(Ye).getInstance()),z||(z=Uc(Ye).getInstance()),we||(we=zr(Ye).getInstance()),be||(be=Kf(Ye).getInstance()),ke||(ke=qo(Ye).getInstance()),oe||(oe=Zi(Ye).getInstance()),Ze=Wc(Ye).getInstance(),Re=fs(Ye).getInstance(),qe=vr(Ye).getInstance(),ft=yn(Ye).getInstance(),ie=rc(Ye).getInstance({settings:_t}),st=Rl(Ye).getInstance({settings:_t}),Ze.setConfig({constants:E.Z,cea608parser:G(),errHandler:me,BASE64:xl}),Ve||(Ve=Zc(Ye).create()),Ve.setConfig({adapter:Ze,contentSteeringController:ke}),be.setConfig({adapter:Ze}),Ft||(Ft=ps(Ye).getInstance({dashMetrics:ie,mediaPlayerModel:he,errHandler:me,baseURLController:Ve,events:D.Z,eventBus:Lt,debug:Yt,boxParser:(0,zs.Z)(Ye).getInstance(),requestModifier:(0,rt.Z)(Ye).getInstance(),errors:De})),de.setConfig({domStorage:st,settings:_t,customParametersModel:Oe}),he.setConfig({playbackController:xe,serviceDescriptionController:be}),ke.setConfig({adapter:Ze,errHandler:me,dashMetrics:ie,mediaPlayerModel:he,manifestModel:Re,serviceDescriptionController:be,eventBus:Lt,requestModifier:(0,rt.Z)(Ye).getInstance()}),rn(),Ut(void 0===Mt||Mt),Ct()),Ge&&Bn(Ge),We&&nr(We,gn),S.info("[dash.js "+Un()+"] MediaPlayer has been initialized")):me.error(new Le.Z(De.CAPABILITY_MEDIASOURCE_ERROR_CODE,De.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(Ge){Ge&&(Ge.capabilities&&(P=Ge.capabilities),Ge.capabilitiesFilter&&(oe=Ge.capabilitiesFilter),Ge.streamController&&(te=Ge.streamController),Ge.textController&&(re=Ge.textController),Ge.gapController&&(z=Ge.gapController),Ge.playbackController&&(xe=Ge.playbackController),Ge.serviceDescriptionController&&(be=Ge.serviceDescriptionController),Ge.contentSteeringController&&(ke=Ge.contentSteeringController),Ge.catchupController&&(we=Ge.catchupController),Ge.mediaPlayerModel&&(he=Ge.mediaPlayerModel),Ge.customParametersModel&&(Oe=Ge.customParametersModel),Ge.abrController&&(ve=Ge.abrController),Ge.schemeLoaderFactory&&(fe=Ge.schemeLoaderFactory),Ge.mediaController&&(de=Ge.mediaController),Ge.settings&&(_t=Ge.settings))},on:function(Ge,We,Mt,gn){Lt.on(Ge,We,Mt,gn)},off:function(Ge,We,Mt){Lt.off(Ge,We,Mt)},extend:function(Ge,We,Mt){j.Z.extend(Ge,We,Mt,Ye)},attachView:Bn,attachSource:nr,refreshManifest:function(Ge){if(!W)throw tt;if(!Wt())return Ge(null,wn);var We=this;"function"==typeof Ge&&Lt.on(D.Z.INTERNAL_MANIFEST_LOADED,function Mt(gn){Lt.off(D.Z.INTERNAL_MANIFEST_LOADED,Mt,We),gn.error?Ge(null,gn.error):Ge(gn.manifest)},We),te.refreshManifest()},isReady:Wt,preload:function(){if(!nt.getElement()&&!Y){if(!w)throw wn;jt(le)}},play:function(){if(!k)throw Ot;(!X||Mn()&&k)&&xe.play(!0)},isPaused:Mn,pause:function(){if(!k)throw Ot;xe.pause()},isSeeking:function(){if(!k)throw Ot;return xe.isSeeking()},isDynamic:er,getLowLatencyModeEnabled:function(){if(!k)throw Ot;return xe.getLowLatencyModeEnabled()},seek:function(Ge){if(!k)throw Ot;if((0,Ie.PS)(Ge,"number"),isNaN(Ge))throw E.Z.BAD_ARGUMENT_ERROR;Ge<0&&(Ge=0);var We=xe.getIsDynamic()?Jn(Ge):Ge,Mt=Zn();!xe.getIsDynamic()&&Mt.duration&&(We=Math.min(Mt.duration,We)),xe.seek(We,!1,!1,!0)},seekToOriginalLive:function(){k&&er()&&xe.seekToOriginalLive()},setPlaybackRate:function(Ge){Zn().playbackRate=Ge},getPlaybackRate:function(){return Zn().playbackRate},setMute:function(Ge){(0,Ie.PS)(Ge,"boolean"),Zn().muted=Ge},isMuted:function(){return Zn().muted},setVolume:function(Ge){if("number"!=typeof Ge||isNaN(Ge)||Ge<0||Ge>1)throw E.Z.BAD_ARGUMENT_ERROR;Zn().volume=Ge},getVolume:function(){return Zn().volume},time:At,duration:$t,timeAsUTC:function(){if(!k)throw Ot;return At()<0?NaN:ct(At())},durationAsUTC:function(){if(!k)throw Ot;return ct($t())},getActiveStream:Xt,getDVRWindowSize:function(){var Ge=te&&te.hasVideoTrack()?E.Z.VIDEO:E.Z.AUDIO,We=ie.getCurrentDVRInfo(Ge);return We?We.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:Jn,getAvailableBaseUrls:function(){var Ge=Re.getValue();return Ge?Ve.getBaseUrls(Ge):[]},getAvailableLocations:function(){var Ge=Re.getValue();if(!Ge)return[];var We=Ze.getLocation(Ge),Mt=ke.getSynthesizedLocationElements(We);return We.concat(Mt)},getTargetLiveDelay:function(){if(!k)throw Ot;return xe.getOriginalLiveDelay()},convertToTimeCode:function(Ge){Ge=Math.max(Ge,0);var We=Math.floor(Ge/3600),Mt=Math.floor(Ge%3600/60),gn=Math.floor(Ge%3600%60);return(0===We?"":We<10?"0"+We.toString()+":":We.toString()+":")+(Mt<10?"0"+Mt.toString():Mt.toString())+":"+(gn<10?"0"+gn.toString():gn.toString())},formatUTC:function(Ge,We,Mt){var gn=arguments.length>3&&void 0!==arguments[3]&&arguments[3],An=new Date(1e3*Ge),pr=An.toLocaleDateString(We),ci=An.toLocaleTimeString(We,{hour12:Mt});return gn?ci+" "+pr:ci},getVersion:Un,getDebug:function(){return Yt},getBufferLength:function(Ge){var We=[E.Z.VIDEO,E.Z.AUDIO,E.Z.TEXT];if(Ge)return-1!==We.indexOf(Ge)?mn().getCurrentBufferLevel(Ge)||NaN:(S.warn("getBufferLength requested for invalid type"),NaN);var Mt=We.map(function(gn){return Hn(gn).length>0?mn().getCurrentBufferLevel(gn):Number.MAX_VALUE}).reduce(function(gn,An){return Math.min(gn,An)});return Mt===Number.MAX_VALUE?NaN:Mt},getTTMLRenderingDiv:function(){return nt?nt.getTTMLRenderingDiv():null},getVideoElement:Zn,getSource:function(){if(!w)throw wn;return w},updateSource:function(Ge){te.load(w=Ge)},getCurrentLiveLatency:function(){if(!W)throw tt;return k?xe.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(Ge){if(!Y)throw Gt;return ve.getTopBitrateInfoFor(Ge)},setAutoPlay:Ut,getAutoPlay:function(){return X},getDashMetrics:mn,getQualityFor:function(Ge){if(!Y)throw Gt;if(Ge===E.Z.IMAGE){var We=Xt();if(!We)return-1;var Mt=We.getThumbnailController();return Mt?Mt.getCurrentTrackIndex():-1}return ve.getQualityFor(Ge)},setQualityFor:function(Ge,We){var Mt=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!Y)throw Gt;if(Ge===E.Z.IMAGE){var gn=Xt();if(!gn)return;var An=gn.getThumbnailController();An&&An.setTrackByIndex(We)}ve.setPlaybackQuality(Ge,te.getActiveStreamInfo(),We,{forceReplace:Mt})},updatePortalSize:function(){ve.setElementSize(),ve.setWindowResizeEventCalled(!0)},enableText:function(Ge){var We=te.getActiveStreamInfo();return!(!We||!re)&&re.enableText(We.id,Ge)},enableForcedTextStreaming:function(Ge){return!(!te.getActiveStreamInfo()||!re)&&re.enableForcedTextStreaming(Ge)},isTextEnabled:function(){var Ge=te.getActiveStreamInfo();return!(!Ge||!re)&&re.isTextEnabled(Ge)},setTextTrack:function(Ge){if(!k)throw Ot;var We=te.getActiveStreamInfo();We&&re&&re.setTextTrack(We.id,Ge)},getBitrateInfoListFor:function(Ge){if(!Y)throw Gt;var We=Xt();return We?We.getBitrateListFor(Ge):[]},getStreamsFromManifest:function(Ge){if(!Y)throw Gt;return Ze.getStreamsInfo(Ge)},getTracksFor:Hn,getTracksForTypeFromManifest:function(Ge,We,Mt){if(!Y)throw Gt;return(Mt=Mt||Ze.getStreamsInfo(We,1)[0])?Ze.getAllMediaInfoForType(Mt,Ge,We):[]},getCurrentTrackFor:function(Ge){if(!Y)throw Gt;var We=te.getActiveStreamInfo();return de.getCurrentTrackFor(Ge,We.id)},setInitialMediaSettingsFor:function(Ge,We){if(!W)throw tt;de.setInitialSettings(Ge,We)},getInitialMediaSettingsFor:function(Ge){if(!W)throw tt;return de.getInitialSettings(Ge)},setCurrentTrack:function(Ge){if(!Y)throw Gt;de.setTrack(Ge,arguments.length>1&&void 0!==arguments[1]&&arguments[1])},addABRCustomRule:function(Ge,We,Mt){Oe.addAbrCustomRule(Ge,We,Mt)},removeABRCustomRule:function(Ge){Oe.removeAbrCustomRule(Ge)},removeAllABRCustomRule:function(){Oe.removeAllAbrCustomRule()},getABRCustomRules:function(){return Oe.getAbrCustomRules()},getAverageThroughput:function(Ge){var We=ve.getThroughputHistory(),Mt=xe.getIsDynamic();return We?We.getAverageThroughput(Ge,Mt):0},retrieveManifest:function(Ge,We){var Mt=Ln(),gn=this;Lt.on(D.Z.INTERNAL_MANIFEST_LOADED,function An(pr){pr.error?We(null,pr.error):We(pr.manifest),Lt.off(D.Z.INTERNAL_MANIFEST_LOADED,An,gn),Mt.reset()},gn),dt.initialize(Ge),Mt.load(Ge)},addUTCTimingSource:function(Ge,We){Oe.addUTCTimingSource(Ge,We)},removeUTCTimingSource:function(Ge,We){Oe.removeUTCTimingSource(Ge,We)},clearDefaultUTCTimingSources:function(){Oe.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:rn,setXHRWithCredentialsForType:function(Ge,We){Oe.setXHRWithCredentialsForType(Ge,We)},getXHRWithCredentialsForType:function(Ge){return Oe.getXHRWithCredentialsForType(Ge)},getProtectionController:function(){return Gn()},attachProtectionController:function(Ge){ae=Ge},setProtectionData:function(Ge){H=Ge,te&&te.setProtectionData(H)},registerLicenseRequestFilter:function(Ge){Oe.registerLicenseRequestFilter(Ge)},registerLicenseResponseFilter:function(Ge){Oe.registerLicenseResponseFilter(Ge)},unregisterLicenseRequestFilter:function(Ge){Oe.unregisterLicenseRequestFilter(Ge)},unregisterLicenseResponseFilter:function(Ge){Oe.unregisterLicenseResponseFilter(Ge)},registerCustomCapabilitiesFilter:function(Ge){Oe.registerCustomCapabilitiesFilter(Ge)},unregisterCustomCapabilitiesFilter:function(Ge){Oe.unregisterCustomCapabilitiesFilter(Ge)},setCustomInitialTrackSelectionFunction:function(Ge){Oe.setCustomInitialTrackSelectionFunction(Ge)},resetCustomInitialTrackSelectionFunction:function(){Oe.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(Ge){if(!nt.getElement())throw kt;nt.setTTMLRenderingDiv(Ge)},attachVttRenderingDiv:function(Ge){if(!nt.getElement())throw kt;nt.setVttRenderingDiv(Ge)},getCurrentTextTrackIndex:function(){var Ge=te.getActiveStreamInfo();if(Ge&&re)return re.getCurrentTrackIdx(Ge.id)},provideThumbnail:function(Ge,We){if("function"==typeof We)if(Ge<0)We(null);else{var Mt=xe.getIsDynamic()?Jn(Ge):Ge,gn=te.getStreamForTime(Mt);if(null!==gn){var An=gn.getThumbnailController();if(An)return An.provide(Mt,We);We(null)}else We(null)}},getDashAdapter:function(){return Ze},getOfflineController:function(){return Ct()},triggerSteeringRequest:function(){if(ke)return ke.loadSteeringData()},getCurrentSteeringResponseData:function(){if(ke)return ke.getCurrentSteeringResponseData()},getSettings:function(){return _t.get()},updateSettings:function(Ge){_t.update(Ge)},resetSettings:function(){_t.reset()},reset:Kt,destroy:function(){Kt(),j.Z.deleteSingletonInstances(Ye)}},S=Yt.getLogger(A),W=!1,k=!1,Y=!1,X=!0,le=NaN,ae=null,Fe=null,H=null,Ze=null,Ft=null,D.Z.extend(T.Z),he=ji(Ye).getInstance(),Oe=(0,Oi.Z)(Ye).getInstance(),nt=wl(Ye).getInstance(),dt=xi(Ye).getInstance(),A}yu.__dashjs_factory_name="MediaPlayer";var Eu=j.Z.getClassFactory(yu);Eu.events=T.Z,Eu.errors=De,j.Z.updateClassFactory(yu.__dashjs_factory_name,Eu);var Sh=Eu},8825:function(Vt,Qe,ne){"use strict";function Ce(V){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(V)}function G(V,D){return(G=Object.setPrototypeOf||function(j,B){return j.__proto__=B,j})(V,D)}function _(V){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(V)}var F=new(function(V){!function(M,L){if("function"!=typeof L&&null!==L)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(L&&L.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),L&&G(M,L)}(T,V);var D,j,B=(D=T,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var M,L=_(D);if(j){var K=_(this).constructor;M=Reflect.construct(L,arguments,K)}else M=L.apply(this,arguments);return function E(V,D){return!D||"object"!==Ce(D)&&"function"!=typeof D?function(j){if(void 0===j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(V):D}(this,M)});function T(){var M;return function(L,K){if(!(L instanceof K))throw new TypeError("Cannot call a class as a function")}(this,T),(M=B.call(this)).AST_IN_FUTURE="astInFuture",M.BASE_URLS_UPDATED="baseUrlsUpdated",M.BUFFER_EMPTY="bufferStalled",M.BUFFER_LOADED="bufferLoaded",M.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",M.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",M.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",M.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",M.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",M.DYNAMIC_TO_STATIC="dynamicToStatic",M.ERROR="error",M.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",M.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",M.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",M.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",M.LOG="log",M.MANIFEST_LOADING_STARTED="manifestLoadingStarted",M.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",M.MANIFEST_LOADED="manifestLoaded",M.METRICS_CHANGED="metricsChanged",M.METRIC_CHANGED="metricChanged",M.METRIC_ADDED="metricAdded",M.METRIC_UPDATED="metricUpdated",M.PERIOD_SWITCH_STARTED="periodSwitchStarted",M.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",M.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",M.QUALITY_CHANGE_RENDERED="qualityChangeRendered",M.TRACK_CHANGE_RENDERED="trackChangeRendered",M.STREAM_INITIALIZING="streamInitializing",M.STREAM_UPDATED="streamUpdated",M.STREAM_ACTIVATED="streamActivated",M.STREAM_DEACTIVATED="streamDeactivated",M.STREAM_INITIALIZED="streamInitialized",M.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",M.TEXT_TRACKS_ADDED="allTextTracksAdded",M.TEXT_TRACK_ADDED="textTrackAdded",M.CUE_ENTER="cueEnter",M.CUE_EXIT="cueExit",M.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",M.TTML_PARSED="ttmlParsed",M.TTML_TO_PARSE="ttmlToParse",M.CAPTION_RENDERED="captionRendered",M.CAPTION_CONTAINER_RESIZE="captionContainerResize",M.CAN_PLAY="canPlay",M.CAN_PLAY_THROUGH="canPlayThrough",M.PLAYBACK_ENDED="playbackEnded",M.PLAYBACK_ERROR="playbackError",M.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",M.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",M.PLAYBACK_LOADED_DATA="playbackLoadedData",M.PLAYBACK_PAUSED="playbackPaused",M.PLAYBACK_PLAYING="playbackPlaying",M.PLAYBACK_PROGRESS="playbackProgress",M.PLAYBACK_RATE_CHANGED="playbackRateChanged",M.PLAYBACK_SEEKED="playbackSeeked",M.PLAYBACK_SEEKING="playbackSeeking",M.PLAYBACK_STALLED="playbackStalled",M.PLAYBACK_STARTED="playbackStarted",M.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",M.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",M.PLAYBACK_WAITING="playbackWaiting",M.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",M.EVENT_MODE_ON_START="eventModeOnStart",M.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",M.CONFORMANCE_VIOLATION="conformanceViolation",M.REPRESENTATION_SWITCH="representationSwitch",M.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",M.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",M.INBAND_PRFT="inbandPrft",M.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",M.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",M}return T}(ne(8342).Z));Qe.Z=F},3393:function(Vt,Qe){"use strict";var Ce=new(function(){function G(){(function(F,V){if(!(F instanceof V))throw new TypeError("Cannot call a class as a function")})(this,G),this.init()}var _;return(_=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&function ne(G,E){for(var _=0;_<E.length;_++){var F=E[_];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(G,F.key,F)}}(G.prototype,_),G}());Qe.Z=Ce},3860:function(Vt,Qe){"use strict";var Ce=new(function(){function G(){(function(F,V){if(!(F instanceof V))throw new TypeError("Cannot call a class as a function")})(this,G),this.init()}var _;return(_=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&function ne(G,E){for(var _=0;_<E.length;_++){var F=E[_];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(G,F.key,F)}}(G.prototype,_),G}());Qe.Z=Ce},8080:function(Vt,Qe,ne){"use strict";ne.d(Qe,{default:function(){return Z}});var Ce=function q(){(function(Ie,_e){if(!(Ie instanceof _e))throw new TypeError("Cannot call a class as a function")})(this,q),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};Ce.SSL_CONNECTION_FAILED_PREFIX="SSL",Ce.DNS_RESOLUTION_FAILED="C00",Ce.HOST_UNREACHABLE="C01",Ce.CONNECTION_REFUSED="C02",Ce.CONNECTION_ERROR="C03",Ce.CORRUPT_MEDIA_ISOBMFF="M00",Ce.CORRUPT_MEDIA_OTHER="M01",Ce.BASE_URL_CHANGED="F00",Ce.BECAME_REPORTER="S00";var G=Ce,E=ne(1180);function _(q){var Ie,_e,rt=(q=q||{}).eventBus,xt=q.dashMetrics,at=q.metricsConstants,ut=q.events;function it(vn){var xn=new G;if(_e){for(var Tn in vn)vn.hasOwnProperty(Tn)&&(xn[Tn]=vn[Tn]);xn.mpdurl||(xn.mpdurl=_e.originalUrl||_e.url),xn.terror||(xn.terror=new Date),xt.addDVBErrors(xn)}}function vt(vn){vn.error||(_e=vn.manifest)}function Bt(vn){it({errorcode:G.BASE_URL_CHANGED,servicelocation:vn.entry})}function un(){it({errorcode:G.BECAME_REPORTER})}function Zt(vn){var xn;vn.metric===at.HTTP_REQUEST&&(0===(xn=vn.value).responsecode||null==xn.responsecode||xn.responsecode>=400||xn.responsecode<100||xn.responsecode>=600)&&it({errorcode:xn.responsecode||G.CONNECTION_ERROR,url:xn.url,terror:xn.tresponse,servicelocation:xn._serviceLocation})}function kn(vn){var xn;switch(vn.error?vn.error.code:0){case MediaError.MEDIA_ERR_NETWORK:xn=G.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:xn=G.CORRUPT_MEDIA_OTHER;break;default:return}it({errorcode:xn})}return Ie={initialize:function(){rt.on(ut.MANIFEST_UPDATED,vt,Ie),rt.on(ut.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Bt,Ie),rt.on(ut.METRIC_ADDED,Zt,Ie),rt.on(ut.METRIC_UPDATED,Zt,Ie),rt.on(ut.PLAYBACK_ERROR,kn,Ie),rt.on(E.Z.BECAME_REPORTING_PLAYER,un,Ie)},reset:function(){rt.off(ut.MANIFEST_UPDATED,vt,Ie),rt.off(ut.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Bt,Ie),rt.off(ut.METRIC_ADDED,Zt,Ie),rt.off(ut.METRIC_UPDATED,Zt,Ie),rt.off(ut.PLAYBACK_ERROR,kn,Ie),rt.off(E.Z.BECAME_REPORTING_PLAYER,un,Ie)}}}_.__dashjs_factory_name="DVBErrorsTranslator";var F=dashjs.FactoryMaker.getSingletonFactory(_),V=ne(2295);function D(q){var Ie,_e,rt=!1,at=(q=q||{}).mediaElement;return Ie={initialize:function(ut){ut&&ut.length&&(ut.forEach(function(it){var vt=it.starttime;_e.add(vt,vt+it.duration)}),rt=!!ut[0]._useWallClockTime)},reset:function(){_e.clear()},isEnabled:function(){var ut,it=_e.length;if(!it)return!0;ut=rt?(new Date).getTime()/1e3:at.currentTime;for(var vt=0;vt<it;vt+=1){var Bt=_e.start(vt),un=_e.end(vt);if(Bt<=ut&&ut<un)return!0}return!1}},_e=(0,V.Z)(this.context).create(),Ie}D.__dashjs_factory_name="RangeController";var j=dashjs.FactoryMaker.getClassFactory(D);function B(){return{serialise:function q(Ie){var _e,rt,xt=[],at=[];for(_e in Ie)if(Ie.hasOwnProperty(_e)&&0!==_e.indexOf("_")){if(null==(rt=Ie[_e])&&(rt=""),Array.isArray(rt)){if(!rt.length)continue;at=[],rt.forEach(function(ut){var it="Object"!==Object.prototype.toString.call(ut).slice(8,-1);at.push(it?ut:q(ut))}),rt=at.map(encodeURIComponent).join(",")}else"string"==typeof rt?rt=encodeURIComponent(rt):rt instanceof Date?rt=rt.toISOString():"number"==typeof rt&&(rt=Math.round(rt));xt.push(_e+"="+rt)}return xt.join("&")}}}B.__dashjs_factory_name="MetricSerialiser";var T=dashjs.FactoryMaker.getSingletonFactory(B);function M(){var q,Ie,_e,rt=window.crypto||window.msCrypto,xt=Uint32Array,at=Math.pow(2,8*xt.BYTES_PER_ELEMENT)-1;function ut(){rt&&(q||(q=new xt(10)),rt.getRandomValues(q),Ie=0)}return _e={random:function(it,vt){var Bt;return it||(it=0),vt||(vt=1),rt?(Ie===q.length&&ut(),Bt=q[Ie]/at,Ie+=1):Bt=Math.random(),Bt*(vt-it)+it}},ut(),_e}M.__dashjs_factory_name="RNG";var L=dashjs.FactoryMaker.getSingletonFactory(M),K=ne(5717);function ce(q){var Ie,_e,rt,xt,at,ut,it,vt,Bt=this.context,un=[],Zt=(q=q||{}).metricsConstants;function kn(){at=!1,ut=!1,it=null,vt=null}return Ie={report:function(vn,xn){Array.isArray(xn)||(xn=[xn]),ut&&vt.isEnabled()&&xn.forEach(function(Tn){var sr=_e.serialise(Tn);vn!==Zt.DVB_ERRORS&&(sr="metricname=".concat(vn,"&").concat(sr)),function(Or,ei,ti){var yi=new XMLHttpRequest;yi.withCredentials=rt.getXHRWithCredentialsForType(Zt.HTTP_REQUEST_DVB_REPORTING_TYPE);var zi=function(){var ni=un.indexOf(yi);-1!==ni&&(un.splice(ni,1),!(yi.status>=200&&yi.status<300)&&ti&&ti())};un.push(yi);try{yi.open("GET",Or),yi.onloadend=zi,yi.onerror=zi,yi.send()}catch{yi.onerror()}}(sr="".concat(it,"?").concat(sr),0,function(){ut=!1})})},initialize:function(vn,xn){var Tn;if(vt=xn,!(it=vn.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");at||((Tn=vn.dvbProbability)&&(1e3===Tn||Tn/1e3>=xt.random())&&(ut=!0),at=!0)},reset:function(){kn()}},_e=T(Bt).getInstance(),xt=L(Bt).getInstance(),rt=(0,K.Z)(Bt).getInstance(),kn(),Ie}ce.__dashjs_factory_name="DVBReporting";var pe=dashjs.FactoryMaker.getClassFactory(ce);function ue(q){var _e={"urn:dvb:dash:reporting:2014":pe},rt=this.context,xt=(q=q||{}).debug?q.debug.getLogger(undefined):{},at=q.metricsConstants,ut=q.mediaPlayerModel||{};return{create:function(it,vt){var Bt;try{(Bt=_e[it.schemeIdUri](rt).create({metricsConstants:at,mediaPlayerModel:ut})).initialize(it,vt)}catch(un){Bt=null,xt.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(it.schemeIdUri," (").concat(un.message,")"))}return Bt},register:function(it,vt){_e[it]=vt},unregister:function(it){delete _e[it]}}}ue.__dashjs_factory_name="ReportingFactory";var Me=dashjs.FactoryMaker.getSingletonFactory(ue);function Q(q){var Ie=[],_e=Me(this.context).getInstance(q);return{initialize:function(rt,xt){rt.some(function(at){var ut=_e.create(at,xt);if(ut)return Ie.push(ut),!0})},reset:function(){Ie.forEach(function(rt){return rt.reset()}),Ie=[]},report:function(rt,xt){Ie.forEach(function(at){return at.report(rt,xt)})}}}Q.__dashjs_factory_name="ReportingController";var Se=dashjs.FactoryMaker.getClassFactory(Q);function Le(){return{reconstructFullMetricName:function(q,Ie,_e){var rt=q;return Ie&&(rt+="("+Ie,_e&&_e.length&&(rt+=","+_e),rt+=")"),rt},validateN:function(q){if(!q)throw new Error("missing n");if(isNaN(q))throw new Error("n is NaN");if(q<0)throw new Error("n must be positive");return q}}}Le.__dashjs_factory_name="HandlerHelpers";var x=dashjs.FactoryMaker.getSingletonFactory(Le);function Ee(q){var Ie,_e,rt,xt,at;q=q||{};var it=x(this.context).getInstance(),vt=[],Bt=q.metricsConstants;function un(){var Zt=function(){try{return Object.keys(vt).map(function(kn){return vt[kn]}).reduce(function(kn,vn){return kn.level<vn.level?kn:vn})}catch{return}}();Zt&&at!==Zt.t&&(at=Zt.t,Ie.report(rt,Zt))}return{initialize:function(Zt,kn,vn){kn&&(_e=it.validateN(vn),Ie=kn,rt=it.reconstructFullMetricName(Zt,vn),xt=setInterval(un,_e))},reset:function(){clearInterval(xt),xt=null,_e=0,Ie=null,at=null},handleNewMetric:function(Zt,kn,vn){Zt===Bt.BUFFER_LEVEL&&(vt[vn]=kn)}}}Ee.__dashjs_factory_name="BufferLevelHandler";var ge=dashjs.FactoryMaker.getClassFactory(Ee),et=dashjs.FactoryMaker.getClassFactory(function(q){var Ie,_e=(q=q||{}).eventBus,rt=q.metricsConstants;function xt(){_e.off(E.Z.METRICS_INITIALISATION_COMPLETE,xt,this),_e.trigger(E.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(at,ut){ut&&(Ie=ut,_e.on(E.Z.METRICS_INITIALISATION_COMPLETE,xt,this))},reset:function(){Ie=null},handleNewMetric:function(at,ut){at===rt.DVB_ERRORS&&Ie&&Ie.report(at,ut)}}});function De(q){var Ie,_e,rt,xt,at;q=q||{};var ut=[],it=x(this.context).getInstance(),vt=q.metricsConstants;function Bt(){ut.length&&Ie&&Ie.report(xt,ut),ut=[]}return{initialize:function(un,Zt,kn,vn){Zt&&(_e=it.validateN(kn),Ie=Zt,vn&&vn.length&&(rt=vn),xt=it.reconstructFullMetricName(un,kn,vn),at=setInterval(Bt,_e))},reset:function(){clearInterval(at),at=null,_e=null,rt=null,ut=[],Ie=null},handleNewMetric:function(un,Zt){un===vt.HTTP_REQUEST&&(rt&&rt!==Zt.type||ut.push(Zt))}}}De.__dashjs_factory_name="HttpListHandler";var ot=dashjs.FactoryMaker.getClassFactory(De);function gt(){var q,Ie;return{initialize:function(_e,rt){q=_e,Ie=rt},reset:function(){Ie=null,q=void 0},handleNewMetric:function(_e,rt){_e===q&&Ie&&Ie.report(q,rt)}}}gt.__dashjs_factory_name="GenericMetricHandler";var St=dashjs.FactoryMaker.getClassFactory(gt);function Je(q){var _e=(q=q||{}).debug?q.debug.getLogger(undefined):{},rt=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,xt=this.context,at={BufferLevel:ge,DVBErrors:et,HttpList:ot,PlayList:St,RepSwitchList:St,TcpList:St};return{create:function(ut,it){var vt,Bt=ut.match(rt);if(Bt){try{(vt=at[Bt[1]](xt).create({eventBus:q.eventBus,metricsConstants:q.metricsConstants})).initialize(Bt[1],it,Bt[3],Bt[5])}catch(un){vt=null,_e.error("MetricsHandlerFactory: Could not create handler for type ".concat(Bt[1]," with args ").concat(Bt[3],", ").concat(Bt[5]," (").concat(un.message,")"))}return vt}},register:function(ut,it){at[ut]=it},unregister:function(ut){delete at[ut]}}}Je.__dashjs_factory_name="MetricsHandlerFactory";var Pe=dashjs.FactoryMaker.getSingletonFactory(Je);function Nt(q){var Ie,_e=[],xt=(q=q||{}).eventBus,at=q.events,ut=Pe(this.context).getInstance({debug:q.debug,eventBus:q.eventBus,metricsConstants:q.metricsConstants});function it(vt){_e.forEach(function(Bt){Bt.handleNewMetric(vt.metric,vt.value,vt.mediaType)})}return Ie={initialize:function(vt,Bt){vt.split(",").forEach(function(un,Zt,kn){var vn;if(-1!==un.indexOf("(")&&-1===un.indexOf(")")){var xn=kn[Zt+1];xn&&-1===xn.indexOf("(")&&-1!==xn.indexOf(")")&&(un+=","+xn,delete kn[Zt+1])}(vn=ut.create(un,Bt))&&_e.push(vn)}),xt.on(at.METRIC_ADDED,it,Ie),xt.on(at.METRIC_UPDATED,it,Ie)},reset:function(){xt.off(at.METRIC_ADDED,it,Ie),xt.off(at.METRIC_UPDATED,it,Ie),_e.forEach(function(vt){return vt.reset()}),_e=[]}}}Nt.__dashjs_factory_name="MetricsHandlersController";var Ht=dashjs.FactoryMaker.getClassFactory(Nt);function $e(q){var Ie,_e,rt;q=q||{};var xt=this.context;function at(){Ie&&Ie.reset(),_e&&_e.reset(),rt&&rt.reset()}return{initialize:function(ut){try{(rt=j(xt).create({mediaElement:q.mediaElement})).initialize(ut.Range),(_e=Se(xt).create({debug:q.debug,metricsConstants:q.metricsConstants,mediaPlayerModel:q.mediaPlayerModel})).initialize(ut.Reporting,rt),(Ie=Ht(xt).create({debug:q.debug,eventBus:q.eventBus,metricsConstants:q.metricsConstants,events:q.events})).initialize(ut.metrics,_e)}catch(it){throw at(),it}},reset:at}}$e.__dashjs_factory_name="MetricsController";var ht=dashjs.FactoryMaker.getClassFactory($e),hn=function q(){(function(Ie,_e){if(!(Ie instanceof _e))throw new TypeError("Cannot call a class as a function")})(this,q),this.metrics="",this.Range=[],this.Reporting=[]},zt=function q(){(function(Ie,_e){if(!(Ie instanceof _e))throw new TypeError("Cannot call a class as a function")})(this,q),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},mt=function q(){(function(Ie,_e){if(!(Ie instanceof _e))throw new TypeError("Cannot call a class as a function")})(this,q),this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3};function It(q){var Ie=(q=q||{}).adapter,_e=q.constants;return{getMetrics:function(rt){var xt=[];return rt&&rt.Metrics_asArray&&rt.Metrics_asArray.forEach(function(at){var ut=new hn,it=Ie.getIsDynamic(rt);at.hasOwnProperty("metrics")&&(ut.metrics=at.metrics,at.Range_asArray&&at.Range_asArray.forEach(function(vt){var un,kn,vn,xn,Tn,Bt=new zt;Bt.starttime=(un=rt,kn=vt,Tn=0,it?Tn=Ie.getAvailabilityStartTime(un)/1e3:(vn=Ie.getRegularPeriods(un)).length&&(Tn=vn[0].start),xn=Tn,kn&&kn.hasOwnProperty(_e.START_TIME)&&(xn+=kn.starttime),xn),Bt.duration=vt.hasOwnProperty("duration")?vt.duration:Ie.getDuration(rt),Bt._useWallClockTime=it,ut.Range.push(Bt)}),at.Reporting_asArray&&(at.Reporting_asArray.forEach(function(vt){var Bt=new mt;vt.hasOwnProperty(_e.SCHEME_ID_URI)&&(Bt.schemeIdUri=vt.schemeIdUri,vt.hasOwnProperty("value")&&(Bt.value=vt.value),vt.hasOwnProperty(_e.DVB_REPORTING_URL)&&(Bt.dvbReportingUrl=vt[_e.DVB_REPORTING_URL]),vt.hasOwnProperty(_e.DVB_PROBABILITY)&&(Bt.dvbProbability=vt[_e.DVB_PROBABILITY]),ut.Reporting.push(Bt))}),xt.push(ut)))}),xt}}}It.__dashjs_factory_name="ManifestParsing";var je=dashjs.FactoryMaker.getSingletonFactory(It);function ze(q){var Ie,_e={},rt=this.context,xt=(q=q||{}).eventBus,at=q.events;function ut(vt){if(!vt.error){var Bt=Object.keys(_e);je(rt).getInstance({adapter:q.adapter,constants:q.constants}).getMetrics(vt.manifest).forEach(function(un){var Zt=JSON.stringify(un);if(_e.hasOwnProperty(Zt))Bt.splice(Zt,1);else try{var kn=ht(rt).create(q);kn.initialize(un),_e[Zt]=kn}catch{}}),Bt.forEach(function(un){_e[un].reset(),delete _e[un]}),xt.trigger(E.Z.METRICS_INITIALISATION_COMPLETE)}}function it(){Object.keys(_e).forEach(function(vt){_e[vt].reset()}),_e={}}return Ie={reset:function(){xt.off(at.MANIFEST_UPDATED,ut,Ie),xt.off(at.STREAM_TEARDOWN_COMPLETE,it,Ie)}},xt.on(at.MANIFEST_UPDATED,ut,Ie),xt.on(at.STREAM_TEARDOWN_COMPLETE,it,Ie),Ie}ze.__dashjs_factory_name="MetricsCollectionController";var bt=dashjs.FactoryMaker.getClassFactory(ze);function N(){var q=this.context;return{createMetricsReporting:function(Ie){return F(q).getInstance({eventBus:Ie.eventBus,dashMetrics:Ie.dashMetrics,metricsConstants:Ie.metricsConstants,events:Ie.events}).initialize(),bt(q).create(Ie)},getReportingFactory:function(){return Me(q).getInstance()},getMetricsHandlerFactory:function(){return Pe(q).getInstance()}}}N.__dashjs_factory_name="MetricsReporting";var I=dashjs.FactoryMaker.getClassFactory(N);I.events=E.Z,dashjs.FactoryMaker.updateClassFactory(N.__dashjs_factory_name,I);var Z=I},1180:function(Vt,Qe,ne){"use strict";function Ce(V){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(V)}function G(V,D){return(G=Object.setPrototypeOf||function(j,B){return j.__proto__=B,j})(V,D)}function _(V){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(V)}var F=new(function(V){!function(M,L){if("function"!=typeof L&&null!==L)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(L&&L.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),L&&G(M,L)}(T,V);var D,j,B=(D=T,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var M,L=_(D);if(j){var K=_(this).constructor;M=Reflect.construct(L,arguments,K)}else M=L.apply(this,arguments);return function E(V,D){return!D||"object"!==Ce(D)&&"function"!=typeof D?function(j){if(void 0===j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(V):D}(this,M)});function T(){var M;return function(L,K){if(!(L instanceof K))throw new TypeError("Cannot call a class as a function")}(this,T),(M=B.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",M.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",M.CMCD_DATA_GENERATED="cmcdDataGenerated",M}return T}(ne(8342).Z));Qe.Z=F},5717:function(Vt,Qe,ne){"use strict";var Ce=ne(2610),G=ne(5448),E=ne(1264),_=ne(3106),F=ne(1767),V=ne(3393);function D(){var j,B,T,M,L,K,ce,pe,Me=(0,E.Z)(this.context).getInstance();function Q(){M=[],L=[],K=[],pe=[],ce=null,B=[]}function Se(ge,et){var De=-1;ge.some(function(ot,gt){if(ot===et)return De=gt,!0}),De<0||ge.splice(De,1)}function Le(ge){var et;for(et=0;et<pe.length;et++)if(pe[et].rulename===ge)return et;return-1}function x(ge,et){Ee(ge,et);var De=new Ce.Z;De.schemeIdUri=ge,De.value=et,B.push(De)}function Ee(ge,et){(0,_.PS)(ge,"string"),(0,_.PS)(et,"string"),B.forEach(function(De,ot){De.schemeIdUri===ge&&De.value===et&&B.splice(ot,1)})}return j={getCustomInitialTrackSelectionFunction:function(){return ce},setCustomInitialTrackSelectionFunction:function(ge){ce=ge},resetCustomInitialTrackSelectionFunction:function(){ce=null},getLicenseResponseFilters:function(){return L},getLicenseRequestFilters:function(){return M},getCustomCapabilitiesFilters:function(){return K},registerCustomCapabilitiesFilter:function(ge){K.push(ge)},registerLicenseResponseFilter:function(ge){L.push(ge)},registerLicenseRequestFilter:function(ge){M.push(ge)},unregisterCustomCapabilitiesFilter:function(ge){Se(K,ge)},unregisterLicenseResponseFilter:function(ge){Se(L,ge)},unregisterLicenseRequestFilter:function(ge){Se(M,ge)},addAbrCustomRule:function(ge,et,De){if("string"!=typeof ge||ge!==F.Z.ABANDON_FRAGMENT_RULES&&ge!==F.Z.QUALITY_SWITCH_RULES||"string"!=typeof et)throw V.Z.BAD_ARGUMENT_ERROR;var ot=Le(et);-1===ot?pe.push({type:ge,rulename:et,rule:De}):(pe[ot].type=ge,pe[ot].rule=De)},removeAllAbrCustomRule:function(){pe=[]},removeAbrCustomRule:function(ge){if(ge){var et=Le(ge);-1!==et&&pe.splice(et,1)}else pe=[]},getAbrCustomRules:function(){return pe},addUTCTimingSource:x,removeUTCTimingSource:Ee,getUTCTimingSources:function(){return B},clearDefaultUTCTimingSources:function(){B=[]},restoreDefaultUTCTimingSources:function(){var ge=Me.get().streaming.utcSynchronization.defaultTimingSource;x(ge.scheme,ge.value)},setXHRWithCredentialsForType:function ge(et,De){et?T[et]=!!De:Object.keys(T).forEach(function(ot){ge(ot,De)})},getXHRWithCredentialsForType:function(ge){var et=T[ge];return void 0===et?T.default:et},setConfig:function(){},reset:function(){Q()}},T={default:!1},Q(),j}D.__dashjs_factory_name="CustomParametersModel",Qe.Z=G.Z.getSingletonFactory(D)},9032:function(Vt,Qe,ne){"use strict";var Ce=ne(5448),G=ne(7473);function E(F){var V=(F=F||{}).requestModifier;function D(j){var B=new Date,T=j.request,M=new XMLHttpRequest;if(M.open(j.method,j.url,!0),T.responseType&&(M.responseType=T.responseType),T.range&&M.setRequestHeader("Range","bytes="+T.range),T.requestStartDate||(T.requestStartDate=B),V&&V.modifyRequestHeader&&(M=V.modifyRequestHeader(M,{url:j.url})),j.headers)for(var L in j.headers){var K=j.headers[L];K&&M.setRequestHeader(L,K)}M.withCredentials=j.withCredentials,M.onload=j.onload,M.onloadend=j.onend,M.onerror=j.onerror,M.onprogress=j.progress,M.onabort=j.onabort,M.ontimeout=j.ontimeout,M.timeout=j.timeout,M.send(),j.response=M}return{load:function(j){V&&V.modifyRequest?(0,G.k)(j,V).then(function(){return D(j)}):D(j)},abort:function(j){var B=j.response;B.onloadend=B.onerror=B.onprogress=void 0,B.abort()}}}E.__dashjs_factory_name="XHRLoader";var _=Ce.Z.getClassFactory(E);Qe.Z=_},1737:function(Vt,Qe,ne){"use strict";ne.d(Qe,{default:function(){return Co}});var G={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},E=function(){function dn(){!function(Tt,en){if(!(Tt instanceof en))throw new TypeError("Cannot call a class as a function")}(this,dn)}var sn;return(sn=[{key:"findCencContentProtection",value:function(Tt){for(var en=null,wt=0;wt<Tt.length;++wt){var Pt=Tt[wt];"urn:mpeg:dash:mp4protection:2011"!==Pt.schemeIdUri.toLowerCase()||"cenc"!==Pt.value.toLowerCase()&&"cbcs"!==Pt.value.toLowerCase()||(en=Pt)}return en}},{key:"getPSSHData",value:function(Tt){var en=8,wt=new DataView(Tt),Pt=wt.getUint8(en);return en+=20,Pt>0&&(en+=4+16*wt.getUint32(en)),Tt.slice(en+=4)}},{key:"getPSSHForKeySystem",value:function(Tt,en){var wt=dn.parsePSSHList(en);return Tt&&wt.hasOwnProperty(Tt.uuid.toLowerCase())?wt[Tt.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(Tt,en){return"pssh"in Tt?(Tt.pssh.__text=Tt.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),en.decodeArray(Tt.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(Tt){if(null==Tt)return[];for(var en=new DataView(Tt.buffer||Tt),wt={},Pt=0;;){var In,Qt,jn=void 0,Xn=Pt;if(Pt>=en.buffer.byteLength)break;if(In=Pt+en.getUint32(Pt),1886614376===en.getUint32(Pt+=4))if(0===(Qt=en.getUint8(Pt+=4))||1===Qt){Pt++,Pt+=3,jn="";var Pn=void 0,cn=void 0;for(Pn=0;Pn<4;Pn++)jn+=1===(cn=en.getUint8(Pt+Pn).toString(16)).length?"0"+cn:cn;for(Pt+=4,jn+="-",Pn=0;Pn<2;Pn++)jn+=1===(cn=en.getUint8(Pt+Pn).toString(16)).length?"0"+cn:cn;for(Pt+=2,jn+="-",Pn=0;Pn<2;Pn++)jn+=1===(cn=en.getUint8(Pt+Pn).toString(16)).length?"0"+cn:cn;for(Pt+=2,jn+="-",Pn=0;Pn<2;Pn++)jn+=1===(cn=en.getUint8(Pt+Pn).toString(16)).length?"0"+cn:cn;for(Pt+=2,jn+="-",Pn=0;Pn<6;Pn++)jn+=1===(cn=en.getUint8(Pt+Pn).toString(16)).length?"0"+cn:cn;Pt+=6,Pt+=4,wt[jn=jn.toLowerCase()]=en.buffer.slice(Xn,In),Pt=In}else Pt=In;else Pt=In}return wt}},{key:"getLicenseServerUrlFromMediaInfo",value:function(Tt,en){try{if(!Tt||0===Tt.length)return null;for(var wt=0,Pt=null;wt<Tt.length&&!Pt;){var In=Tt[wt];if(In&&In.contentProtection&&In.contentProtection.length>0){var Qt=In.contentProtection.filter(function(fr){return fr.schemeIdUri&&fr.schemeIdUri===en});if(Qt&&Qt.length>0)for(var jn=0;jn<Qt.length&&!Pt;){for(var Xn=Qt[jn],Pn=0;Pn<G.attributes.length&&!Pt;){for(var cn=0,En=G.attributes[Pn];cn<G.prefixes.length&&!Pt;)Xn[En]&&Xn[En].__prefix&&Xn[En].__prefix===G.prefixes[cn]&&Xn[En].__text&&(Pt=Xn[En].__text),cn+=1;Pn+=1}jn+=1}}wt+=1}return Pt}catch{return null}}}])&&function Ce(dn,fn){for(var sn=0;sn<fn.length;sn++){var Tt=fn[sn];Tt.enumerable=Tt.enumerable||!1,Tt.configurable=!0,"value"in Tt&&(Tt.writable=!0),Object.defineProperty(dn,Tt.key,Tt)}}(dn,sn),dn}(),_=function dn(fn,sn){(function(Tt,en){if(!(Tt instanceof en))throw new TypeError("Cannot call a class as a function")})(this,dn),this.contentType=fn,this.robustness=sn},F=function dn(fn,sn,Tt,en,wt){(function(Pt,In){if(!(Pt instanceof In))throw new TypeError("Cannot call a class as a function")})(this,dn),this.initDataTypes=["cenc"],fn&&fn.length&&(this.audioCapabilities=fn),sn&&sn.length&&(this.videoCapabilities=sn),this.distinctiveIdentifier=Tt,this.persistentState=en,this.sessionTypes=wt};function V(dn){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(fn){return typeof fn}:function(fn){return fn&&"function"==typeof Symbol&&fn.constructor===Symbol&&fn!==Symbol.prototype?"symbol":typeof fn})(dn)}function D(dn,fn){return(D=Object.setPrototypeOf||function(sn,Tt){return sn.__proto__=Tt,sn})(dn,fn)}function B(dn){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(fn){return fn.__proto__||Object.getPrototypeOf(fn)})(dn)}var T=new(function(dn){!function(wt,Pt){if("function"!=typeof Pt&&null!==Pt)throw new TypeError("Super expression must either be null or a function");wt.prototype=Object.create(Pt&&Pt.prototype,{constructor:{value:wt,writable:!0,configurable:!0}}),Pt&&D(wt,Pt)}(en,dn);var fn,sn,Tt=(fn=en,sn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var wt,Pt=B(fn);if(sn){var In=B(this).constructor;wt=Reflect.construct(Pt,arguments,In)}else wt=Pt.apply(this,arguments);return function j(dn,fn){return!fn||"object"!==V(fn)&&"function"!=typeof fn?function(sn){if(void 0===sn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return sn}(dn):fn}(this,wt)});function en(){var wt;return function(Pt,In){if(!(Pt instanceof In))throw new TypeError("Cannot call a class as a function")}(this,en),(wt=Tt.call(this)).MEDIA_KEYERR_CODE=100,wt.MEDIA_KEYERR_UNKNOWN_CODE=101,wt.MEDIA_KEYERR_CLIENT_CODE=102,wt.MEDIA_KEYERR_SERVICE_CODE=103,wt.MEDIA_KEYERR_OUTPUT_CODE=104,wt.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,wt.MEDIA_KEYERR_DOMAIN_CODE=106,wt.MEDIA_KEY_MESSAGE_ERROR_CODE=107,wt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,wt.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,wt.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,wt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,wt.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,wt.KEY_SESSION_CREATED_ERROR_CODE=113,wt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,wt.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",wt.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",wt.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",wt.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",wt.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",wt.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",wt.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",wt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",wt.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",wt.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",wt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",wt.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",wt.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",wt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",wt}return en}(ne(2230).Z)),M=ne(5459),L=function dn(fn,sn,Tt,en,wt,Pt,In,Qt){(function(jn,Xn){if(!(jn instanceof Xn))throw new TypeError("Cannot call a class as a function")})(this,dn),this.url=fn,this.method=sn,this.responseType=Tt,this.headers=en,this.withCredentials=wt,this.messageType=Pt,this.sessionId=In,this.data=Qt},K=function dn(fn,sn,Tt){(function(en,wt){if(!(en instanceof wt))throw new TypeError("Cannot call a class as a function")})(this,dn),this.url=fn,this.headers=sn,this.data=Tt},ce=ne(7855),pe=ne(703),ue=ne(3393),Me=ne(5448);function Q(dn){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(fn){return typeof fn}:function(fn){return fn&&"function"==typeof Symbol&&fn.constructor===Symbol&&fn!==Symbol.prototype?"symbol":typeof fn})(dn)}function Se(dn){var fn,sn,Tt,en,wt,Pt,In,Qt,jn,Xn,Pn,cn=(dn=dn||{}).protectionKeyController,En=dn.protectionModel,qn=dn.eventBus,fr=dn.events,Ur=dn.BASE64,rr=dn.constants,tn=[],pn=dn.cmcdModel,On=dn.settings,gr=dn.customParametersModel;function vr(){if(!(qn&&qn.hasOwnProperty("on")&&cn&&cn.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function qr(yn,ir){Qt||jn?Qt&&Qr():function(Ar,Oi){if(!jn){jn=!0;var Kr,Dr=[];Ar=Ar.sort(function(Ni,_i){return(wt&&wt[Ni.ks.systemString]&&wt[Ni.ks.systemString].priority>=0?wt[Ni.ks.systemString].priority:Ar.length)-(wt&&wt[_i.ks.systemString]&&wt[_i.ks.systemString].priority>=0?wt[_i.ks.systemString].priority:Ar.length)});for(var ri=0;ri<Ar.length;ri++){var hi=Za(Ar[ri]);Dr.push({ks:Ar[ri].ks,configs:[hi],protData:Ar[ri].protData})}En.requestKeySystemAccess(Dr).then(function(Ni){var _i=(Kr=Ni.data).mksa&&Kr.mksa.selectedSystemString?Kr.mksa.selectedSystemString:Kr.keySystem.systemString;return sn.info("DRM: KeySystem Access Granted for system string ("+_i+")!  Selecting key system..."),En.selectKeySystem(Kr)}).then(function(Ni){if(Qt=Ni,jn=!1,En){qn.trigger(fr.KEY_SYSTEM_SELECTED,{data:Kr});var _i=Gi(Qt);_i&&_i.serverCertificate&&_i.serverCertificate.length>0&&En.setServerCertificate(Ur.decodeArray(_i.serverCertificate).buffer),Qr()}}).catch(function(Ni){Qt=null,jn=!1,Oi||qn.trigger(fr.KEY_SYSTEM_SELECTED,{data:null,error:new M.Z(T.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,T.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+Ni.error)})})}}(yn,ir)}function Qr(){for(var yn,ir=0;ir<Tt.length;ir++)for(yn=0;yn<Tt[ir].length;yn++)if(Qt===Tt[ir][yn].ks){uo(Tt[ir][yn]);break}Tt=[]}function uo(yn){if(cn.isClearKey(Qt)&&yn.protData&&yn.protData.hasOwnProperty("clearkeys")&&0!==Object.keys(yn.protData.clearkeys).length){var ir={kids:Object.keys(yn.protData.clearkeys)};yn.initData=(new TextEncoder).encode(JSON.stringify(ir))}yn.sessionId?pi(yn):null!==yn.initData&&Ei(yn)}function pi(yn){vr(),En.loadKeySession(yn)}function Ei(yn){var ir=E.getPSSHForKeySystem(Qt,yn?yn.initData:null);if(ir){if(function(Ar){if(!Ar)return!1;try{for(var Oi=En.getSessions(),Kr=0;Kr<Oi.length;Kr++)if(Oi[Kr].getKeyId()===Ar)return!0;return!1}catch{return!1}}(yn.keyId)||Mi(ir))return;try{yn.initData=ir,En.createKeySession(yn)}catch(Ar){qn.trigger(fr.KEY_SESSION_CREATED,{data:null,error:new M.Z(T.KEY_SESSION_CREATED_ERROR_CODE,T.KEY_SESSION_CREATED_ERROR_MESSAGE+Ar.message)})}}else yn&&yn.initData?En.createKeySession(yn):qn.trigger(fr.KEY_SESSION_CREATED,{data:null,error:new M.Z(T.KEY_SESSION_CREATED_ERROR_CODE,T.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(Qt?Qt.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function Gi(yn){if(yn){var ir=yn.systemString;if(wt)return ir in wt?wt[ir]:null}return null}function Mi(yn){if(!yn)return!1;try{for(var ir=En.getAllInitData(),Ar=0;Ar<ir.length;Ar++)if(cn.initDataEquals(yn,ir[Ar]))return sn.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function to(yn){vr(),yn?(En.setMediaElement(yn),qn.on(fr.NEED_KEY,Ka,fn)):null===yn&&(En.setMediaElement(yn),qn.off(fr.NEED_KEY,Ka,fn))}function Za(yn){var ir=yn.protData,Ar=[],Oi=[],Kr=ir&&ir.audioRobustness&&ir.audioRobustness.length>0?ir.audioRobustness:In,Dr=ir&&ir.videoRobustness&&ir.videoRobustness.length>0?ir.videoRobustness:In,ri=yn.sessionType,hi=ir&&ir.distinctiveIdentifier?ir.distinctiveIdentifier:"optional",Ni=ir&&ir.persistentState?ir.persistentState:"temporary"===ri?"optional":"required";return en.forEach(function(_i){_i.type===rr.AUDIO?Ar.push(new _(_i.codec,Kr)):_i.type===rr.VIDEO&&Oi.push(new _(_i.codec,Dr))}),new F(Ar,Oi,hi,Ni,[ri])}function ta(yn){yn.error?qn.trigger(fr.KEY_STATUSES_CHANGED,{data:null,error:yn.error}):sn.debug("DRM: key status = "+yn.status)}function ga(yn){sn.debug("DRM: onKeyMessage");var ir=yn.data;qn.trigger(fr.KEY_MESSAGE,{data:ir});var Ar=ir.messageType?ir.messageType:"license-request",Oi=ir.message,Kr=ir.sessionToken,Dr=Gi(Qt),ri=cn.getLicenseServerModelInstance(Qt,Dr,Ar),hi={sessionToken:Kr,messageType:Ar};if(Oi&&0!==Oi.byteLength){if(!ri)return sn.debug("DRM: License server request not required for this message (type = "+yn.data.messageType+").  Session ID = "+Kr.getSessionId()),void yo(hi);if(cn.isClearKey(Qt)){var Ni=cn.processClearKeyLicenseRequest(Qt,Dr,Oi);if(Ni&&Ni.keyPairs&&Ni.keyPairs.length>0)return sn.debug("DRM: ClearKey license request handled by application!"),yo(hi),void En.updateKeySession(Kr,Ni)}!function(_i,Nr,dr){var Io=_i.sessionToken,Do=_i.messageType?_i.messageType:"license-request",xa={sessionToken:Io,messageType:Do},Ya=Qt?Qt.systemString:null,Yn=function(Ti,bs,Ws,Gr,Tr){var qo=null,Tl=Gr.message;if(Ti&&Ti.serverURL){var no=Ti.serverURL;"string"==typeof no&&""!==no?qo=no:"object"===Q(no)&&no.hasOwnProperty(bs)&&(qo=no[bs])}else if(Ti&&Ti.laURL&&""!==Ti.laURL)qo=Ti.laURL;else if(!(qo=E.getLicenseServerUrlFromMediaInfo(en,Qt.schemeIdURI))&&!cn.isClearKey(Qt)){var Sr=E.getPSSHData(Ws.initData);(qo=Qt.getLicenseServerURLFromInitData(Sr))||(qo=Gr.laURL)}return Tr.getServerURLFromMessage(qo,Tl,bs)}(dr,Do,Io,_i,Nr);if(Yn){var La={},Cr=!1;dr&&qa(La,dr.httpRequestHeaders);var si=_i.message;qa(La,Qt.getRequestHeadersFromMessage(si)),Object.keys(La).forEach(function(Ti){"authorization"===Ti.toLowerCase()&&(Cr=!0)}),dr&&"boolean"==typeof dr.withCredentials&&(Cr=dr.withCredentials);var _l=function(Ti){if(En)if(Ti.status>=200&&Ti.status<=299){var bs=pe.Z.parseHttpHeaders(Ti.getAllResponseHeaders?Ti.getAllResponseHeaders():null),Ws=new K(Ti.responseURL,bs,Ti.response);El(gr.getLicenseResponseFilters(),Ws).then(function(){var Gr=Nr.getLicenseMessage(Ws.data,Ya,Do);null!==Gr?(yo(xa),En.updateKeySession(Io,Gr)):Yl(Ti,xa,Ya,Do,Nr)})}else Yl(Ti,xa,Ya,Do,Nr)},Pc=function(Ti){yo(xa,new M.Z(T.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,T.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Ya+' update, XHR aborted. status is "'+Ti.statusText+'" ('+Ti.status+"), readyState is "+Ti.readyState))},zl=function(Ti){yo(xa,new M.Z(T.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,T.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Ya+' update, XHR error. status is "'+Ti.statusText+'" ('+Ti.status+"), readyState is "+Ti.readyState))},Ys=Qt.getLicenseRequestFromMessage(si),Xi=Nr.getHTTPMethod(Do),Lu=Nr.getResponseType(Ya,Do),zs=dr&&!isNaN(dr.httpTimeout)?dr.httpTimeout:8e3,Ou=Io.getSessionId()||null,jo=new L(Yn,Xi,Lu,La,Cr,Do,Ou,Ys),Fc=isNaN(On.get().streaming.retryAttempts[ce.w.LICENSE])?3:On.get().streaming.retryAttempts[ce.w.LICENSE];El(gr.getLicenseRequestFilters(),jo).then(function(){Kl(jo,Fc,zs,_l,Pc,zl)})}else yo(xa,new M.Z(T.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,T.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}(ir,ri,Dr)}else yo(hi,new M.Z(T.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,T.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function yo(yn,ir){qn.trigger(fr.LICENSE_REQUEST_COMPLETE,{data:yn,error:ir})}function Kl(yn,ir,Ar,Oi,Kr,Dr){var ri=new XMLHttpRequest;if(On.get().streaming.cmcd&&On.get().streaming.cmcd.enabled&&On.get().streaming.cmcd.mode===ue.Z.CMCD_MODE_QUERY){var hi=pn.getQueryParameter({url:yn.url,type:ce.w.LICENSE});hi&&(yn.url=pe.Z.addAditionalQueryParameterToUrl(yn.url,[hi]))}for(var Ni in ri.open(yn.method,yn.url,!0),ri.responseType=yn.responseType,ri.withCredentials=yn.withCredentials,Ar>0&&(ri.timeout=Ar),yn.headers)ri.setRequestHeader(Ni,yn.headers[Ni]);if(On.get().streaming.cmcd&&On.get().streaming.cmcd.enabled&&On.get().streaming.cmcd.mode===ue.Z.CMCD_MODE_HEADER){var _i=pn.getHeaderParameters({url:yn.url,type:ce.w.LICENSE});if(_i)for(var Nr in _i){var dr=_i[Nr];dr&&ri.setRequestHeader(Nr,dr)}}var Io=function(){ir--;var Do=isNaN(On.get().streaming.retryIntervals[ce.w.LICENSE])?1e3:On.get().streaming.retryIntervals[ce.w.LICENSE];Pn=setTimeout(function(){Kl(yn,ir,Ar,Oi,Kr,Dr)},Do)};ri.onload=function(){Xn=null,this.status>=200&&this.status<=299||ir<=0?Oi(this):(sn.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+ir),Io())},ri.ontimeout=ri.onerror=function(){Xn=null,ir<=0?Dr(this):(sn.warn("License request network request failed . Retrying it... Pending retries: "+ir),Io())},ri.onabort=function(){Kr(this)},qn.trigger(fr.LICENSE_REQUEST_SENDING,{url:yn.url,headers:yn.headers,payload:yn.data,sessionId:yn.sessionId}),Xn=ri,ri.send(yn.data)}function ja(){Xn&&(Xn.onloadend=Xn.onerror=Xn.onprogress=void 0,Xn.abort(),Xn=null),Pn&&(clearTimeout(Pn),Pn=null)}function qa(yn,ir){if(ir)for(var Ar in ir)yn[Ar]=ir[Ar]}function Yl(yn,ir,Ar,Oi,Kr){var Dr="NONE",ri=null;yn.response&&(Dr=Kr.getErrorResponse(yn.response,Ar,Oi),ri={serverResponse:yn.response||null,responseCode:yn.status||null,responseText:yn.statusText||null}),yo(ir,new M.Z(T.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,T.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Ar+' update, XHR complete. status is "'+yn.statusText+'" ('+yn.status+"), readyState is "+yn.readyState+".  Response is "+Dr,ri))}function El(yn,ir){return yn?yn.reduce(function(Ar,Oi){return Ar.then(function(){return Oi(ir)})},Promise.resolve()):Promise.resolve()}function Ka(yn,ir){if(!On.get().streaming.protection.ignoreEmeEncryptedEvent){if(sn.debug("DRM: onNeedKey"),"cenc"!==yn.key.initDataType)return void sn.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+yn.key.initDataType);if(0===en.length&&(sn.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(ir=void 0===ir?1:ir+1)<5))return void tn.push(setTimeout(function(){Ka(yn,ir)},500));var Ar=yn.key.initData;if(ArrayBuffer.isView(Ar)&&(Ar=Ar.buffer),Qt){var Oi=E.getPSSHForKeySystem(Qt,Ar);if(Oi&&Mi(Oi))return}sn.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(Ar)));var Kr=cn.getSupportedKeySystemsFromSegmentPssh(Ar,wt,Pt);if(0===Kr.length)return void sn.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");Tt.push(Dr=Kr),qr(Dr,!1)}var Dr}return sn=dn.debug.getLogger(fn={initializeForMedia:function(yn){if(!yn)throw new Error("mediaInfo can not be null or undefined");vr(),en.push(yn)},clearMediaInfoArray:function(){en=[]},handleKeySystemFromManifest:function(){if(en&&0!==en.length){var yn=[];en.forEach(function(ir){var Ar=cn.getSupportedKeySystemsFromContentProtection(ir.contentProtection,wt,Pt);Ar.length>0&&(0===yn.length&&(yn=Ar),Tt.push(Ar))}),yn&&yn.length>0&&qr(yn,!0)}},createKeySession:Ei,loadKeySession:pi,removeKeySession:function(yn){vr(),En.removeKeySession(yn)},closeKeySession:function(yn){vr(),En.closeKeySession(yn)},setServerCertificate:function(yn){vr(),En.setServerCertificate(yn)},setMediaElement:to,setSessionType:function(yn){Pt=yn},setRobustnessLevel:function(yn){In=yn},setProtectionData:function(yn){wt=yn,cn.setProtectionData(yn)},getSupportedKeySystemsFromContentProtection:function(yn){return vr(),cn.getSupportedKeySystemsFromContentProtection(yn,wt,Pt)},getKeySystems:function(){return cn?cn.getKeySystems():[]},setKeySystems:function(yn){cn&&cn.setKeySystems(yn)},stop:function(){ja(),En&&En.stop()},reset:function(){qn.off(fr.INTERNAL_KEY_MESSAGE,ga,fn),qn.off(fr.INTERNAL_KEY_STATUS_CHANGED,ta,fn),vr(),ja(),to(null),Qt=null,jn=!1,En&&(En.reset(),En=null),tn.forEach(function(yn){return clearTimeout(yn)}),tn=[],en=[],Tt=[]}}),Tt=[],en=[],Pt="temporary",In="",Xn=null,Pn=null,qn.on(fr.INTERNAL_KEY_MESSAGE,ga,fn),qn.on(fr.INTERNAL_KEY_STATUS_CHANGED,ta,fn),fn}Se.__dashjs_factory_name="ProtectionController";var Le=Me.Z.getClassFactory(Se),x=function dn(fn,sn){(function(Tt,en){if(!(Tt instanceof en))throw new TypeError("Cannot call a class as a function")})(this,dn),this.keyID=fn,this.key=sn};var ge=function(){function dn(Tt,en){if(function(wt,Pt){if(!(wt instanceof Pt))throw new TypeError("Cannot call a class as a function")}(this,dn),en&&"persistent"!==en&&"temporary"!==en)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=Tt,this.type=en}var sn;return(sn=[{key:"toJWK",value:function(){var Tt,en=this.keyPairs.length,wt={keys:[]};for(Tt=0;Tt<en;Tt++)wt.keys.push({kty:"oct",alg:"A128KW",kid:this.keyPairs[Tt].keyID,k:this.keyPairs[Tt].key});this.type&&(wt.type=this.type);var In=JSON.stringify(wt),Qt=In.length,jn=new ArrayBuffer(Qt),Xn=new Uint8Array(jn);for(Tt=0;Tt<Qt;Tt++)Xn[Tt]=In.charCodeAt(Tt);return jn}}])&&function Ee(dn,fn){for(var sn=0;sn<fn.length;sn++){var Tt=fn[sn];Tt.enumerable=Tt.enumerable||!1,Tt.configurable=!0,"value"in Tt&&(Tt.writable=!0),Object.defineProperty(dn,Tt.key,Tt)}}(dn.prototype,sn),dn}();var De=new(function(){function dn(){(function(Tt,en){if(!(Tt instanceof en))throw new TypeError("Cannot call a class as a function")})(this,dn),this.init()}var sn;return(sn=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&function et(dn,fn){for(var sn=0;sn<fn.length;sn++){var Tt=fn[sn];Tt.enumerable=Tt.enumerable||!1,Tt.configurable=!0,"value"in Tt&&(Tt.writable=!0),Object.defineProperty(dn,Tt.key,Tt)}}(dn.prototype,sn),dn}()),ot="e2719d58-a985-b3c9-781a-b030af78d30e",gt=De.CLEARKEY_KEYSTEM_STRING,St="urn:uuid:"+ot;function Je(dn){var fn=(dn=dn||{}).BASE64;return{uuid:ot,schemeIdURI:St,systemString:gt,getInitData:function(sn,Tt){try{var en=E.parseInitDataFromContentProtection(sn,fn);if(!en&&Tt){var wt={kids:[function(Pt){try{var In=Pt.replace(/-/g,"");return(In=btoa(In.match(/\w{2}/g).map(function(Qt){return String.fromCharCode(parseInt(Qt,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch{return null}}(Tt["cenc:default_KID"])]};en=(new TextEncoder).encode(JSON.stringify(wt))}return en}catch{return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(sn){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(sn))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(sn,Tt){var en=null;if(sn){for(var wt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Tt))),Pt=[],In=0;In<wt.kids.length;In++){var Qt=wt.kids[In],jn=sn.clearkeys&&sn.clearkeys.hasOwnProperty(Qt)?sn.clearkeys[Qt]:null;if(!jn)throw new Error("DRM: ClearKey keyID ("+Qt+") is not known!");Pt.push(new x(Qt,jn))}en=new ge(Pt)}return en}}}Je.__dashjs_factory_name="KeySystemClearKey";var Pe=dashjs.FactoryMaker.getSingletonFactory(Je),Nt="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Ht=De.CLEARKEY_KEYSTEM_STRING,$e="urn:uuid:"+Nt;function ht(dn){var sn=dn.BASE64,Tt=dn.debug.getLogger(undefined);return{uuid:Nt,schemeIdURI:$e,systemString:Ht,getInitData:function(en){return E.parseInitDataFromContentProtection(en,sn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(en){return new Uint8Array(en)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(en,wt){var Pt=null;if(en){for(var In=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(wt))),Qt=[],jn=0;jn<In.kids.length;jn++){var Xn=In.kids[jn],Pn=en.clearkeys&&en.clearkeys.hasOwnProperty(Xn)?en.clearkeys[Xn]:null;if(!Pn)throw new Error("DRM: ClearKey keyID ("+Xn+") is not known!");Qt.push(new x(Xn,Pn))}Pt=new ge(Qt),Tt.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return Pt}}}ht.__dashjs_factory_name="KeySystemW3CClearKey";var hn=dashjs.FactoryMaker.getSingletonFactory(ht),zt="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",mt=De.WIDEVINE_KEYSTEM_STRING,It="urn:uuid:"+zt;function je(dn){var fn=(dn=dn||{}).BASE64;return{uuid:zt,schemeIdURI:It,systemString:mt,getInitData:function(sn){return E.parseInitDataFromContentProtection(sn,fn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(sn){return new Uint8Array(sn)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}je.__dashjs_factory_name="KeySystemWidevine";var ze=dashjs.FactoryMaker.getSingletonFactory(je),bt="9a04f079-9840-4286-ab92-e65be0885f95",N=De.PLAYREADY_KEYSTEM_STRING,I="urn:uuid:"+bt;function Z(dn){var fn="utf-16",sn=(dn=dn||{}).BASE64,Tt=dn.settings;function en(){if(!sn||!sn.hasOwnProperty("decodeArray")||!sn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:bt,schemeIdURI:I,systemString:N,getInitData:function(wt){var Pt,In,Qt,jn,Xn,Pn=new Uint8Array([112,115,115,104,0,0,0,0]),cn=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),En=0,qn=null;if(en(),!wt)return null;if("pssh"in wt)return E.parseInitDataFromContentProtection(wt,sn);if("pro"in wt)qn=sn.decodeArray(wt.pro.__text);else{if(!("prheader"in wt))return null;qn=sn.decodeArray(wt.prheader.__text)}return In=4+Pn.length+cn.length+4+(Pt=qn.length),Qt=new ArrayBuffer(In),jn=new Uint8Array(Qt),(Xn=new DataView(Qt)).setUint32(En,In),jn.set(Pn,En+=4),jn.set(cn,En+=Pn.length),Xn.setUint32(En+=cn.length,Pt),jn.set(qn,En+=4),En+=Pt,jn.buffer},getRequestHeadersFromMessage:function(wt){var Pt,In,Qt={},jn=new DOMParser;if(Tt&&Tt.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===fn&&wt&&wt.byteLength%2==1)return Qt["Content-Type"]="text/xml; charset=utf-8",Qt;var Xn="utf-16"===fn?new Uint16Array(wt):new Uint8Array(wt);Pt=String.fromCharCode.apply(null,Xn);for(var Pn=(In=jn.parseFromString(Pt,"application/xml")).getElementsByTagName("name"),cn=In.getElementsByTagName("value"),En=0;En<Pn.length;En++)Qt[Pn[En].childNodes[0].nodeValue]=cn[En].childNodes[0].nodeValue;return Qt.hasOwnProperty("Content")&&(Qt["Content-Type"]=Qt.Content,delete Qt.Content),Qt.hasOwnProperty("Content-Type")||(Qt["Content-Type"]="text/xml; charset=utf-8"),Qt},getLicenseRequestFromMessage:function(wt){var Pt=null,In=new DOMParser;if(Tt&&Tt.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===fn&&wt&&wt.byteLength%2==1)return wt;var Qt="utf-16"===fn?new Uint16Array(wt):new Uint8Array(wt);en();var jn=String.fromCharCode.apply(null,Qt),Xn=In.parseFromString(jn,"application/xml");if(!Xn.getElementsByTagName("PlayReadyKeyMessage")[0])return wt;var Pn=Xn.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return Pn&&(Pt=sn.decode(Pn)),Pt},getLicenseServerURLFromInitData:function(wt){if(wt)for(var Pt=new DataView(wt),In=Pt.getUint16(4,!0),Qt=6,jn=new DOMParser,Xn=0;Xn<In;Xn++){var Pn=Pt.getUint16(Qt,!0),cn=Pt.getUint16(Qt+=2,!0);if(Qt+=2,1===Pn){var En=wt.slice(Qt,Qt+cn),qn=String.fromCharCode.apply(null,new Uint16Array(En)),fr=jn.parseFromString(qn,"application/xml");if(fr.getElementsByTagName("LA_URL")[0]){var Fr=fr.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Fr)return Fr}if(fr.getElementsByTagName("LUI_URL")[0]){var Ur=fr.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Ur)return Ur}}else Qt+=cn}return null},getCDMData:function(wt){var Pt,In,Qt,jn;if(en(),!wt)return null;for(Pt=[],jn=0;jn<wt.length;++jn)Pt.push(wt.charCodeAt(jn)),Pt.push(0);for(Pt=String.fromCharCode.apply(null,Pt),Pt=sn.encode(Pt),In='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",Pt),Qt=[],jn=0;jn<In.length;++jn)Qt.push(In.charCodeAt(jn)),Qt.push(0);return new Uint8Array(Qt).buffer},setPlayReadyMessageFormat:function(wt){if("utf-8"!==wt&&"utf-16"!==wt)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');fn=wt}}}Z.__dashjs_factory_name="KeySystemPlayReady";var q=dashjs.FactoryMaker.getSingletonFactory(Z);function Ie(dn){var fn=(dn=dn||{}).BASE64,sn={};return sn[De.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(Tt){return fn.decodeArray(Tt.license)},getErrorResponse:function(Tt){return Tt}},sn[De.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(Tt){return Tt},getErrorResponse:function(Tt){return String.fromCharCode.apply(null,new Uint8Array(Tt))}},{getServerURLFromMessage:function(Tt){return Tt},getHTTPMethod:function(){return"POST"},getResponseType:function(Tt){return sn[Tt].responseType},getLicenseMessage:function(Tt,en){return function(){if(!fn||!fn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),sn[en].getLicenseMessage(Tt)},getErrorResponse:function(Tt,en){return sn[en].getErrorResponse(Tt)}}}Ie.__dashjs_factory_name="DRMToday";var _e=dashjs.FactoryMaker.getSingletonFactory(Ie);function rt(){var dn="http://schemas.xmlsoap.org/soap/envelope/";function fn(en){var wt=String.fromCharCode.apply(null,new Uint8Array(en));return decodeURIComponent(escape(wt))}function sn(en){if(window.DOMParser){var wt=fn(en),Pt=(new window.DOMParser).parseFromString(wt,"text/xml"),In=Pt?Pt.getElementsByTagNameNS(dn,"Envelope")[0]:null,Qt=In?In.getElementsByTagNameNS(dn,"Body")[0]:null;if(Qt&&Qt.getElementsByTagNameNS(dn,"Fault")[0])return null}return en}function Tt(en){var wt="",Pt="",In="",Qt=-1,jn=-1;if(window.DOMParser){var Xn=fn(en),Pn=(new window.DOMParser).parseFromString(Xn,"text/xml"),cn=Pn?Pn.getElementsByTagNameNS(dn,"Envelope")[0]:null,En=cn?cn.getElementsByTagNameNS(dn,"Body")[0]:null,qn=En?En.getElementsByTagNameNS(dn,"Fault")[0]:null,fr=qn?qn.getElementsByTagName("detail")[0]:null,Fr=fr?fr.getElementsByTagName("Exception")[0]:null,Ur=null;if(null===qn)return Xn;wt=(Ur=qn.getElementsByTagName("faultstring")[0].firstChild)?Ur.nodeValue:null,null!==Fr&&(Pt=(Ur=Fr.getElementsByTagName("StatusCode")[0])?Ur.firstChild.nodeValue:null,Qt=(In=(Ur=Fr.getElementsByTagName("Message")[0])?Ur.firstChild.nodeValue:null)?In.lastIndexOf("[")+1:-1,jn=In?In.indexOf("]"):-1,In=In?In.substring(Qt,jn):"")}var rr="code: ".concat(Pt,", name: ").concat(wt);return In&&(rr+=", message: ".concat(In)),rr}return{getServerURLFromMessage:function(en){return en},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(en){return sn.call(this,en)},getErrorResponse:function(en){return Tt.call(this,en)}}}rt.__dashjs_factory_name="PlayReady";var xt=Me.Z.getSingletonFactory(rt);function at(){return{getServerURLFromMessage:function(dn){return dn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(dn){return dn},getErrorResponse:function(dn){return String.fromCharCode.apply(null,new Uint8Array(dn))}}}at.__dashjs_factory_name="Widevine";var ut=dashjs.FactoryMaker.getSingletonFactory(at);function it(){return{getServerURLFromMessage:function(dn){return dn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(dn){if(!dn.hasOwnProperty("keys"))return null;for(var fn=[],sn=0;sn<dn.keys.length;sn++){var Tt=dn.keys[sn],en=Tt.kid.replace(/=/g,""),wt=Tt.k.replace(/=/g,"");fn.push(new x(en,wt))}return new ge(fn)},getErrorResponse:function(dn){return String.fromCharCode.apply(null,new Uint8Array(dn))}}}it.__dashjs_factory_name="ClearKey";var vt=dashjs.FactoryMaker.getSingletonFactory(it);function Bt(){var dn,fn,sn,Tt,en,wt,Pt,In,Qt=this.context;function jn(cn,En){return En&&cn in En?En[cn]:null}function Xn(cn,En){return cn&&cn.sessionId?cn.sessionId:En&&En.sessionId?En.sessionId:null}function Pn(cn,En){return cn&&cn.sessionType?cn.sessionType:En}return dn={initialize:function(){var cn;Tt=[],cn=q(Qt).getInstance({BASE64:en,settings:wt}),Tt.push(cn),cn=ze(Qt).getInstance({BASE64:en}),Tt.push(cn),cn=Pe(Qt).getInstance({BASE64:en}),Tt.push(cn),Pt=cn,cn=hn(Qt).getInstance({BASE64:en,debug:fn}),Tt.push(cn),In=cn},setProtectionData:function(cn){for(var En,qn,fr=0;fr<Tt.length;fr++){var Fr=Tt[fr];Fr.hasOwnProperty("init")&&Fr.init((En=Fr.systemString,qn=void 0,qn=null,cn&&(qn=En in cn?cn[En]:null),qn))}},isClearKey:function(cn){return cn===Pt||cn===In},initDataEquals:function(cn,En){if(cn.byteLength===En.byteLength){for(var qn=new Uint8Array(cn),fr=new Uint8Array(En),Fr=0;Fr<qn.length;Fr++)if(qn[Fr]!==fr[Fr])return!1;return!0}return!1},getKeySystems:function(){return Tt},setKeySystems:function(cn){Tt=cn},getKeySystemBySystemString:function(cn){for(var En=0;En<Tt.length;En++)if(Tt[En].systemString===cn)return Tt[En];return null},getSupportedKeySystemsFromContentProtection:function(cn,En,qn){var fr,Fr,Ur,rr,tn=[];if(cn){var pn=E.findCencContentProtection(cn);for(Ur=0;Ur<Tt.length;++Ur){var On=jn((Fr=Tt[Ur]).systemString,En);for(rr=0;rr<cn.length;++rr)if((fr=cn[rr]).schemeIdUri.toLowerCase()===Fr.schemeIdURI){var gr=Fr.getInitData(fr,pn);tn.push({ks:Tt[Ur],keyId:fr.keyId,initData:gr,protData:On,cdmData:Fr.getCDMData(On?On.cdmData:null),sessionId:Xn(On,fr),sessionType:Pn(On,qn)})}}}return tn},getSupportedKeySystemsFromSegmentPssh:function(cn,En,qn){for(var fr,Fr=[],Ur=E.parsePSSHList(cn),rr=0;rr<Tt.length;++rr){var tn=jn((fr=Tt[rr]).systemString,En);fr.uuid in Ur&&Fr.push({ks:fr,initData:Ur[fr.uuid],protData:tn,cdmData:fr.getCDMData(tn?tn.cdmData:null),sessionId:Xn(tn),sessionType:Pn(tn,qn)})}return Fr},getLicenseServerModelInstance:function(cn,En,qn){if("license-release"===qn||"individualization-request"===qn)return null;var fr=null;return En&&En.hasOwnProperty("drmtoday")?fr=_e(Qt).getInstance({BASE64:en}):cn.systemString===De.WIDEVINE_KEYSTEM_STRING?fr=ut(Qt).getInstance():cn.systemString===De.PLAYREADY_KEYSTEM_STRING?fr=xt(Qt).getInstance():cn.systemString===De.CLEARKEY_KEYSTEM_STRING&&(fr=vt(Qt).getInstance()),fr},processClearKeyLicenseRequest:function(cn,En,qn){try{return cn.getClearKeysFromProtectionData(En,qn)}catch{return sn.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(cn){cn&&(cn.debug&&(sn=(fn=cn.debug).getLogger(dn)),cn.BASE64&&(en=cn.BASE64),cn.settings&&(wt=cn.settings))}}}Bt.__dashjs_factory_name="ProtectionKeyController";var un=dashjs.FactoryMaker.getSingletonFactory(Bt);function Zt(dn){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(fn){return typeof fn}:function(fn){return fn&&"function"==typeof Symbol&&fn.constructor===Symbol&&fn!==Symbol.prototype?"symbol":typeof fn})(dn)}function kn(dn,fn){return(kn=Object.setPrototypeOf||function(sn,Tt){return sn.__proto__=Tt,sn})(dn,fn)}function xn(dn){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(fn){return fn.__proto__||Object.getPrototypeOf(fn)})(dn)}var Tn=new(function(dn){!function(wt,Pt){if("function"!=typeof Pt&&null!==Pt)throw new TypeError("Super expression must either be null or a function");wt.prototype=Object.create(Pt&&Pt.prototype,{constructor:{value:wt,writable:!0,configurable:!0}}),Pt&&kn(wt,Pt)}(en,dn);var fn,sn,Tt=(fn=en,sn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var wt,Pt=xn(fn);if(sn){var In=xn(this).constructor;wt=Reflect.construct(Pt,arguments,In)}else wt=Pt.apply(this,arguments);return function vn(dn,fn){return!fn||"object"!==Zt(fn)&&"function"!=typeof fn?function(sn){if(void 0===sn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return sn}(dn):fn}(this,wt)});function en(){var wt;return function(Pt,In){if(!(Pt instanceof In))throw new TypeError("Cannot call a class as a function")}(this,en),(wt=Tt.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",wt.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",wt.KEY_ADDED="public_keyAdded",wt.KEY_ERROR="public_keyError",wt.KEY_MESSAGE="public_keyMessage",wt.KEY_SESSION_CLOSED="public_keySessionClosed",wt.KEY_SESSION_CREATED="public_keySessionCreated",wt.KEY_SESSION_REMOVED="public_keySessionRemoved",wt.KEY_STATUSES_CHANGED="public_keyStatusesChanged",wt.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",wt.KEY_SYSTEM_SELECTED="public_keySystemSelected",wt.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",wt.LICENSE_REQUEST_SENDING="public_licenseRequestSending",wt.NEED_KEY="needkey",wt.PROTECTION_CREATED="public_protectioncreated",wt.PROTECTION_DESTROYED="public_protectiondestroyed",wt.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",wt.TEARDOWN_COMPLETE="protectionTeardownComplete",wt.VIDEO_ELEMENT_SELECTED="videoElementSelected",wt.KEY_SESSION_UPDATED="public_keySessionUpdated",wt}return en}(ne(8342).Z)),sr=function dn(fn,sn){(function(Tt,en){if(!(Tt instanceof en))throw new TypeError("Cannot call a class as a function")})(this,dn),this.initData=fn,this.initDataType=sn},Or=function dn(fn,sn,Tt,en){(function(wt,Pt){if(!(wt instanceof Pt))throw new TypeError("Cannot call a class as a function")})(this,dn),this.sessionToken=fn,this.message=sn,this.defaultURL=Tt,this.messageType=en||"license-request"},ei=function dn(fn,sn){(function(Tt,en){if(!(Tt instanceof en))throw new TypeError("Cannot call a class as a function")})(this,dn),this.keySystem=fn,this.ksConfiguration=sn},ti={};function yi(dn){var fn,sn,Tt,en,wt,Pt,In,Qt,jn=this.context,Xn=(dn=dn||{}).eventBus,Pn=dn.events;function En(tn,pn,On,gr){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess){var vr="Insecure origins are not allowed";return Xn.trigger(Pn.KEY_SYSTEM_ACCESS_COMPLETE,{error:vr}),void gr({error:vr})}var Ei,Gi,uo=tn[pn].ks,pi=uo.systemString;(Ei=(tn[pn].protData&&tn[pn].protData.systemStringPriority?tn[pn].protData.systemStringPriority:null)||(ti[pi]?ti[pi]:[pi]),Gi=tn[pn].configs,new Promise(function(Mi,to){qn(Ei,Gi,0,Mi,to)})).then(function(Ei){var Gi="function"==typeof Ei.getConfiguration?Ei.getConfiguration():null,Mi=new ei(uo,Gi);Mi.mksa=Ei,Xn.trigger(Pn.KEY_SYSTEM_ACCESS_COMPLETE,{data:Mi}),On({data:Mi})}).catch(function(Ei){if(pn+1<tn.length)En(tn,pn+1,On,gr);else{var Gi="Key system access denied! ";Xn.trigger(Pn.KEY_SYSTEM_ACCESS_COMPLETE,{error:Gi+Ei.message}),gr({error:Gi+Ei.message})}})}function qn(tn,pn,On,gr,vr){var qr=tn[On];sn.debug("Requesting key system access for system string ".concat(qr)),navigator.requestMediaKeySystemAccess(qr,pn).then(function(Qr){Qr.selectedSystemString=qr,gr(Qr)}).catch(function(Qr){On+1<tn.length?qn(tn,pn,On+1,gr,vr):vr(Qr)})}function fr(tn){if(!tn||!tn.session)return Promise.resolve;var pn=tn.session;return pn.removeEventListener("keystatuseschange",tn),pn.removeEventListener("message",tn),pn.close()}function Fr(tn){for(var pn=0;pn<Pt.length;pn++)if(Pt[pn]===tn){Pt.splice(pn,1);break}}function Ur(tn){var pn,On;return tn&&tn.length>0&&(tn[0]&&("string"==typeof tn[0]?pn=tn[0]:On=tn[0]),tn[1]&&("string"==typeof tn[1]?pn=tn[1]:On=tn[1])),{status:pn,keyId:On}}function rr(tn,pn){var On={session:tn,keyId:pn.keyId,initData:pn.initData,sessionId:pn.sessionId,sessionType:pn.sessionType,handleEvent:function(gr){switch(gr.type){case"keystatuseschange":Xn.trigger(Pn.KEY_STATUSES_CHANGED,{data:this}),gr.target.keyStatuses.forEach(function(){var qr=Ur(arguments);Xn.trigger(Pn.INTERNAL_KEY_STATUS_CHANGED,"expired"===qr.status?{error:new M.Z(T.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,T.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}:qr)});break;case"message":var vr=ArrayBuffer.isView(gr.message)?gr.message.buffer:gr.message;Xn.trigger(Pn.INTERNAL_KEY_MESSAGE,{data:new Or(this,vr,void 0,gr.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return tn.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return tn.expiration},getKeyStatuses:function(){return tn.keyStatuses},getUsable:function(){var gr=!1;return tn.keyStatuses.forEach(function(){"usable"===Ur(arguments).status&&(gr=!0)}),gr}};return tn.addEventListener("keystatuseschange",On),tn.addEventListener("message",On),tn.closed.then(function(){Fr(On),sn.debug("DRM: Session closed.  SessionID = "+On.getSessionId()),Xn.trigger(Pn.KEY_SESSION_CLOSED,{data:On.getSessionId()})}),Pt.push(On),On}return fn={getAllInitData:function(){for(var tn=[],pn=0;pn<Pt.length;pn++)Pt[pn].initData&&tn.push(Pt[pn].initData);return tn},getSessions:function(){return Pt},requestKeySystemAccess:function(tn){return new Promise(function(pn,On){En(tn,0,pn,On)})},selectKeySystem:function(tn){return new Promise(function(pn,On){tn.mksa.createMediaKeys().then(function(gr){return Tt=tn.keySystem,wt=gr,en?en.setMediaKeys(wt):Promise.resolve()}).then(function(){pn(Tt)}).catch(function(){On({error:"Error selecting keys system ("+tn.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(tn){en!==tn&&(en&&(en.removeEventListener("encrypted",In),en.setMediaKeys&&en.setMediaKeys(null)),(en=tn)&&(en.addEventListener("encrypted",In),en.setMediaKeys&&wt&&en.setMediaKeys(wt)))},setServerCertificate:function(tn){if(!Tt||!wt)throw new Error("Can not set server certificate until you have selected a key system");wt.setServerCertificate(tn).then(function(){sn.info("DRM: License server certificate successfully updated."),Xn.trigger(Pn.SERVER_CERTIFICATE_UPDATED)}).catch(function(pn){Xn.trigger(Pn.SERVER_CERTIFICATE_UPDATED,{error:new M.Z(T.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,T.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+pn.name)})})},createKeySession:function(tn){if(!Tt||!wt)throw new Error("Can not create sessions until you have selected a key system");var pn=wt.createSession(tn.sessionType),On=rr(pn,tn);pn.generateRequest(Tt.systemString===De.CLEARKEY_KEYSTEM_STRING&&(tn.initData||tn.protData&&tn.protData.clearkeys)?De.INITIALIZATION_DATA_TYPE_KEYIDS:De.INITIALIZATION_DATA_TYPE_CENC,tn.initData).then(function(){sn.debug("DRM: Session created.  SessionID = "+On.getSessionId()),Xn.trigger(Pn.KEY_SESSION_CREATED,{data:On})}).catch(function(vr){Fr(On),Xn.trigger(Pn.KEY_SESSION_CREATED,{data:null,error:new M.Z(T.KEY_SESSION_CREATED_ERROR_CODE,T.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+vr.name)})})},updateKeySession:function(tn,pn){var On=tn.session;Qt.isClearKey(Tt)&&(pn=pn.toJWK()),On.update(pn).then(function(){Xn.trigger(Pn.KEY_SESSION_UPDATED)}).catch(function(gr){Xn.trigger(Pn.KEY_ERROR,{error:new M.Z(T.MEDIA_KEYERR_CODE,"Error sending update() message! "+gr.name,tn)})})},loadKeySession:function(tn){if(!Tt||!wt)throw new Error("Can not load sessions until you have selected a key system");for(var pn=tn.sessionId,On=0;On<Pt.length;On++)if(pn===Pt[On].sessionId)return void sn.warn("DRM: Ignoring session ID because we have already seen it!");var gr=wt.createSession(tn.sessionType),vr=rr(gr,tn);gr.load(pn).then(function(qr){qr?(sn.debug("DRM: Session loaded.  SessionID = "+vr.getSessionId()),Xn.trigger(Pn.KEY_SESSION_CREATED,{data:vr})):(Fr(vr),Xn.trigger(Pn.KEY_SESSION_CREATED,{data:null,error:new M.Z(T.KEY_SESSION_CREATED_ERROR_CODE,T.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+pn+")")}))}).catch(function(qr){Fr(vr),Xn.trigger(Pn.KEY_SESSION_CREATED,{data:null,error:new M.Z(T.KEY_SESSION_CREATED_ERROR_CODE,T.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+pn+")! "+qr.name)})})},removeKeySession:function(tn){tn.session.remove().then(function(){sn.debug("DRM: Session removed.  SessionID = "+tn.getSessionId()),Xn.trigger(Pn.KEY_SESSION_REMOVED,{data:tn.getSessionId()})},function(pn){Xn.trigger(Pn.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+tn.getSessionId()+"). "+pn.name})})},closeKeySession:function(tn){fr(tn).catch(function(pn){Fr(tn),Xn.trigger(Pn.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+tn.getSessionId()+") "+pn.name})})},stop:function(){for(var tn,pn=0;pn<Pt.length;pn++)(tn=Pt[pn]).getUsable()||(fr(tn),Fr(tn))},reset:function(){var tn,pn=Pt.length;0!==pn?function(){for(var On=function(vr){Fr(vr),0===Pt.length&&(en?(en.removeEventListener("encrypted",In),en.setMediaKeys(null).then(function(){Xn.trigger(Pn.TEARDOWN_COMPLETE)})):Xn.trigger(Pn.TEARDOWN_COMPLETE))},gr=0;gr<pn;gr++)vr=tn=Pt[gr],fr(tn),On(vr);var vr}():Xn.trigger(Pn.TEARDOWN_COMPLETE)}},sn=dn.debug.getLogger(fn),Tt=null,en=null,wt=null,Pt=[],Qt=un(jn).getInstance(),In={handleEvent:function(tn){if("encrypted"===tn.type&&tn.initData){var pn=ArrayBuffer.isView(tn.initData)?tn.initData.buffer:tn.initData;Xn.trigger(Pn.NEED_KEY,{key:new sr(pn,tn.initDataType)})}}},fn}ti[De.PLAYREADY_KEYSTEM_STRING]=[De.PLAYREADY_KEYSTEM_STRING,De.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],ti[De.WIDEVINE_KEYSTEM_STRING]=[De.WIDEVINE_KEYSTEM_STRING],ti[De.CLEARKEY_KEYSTEM_STRING]=[De.CLEARKEY_KEYSTEM_STRING],yi.__dashjs_factory_name="ProtectionModel_21Jan2015";var zi=dashjs.FactoryMaker.getClassFactory(yi);function ni(dn){var fn,sn,Tt,en,wt,Pt,In,Qt,jn,Xn=this.context,Pn=(dn=dn||{}).eventBus,cn=dn.events,qn=dn.api;function fr(){try{for(var rr=0;rr<In.length;rr++)Fr(In[rr]);Tt&&Tt.removeEventListener(qn.needkey,Qt),Pn.trigger(cn.TEARDOWN_COMPLETE)}catch(tn){Pn.trigger(cn.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+tn.message})}}function Fr(rr){var tn=rr.session;tn.removeEventListener(qn.error,rr),tn.removeEventListener(qn.message,rr),tn.removeEventListener(qn.ready,rr),tn.removeEventListener(qn.close,rr);for(var pn=0;pn<In.length;pn++)if(In[pn]===rr){In.splice(pn,1);break}tn[qn.release]()}function Ur(){var rr=null,tn=function(){Tt.removeEventListener("loadedmetadata",rr),Tt[qn.setMediaKeys](wt),Pn.trigger(cn.VIDEO_ELEMENT_SELECTED)};Tt.readyState>=1?tn():(rr=tn.bind(this),Tt.addEventListener("loadedmetadata",rr))}return fn={getAllInitData:function(){for(var rr=[],tn=0;tn<In.length;tn++)rr.push(In[tn].initData);return rr},getSessions:function(){return In},requestKeySystemAccess:function(rr){return new Promise(function(tn,pn){for(var On=!1,gr=0;gr<rr.length;gr++)for(var vr=rr[gr].ks.systemString,qr=rr[gr].configs,Qr=null,uo=null,pi=0;pi<qr.length;pi++){var Ei=qr[pi].audioCapabilities,Gi=qr[pi].videoCapabilities;if(Ei&&0!==Ei.length){Qr=[];for(var Mi=0;Mi<Ei.length;Mi++)window[qn.MediaKeys].isTypeSupported(vr,Ei[Mi].contentType)&&Qr.push(Ei[Mi])}if(Gi&&0!==Gi.length){uo=[];for(var to=0;to<Gi.length;to++)window[qn.MediaKeys].isTypeSupported(vr,Gi[to].contentType)&&uo.push(Gi[to])}if(!(!Qr&&!uo||Qr&&0===Qr.length||uo&&0===uo.length)){On=!0;var Za=new F(Qr,uo),ta=jn.getKeySystemBySystemString(vr),ga=new ei(ta,Za);Pn.trigger(cn.KEY_SYSTEM_ACCESS_COMPLETE,{data:ga}),tn({data:ga});break}}if(!On){var yo="Key system access denied! -- No valid audio/video content configurations detected!";Pn.trigger(cn.KEY_SYSTEM_ACCESS_COMPLETE,{error:yo}),pn({error:yo})}})},selectKeySystem:function(rr){return new Promise(function(tn,pn){try{wt=rr.mediaKeys=new window[qn.MediaKeys](rr.keySystem.systemString),en=rr.keySystem,Pt=rr,Tt&&Ur(),tn(en)}catch{pn({error:"Error selecting keys system ("+en.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(rr){Tt!==rr&&(Tt&&Tt.removeEventListener(qn.needkey,Qt),(Tt=rr)&&(Tt.addEventListener(qn.needkey,Qt),wt&&Ur()))},createKeySession:function(rr){if(!en||!wt||!Pt)throw new Error("Can not create sessions until you have selected a key system");var tn=null;if(Pt.ksConfiguration.videoCapabilities&&Pt.ksConfiguration.videoCapabilities.length>0&&(tn=Pt.ksConfiguration.videoCapabilities[0]),null===tn&&Pt.ksConfiguration.audioCapabilities&&Pt.ksConfiguration.audioCapabilities.length>0&&(tn=Pt.ksConfiguration.audioCapabilities[0]),null===tn)throw new Error("Can not create sessions for unknown content types.");var qr,On=wt.createSession(tn.contentType,new Uint8Array(rr.initData),rr.cdmData?new Uint8Array(rr.cdmData):null),gr={session:On,keyId:(qr=rr).keyId,initData:qr.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(Qr){switch(Qr.type){case qn.error:Pn.trigger(cn.KEY_ERROR,{error:new M.Z(T.MEDIA_KEYERR_CODE,"KeyError",this)});break;case qn.message:var uo=ArrayBuffer.isView(Qr.message)?Qr.message.buffer:Qr.message;Pn.trigger(cn.INTERNAL_KEY_MESSAGE,{data:new Or(this,uo,Qr.destinationURL)});break;case qn.ready:sn.debug("DRM: Key added."),Pn.trigger(cn.KEY_ADDED);break;case qn.close:sn.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Pn.trigger(cn.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}};On.addEventListener(qn.error,gr),On.addEventListener(qn.message,gr),On.addEventListener(qn.ready,gr),On.addEventListener(qn.close,gr),In.push(gr),sn.debug("DRM: Session created.  SessionID = "+gr.getSessionId()),Pn.trigger(cn.KEY_SESSION_CREATED,{data:gr})},updateKeySession:function(rr,tn){var pn=rr.session;jn.isClearKey(en)?pn.update(new Uint8Array(tn.toJWK())):pn.update(new Uint8Array(tn)),Pn.trigger(cn.KEY_SESSION_UPDATED)},closeKeySession:Fr,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:fr,reset:fr},sn=dn.debug.getLogger(fn),Tt=null,en=null,wt=null,Pt=null,In=[],jn=un(Xn).getInstance(),Qt={handleEvent:function(rr){if(rr.type===qn.needkey&&rr.initData){var tn=ArrayBuffer.isView(rr.initData)?rr.initData.buffer:rr.initData;Pn.trigger(cn.NEED_KEY,{key:new sr(tn,"cenc")})}}},fn}ni.__dashjs_factory_name="ProtectionModel_3Feb2014";var xo=dashjs.FactoryMaker.getClassFactory(ni);function Ui(dn){var fn,sn,Tt,en,wt,Pt,In,Qt,jn,Xn=this.context,Pn=(dn=dn||{}).eventBus,cn=dn.events,qn=dn.api,fr=dn.errHandler;function Fr(){Tt&&tn();for(var pn=0;pn<In.length;pn++)Ur(In[pn]);Pn.trigger(cn.TEARDOWN_COMPLETE)}function Ur(pn){try{Tt[qn.cancelKeyRequest](en.systemString,pn.sessionId)}catch(On){Pn.trigger(cn.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+pn.sessionId+") "+On.message})}}function rr(pn,On){if(On&&pn){for(var gr=pn.length,vr=0;vr<gr;vr++)if(pn[vr].sessionId==On)return pn[vr];return null}return null}function tn(){Tt.removeEventListener(qn.keyerror,jn),Tt.removeEventListener(qn.needkey,jn),Tt.removeEventListener(qn.keymessage,jn),Tt.removeEventListener(qn.keyadded,jn)}return sn=dn.debug.getLogger(fn={getAllInitData:function(){for(var pn=[],On=0;On<Pt.length;On++)pn.push(Pt[On].initData);for(var gr=0;gr<In.length;gr++)pn.push(In[gr].initData);return pn},getSessions:function(){return In.concat(Pt)},requestKeySystemAccess:function(pn){return new Promise(function(On,gr){var vr=Tt;vr||(vr=document.createElement("video"));for(var qr=!1,Qr=0;Qr<pn.length;Qr++)for(var uo=pn[Qr].ks.systemString,pi=pn[Qr].configs,Ei=null,Gi=0;Gi<pi.length;Gi++){var Mi=pi[Gi].videoCapabilities;if(Mi&&0!==Mi.length){Ei=[];for(var to=0;to<Mi.length;to++)""!==vr.canPlayType(Mi[to].contentType,uo)&&Ei.push(Mi[to])}if(Ei&&(!Ei||0!==Ei.length)){qr=!0;var Za=new F(null,Ei),ta=wt.getKeySystemBySystemString(uo),ga=new ei(ta,Za);Pn.trigger(cn.KEY_SYSTEM_ACCESS_COMPLETE,{data:ga}),On({data:ga});break}}if(!qr){var yo="Key system access denied! -- No valid audio/video content configurations detected!";Pn.trigger(cn.KEY_SYSTEM_ACCESS_COMPLETE,{error:yo}),gr({error:yo})}})},selectKeySystem:function(pn){return en=pn.keySystem,Promise.resolve(en)},setMediaElement:function(pn){if(Tt!==pn){if(Tt){tn();for(var On=0;On<In.length;On++)Ur(In[On]);In=[]}(Tt=pn)&&(Tt.addEventListener(qn.keyerror,jn),Tt.addEventListener(qn.needkey,jn),Tt.addEventListener(qn.keymessage,jn),Tt.addEventListener(qn.keyadded,jn),Pn.trigger(cn.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(pn){if(!en)throw new Error("Can not create sessions until you have selected a key system");if(Qt||0===In.length){var On={sessionId:null,keyId:pn.keyId,initData:pn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return Pt.push(On),Tt[qn.generateKeyRequest](en.systemString,new Uint8Array(pn.initData)),On}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(pn,On){var gr=pn.sessionId;if(wt.isClearKey(en))for(var vr=0;vr<On.keyPairs.length;vr++)Tt[qn.addKey](en.systemString,On.keyPairs[vr].key,On.keyPairs[vr].keyID,gr);else Tt[qn.addKey](en.systemString,new Uint8Array(On),new Uint8Array(pn.initData),gr);Pn.trigger(cn.KEY_SESSION_UPDATED)},closeKeySession:Ur,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Fr,reset:Fr}),Tt=null,en=null,Pt=[],In=[],wt=un(Xn).getInstance(),jn={handleEvent:function(pn){var On=null;switch(pn.type){case qn.needkey:var gr=ArrayBuffer.isView(pn.initData)?pn.initData.buffer:pn.initData;Pn.trigger(cn.NEED_KEY,{key:new sr(gr,"cenc")});break;case qn.keyerror:if((On=rr(In,pn.sessionId))||(On=rr(Pt,pn.sessionId)),On){var vr=T.MEDIA_KEYERR_CODE,qr="";switch(pn.errorCode.code){case 1:vr=T.MEDIA_KEYERR_UNKNOWN_CODE,qr+="MEDIA_KEYERR_UNKNOWN - "+T.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:vr=T.MEDIA_KEYERR_CLIENT_CODE,qr+="MEDIA_KEYERR_CLIENT - "+T.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:vr=T.MEDIA_KEYERR_SERVICE_CODE,qr+="MEDIA_KEYERR_SERVICE - "+T.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:vr=T.MEDIA_KEYERR_OUTPUT_CODE,qr+="MEDIA_KEYERR_OUTPUT - "+T.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:vr=T.MEDIA_KEYERR_HARDWARECHANGE_CODE,qr+="MEDIA_KEYERR_HARDWARECHANGE - "+T.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:vr=T.MEDIA_KEYERR_DOMAIN_CODE,qr+="MEDIA_KEYERR_DOMAIN - "+T.MEDIA_KEYERR_DOMAIN_MESSAGE}Pn.trigger(cn.KEY_ERROR,{error:new M.Z(vr,qr+="  System Code = "+pn.systemCode,On)})}else sn.error("No session token found for key error");break;case qn.keyadded:(On=rr(In,pn.sessionId))||(On=rr(Pt,pn.sessionId)),On?(sn.debug("DRM: Key added."),Pn.trigger(cn.KEY_ADDED,{data:On})):sn.debug("No session token found for key added");break;case qn.keymessage:if((Qt=null!=pn.sessionId)?!(On=rr(In,pn.sessionId))&&Pt.length>0&&(On=Pt.shift(),In.push(On),On.sessionId=pn.sessionId,Pn.trigger(cn.KEY_SESSION_CREATED,{data:On})):Pt.length>0&&(On=Pt.shift(),In.push(On),0!==Pt.length&&fr.error(new M.Z(T.MEDIA_KEY_MESSAGE_ERROR_CODE,T.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),On){var Qr=ArrayBuffer.isView(pn.message)?pn.message.buffer:pn.message;On.keyMessage=Qr,Pn.trigger(cn.INTERNAL_KEY_MESSAGE,{data:new Or(On,Qr,pn.defaultURL)})}else sn.warn("No session token found for key message")}}},fn}Ui.__dashjs_factory_name="ProtectionModel_01b";var mo=dashjs.FactoryMaker.getClassFactory(Ui),Zo=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],vo=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function ea(){var dn,fn=this.context;function sn(Tt,en){for(var wt=0;wt<en.length;wt++){var Pt=en[wt];if("function"==typeof Tt[Pt[Object.keys(Pt)[0]]])return Pt}return null}return dn={createProtectionSystem:function(Tt){var en=null,wt=un(fn).getInstance();wt.setConfig({debug:Tt.debug,BASE64:Tt.BASE64,settings:Tt.settings}),wt.initialize();var In,Qt,jn,Xn,Pn,cn,Pt=(jn=(Qt=(In=Tt).debug).getLogger(dn),Xn=In.eventBus,Pn=In.errHandler,(cn=In.videoModel?In.videoModel.getElement():null)&&void 0===cn.onencrypted||cn&&void 0===cn.mediaKeys?sn(cn,vo)?(jn.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),xo(fn).create({debug:Qt,eventBus:Xn,events:In.events,api:sn(cn,vo)})):sn(cn,Zo)?(jn.info("EME detected on this user agent! (ProtectionModel_01b)"),mo(fn).create({debug:Qt,eventBus:Xn,errHandler:Pn,events:In.events,api:sn(cn,Zo)})):(jn.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(jn.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),zi(fn).create({debug:Qt,eventBus:Xn,events:In.events})));return!en&&Pt&&(en=Le(fn).create({protectionModel:Pt,protectionKeyController:wt,eventBus:Tt.eventBus,debug:Tt.debug,events:Tt.events,BASE64:Tt.BASE64,constants:Tt.constants,cmcdModel:Tt.cmcdModel,customParametersModel:Tt.customParametersModel,settings:Tt.settings}),Tt.capabilities.setEncryptedMediaSupported(!0)),en}}}ea.__dashjs_factory_name="Protection";var ha=dashjs.FactoryMaker.getClassFactory(ea);ha.events=Tn,ha.errors=T,dashjs.FactoryMaker.updateClassFactory(ea.__dashjs_factory_name,ha);var Co=ha},2068:function(Vt,Qe,ne){"use strict";var Ce=ne(5448),G={DEFAULT:.5,STRONG:1,WEAK:0};function E(F,V,D){var T,M;return M=G.DEFAULT,(T=D)!==G.DEFAULT&&T!==G.STRONG&&T!==G.WEAK||(M=T),{quality:void 0===F?-1:F,reason:void 0===V?null:V,priority:M}}E.__dashjs_factory_name="SwitchRequest";var _=Ce.Z.getClassFactory(E);_.NO_CHANGE=-1,_.PRIORITY=G,Ce.Z.updateClassFactory(E.__dashjs_factory_name,_),Qe.Z=_},1767:function(Vt,Qe,ne){"use strict";var Ce=ne(5628),G=ne(6535),E=ne(7423),_=ne(895),F=ne(6070),V=ne(3112),D=ne(1914),j=ne(5435),B=ne(5448),T=ne(2068),M=ne(3393),L="qualitySwitchRules",K="abandonFragmentRules";function ce(ue){var Me,Q,Se=this.context,Le=(ue=ue||{}).mediaPlayerModel,x=ue.customParametersModel,Ee=ue.dashMetrics,ge=ue.settings;function et(ot){return ot.filter(function(gt){return gt.quality>T.Z.NO_CHANGE})}function De(ot){var gt,St,Je,Pe,Nt,Ht={},$e=null;if(0!==ot.length){for(Ht[T.Z.PRIORITY.STRONG]={quality:T.Z.NO_CHANGE,reason:null},Ht[T.Z.PRIORITY.WEAK]={quality:T.Z.NO_CHANGE,reason:null},Ht[T.Z.PRIORITY.DEFAULT]={quality:T.Z.NO_CHANGE,reason:null},gt=0,St=ot.length;gt<St;gt+=1)(Je=ot[gt]).quality!==T.Z.NO_CHANGE&&(Ht[Je.priority].quality===T.Z.NO_CHANGE||Ht[Je.priority].quality>Je.quality)&&(Ht[Je.priority].quality=Je.quality,Ht[Je.priority].reason=Je.reason||null);return Ht[T.Z.PRIORITY.WEAK].quality!==T.Z.NO_CHANGE&&($e=Ht[T.Z.PRIORITY.WEAK]),Ht[T.Z.PRIORITY.DEFAULT].quality!==T.Z.NO_CHANGE&&($e=Ht[T.Z.PRIORITY.DEFAULT]),Ht[T.Z.PRIORITY.STRONG].quality!==T.Z.NO_CHANGE&&($e=Ht[T.Z.PRIORITY.STRONG]),$e&&(Pe=$e.quality,Nt=$e.reason),(0,T.Z)(Se).create(Pe,Nt)}}return{initialize:function(){Me=[],Q=[],ge.get().streaming.abr.useDefaultABRRules&&(ge.get().streaming.abr.ABRStrategy===M.Z.ABR_STRATEGY_L2A?Me.push((0,D.Z)(Se).create({dashMetrics:Ee,settings:ge})):ge.get().streaming.abr.ABRStrategy===M.Z.ABR_STRATEGY_LoLP?Me.push((0,j.Z)(Se).create({dashMetrics:Ee})):(Me.push((0,V.Z)(Se).create({dashMetrics:Ee,mediaPlayerModel:Le,settings:ge})),Me.push((0,Ce.Z)(Se).create({dashMetrics:Ee})),ge.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&Me.push((0,G.Z)(Se).create({dashMetrics:Ee,settings:ge})),ge.get().streaming.abr.additionalAbrRules.switchHistoryRule&&Me.push((0,F.Z)(Se).create()),ge.get().streaming.abr.additionalAbrRules.droppedFramesRule&&Me.push((0,_.Z)(Se).create()),ge.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&Q.push((0,E.Z)(Se).create({dashMetrics:Ee,mediaPlayerModel:Le,settings:ge})))),x.getAbrCustomRules().forEach(function(ot){ot.type===L&&Me.push(ot.rule(Se).create()),ot.type===K&&Q.push(ot.rule(Se).create())})},reset:function(){[Me,Q].forEach(function(ot){ot&&ot.length&&ot.forEach(function(gt){return gt.reset&&gt.reset()})}),Me=[],Q=[]},getMaxQuality:function(ot){return De(et(Me.map(function(gt){return gt.getMaxIndex(ot)})))||(0,T.Z)(Se).create()},getMinSwitchRequest:De,shouldAbandonFragment:function(ot,gt){var St=De(et(Q.map(function(Je){return Je.shouldAbandon(ot,gt)})));return St&&(St.reason.forceAbandon=!0),St||(0,T.Z)(Se).create()},getQualitySwitchRules:function(){return Me}}}ce.__dashjs_factory_name="ABRRulesCollection";var pe=B.Z.getClassFactory(ce);pe.QUALITY_SWITCH_RULES=L,pe.ABANDON_FRAGMENT_RULES=K,B.Z.updateSingletonFactory(ce.__dashjs_factory_name,pe),Qe.Z=pe},7423:function(Vt,Qe,ne){"use strict";var Ce=ne(2068),G=ne(5448),E=ne(6398);function _(F){var V,D,j,B,T,M=this.context,L=(F=F||{}).mediaPlayerModel,K=F.dashMetrics,ce=F.settings;function pe(){j={},B={},T=[]}return V={shouldAbandon:function(ue){var Me=(0,Ce.Z)(M).create(Ce.Z.NO_CHANGE,{name:_.__dashjs_factory_name});if(!(ue&&ue.hasOwnProperty("getMediaInfo")&&ue.hasOwnProperty("getMediaType")&&ue.hasOwnProperty("getCurrentRequest")&&ue.hasOwnProperty("getRepresentationInfo")&&ue.hasOwnProperty("getAbrController")))return Me;var Q,Se,ht,hn,Le=ue.getMediaInfo(),x=ue.getMediaType(),Ee=ue.getStreamInfo(),ge=Ee?Ee.id:null,et=ue.getCurrentRequest();if(!isNaN(et.index)){Se=et.index,j[Q=x]=j[Q]||{},j[Q][Se]=j[Q][Se]||{};var De=L.getStableBufferTime();if(K.getCurrentBufferLevel(x)>De)return Me;var ot=j[x][et.index];if(null===ot||null===et.firstByteDate||B.hasOwnProperty(ot.id))return Me;if(void 0===ot.firstByteTime&&(T[x]=[],ot.firstByteTime=et.firstByteDate.getTime(),ot.segmentDuration=et.duration,ot.bytesTotal=et.bytesTotal,ot.id=et.index),ot.bytesLoaded=et.bytesLoaded,ot.elapsedTime=(new Date).getTime()-ot.firstByteTime,ot.bytesLoaded>0&&ot.elapsedTime>0&&(ht=x,hn=Math.round(8*ot.bytesLoaded/ot.elapsedTime),T[ht]=T[ht]||[],T[ht].push(hn)),T[x].length>=ce.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&ot.elapsedTime>ce.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&ot.bytesLoaded<ot.bytesTotal){var gt=T[x].reduce(function(ht,hn){return ht+hn},0);if(ot.measuredBandwidthInKbps=Math.round(gt/T[x].length),ot.estimatedTimeOfDownload=+(8*ot.bytesTotal/ot.measuredBandwidthInKbps/1e3).toFixed(2),ot.estimatedTimeOfDownload<ot.segmentDuration*ce.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||0===ue.getRepresentationInfo().quality)return Me;if(!B.hasOwnProperty(ot.id)){var St=ue.getAbrController(),Je=ot.bytesTotal-ot.bytesLoaded,Pe=St.getBitrateList(Le),Nt=St.getQualityForBitrate(Le,ot.measuredBandwidthInKbps*ce.get().streaming.abr.bandwidthSafetyFactor,ge),Ht=St.getMinAllowedIndexFor(x,ge),$e=void 0!==Ht?Math.max(Ht,Nt):Nt;Je>ot.bytesTotal*Pe[$e].bitrate/Pe[St.getQualityFor(x,ge)].bitrate&&(Me.quality=$e,Me.reason.throughput=ot.measuredBandwidthInKbps,Me.reason.fragmentID=ot.id,Me.reason.rule=this.getClassName(),B[ot.id]=ot,D.debug("["+x+"] frag id",ot.id," is asking to abandon and switch to quality to ",$e," measured bandwidth was",ot.measuredBandwidthInKbps),delete j[x][ot.id])}}else ot.bytesLoaded===ot.bytesTotal&&delete j[x][ot.id]}return Me},reset:pe},D=(0,E.Z)(M).getInstance().getLogger(V),pe(),V}_.__dashjs_factory_name="AbandonRequestsRule",Qe.Z=G.Z.getClassFactory(_)},3112:function(Vt,Qe,ne){"use strict";var Ce=ne(3860),G=ne(2068),E=ne(5448),_=ne(7855),F=ne(5595),V=ne(8512),D=ne(6398),j=ne(8825),B=ne(3393),T=10;function M(L){var K,ce,pe,ue=this.context,Me=(L=L||{}).dashMetrics,Q=L.mediaPlayerModel,Se=(0,F.Z)(ue).getInstance();function Le($e,ht,hn){var zt=hn.reduce(function(je,ze,bt){return ze>hn[je]?bt:je},0);if(0===zt)return null;var mt=Math.max($e,T+2*ht.length),It=(hn[zt]-1)/(mt/T-1);return{gp:It,Vp:T/It}}function x($e){$e.placeholderBuffer=0,$e.mostAdvancedSegmentStart=NaN,$e.lastSegmentWasReplacement=!1,$e.lastSegmentStart=NaN,$e.lastSegmentDurationS=NaN,$e.lastSegmentRequestTimeMs=NaN,$e.lastSegmentFinishTimeMs=NaN}function Ee($e,ht){var hn=Q.getStableBufferTime();if($e.stableBufferTime!==hn){var zt=Le(hn,$e.bitrates,$e.utilities);if(zt.Vp!==$e.Vp||zt.gp!==$e.gp){var mt=Me.getCurrentBufferLevel(ht),It=mt+$e.placeholderBuffer;It-=T,It*=zt.Vp/$e.Vp,It+=T,$e.stableBufferTime=hn,$e.Vp=zt.Vp,$e.gp=zt.gp,$e.placeholderBuffer=Math.max(0,It-mt)}}}function ge($e,ht){return $e.Vp*($e.utilities[ht]+$e.gp)}function et($e,ht){for(var hn=$e.bitrates[ht],zt=$e.utilities[ht],mt=0,It=ht-1;It>=0;--It)if($e.utilities[It]<$e.utilities[ht]){var je=$e.bitrates[It];mt=Math.max(mt,$e.Vp*($e.gp+(hn*$e.utilities[It]-je*zt)/(hn-je)))}return mt}function De($e){var ht=$e.mediaType===B.Z.AUDIO?[B.Z.AUDIO]:pe;for(var hn in ht)pe.hasOwnProperty(hn)&&2===pe[hn].state&&(pe[hn].placeholderBuffer=0)}function ot(){for(var $e in pe)if(pe.hasOwnProperty($e)){var ht=pe[$e];0!==ht.state&&(ht.state=1,x(ht))}}function gt($e){if($e&&$e.chunk&&$e.chunk.mediaInfo){var ht=pe[$e.chunk.mediaInfo.type];if(ht&&0!==ht.state){var hn=$e.chunk.start;isNaN(ht.mostAdvancedSegmentStart)||hn>ht.mostAdvancedSegmentStart?(ht.mostAdvancedSegmentStart=hn,ht.lastSegmentWasReplacement=!1):ht.lastSegmentWasReplacement=!0,ht.lastSegmentStart=hn,ht.lastSegmentDurationS=$e.chunk.duration,ht.lastQuality=$e.chunk.quality,Je(ht,$e.chunk.mediaInfo.type)}}}function St($e){if($e&&$e.metric===Ce.Z.HTTP_REQUEST&&$e.value&&$e.value.type===_.w.MEDIA_SEGMENT_TYPE&&$e.value.trace&&$e.value.trace.length){var ht=pe[$e.mediaType];ht&&0!==ht.state&&(ht.lastSegmentRequestTimeMs=$e.value.trequest.getTime(),ht.lastSegmentFinishTimeMs=$e.value._tfinish.getTime(),Je(ht,$e.mediaType))}}function Je($e,ht){if(!isNaN($e.lastSegmentStart)&&!isNaN($e.lastSegmentRequestTimeMs)&&!isNaN($e.placeholderBuffer)){if($e.placeholderBuffer*=.99,!isNaN($e.lastSegmentFinishTimeMs)){var hn=Me.getCurrentBufferLevel(ht)+.001*($e.lastSegmentFinishTimeMs-$e.lastSegmentRequestTimeMs),zt=ge($e,$e.lastQuality),mt=Math.max(0,zt-hn);$e.placeholderBuffer=Math.min(mt,$e.placeholderBuffer)}$e.lastSegmentWasReplacement&&!isNaN($e.lastSegmentDurationS)&&($e.placeholderBuffer+=$e.lastSegmentDurationS),$e.lastSegmentStart=NaN,$e.lastSegmentRequestTimeMs=NaN}}function Pe($e){if($e){var ht=pe[$e.mediaType];ht&&0!==ht.state&&(ht.abrQuality=$e.newQuality)}}function Nt($e){if($e){var ht=pe[$e.mediaType];if(ht&&0!==ht.state){var hn,zt=Me.getCurrentBufferLevel($e.mediaType);hn=ht.abrQuality>0?et(ht,ht.abrQuality):T;var mt=Math.max(0,hn-zt);ht.placeholderBuffer=Math.min(ht.placeholderBuffer,mt)}}}function Ht(){pe={}}return K={getMaxIndex:function($e){var ht=(0,G.Z)(ue).create();if(!($e&&$e.hasOwnProperty("getMediaInfo")&&$e.hasOwnProperty("getMediaType")&&$e.hasOwnProperty("getScheduleController")&&$e.hasOwnProperty("getStreamInfo")&&$e.hasOwnProperty("getAbrController")&&$e.hasOwnProperty("useBufferOccupancyABR")))return ht;var hn=$e.getMediaInfo(),zt=$e.getMediaType(),mt=$e.getScheduleController(),It=$e.getStreamInfo(),je=$e.getAbrController(),ze=je.getThroughputHistory(),bt=It?It.id:null,N=It&&It.manifestInfo&&It.manifestInfo.isDynamic,I=$e.useBufferOccupancyABR();if(ht.reason=ht.reason||{},!I)return ht;mt.setTimeToLoadDelay(0);var it,vt,Bt,Z=(vt=(it=$e).getMediaType(),(Bt=pe[vt])?0!==Bt.state&&Ee(Bt,vt):(Bt=function(un){var Zt={},kn=un.getMediaInfo().bitrateList.map(function(sr){return sr.bandwidth}),vn=kn.map(function(Or){return Math.log(Or)});vn=vn.map(function(sr){return sr-vn[0]+1});var xn=Q.getStableBufferTime(),Tn=Le(xn,kn,vn);return Tn?(Zt.state=1,Zt.bitrates=kn,Zt.utilities=vn,Zt.stableBufferTime=xn,Zt.Vp=Tn.Vp,Zt.gp=Tn.gp,Zt.lastQuality=0,x(Zt)):Zt.state=0,Zt}(it),pe[vt]=Bt),Bt);if(0===Z.state)return ht;var q,Ie=Me.getCurrentBufferLevel(zt),_e=ze.getAverageThroughput(zt,N),rt=ze.getSafeAverageThroughput(zt,N),xt=ze.getAverageLatency(zt);if(ht.reason.state=Z.state,ht.reason.throughput=_e,ht.reason.latency=xt,isNaN(_e))return ht;switch(Z.state){case 1:q=je.getQualityForBitrate(hn,rt,bt,xt),ht.quality=q,ht.reason.throughput=rt,Z.placeholderBuffer=Math.max(0,et(Z,q)-Ie),Z.lastQuality=q,!isNaN(Z.lastSegmentDurationS)&&Ie>=Z.lastSegmentDurationS&&(Z.state=2);break;case 2:(function(it,vt){var Bt=Date.now();isNaN(it.lastSegmentFinishTimeMs)?isNaN(it.lastCallTimeMs)||(it.placeholderBuffer+=Math.max(0,.001*(Bt-it.lastCallTimeMs))):it.placeholderBuffer+=Math.max(0,.001*(Bt-it.lastSegmentFinishTimeMs)),it.lastCallTimeMs=Bt,it.lastSegmentStart=NaN,it.lastSegmentRequestTimeMs=NaN,it.lastSegmentFinishTimeMs=NaN,Ee(it,vt)})(Z,zt),q=function(it,vt){for(var Bt=it.bitrates.length,un=NaN,Zt=NaN,kn=0;kn<Bt;++kn){var vn=(it.Vp*(it.utilities[kn]+it.gp)-vt)/it.bitrates[kn];(isNaN(Zt)||vn>=Zt)&&(Zt=vn,un=kn)}return un}(Z,Ie+Z.placeholderBuffer);var at=je.getQualityForBitrate(hn,rt,bt,xt);q>Z.lastQuality&&q>at&&(q=Math.max(at,Z.lastQuality));var ut=Math.max(0,Ie+Z.placeholderBuffer-ge(Z,q));ut<=Z.placeholderBuffer?(Z.placeholderBuffer-=ut,ut=0):(ut-=Z.placeholderBuffer,Z.placeholderBuffer=0,q<je.getMaxAllowedIndexFor(zt,bt)?mt.setTimeToLoadDelay(1e3*ut):ut=0),ht.quality=q,ht.reason.throughput=_e,ht.reason.latency=xt,ht.reason.bufferLevel=Ie,ht.reason.placeholderBuffer=Z.placeholderBuffer,ht.reason.delay=ut,Z.lastQuality=q;break;default:ce.debug("BOLA ABR rule invoked in bad state."),ht.quality=je.getQualityForBitrate(hn,rt,bt,xt),ht.reason.state=Z.state,ht.reason.throughput=rt,ht.reason.latency=xt,Z.state=1,x(Z)}return ht},reset:function(){Ht(),Se.off(j.Z.BUFFER_EMPTY,De,K),Se.off(j.Z.PLAYBACK_SEEKING,ot,K),Se.off(j.Z.METRIC_ADDED,St,K),Se.off(j.Z.QUALITY_CHANGE_REQUESTED,Pe,K),Se.off(j.Z.FRAGMENT_LOADING_ABANDONED,Nt,K),Se.off(V.Z.MEDIA_FRAGMENT_LOADED,gt,K)}},ce=(0,D.Z)(ue).getInstance().getLogger(K),Ht(),Se.on(j.Z.BUFFER_EMPTY,De,K),Se.on(j.Z.PLAYBACK_SEEKING,ot,K),Se.on(j.Z.METRIC_ADDED,St,K),Se.on(j.Z.QUALITY_CHANGE_REQUESTED,Pe,K),Se.on(j.Z.FRAGMENT_LOADING_ABANDONED,Nt,K),Se.on(V.Z.MEDIA_FRAGMENT_LOADED,gt,K),K}M.__dashjs_factory_name="BolaRule",Qe.Z=E.Z.getClassFactory(M)},895:function(Vt,Qe,ne){"use strict";var Ce=ne(5448),G=ne(2068),E=ne(6398);function _(){var F,V,D=this.context;return F={getMaxIndex:function(j){var B=(0,G.Z)(D).create();if(!j||!j.hasOwnProperty("getDroppedFramesHistory"))return B;var T=j.getDroppedFramesHistory(),M=j.getStreamInfo().id;if(T){var L=T.getFrameHistory(M);if(!L||0===L.length)return B;for(var K=0,ce=0,pe=G.Z.NO_CHANGE,ue=1;ue<L.length;ue++)if(L[ue]&&(K=L[ue].droppedVideoFrames,(ce=L[ue].totalVideoFrames)>375&&K/ce>.15)){V.debug("index: "+(pe=ue-1)+" Dropped Frames: "+K+" Total Frames: "+ce);break}return(0,G.Z)(D).create(pe,{droppedFrames:K})}return B}},V=(0,E.Z)(D).getInstance().getLogger(F),F}_.__dashjs_factory_name="DroppedFramesRule",Qe.Z=Ce.Z.getClassFactory(_)},6535:function(Vt,Qe,ne){"use strict";var Ce=ne(5595),G=ne(8512),E=ne(5448),_=ne(6398),F=ne(2068),V=ne(3393),D=ne(3860),j=ne(8825);function B(T){T=T||{};var M,L,K,ce=this.context,pe=(0,Ce.Z)(ce).getInstance(),ue=T.dashMetrics;function Me(){(K={})[V.Z.VIDEO]={ignoreCount:2},K[V.Z.AUDIO]={ignoreCount:2}}function Q(){Me()}function Se(Le){isNaN(Le.startTime)||Le.mediaType!==V.Z.AUDIO&&Le.mediaType!==V.Z.VIDEO||K[Le.mediaType].ignoreCount>0&&K[Le.mediaType].ignoreCount--}return M={getMaxIndex:function(Le){var x=(0,F.Z)(ce).create();if(!Le||!Le.hasOwnProperty("getMediaType"))return x;!function(){if(!ue||!ue.hasOwnProperty("getCurrentBufferLevel")||!ue.hasOwnProperty("getCurrentBufferState"))throw new Error(V.Z.MISSING_CONFIG_ERROR)}();var Ee=Le.getMediaType(),ge=ue.getCurrentBufferState(Ee),et=Le.getRepresentationInfo().fragmentDuration,De=Le.getStreamInfo(),ot=De?De.id:null,gt=Le.getScheduleController(),St=De&&De.manifestInfo&&De.manifestInfo.isDynamic;if(!gt.getPlaybackController().getLowLatencyModeEnabled()&&K[Ee].ignoreCount>0||!et)return x;if(ge&&ge.state===D.Z.BUFFER_EMPTY)L.debug("["+Ee+"] Switch to index 0; buffer is empty."),x.quality=0,x.reason="InsufficientBufferRule: Buffer is empty";else{var Je=Le.getMediaInfo(),Pe=Le.getAbrController(),Nt=Pe.getThroughputHistory(),Ht=ue.getCurrentBufferLevel(Ee),$e=Nt.getAverageThroughput(Ee,St),ht=Nt.getAverageLatency(Ee);x.quality=Pe.getQualityForBitrate(Je,$e*(Ht/et)*.5,ot,ht),x.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return x},reset:function(){Me(),pe.off(j.Z.PLAYBACK_SEEKING,Q,M),pe.off(G.Z.BYTES_APPENDED_END_FRAGMENT,Se,M)}},L=(0,_.Z)(ce).getInstance().getLogger(M),Me(),pe.on(j.Z.PLAYBACK_SEEKING,Q,M),pe.on(G.Z.BYTES_APPENDED_END_FRAGMENT,Se,M),M}B.__dashjs_factory_name="InsufficientBufferRule",Qe.Z=E.Z.getClassFactory(B)},1914:function(Vt,Qe,ne){"use strict";var Ce=ne(3860),G=ne(2068),E=ne(5448),_=ne(7855),F=ne(5595),V=ne(8512),D=ne(6398),j=ne(3393);function B(T){var M,L,K,ce,pe=this.context,ue=(T=T||{}).dashMetrics,Me=(0,F.Z)(pe).getInstance();function Q(ot){ot.placeholderBuffer=0,ot.mostAdvancedSegmentStart=NaN,ot.lastSegmentWasReplacement=!1,ot.lastSegmentStart=NaN,ot.lastSegmentDurationS=NaN,ot.lastSegmentRequestTimeMs=NaN,ot.lastSegmentFinishTimeMs=NaN,ot.lastSegmentUrl=""}function Se(){for(var ot in L)if(L.hasOwnProperty(ot)){var gt=L[ot];0!==gt.state&&(gt.state=1,Q(gt))}}function Le(ot){if(ot&&ot.chunk&&ot.chunk.mediaInfo){var gt=L[ot.chunk.mediaInfo.type],St=K[ot.chunk.mediaInfo.type];if(gt&&0!==gt.state){var Je=ot.chunk.start;isNaN(gt.mostAdvancedSegmentStart)||Je>gt.mostAdvancedSegmentStart?(gt.mostAdvancedSegmentStart=Je,gt.lastSegmentWasReplacement=!1):gt.lastSegmentWasReplacement=!0,gt.lastSegmentStart=Je,gt.lastSegmentDurationS=ot.chunk.duration,gt.lastQuality=ot.chunk.quality,Ee(gt,St)}}}function x(ot){if(ot&&ot.metric===Ce.Z.HTTP_REQUEST&&ot.value&&ot.value.type===_.w.MEDIA_SEGMENT_TYPE&&ot.value.trace&&ot.value.trace.length){var gt=L[ot.mediaType],St=K[ot.mediaType];gt&&0!==gt.state&&(gt.lastSegmentRequestTimeMs=ot.value.trequest.getTime(),gt.lastSegmentFinishTimeMs=ot.value._tfinish.getTime(),Ee(gt,St))}}function Ee(ot,gt){isNaN(ot.lastSegmentStart)||isNaN(ot.lastSegmentRequestTimeMs)||(gt.segment_request_start_s=.001*ot.lastSegmentRequestTimeMs,gt.segment_download_finish_s=.001*ot.lastSegmentFinishTimeMs,ot.lastSegmentStart=NaN,ot.lastSegmentRequestTimeMs=NaN)}function ge(ot){if(ot&&ot.mediaType){var gt=L[ot.mediaType];gt&&0!==gt.state&&(gt.abrQuality=ot.newQuality)}}function et(ot,gt){if(ot.length!==gt.length)return-1;for(var St=0,Je=0;Je<ot.length;Je++)St+=ot[Je]*gt[Je];return St}function De(){L={},K={}}return M={getMaxIndex:function(ot){var gt,St=(0,G.Z)(pe).create(),Je=Math.pow(4,.99),Pe=Math.max(Math.pow(4,1),Je*Math.sqrt(4)),Nt=ot.getMediaInfo(),Ht=ot.getMediaType(),$e=Nt.bitrateList.map(function(Tn){return Tn.bandwidth}),ht=$e.length,hn=ot.getScheduleController(),zt=ot.getStreamInfo(),mt=ot.getAbrController(),It=mt.getThroughputHistory(),je=zt&&zt.manifestInfo&&zt.manifestInfo.isDynamic,ze=ot.useL2AABR(),bt=ue.getCurrentBufferLevel(Ht,!0),N=It.getSafeAverageThroughput(Ht,je),I=It.getAverageThroughput(Ht,je),Z=It.getAverageLatency(Ht),q=ot.getVideoModel().getPlaybackRate();if(!(ot&&ot.hasOwnProperty("getMediaInfo")&&ot.hasOwnProperty("getMediaType")&&ot.hasOwnProperty("getScheduleController")&&ot.hasOwnProperty("getStreamInfo")&&ot.hasOwnProperty("getAbrController")&&ot.hasOwnProperty("useL2AABR")&&(St.reason=St.reason||{},ze&&Ht!==j.Z.AUDIO)))return St;hn.setTimeToLoadDelay(0);var Tn,ni,ti,yi,zi,sr,Or,Ie=(sr=(Tn=ot).getMediaType(),(Or=L[sr])||(ti={},zi=(yi=Tn.getMediaInfo()).bitrateList.map(function(ni){return ni.bandwidth/1e3}),ti.state=1,ti.bitrates=zi,ti.lastQuality=0,(ni=yi)&&ni.type&&(K[ni.type]={},K[ni.type].w=[],K[ni.type].prev_w=[],K[ni.type].Q=0,K[ni.type].segment_request_start_s=0,K[ni.type].segment_download_finish_s=0,K[ni.type].B_target=1.5),Q(ti),L[sr]=Or=ti),Or);if(0===Ie.state)return St;var _e=K[Ht];if(!_e||(St.reason.state=Ie.state,St.reason.throughput=I,St.reason.latency=Z,isNaN(I)))return St;switch(Ie.state){case 1:if(gt=mt.getQualityForBitrate(Nt,N,zt.id,Z),St.quality=gt,St.reason.throughput=N,Ie.lastQuality=gt,!isNaN(Ie.lastSegmentDurationS)&&bt>=_e.B_target){Ie.state=2,_e.Q=Je;for(var rt=0;rt<ht;++rt)_e.prev_w[rt]=rt===Ie.lastQuality?1:0}break;case 2:var xt=[],at=ue.getCurrentHttpRequest(Ht).trace.reduce(function(Tn,sr){return Tn+sr.d},0),ut=ue.getCurrentHttpRequest(Ht).trace.reduce(function(Tn,sr){return Tn+sr.b[0]},0),it=Math.round(8*ut/at),vt=ue.getCurrentHttpRequest(Ht);if(it<1&&(it=1),vt.url===Ie.lastSegmentUrl||vt.type===_.w.INIT_SEGMENT_TYPE)gt=Ie.lastQuality;else{for(var Bt=Ie.lastSegmentDurationS,un=1,Zt=0;Zt<ht;++Zt)$e[Zt]=$e[Zt]/1e3,q*$e[Zt]>it&&(un=-1),_e.w[Zt]=_e.prev_w[Zt]+un*(Bt/(2*Pe))*((_e.Q+Je)*(q*$e[Zt]/it));_e.w=function(Tn){for(var sr=Tn.length,Or=!1,ei=[],ti=0;ti<sr;++ti)ei[ti]=Tn[ti];for(var yi=Tn.sort(function(Zo,vo){return vo-Zo}),zi=0,ni=0,xo=[],Ui=0;Ui<sr-1;++Ui)if((ni=((zi+=yi[Ui])-1)/(Ui+1))>=yi[Ui+1]){Or=!0;break}Or||(ni=(zi+yi[sr-1]-1)/sr);for(var mo=0;mo<sr;++mo)xo[mo]=Math.max(ei[mo]-ni,0);return xo}(_e.w);for(var kn=0;kn<ht;++kn)xt[kn]=_e.w[kn]-_e.prev_w[kn],_e.prev_w[kn]=_e.w[kn];_e.Q=Math.max(0,_e.Q-Bt+Bt*q*((et($e,_e.prev_w)+et($e,xt))/it));for(var vn=[],xn=0;xn<ht;++xn)vn[xn]=Math.abs($e[xn]-et(_e.w,$e));(gt=vn.indexOf(Math.min.apply(Math,vn)))>Ie.lastQuality&&$e[Ie.lastQuality+1]<=it&&(gt=Ie.lastQuality+1),$e[gt]>=it&&(_e.Q=2*Math.max(Je,_e.Q)),Ie.lastSegmentUrl=vt.url}St.quality=gt,St.reason.throughput=I,St.reason.latency=Z,St.reason.bufferLevel=bt,Ie.lastQuality=St.quality;break;default:ce.debug("L2A ABR rule invoked in bad state."),St.quality=mt.getQualityForBitrate(Nt,N,zt.id,Z),St.reason.state=Ie.state,St.reason.throughput=N,St.reason.latency=Z,Ie.state=1,Q(Ie)}return St},reset:function(){De(),Me.off(V.Z.PLAYBACK_SEEKING,Se,M),Me.off(V.Z.MEDIA_FRAGMENT_LOADED,Le,M),Me.off(V.Z.METRIC_ADDED,x,M),Me.off(V.Z.QUALITY_CHANGE_REQUESTED,ge,M)}},ce=(0,D.Z)(pe).getInstance().getLogger(M),De(),Me.on(V.Z.PLAYBACK_SEEKING,Se,M),Me.on(V.Z.MEDIA_FRAGMENT_LOADED,Le,M),Me.on(V.Z.METRIC_ADDED,x,M),Me.on(V.Z.QUALITY_CHANGE_REQUESTED,ge,M),M}B.__dashjs_factory_name="L2ARule",Qe.Z=E.Z.getClassFactory(B)},6070:function(Vt,Qe,ne){"use strict";var Ce=ne(5448),G=ne(6398),E=ne(2068);function _(){var F,V,D=this.context;return F={getMaxIndex:function(j){for(var B=j?j.getSwitchHistory():null,T=B?B.getSwitchRequests():[],M=0,L=0,K=0,ce=(0,E.Z)(D).create(),pe=0;pe<T.length;pe++)if(void 0!==T[pe]&&(K+=T[pe].dropSize,(M+=T[pe].drops)+(L+=T[pe].noDrops)>=6&&M/L>.075)){ce.quality=pe>0&&T[pe].drops>0?pe-1:pe,ce.reason={index:ce.quality,drops:M,noDrops:L,dropSize:K},V.debug("Switch history rule index: "+ce.quality+" samples: "+(M+L)+" drops: "+M);break}return ce}},V=(0,G.Z)(D).getInstance().getLogger(F),F}_.__dashjs_factory_name="SwitchHistoryRule",Qe.Z=Ce.Z.getClassFactory(_)},5628:function(Vt,Qe,ne){"use strict";var Ce=ne(5448),G=ne(2068),E=ne(3393),_=ne(3860);function F(V){var D=this.context,j=(V=V||{}).dashMetrics;return{getMaxIndex:function(B){var T=(0,G.Z)(D).create();if(!(B&&B.hasOwnProperty("getMediaInfo")&&B.hasOwnProperty("getMediaType")&&B.hasOwnProperty("useBufferOccupancyABR")&&B.hasOwnProperty("getAbrController")&&B.hasOwnProperty("getScheduleController")))return T;!function(){if(!j||!j.hasOwnProperty("getCurrentBufferState"))throw new Error(E.Z.MISSING_CONFIG_ERROR)}();var M=B.getMediaInfo(),L=B.getMediaType(),K=j.getCurrentBufferState(L),ce=B.getScheduleController(),pe=B.getAbrController(),ue=B.getStreamInfo(),Me=ue?ue.id:null,Q=ue&&ue.manifestInfo?ue.manifestInfo.isDynamic:null,Se=pe.getThroughputHistory(),Le=Se.getSafeAverageThroughput(L,Q),x=Se.getAverageLatency(L),Ee=B.useBufferOccupancyABR();return isNaN(Le)||!K||Ee||pe.getAbandonmentStateFor(Me,L)!==_.Z.ABANDON_LOAD&&(K.state===_.Z.BUFFER_LOADED||Q)&&(T.quality=pe.getQualityForBitrate(M,Le,Me,x),ce.setTimeToLoadDelay(0),T.reason={throughput:Le,latency:x}),T},reset:function(){}}}F.__dashjs_factory_name="ThroughputRule",Qe.Z=Ce.Z.getClassFactory(F)},4722:function(Vt,Qe,ne){"use strict";var Ce=ne(5448),G=ne(6398);function E(){var _,F,V,D,j,B,T,M,L;function ce(){V=null,D=1,j=100,B=0,T=null,M=null,L="dynamic_weight_selection"}function pe(){var Le=0;if(V)for(var x=0;x<V.length;x++){var Ee=V[x];Ee.state.throughput>Le&&(Le=Ee.state.throughput)}return Le}function ue(Le,x,Ee){var ge=Le.map(function(et,De){return Ee[De]*Math.pow(et-x[De],2)}).reduce(function(et,De){return et+De});return(ge<0?-1:1)*Math.sqrt(Math.abs(ge))}function Me(Le,x){return ue([Le.state.throughput,Le.state.latency,Le.state.rebuffer,Le.state.switch],[x.state.throughput,x.state.latency,x.state.rebuffer,x.state.switch],[1,1,1,1])}function Q(Le,x,Ee){for(var ge=0;ge<x.length;ge++){var et=x[ge],De=Me(et,Le);Se(et,Ee,Math.exp(-1*Math.pow(De,2)/(2*Math.pow(.1,2))))}}function Se(Le,x,Ee){var ge=Le.state,et=[.01,.01,.01,.01];ge.throughput=ge.throughput+(x[0]-ge.throughput)*et[0]*Ee,ge.latency=ge.latency+(x[1]-ge.latency)*et[1]*Ee,ge.rebuffer=ge.rebuffer+(x[2]-ge.rebuffer)*et[2]*Ee,ge.switch=ge.switch+(x[3]-ge.switch)*et[3]*Ee}return _={getNextQuality:function(Le,x,Ee,ge,et,De,ot){var gt=Ee,St=ge,Je=x,Pe=function(_e){if(!V){V=[];var rt=_e.bitrateList,xt=[];B=rt[0].bandwidth,rt.forEach(function(vt){xt.push(vt.bandwidth),vt.bandwidth<B&&(B=vt.bandwidth)}),it=xt.map(function(vt){return Math.pow(vt,2)}).reduce(function(vt,Bt){return vt+Bt}),D=Math.sqrt(it);for(var at=0;at<rt.length;at++)V.push({qualityIndex:at,bitrate:rt[at].bandwidth,state:{throughput:rt[at].bandwidth/D,latency:0,rebuffer:0,switch:0}});M=function(vt){var Bt=[],un=function(Co){for(var dn=[],fn=0;fn<Co;fn++){var sn=[Math.random()*pe(),Math.random(),Math.random(),Math.random()];dn.push(sn)}return dn}(Math.pow(vt.length,2));Bt.push(un[0]);for(var Zt=[1,1,1,1],kn=1;kn<vt.length;kn++){for(var vn=null,xn=null,Tn=0;Tn<un.length;Tn++){for(var sr=un[Tn],Or=null,ei=0;ei<Bt.length;ei++){var ti=ue(sr,Bt[ei],Zt);(null===Or||ti<Or)&&(Or=ti)}(null===xn||Or>xn)&&(vn=sr,xn=Or)}Bt.push(vn)}for(var yi=null,zi=null,ni=0;ni<Bt.length;ni++){for(var xo=0,Ui=0;Ui<Bt.length;Ui++)ni!==Ui&&(xo+=ue(Bt[ni],Bt[Ui],Zt));(null===yi||xo>yi)&&(yi=xo,zi=ni)}var mo=[];for(mo.push(Bt[zi]),Bt.splice(zi,1);Bt.length>0;){for(var Zo=null,vo=null,ea=0;ea<Bt.length;ea++){var ha=ue(mo[0],Bt[ea],Zt);(null===Zo||ha<Zo)&&(Zo=ha,vo=ea)}mo.push(Bt[vo]),Bt.splice(vo,1)}return mo}(V)}var it;return V}(Le),Nt=x/D;Nt>1&&(Nt=pe()),Ee/=j,F.debug("getNextQuality called throughput:".concat(Nt," latency:").concat(Ee," bufferSize:").concat(ge," currentQualityIndex:").concat(De," playbackRate:").concat(et));var Ht=Pe[De],$e=Ht.bitrate*ot.getSegmentDuration()/Je,ht=Math.max(0,$e-St);if(St-$e<ot.getMinBuffer())return F.debug("Buffer is low for bitrate= ".concat(Ht.bitrate," downloadTime=").concat($e," currentBuffer=").concat(St," rebuffer=").concat(ht)),function(_e,rt){var xt=0,at=_e;if(V)for(var ut=0;ut<V.length;ut++){var it=V[ut];it.bitrate<_e.bitrate&&it.bitrate>xt&&rt>it.bitrate&&(xt=it.bitrate,at=it)}return at}(Ht,Je).qualityIndex;switch(L){case"manual_weight_selection":T=[.4,.4,.4,.4];break;case"random_weight_selection":T=function(rt,xt){for(var at=[],ut=Math.sqrt(2/rt),it=0;it<4;it++)at.push(Math.random()*ut);return T=at}(Pe.length);break;default:!function(_e,rt,xt,at,ut,it,vt){T||(T=M[M.length-1]);var Bt=_e.findWeightVector(rt,xt,at,ut,it,vt);null!==Bt&&-1!==Bt&&(T=Bt)}(ot,Pe,gt,St,ht,Je,et)}for(var hn=null,zt=null,mt=null,It=0;It<Pe.length;It++){var je=Pe[It],ze=je.state,bt=[ze.throughput,ze.latency,ze.rebuffer,ze.switch],N=T.slice(),I=ot.getNextBufferWithBitrate(je.bitrate,St,Je),Z=I<ot.getMinBuffer();Z&&F.debug("Buffer is low for bitrate=".concat(je.bitrate," downloadTime=").concat($e," currentBuffer=").concat(St," nextBuffer=").concat(I)),(je.bitrate>x-1e4||Z)&&je.bitrate!==B&&(N[0]=100);var q=ue(bt,[Nt,0,0,0],N);(null===hn||q<hn)&&(hn=q,zt=je.qualityIndex,mt=je)}var Ie=Math.abs(Ht.bitrate-mt.bitrate)/D;return Q(Ht,Pe,[Nt,Ee,ht,Ie]),Q(mt,Pe,[Nt,0,0,Ie]),zt},reset:function(){ce()}},F=(0,G.Z)(this.context).getInstance().getLogger(_),ce(),_}E.__dashjs_factory_name="LearningAbrController",Qe.Z=Ce.Z.getClassFactory(E)},5317:function(Vt,Qe,ne){"use strict";var Ce=ne(5448),G=ne(2298);function E(){var _,F,V,D,j;function B(){F=null,V=null,D=null,j=null}function T(L,K,ce,pe){var ue=new G.Z;return ue.type=L,ue.weights.bitrateReward=K||1,ue.weights.bitrateSwitchPenalty=1,ue.weights.rebufferPenalty=ce||1e3,ue.weights.latencyPenalty=[],ue.weights.latencyPenalty.push({threshold:1.1,penalty:.05*pe}),ue.weights.latencyPenalty.push({threshold:1e8,penalty:.1*ce}),ue.weights.playbackSpeedPenalty=pe||200,ue}function M(L,K,ce,pe,ue){ue.bitrateWSum+=ue.weights.bitrateReward*L,ue.lastBitrate&&(ue.bitrateSwitchWSum+=ue.weights.bitrateSwitchPenalty*Math.abs(L-ue.lastBitrate)),ue.lastBitrate=L,ue.rebufferWSum+=ue.weights.rebufferPenalty*K;for(var Me=0;Me<ue.weights.latencyPenalty.length;Me++){var Q=ue.weights.latencyPenalty[Me];if(ce<=Q.threshold){ue.latencyWSum+=Q.penalty*ce;break}}ue.playbackSpeedWSum+=ue.weights.playbackSpeedPenalty*Math.abs(1-pe),ue.totalQoe=ue.bitrateWSum-ue.bitrateSwitchWSum-ue.rebufferWSum-ue.latencyWSum-ue.playbackSpeedWSum}return _={setupPerSegmentQoe:function(L,K,ce){F=T("segment",L,K,ce),V=L,D=K,j=ce},logSegmentMetrics:function(L,K,ce,pe){F&&M(L,K,ce,pe,F)},getPerSegmentQoe:function(){return F},calculateSingleUseQoe:function(L,K,ce,pe){var ue=null;return V&&D&&j&&(ue=T("segment",V,D,j)),ue?(M(L,K,ce,pe,ue),ue.totalQoe):0},reset:function(){B()}},B(),_}E.__dashjs_factory_name="LoLpQoeEvaluator",Qe.Z=Ce.Z.getClassFactory(E)},5435:function(Vt,Qe,ne){"use strict";var Ce=ne(6398),G=ne(5448),E=ne(4722),_=ne(5317),F=ne(2068),V=ne(3860),D=ne(6523),j=ne(3393);function B(T){var M,L,K,ce,pe=(T=T||{}).dashMetrics,ue=this.context;return L={getMaxIndex:function(Me){try{var Q=(0,F.Z)(ue).create(),Se=Me.getMediaInfo().type,Le=Me.getAbrController(),x=Me.getStreamInfo(),Ee=Le.getQualityFor(Se,x.id),ge=Me.getMediaInfo(),et=pe.getCurrentBufferState(Se),De=Me.getScheduleController(),ot=pe.getCurrentBufferLevel(Se,!0),gt=x&&x.manifestInfo?x.manifestInfo.isDynamic:null,St=De.getPlaybackController(),Je=St.getCurrentLiveLatency();if(!Me.useLoLPABR()||Se===j.Z.AUDIO)return Q;Je||(Je=0);var Pe=St.getPlaybackRate(),Nt=Le.getThroughputHistory().getSafeAverageThroughput(Se,gt);if(M.debug("Throughput ".concat(Math.round(Nt)," kbps")),isNaN(Nt)||!et||Le.getAbandonmentStateFor(x.id,Se)===V.Z.ABANDON_LOAD)return Q;for(var Ht=ge.bitrateList,$e=Me.getRepresentationInfo().fragmentDuration,ht=Ht[0].bandwidth/1e3,hn=Ht[Ht.length-1].bandwidth/1e3,zt=0;zt<Ht.length;zt++){var mt=Ht[zt].bandwidth/1e3;mt>hn?hn=mt:mt<ht&&(ht=mt)}var It=Ht[Ee].bandwidth/1e3,je=pe.getCurrentHttpRequest(Se,!0),ze=(je.tresponse.getTime()-je.trequest.getTime())/1e3,bt=ze>$e?ze-$e:0;ce.setupPerSegmentQoe($e,hn,ht),ce.logSegmentMetrics(It,bt,Je,Pe);var N=(0,D.Z)(ue).create({targetLatency:1.5,bufferMin:.3,segmentDuration:$e,qoeEvaluator:ce});return Q.quality=K.getNextQuality(ge,1e3*Nt,Je,ot,Pe,Ee,N),Q.reason={throughput:Nt,latency:Je},Q.priority=F.Z.PRIORITY.STRONG,De.setTimeToLoadDelay(0),Q.quality!==Ee&&M.debug("[TgcLearningRule]["+Se+"] requesting switch to index: ",Q.quality,"Average throughput",Math.round(Nt),"kbps"),Q}catch(I){throw I}},reset:function(){K.reset(),ce.reset()}},M=(0,Ce.Z)(ue).getInstance().getLogger(L),K=(0,E.Z)(ue).create(),ce=(0,_.Z)(ue).create(),L}B.__dashjs_factory_name="LoLPRule",Qe.Z=G.Z.getClassFactory(B)},6523:function(Vt,Qe,ne){"use strict";var Ce=ne(5448);function G(E){var _,F,V,D,j=E.targetLatency,B=E.bufferMin,T=E.segmentDuration,M=E.qoeEvaluator;function L(){return T}function K(ce,pe){var ue=L();return pe>ue?ce-ue:ce+ue-pe}return _={getMinBuffer:function(){return B},getSegmentDuration:L,getNextBufferWithBitrate:function(ce,pe,ue){return K(pe,ce*T/ue)},getNextBuffer:K,findWeightVector:function(ce,pe,ue,Me,Q,Se){var Le=null,x=null,Ee=null,ge=Math.abs(pe-V);return ce.forEach(function(et){F.forEach(function(De){var ot=De[1],gt=De[2],St=et.bitrate*T/Q,Je=K(ue,St),Pe=(0===gt?10:1/gt)*Math.max(1e-5,St-Je),Ht=M.calculateSingleUseQoe(et.bitrate,Pe,(0===ot?10:1/ot)*et.state.latency,Se);(null===Le||Ht>Le)&&(!(pe>j+ge)&&Je>=B)&&(Le=Ht,x=De,Ee=et.bitrate)})}),null===x&&null===Ee&&(x=-1),V=pe,x}},F=function ce(pe,ue,Me){if(Me===ue)return pe;for(var Q=pe.length,Se=0;Se<Q;Se++)for(var Le=pe.shift(),x=0;x<D.length;x++)pe.push(Le.concat(D[x]));return ce(pe,ue,Me+1)}((D=[.2,.4,.6,.8,1]).map(function(ce){return[ce]}),4,1),V=0,_}G.__dashjs_factory_name="LoLpWeightSelector",Qe.Z=Ce.Z.getClassFactory(G)},2298:function(Vt,Qe){"use strict";Qe.Z=function ne(){(function(Ce,G){if(!(Ce instanceof G))throw new TypeError("Cannot call a class as a function")})(this,ne),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(Vt,Qe,ne){"use strict";ne.d(Qe,{Y:function(){return M}});var Ce=ne(3393),G=ne(1553),E=ne(5448),_=ne(2128),F=ne(2594),V=ne(7387),D=ne(7417),j=ne(9032),B=ne(9326),T=ne(7802),M=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function L(K){var ce,pe,ue,Me,Q,Se,Le,x,Ee=this.context,ge=K.adapter,et=K.baseURLController,De=K.streamInfo,ot=K.timelineConverter,gt=K.debug,St=K.eventBus,Je=K.events,Pe=K.dashConstants,Nt=(0,F.Z)(Ee).getInstance();function Ht(ht,hn){var mt,It,zt=new _.Z;zt.id=ht.id,zt.bitrate=ht.bandwidth,zt.width=ht.width,zt.height=ht.height,zt.tilesHor=1,zt.tilesVert=1,ht.essentialProperties&&ht.essentialProperties.forEach(function(mt){if(M.indexOf(mt.schemeIdUri)>=0&&mt.value){var It=mt.value.split("x");2!==It.length||isNaN(It[0])||isNaN(It[1])||(zt.tilesHor=parseInt(It[0],10),zt.tilesVert=parseInt(It[1],10))}}),hn?Se.updateSegmentData(ht).then(function(mt){var It,je,bt,N;It=zt,bt=[],N=function(I,Z){var q,Ie,_e,rt,xt=[],at=0;for(q=0,Ie=I.segments.length;q<Ie;q++)_e=I.segments[q],(rt=(0,V.TJ)(ot,ge.getIsDynamic(),Z,_e.startTime,_e.duration,_e.timescale,_e.media,_e.mediaRange,at))&&(xt.push(rt),rt=null,at++);return xt}(mt,je=ht),je.segments=N,It.segmentDuration=je.segments[0].duration,It.readThumbnail=function(I,Z){var q=null;bt.some(function(Ie){if(Ie.start<=I&&Ie.end>I)return q=Ie.url,!0}),q?Z(q):je.segments.some(function(Ie){if(Ie.mediaStartTime<=I&&Ie.mediaStartTime+Ie.duration>I){var _e=et.resolve(je.path);return Le.load({method:"get",url:_e.url,request:{range:Ie.mediaRange,responseType:"arraybuffer"},onload:function(rt){var xt=x.getSamplesInfo(rt.target.response),at=new Blob([rt.target.response.slice(xt.sampleList[0].offset,xt.sampleList[0].offset+xt.sampleList[0].size)],{type:"image/jpeg"}),ut=window.URL.createObjectURL(at);bt.push({start:Ie.mediaStartTime,end:Ie.mediaStartTime+Ie.duration,url:ut}),Z&&Z(ut)}}),!0}})}}):(zt.startNumber=ht.startNumber,zt.segmentDuration=ht.segmentDuration,zt.timescale=ht.timescale,zt.templateUrl=(It=Nt.isRelative((mt=ht).media)?Nt.resolve(mt.media,et.resolve(mt.path).url):mt.media)?(0,V.Aj)(It,mt.id):""),zt.tilesHor>0&&zt.tilesVert>0&&(zt.widthPerTile=zt.width/zt.tilesHor,zt.heightPerTile=zt.height/zt.tilesVert,pe.push(zt))}function $e(){pe=[],Me=-1,Q=null}return ce={getTracks:function(){return pe},addTracks:function(){if(De&&ge&&(Q=ge.getMediaInfoForType(De,Ce.Z.IMAGE))){var ht=ge.getVoRepresentations(Q);ht&&ht.length>0&&ht.forEach(function(hn){(hn.segmentInfoType===G.Z.SEGMENT_TEMPLATE&&hn.segmentDuration>0&&hn.media||hn.segmentInfoType===G.Z.SEGMENT_TIMELINE)&&Ht(hn),hn.segmentInfoType===G.Z.SEGMENT_BASE&&Ht(hn,!0)}),pe.length>0&&pe.sort(function(hn,zt){return hn.bitrate-zt.bitrate})}},reset:$e,setTrackByIndex:function(ht){pe&&0!==pe.length&&(ht>=pe.length&&(ht=pe.length-1),Me=ht)},getCurrentTrack:function(){return Me<0?null:pe[Me]},getCurrentTrackIndex:function(){return Me},getThumbnailRequestForTime:function(ht){for(var hn,zt=ge.getVoRepresentations(Q),mt=0;mt<zt.length;mt++)if(pe[Me].id===zt[mt].id){hn=zt[mt];break}return ue.getSegmentRequestForTime(Q,hn,ht)}},$e(),Le=(0,j.Z)(Ee).create({}),x=(0,D.Z)(Ee).getInstance(),Se=(0,T.Z)(Ee).create({events:Je,eventBus:St,streamInfo:De,timelineConverter:ot,dashConstants:Pe,dashMetrics:K.dashMetrics,segmentBaseController:K.segmentBaseController,type:Ce.Z.IMAGE}),(ue=(0,B.Z)(Ee).create({streamInfo:De,type:Ce.Z.IMAGE,timelineConverter:ot,segmentsController:Se,baseURLController:et,debug:gt,eventBus:St,events:Je,dashConstants:Pe,urlUtils:Nt})).initialize(!!ge&&ge.getIsDynamic()),ce}L.__dashjs_factory_name="ThumbnailTracks",Qe.Z=E.Z.getClassFactory(L)},7417:function(Vt,Qe,ne){"use strict";var Ce=ne(6398),G=ne(8260),E=ne(5448),_=ne(6934),F=ne(9597);function V(){var D,j,B=this.context;function T(K){if(!K)return null;void 0===K.fileStart&&(K.fileStart=0);var ce=_.parseBuffer(K),pe=(0,G.Z)(B).create();return pe.setData(ce),pe}function M(K,ce){return K[ce+3]>>>0|K[ce+2]<<8>>>0|K[ce+1]<<16>>>0|K[ce]<<24>>>0}function L(K,ce){return String.fromCharCode(K[ce++])+String.fromCharCode(K[ce++])+String.fromCharCode(K[ce++])+String.fromCharCode(K[ce])}return j={parse:T,findLastTopIsoBoxCompleted:function(K,ce,pe){if(void 0===pe&&(pe=0),!ce||pe+8>=ce.byteLength)return new F.Z(0,!1);for(var ue,Me=ce instanceof ArrayBuffer?new Uint8Array(ce):ce,Q=0;pe<Me.byteLength;){var Se=M(Me,pe),Le=L(Me,pe+4);if(0===Se)break;pe+Se<=Me.byteLength&&(K.indexOf(Le)>=0?ue=new F.Z(pe,!0,Se):Q=pe+Se),pe+=Se}return ue||new F.Z(Q,!1)},getMediaTimescaleFromMoov:function(K){var ce=T(K),pe=ce?ce.getBox("mdhd"):void 0;return pe?pe.timescale:NaN},getSamplesInfo:function(K){if(!K||0===K.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var ce,pe,ue,Me,Q,Se,Le,x,Ee,ge,et,De,ot,gt,St,Je,Pe=T(K),Nt=Pe.getBoxes("moof"),Ht=Pe.getBoxes("mfhd");St=Pe.getBoxes("moof").length,gt=Ht[Ht.length-1].sequence_number,pe=0,Q=[];var $e=-1,ht=-1;for(ge=0;ge<Nt.length;ge++){var hn=Nt[ge],zt=hn.getChildBoxes("traf");for(x=0;x<zt.length;x++){var mt=zt[x],It=mt.getChildBox("tfhd"),je=mt.getChildBox("tfdt");Me=je.baseMediaDecodeTime;var ze=mt.getChildBoxes("trun"),bt=mt.getChildBoxes("subs");for(Ee=0;Ee<ze.length;Ee++){var N=ze[Ee];for(pe=N.sample_count,ot=(It.base_data_offset||0)+(N.data_offset||0),Le=0;Le<pe;Le++){ce=void 0!==(Se=N.samples[Le]).sample_duration?Se.sample_duration:It.default_sample_duration;var I={dts:Me,cts:Me+(void 0!==Se.sample_composition_time_offset?Se.sample_composition_time_offset:0),duration:ce,offset:hn.offset+ot,size:ue=void 0!==Se.sample_size?Se.sample_size:It.default_sample_size,subSizes:[ue]};if(bt)for(et=0;et<bt.length;et++){var Z=bt[et];if($e<Z.entry_count-1&&Le>ht&&($e++,ht+=Z.entries[$e].sample_delta),Le==ht){I.subSizes=[];var q=Z.entries[$e];for(De=0;De<q.subsample_count;De++)I.subSizes.push(q.subsamples[De].subsample_size)}}Q.push(I),ot+=ue,Me+=ce}}Je=Me-je.baseMediaDecodeTime}}return{sampleList:Q,lastSequenceNumber:gt,totalDuration:Je,numSequences:St}},findInitRange:function(K){var ce=null,pe=T(K);if(!pe)return ce;var ue=pe.getBox("ftyp"),Me=pe.getBox("moov");return D.debug("Searching for initialization."),Me&&Me.isComplete&&D.debug("Found the initialization.  Range: "+(ce=(ue?ue.offset:Me.offset)+"-"+(Me.offset+Me.size-1))),ce},parsePayload:function(K,ce,pe){if(void 0===pe&&(pe=0),!ce||pe+8>=ce.byteLength)return new F.Z(0,!1);for(var ue,Me=ce instanceof ArrayBuffer?new Uint8Array(ce):ce,Q=0;pe<Me.byteLength;){var Se=M(Me,pe),Le=L(Me,pe+4);if(0===Se)break;pe+Se<=Me.byteLength&&(K.indexOf(Le)>=0?ue=new F.Z(pe,!0,Se,Le):Q=pe+Se),pe+=Se}return ue||new F.Z(Q,!1)}},D=(0,Ce.Z)(B).getInstance().getLogger(j),j}V.__dashjs_factory_name="BoxParser",Qe.Z=E.Z.getSingletonFactory(V)},1715:function(Vt,Qe,ne){"use strict";ne.d(Qe,{B:function(){return F}});var Ce=ne(5448),G=ne(7803),E=ne(3393),_=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function F(){var D="ManagedMediaSource"in window,j="WebKitMediaSource"in window,B="MediaSource"in window;return D||j||B}function V(){var D,j,B;return D={setConfig:function(T){T&&T.settings&&(j=T.settings)},supportsMediaSource:F,supportsEncryptedMedia:function(){return B},supportsCodec:function(T,M){return M!==E.Z.AUDIO&&M!==E.Z.VIDEO?Promise.resolve(!0):(L=T,K=M,j.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(L.codec&&K===E.Z.AUDIO||K===E.Z.VIDEO&&L.codec&&L.width&&L.height&&L.bitrate&&L.framerate)?function(L,K){return new Promise(function(ce){if(L&&L.codec){var pe={type:"media-source"};pe[K]={},pe[K].contentType=L.codec,pe[K].width=L.width,pe[K].height=L.height,pe[K].bitrate=parseInt(L.bitrate),pe[K].framerate=parseFloat(L.framerate),navigator.mediaCapabilities.decodingInfo(pe).then(function(ue){ce(ue.supported)}).catch(function(){ce(!1)})}else ce(!1)})}(T,M):function(L){return new Promise(function(K){if(L&&L.codec){var ce=L.codec;L.width&&L.height&&(ce+=';width="'+L.width+'";height="'+L.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(ce)||"MediaSource"in window&&MediaSource.isTypeSupported(ce)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(ce)?K(!0):K(!1)}else K(!1)})}(T));var L,K},setEncryptedMediaSupported:function(T){B=T},supportsEssentialProperty:function(T){try{return-1!==G.Y.indexOf(T.schemeIdUri)||E.Z.FONT_DOWNLOAD_DVB_SCHEME===T.schemeIdUri}catch{return!0}},codecRootCompatibleWithCodec:function(T,M){for(var L,K=T.split(".")[0],ce=0===M.indexOf(K),pe=0;pe<_.length;pe++)if(_[pe].codec===K){L=_[pe];break}return L?ce||L.compatibleCodecs.some(function(ue){return 0===M.indexOf(ue)}):ce}},B=!1,D}V.__dashjs_factory_name="Capabilities",Qe.Z=Ce.Z.getSingletonFactory(V)},2295:function(Vt,Qe,ne){"use strict";var Ce=ne(5448),G=ne(3106);function E(){return{customTimeRangeArray:[],length:0,add:function(_,F){var V;for(V=0;V<this.customTimeRangeArray.length&&_>this.customTimeRangeArray[V].start;V++);for(this.customTimeRangeArray.splice(V,0,{start:_,end:F}),V=0;V<this.customTimeRangeArray.length-1;V++)this.mergeRanges(V,V+1)&&V--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(_,F){for(var V=0;V<this.customTimeRangeArray.length;V++)if(_<=this.customTimeRangeArray[V].start&&F>=this.customTimeRangeArray[V].end)this.customTimeRangeArray.splice(V,1),V--;else{if(_>this.customTimeRangeArray[V].start&&F<this.customTimeRangeArray[V].end){this.customTimeRangeArray.splice(V+1,0,{start:F,end:this.customTimeRangeArray[V].end}),this.customTimeRangeArray[V].end=_;break}_>this.customTimeRangeArray[V].start&&_<this.customTimeRangeArray[V].end?this.customTimeRangeArray[V].end=_:F>this.customTimeRangeArray[V].start&&F<this.customTimeRangeArray[V].end&&(this.customTimeRangeArray[V].start=F)}this.length=this.customTimeRangeArray.length},mergeRanges:function(_,F){var V=this.customTimeRangeArray[_],D=this.customTimeRangeArray[F];return V.start<=D.start&&D.start<=V.end&&V.end<=D.end?(V.end=D.end,this.customTimeRangeArray.splice(F,1),!0):D.start<=V.start&&V.start<=D.end&&D.end<=V.end?(V.start=D.start,this.customTimeRangeArray.splice(F,1),!0):D.start<=V.start&&V.start<=D.end&&V.end<=D.end?(this.customTimeRangeArray.splice(_,1),!0):V.start<=D.start&&D.start<=V.end&&D.end<=V.end&&(this.customTimeRangeArray.splice(F,1),!0)},start:function(_){return(0,G.SE)(_),_>=this.customTimeRangeArray.length||_<0?NaN:this.customTimeRangeArray[_].start},end:function(_){return(0,G.SE)(_),_>=this.customTimeRangeArray.length||_<0?NaN:this.customTimeRangeArray[_].end}}}E.__dashjs_factory_name="CustomTimeRanges",Qe.Z=Ce.Z.getClassFactory(E)},5:function(Vt,Qe,ne){"use strict";var Ce=ne(5448);function G(){var E,_=/^[a-z][a-z0-9+\-_.]*:/i,F=/^https?:\/\//i,V=/^https:\/\//i,D=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,j=function(ue,Me){try{return new window.URL(ue,Me).toString()}catch{return ue}},B=function(ue,Me){var Q=T;if(!Me||!K(ue))return ue;ce(ue)&&(Q=M),pe(ue)&&(Q=L);var Se=Q(Me),Le="/"!==Se.charAt(Se.length-1)&&"/"!==ue.charAt(0)?"/":"";return[Se,ue].join(Le)};function T(ue){var Me=ue.indexOf("/"),Q=ue.lastIndexOf("/");return-1!==Me?Q===Me+1?ue:(-1!==ue.indexOf("?")&&(ue=ue.substring(0,ue.indexOf("?"))),ue.substring(0,Q+1)):""}function M(ue){var Me=ue.match(D);return Me?Me[1]:""}function L(ue){var Me=ue.match(_);return Me?Me[0]:""}function K(ue){return!_.test(ue)}function ce(ue){return K(ue)&&"/"===ue.charAt(0)}function pe(ue){return 0===ue.indexOf("//")}return function(){try{new window.URL("x","http://y"),E=j}catch{}finally{E=E||B}}(),{parseBaseUrl:T,parseOrigin:M,parseScheme:L,isRelative:K,isPathAbsolute:ce,isSchemeRelative:pe,isHTTPURL:function(ue){return F.test(ue)},isHTTPS:function(ue){return V.test(ue)},removeHostname:function(ue){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(ue)[2].substring(1)},resolve:function(ue,Me){return E(ue,Me)}}}G.__dashjs_factory_name="DefaultURLUtils",Qe.Z=Ce.Z.getSingletonFactory(G)},8260:function(Vt,Qe,ne){"use strict";var Ce=ne(2839),G=ne(5448);function E(){var _;function F(D){var j=[];if(!D||!_||"function"!=typeof _.fetchAll)return j;for(var B,T=_.fetchAll(D),M=0,L=T.length;M<L;M++)(B=V(T[M]))&&j.push(B);return j}function V(D){if(!D)return null;var j=new Ce.Z(D);return D.hasOwnProperty("_incomplete")&&(j.isComplete=!D._incomplete),j}return{getBox:function(D){return D&&_&&_.boxes&&0!==_.boxes.length&&"function"==typeof _.fetch?V(_.fetch(D)):null},getBoxes:F,setData:function(D){_=D},getLastBox:function(){if(!_||!_.boxes||!_.boxes.length)return null;var D=F(_.boxes[_.boxes.length-1].type);return D.length>0?D[D.length-1]:null}}}E.__dashjs_factory_name="IsoFile",Qe.Z=G.Z.getClassFactory(E)},7473:function(Vt,Qe,ne){"use strict";ne.d(Qe,{k:function(){return G}});var Ce=ne(5448);function G(_,F){var V={url:_.url,method:_.method,headers:Object.assign({},_.headers),credentials:_.withCredentials?"include":void 0,range:_.request.range};return Promise.resolve(F.modifyRequest(V)).then(function(){return Object.assign(_,V,{withCredentials:"include"===V.credentials})})}function E(){return{modifyRequest:null,modifyRequestURL:function(_){return _},modifyRequestHeader:function(_,F){return _}}}E.__dashjs_factory_name="RequestModifier",Qe.Z=Ce.Z.getSingletonFactory(E)},3106:function(Vt,Qe,ne){"use strict";ne.d(Qe,{PS:function(){return E},SE:function(){return _}});var Ce=ne(3393);function G(F){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(V){return typeof V}:function(V){return V&&"function"==typeof Symbol&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V})(F)}function E(F,V){if(G(F)!==V)throw Ce.Z.BAD_ARGUMENT_ERROR}function _(F){if(null===F||isNaN(F)||F%1!=0)throw Ce.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(Vt,Qe,ne){"use strict";var Ce=ne(5448),G=ne(5);function E(){var F,V=[];function j(B,T,M){var L=function(K){var ce;for(ce=0;ce<V.length;ce++)if(V[ce].regex.test(K))return V[ce].utils;return F}(M||T);return L&&"function"==typeof L[B]?L[B](T,M):F[B](T,M)}return F=(0,G.Z)(this.context).getInstance(),{registerUrlRegex:function(B,T){V.push({regex:B,utils:T})},parseBaseUrl:function(B){return j("parseBaseUrl",B)},parseOrigin:function(B){return j("parseOrigin",B)},parseScheme:function(B){return j("parseScheme",B)},isRelative:function(B){return j("isRelative",B)},isPathAbsolute:function(B){return j("isPathAbsolute",B)},isSchemeRelative:function(B){return j("isSchemeRelative",B)},isHTTPURL:function(B){return j("isHTTPURL",B)},isHTTPS:function(B){return j("isHTTPS",B)},removeHostname:function(B){return j("removeHostname",B)},resolve:function(B,T){return j("resolve",B,T)}}}E.__dashjs_factory_name="URLUtils";var _=Ce.Z.getSingletonFactory(E);Qe.Z=_},5459:function(Vt,Qe){"use strict";Qe.Z=function ne(Ce,G,E){(function(_,F){if(!(_ instanceof F))throw new TypeError("Cannot call a class as a function")})(this,ne),this.code=Ce||null,this.message=G||null,this.data=E||null}},3186:function(Vt,Qe,ne){"use strict";var Ce=ne(7855);var E=function(){function _(D){(function(j,B){if(!(j instanceof B))throw new TypeError("Cannot call a class as a function")})(this,_),this.action=_.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=D||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var V;return(V=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===Ce.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(D){this.type=D&&D.init?Ce.w.INIT_SEGMENT_TYPE:Ce.w.MEDIA_SEGMENT_TYPE,this.url=D&&D.url?D.url:null,this.range=D&&D.range?D.range.start+"-"+D.range.end:null,this.mediaType=D&&D.mediaType?D.mediaType:null}}])&&function G(_,F){for(var V=0;V<F.length;V++){var D=F[V];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(_,D.key,D)}}(_.prototype,V),_}();E.ACTION_DOWNLOAD="download",E.ACTION_COMPLETE="complete",Qe.Z=E},2839:function(Vt,Qe){"use strict";var Ce=function(){function G(F){if(function(L,K){if(!(L instanceof K))throw new TypeError("Cannot call a class as a function")}(this,G),this.offset=F._offset,this.type=F.type,this.size=F.size,this.boxes=[],F.boxes)for(var V=0;V<F.boxes.length;V++)this.boxes.push(new G(F.boxes[V]));switch(this.isComplete=!0,F.type){case"sidx":if(this.timescale=F.timescale,this.earliest_presentation_time=F.earliest_presentation_time,this.first_offset=F.first_offset,this.references=F.references,F.references){this.references=[];for(var D=0;D<F.references.length;D++)this.references.push({reference_type:F.references[D].reference_type,referenced_size:F.references[D].referenced_size,subsegment_duration:F.references[D].subsegment_duration})}break;case"emsg":this.id=F.id,this.version=1===F.version?1:0,this.value=F.value,this.timescale=F.timescale,this.scheme_id_uri=F.scheme_id_uri,this.presentation_time_delta=1===F.version?F.presentation_time:F.presentation_time_delta,this.event_duration=F.event_duration,this.message_data=F.message_data;break;case"mdhd":this.timescale=F.timescale;break;case"mfhd":this.sequence_number=F.sequence_number;break;case"subs":this.entry_count=F.entry_count,this.entries=F.entries;break;case"tfhd":this.base_data_offset=F.base_data_offset,this.sample_description_index=F.sample_description_index,this.default_sample_duration=F.default_sample_duration,this.default_sample_size=F.default_sample_size,this.default_sample_flags=F.default_sample_flags,this.flags=F.flags;break;case"tfdt":this.version=F.version,this.baseMediaDecodeTime=F.baseMediaDecodeTime,this.flags=F.flags;break;case"trun":if(this.sample_count=F.sample_count,this.first_sample_flags=F.first_sample_flags,this.data_offset=F.data_offset,this.flags=F.flags,this.samples=F.samples,F.samples){this.samples=[];for(var B=0,T=F.samples.length;B<T;B++)this.samples.push({sample_size:F.samples[B].sample_size,sample_duration:F.samples[B].sample_duration,sample_composition_time_offset:F.samples[B].sample_composition_time_offset})}break;case"prft":this.version=F.version,this.reference_track_ID=F.reference_track_ID,this.ntp_timestamp_sec=F.ntp_timestamp_sec,this.ntp_timestamp_frac=F.ntp_timestamp_frac,this.media_time=F.media_time,this.flags=F.flags}}var _;return(_=[{key:"getChildBox",value:function(F){for(var V=0;V<this.boxes.length;V++)if(this.boxes[V].type===F)return this.boxes[V]}},{key:"getChildBoxes",value:function(F){for(var V=[],D=0;D<this.boxes.length;D++)this.boxes[D].type===F&&V.push(this.boxes[D]);return V}}])&&function ne(G,E){for(var _=0;_<E.length;_++){var F=E[_];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(G,F.key,F)}}(G.prototype,_),G}();Qe.Z=Ce},9597:function(Vt,Qe){"use strict";Qe.Z=function ne(Ce,G,E){(function(_,F){if(!(_ instanceof F))throw new TypeError("Cannot call a class as a function")})(this,ne),this.lastCompletedOffset=Ce,this.found=G,this.size=E}},2128:function(Vt,Qe){"use strict";Qe.Z=function ne(){(function(Ce,G){if(!(Ce instanceof G))throw new TypeError("Cannot call a class as a function")})(this,ne),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(Vt,Qe,ne){"use strict";function Ce(_,F){if(!(_ instanceof F))throw new TypeError("Cannot call a class as a function")}ne.d(Qe,{O:function(){return E},w:function(){return G}});var G=function _(){Ce(this,_),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},E=function _(){Ce(this,_),this.s=null,this.d=null,this.b=[]};G.GET="GET",G.HEAD="HEAD",G.MPD_TYPE="MPD",G.XLINK_EXPANSION_TYPE="XLinkExpansion",G.INIT_SEGMENT_TYPE="InitializationSegment",G.INDEX_SEGMENT_TYPE="IndexSegment",G.MEDIA_SEGMENT_TYPE="MediaSegment",G.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",G.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",G.DVB_REPORTING_TYPE="DVBReporting",G.LICENSE="license",G.CONTENT_STEERING_TYPE="ContentSteering",G.OTHER_TYPE="other"},3039:function(Vt,Qe){"use strict";function ne(G,E){return function(_,F){for(var V,D,j,B=Ce(_,"tag"),T=Ce(F??"*","range"),M=[],L=-1;++L<T.length;)if(V=T[L].toLowerCase(),E||"*"!==V){for(D=-1,j=[];++D<B.length;)if(G(B[D].toLowerCase(),V)){if(!E)return B[D];M.push(B[D])}else j.push(B[D]);B=j}return E?M:void 0}}function Ce(G,E){var _=G&&"string"==typeof G?[G]:G;if(!_||"object"!=typeof _||!("length"in _))throw new Error("Invalid "+E+" `"+_+"`, expected non-empty string");return _}Qe.basicFilter=ne(function(G,E){return"*"===E||G===E||G.indexOf(E+"-")>-1},!0),Qe.extendedFilter=ne(function(G,E){var _=G.split("-"),F=E.split("-"),V=0,D=0;if("*"!==F[D]&&_[V]!==F[D])return!1;for(V++,D++;D<F.length;)if("*"!==F[D]){if(!_[V])return!1;if(_[V]!==F[D]){if(1===_[V].length)return!1;V++}else V++,D++}else D++;return!0},!0),Qe.lookup=ne(function(G,E){for(var _,F=E;;){if("*"===F||G===F)return!0;if((_=F.lastIndexOf("-"))<0)return!1;"-"===F.charAt(_-2)&&(_-=2),F=F.slice(0,_)}})},3973:function(Vt,Qe,ne){"use strict";Vt.exports=ne(3854)},3854:function(Vt,Qe,ne){"use strict";var Ce=ne(2415),G=ne(3039),E=ne(7778),_=ne(5813),F=ne(3165),V=ne(9460);Vt.exports=function(ce,pe){var ue,Me=pe||{},Q=Ce.parse(String(ce||"").toLowerCase(),Me),Se=Ce.stringify(Q),Le=-1;if(!Se)return Se;for(;++Le<E.length;)G.extendedFilter(Se,E[Le].from).length&&(T(Q,E[Le].from,E[Le].to),Se=Ce.stringify(Q));for(Le=-1;++Le<_.length;)M(Q,_[Le].from.field,_[Le].from.value)&&L(Q,_[Le].to.field,_[Le].to.value);for(Se=Ce.stringify(Object.assign({},Q,B)),Le=-1;++Le<F.length;)Se===F[Le]&&(T(Q,F[Le],F[Le].split("-").slice(0,-1).join("-")),Se=Ce.stringify(Object.assign({},Q,B)));if(Q.extensions.sort(K),Me.warning)for(ue in V)D.call(V[ue],Q[ue])&&Me.warning("Deprecated "+ue+" `"+Q[ue]+"`, expected one of `"+V[ue][Q[ue]].join("`, `")+"`",null,7);return Q.script&&(Q.script=Q.script.charAt(0).toUpperCase()+Q.script.slice(1)),Q.region&&(Q.region=Q.region.toUpperCase()),Ce.stringify(Q)};var D={}.hasOwnProperty,j=new Intl.Collator,B={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function T(ce,pe,ue){var Me,Q=Ce.parse(pe),Se=Ce.parse(ue),Le=[];for(Me in Q)Q[Me]&&Q[Me].length&&M(ce,Me,Q[Me])&&Le.push(Me);for(Me in Se)Se[Me]&&Se[Me].length&&(Le.indexOf(Me)>-1||!ce[Me]||!ce[Me].length)&&L(ce,Me,Se[Me])}function M(ce,pe,ue){var Me,Q,Se,Le,x=!1;if(ue){if(Q=Me=ce[pe],Me&&"object"==typeof Me)for(Q=[],Se=-1;++Se<Me.length;)ue.indexOf(Le=Me[Se])<0?Q.push(Le):x=!0;else Me===ue&&(Q=null,x=!0);ce[pe]=Q}return x}function L(ce,pe,ue){var Me,Q,Se,Le=ce[pe];if(Le&&"object"==typeof Le)for(Me=[].concat(ue),Q=-1;++Q<Me.length;)Le.indexOf(Se=Me[Q])<0&&Le.push(Se);else ce[pe]=ue}function K(ce,pe){return j.compare(ce.singleton,pe.singleton)}},2415:function(Vt,Qe,ne){"use strict";Qe.parse=ne(6903),Qe.stringify=ne(6713)},6903:function(Vt,Qe,ne){"use strict";var Ce=ne(2219),G=ne(3516),E=ne(395),_=ne(858),F=ne(8589);Vt.exports=function D(j,B){var T,M,L,K=B||{},ce={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},pe=String(j),ue=pe.toLowerCase(),Me=0;if(null==j)throw new Error("Expected string, got `"+j+"`");if(V.call(F,ue))return(null==K.normalize||K.normalize)&&F[ue]?D(F[ue]):(ce[-1===_.indexOf(ue)?"irregular":"regular"]=pe,ce);for(;G(ue.charCodeAt(Me))&&Me<9;)Me++;if(Me>1&&Me<9){if(ce.language=pe.slice(0,Me),Me<4)for(M=0;45===ue.charCodeAt(Me)&&G(ue.charCodeAt(Me+1))&&G(ue.charCodeAt(Me+2))&&G(ue.charCodeAt(Me+3))&&!G(ue.charCodeAt(Me+4));){if(M>2)return Q(Me,3,"Too many extended language subtags, expected at most 3 subtags");ce.extendedLanguageSubtags.push(pe.slice(Me+1,Me+4)),Me+=4,M++}for(45===ue.charCodeAt(Me)&&G(ue.charCodeAt(Me+1))&&G(ue.charCodeAt(Me+2))&&G(ue.charCodeAt(Me+3))&&G(ue.charCodeAt(Me+4))&&!G(ue.charCodeAt(Me+5))&&(ce.script=pe.slice(Me+1,Me+5),Me+=5),45===ue.charCodeAt(Me)&&(G(ue.charCodeAt(Me+1))&&G(ue.charCodeAt(Me+2))&&!G(ue.charCodeAt(Me+3))?(ce.region=pe.slice(Me+1,Me+3),Me+=3):E(ue.charCodeAt(Me+1))&&E(ue.charCodeAt(Me+2))&&E(ue.charCodeAt(Me+3))&&!E(ue.charCodeAt(Me+4))&&(ce.region=pe.slice(Me+1,Me+4),Me+=4));45===ue.charCodeAt(Me);){for(L=T=Me+1;Ce(ue.charCodeAt(L));){if(L-T>7)return Q(L,1,"Too long variant, expected at most 8 characters");L++}if(!(L-T>4||L-T>3&&E(ue.charCodeAt(T))))break;ce.variants.push(pe.slice(T,L)),Me=L}for(;45===ue.charCodeAt(Me)&&120!==ue.charCodeAt(Me+1)&&Ce(ue.charCodeAt(Me+1))&&45===ue.charCodeAt(Me+2)&&Ce(ue.charCodeAt(Me+3));){for(L=Me+2,M=0;45===ue.charCodeAt(L)&&Ce(ue.charCodeAt(L+1))&&Ce(ue.charCodeAt(L+2));)for(L=(T=L+1)+2,M++;Ce(ue.charCodeAt(L));){if(L-T>7)return Q(L,2,"Too long extension, expected at most 8 characters");L++}if(!M)return Q(L,4,"Empty extension, extensions must have at least 2 characters of content");ce.extensions.push({singleton:pe.charAt(Me+1),extensions:pe.slice(Me+3,L).split("-")}),Me=L}}else Me=0;if(0===Me&&120===ue.charCodeAt(Me)||45===ue.charCodeAt(Me)&&120===ue.charCodeAt(Me+1))for(L=Me=Me?Me+2:1;45===ue.charCodeAt(L)&&Ce(ue.charCodeAt(L+1));){for(L=T=Me+1;Ce(ue.charCodeAt(L));){if(L-T>7)return Q(L,5,"Too long private-use area, expected at most 8 characters");L++}ce.privateuse.push(pe.slice(Me+1,L)),Me=L}return Me!==pe.length?Q(Me,6,"Found superfluous content after tag"):ce;function Q(Se,Le,x){return K.warning&&K.warning(x,Le,Se),K.forgiving?ce:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var V={}.hasOwnProperty},6713:function(Vt){"use strict";Vt.exports=function(Qe){var ne,Ce,G,E=Qe||{},_=[];if(E.irregular||E.regular)return E.irregular||E.regular;if(E.language)for(_=_.concat(E.language,E.extendedLanguageSubtags||[],E.script||[],E.region||[],E.variants||[]),ne=E.extensions||[],Ce=-1;++Ce<ne.length;)(G=ne[Ce]).singleton&&G.extensions&&G.extensions.length&&(_=_.concat(G.singleton,G.extensions));return E.privateuse&&E.privateuse.length&&(_=_.concat("x",E.privateuse)),_.join("-")}},1549:function(Vt,Qe,ne){"use strict";var Ce=ne(6693),G=ne(2165),E="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Qe.Buffer=V,Qe.SlowBuffer=function(N){return+N!=N&&(N=0),V.alloc(+N)},Qe.INSPECT_MAX_BYTES=50;var _=2147483647;function F(N){if(N>_)throw new RangeError('The value "'+N+'" is invalid for option "size"');var I=new Uint8Array(N);return Object.setPrototypeOf(I,V.prototype),I}function V(N,I,Z){if("number"==typeof N){if("string"==typeof I)throw new TypeError('The "string" argument must be of type string. Received type number');return B(N)}return D(N,I,Z)}function D(N,I,Z){if("string"==typeof N)return function(_e,rt){if("string"==typeof rt&&""!==rt||(rt="utf8"),!V.isEncoding(rt))throw new TypeError("Unknown encoding: "+rt);var xt=0|K(_e,rt),at=F(xt),ut=at.write(_e,rt);return ut!==xt&&(at=at.slice(0,ut)),at}(N,I);if(ArrayBuffer.isView(N))return function(_e){if(je(_e,Uint8Array)){var rt=new Uint8Array(_e);return M(rt.buffer,rt.byteOffset,rt.byteLength)}return T(_e)}(N);if(null==N)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(je(N,ArrayBuffer)||N&&je(N.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(je(N,SharedArrayBuffer)||N&&je(N.buffer,SharedArrayBuffer)))return M(N,I,Z);if("number"==typeof N)throw new TypeError('The "value" argument must not be of type number. Received type number');var q=N.valueOf&&N.valueOf();if(null!=q&&q!==N)return V.from(q,I,Z);var Ie=function(_e){if(V.isBuffer(_e)){var rt=0|L(_e.length),xt=F(rt);return 0===xt.length||_e.copy(xt,0,0,rt),xt}return void 0!==_e.length?"number"!=typeof _e.length||ze(_e.length)?F(0):T(_e):"Buffer"===_e.type&&Array.isArray(_e.data)?T(_e.data):void 0}(N);if(Ie)return Ie;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof N[Symbol.toPrimitive])return V.from(N[Symbol.toPrimitive]("string"),I,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}function j(N){if("number"!=typeof N)throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function B(N){return j(N),F(N<0?0:0|L(N))}function T(N){for(var I=N.length<0?0:0|L(N.length),Z=F(I),q=0;q<I;q+=1)Z[q]=255&N[q];return Z}function M(N,I,Z){if(I<0||N.byteLength<I)throw new RangeError('"offset" is outside of buffer bounds');if(N.byteLength<I+(Z||0))throw new RangeError('"length" is outside of buffer bounds');var q;return q=void 0===I&&void 0===Z?new Uint8Array(N):void 0===Z?new Uint8Array(N,I):new Uint8Array(N,I,Z),Object.setPrototypeOf(q,V.prototype),q}function L(N){if(N>=_)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_.toString(16)+" bytes");return 0|N}function K(N,I){if(V.isBuffer(N))return N.length;if(ArrayBuffer.isView(N)||je(N,ArrayBuffer))return N.byteLength;if("string"!=typeof N)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);var Z=N.length,q=arguments.length>2&&!0===arguments[2];if(!q&&0===Z)return 0;for(var Ie=!1;;)switch(I){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return zt(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Z;case"hex":return Z>>>1;case"base64":return mt(N).length;default:if(Ie)return q?-1:zt(N).length;I=(""+I).toLowerCase(),Ie=!0}}function ce(N,I,Z){var q=!1;if((void 0===I||I<0)&&(I=0),I>this.length||((void 0===Z||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0)<=(I>>>=0))return"";for(N||(N="utf8");;)switch(N){case"hex":return St(this,I,Z);case"utf8":case"utf-8":return et(this,I,Z);case"ascii":return ot(this,I,Z);case"latin1":case"binary":return gt(this,I,Z);case"base64":return ge(this,I,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Je(this,I,Z);default:if(q)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),q=!0}}function pe(N,I,Z){var q=N[I];N[I]=N[Z],N[Z]=q}function ue(N,I,Z,q,Ie){if(0===N.length)return-1;if("string"==typeof Z?(q=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),ze(Z=+Z)&&(Z=Ie?0:N.length-1),Z<0&&(Z=N.length+Z),Z>=N.length){if(Ie)return-1;Z=N.length-1}else if(Z<0){if(!Ie)return-1;Z=0}if("string"==typeof I&&(I=V.from(I,q)),V.isBuffer(I))return 0===I.length?-1:Me(N,I,Z,q,Ie);if("number"==typeof I)return I&=255,"function"==typeof Uint8Array.prototype.indexOf?Ie?Uint8Array.prototype.indexOf.call(N,I,Z):Uint8Array.prototype.lastIndexOf.call(N,I,Z):Me(N,[I],Z,q,Ie);throw new TypeError("val must be string, number or Buffer")}function Me(N,I,Z,q,Ie){var _e,rt=1,xt=N.length,at=I.length;if(void 0!==q&&("ucs2"===(q=String(q).toLowerCase())||"ucs-2"===q||"utf16le"===q||"utf-16le"===q)){if(N.length<2||I.length<2)return-1;rt=2,xt/=2,at/=2,Z/=2}function ut(un,Zt){return 1===rt?un[Zt]:un.readUInt16BE(Zt*rt)}if(Ie){var it=-1;for(_e=Z;_e<xt;_e++)if(ut(N,_e)===ut(I,-1===it?0:_e-it)){if(-1===it&&(it=_e),_e-it+1===at)return it*rt}else-1!==it&&(_e-=_e-it),it=-1}else for(Z+at>xt&&(Z=xt-at),_e=Z;_e>=0;_e--){for(var vt=!0,Bt=0;Bt<at;Bt++)if(ut(N,_e+Bt)!==ut(I,Bt)){vt=!1;break}if(vt)return _e}return-1}function Q(N,I,Z,q){Z=Number(Z)||0;var Ie=N.length-Z;q?(q=Number(q))>Ie&&(q=Ie):q=Ie;var _e=I.length;q>_e/2&&(q=_e/2);for(var rt=0;rt<q;++rt){var xt=parseInt(I.substr(2*rt,2),16);if(ze(xt))return rt;N[Z+rt]=xt}return rt}function Se(N,I,Z,q){return It(zt(I,N.length-Z),N,Z,q)}function Le(N,I,Z,q){return It(function(Ie){for(var _e=[],rt=0;rt<Ie.length;++rt)_e.push(255&Ie.charCodeAt(rt));return _e}(I),N,Z,q)}function x(N,I,Z,q){return It(mt(I),N,Z,q)}function Ee(N,I,Z,q){return It(function(Ie,_e){for(var rt,xt,ut=[],it=0;it<Ie.length&&!((_e-=2)<0);++it)xt=(rt=Ie.charCodeAt(it))>>8,ut.push(rt%256),ut.push(xt);return ut}(I,N.length-Z),N,Z,q)}function ge(N,I,Z){return Ce.fromByteArray(0===I&&Z===N.length?N:N.slice(I,Z))}function et(N,I,Z){Z=Math.min(N.length,Z);for(var q=[],Ie=I;Ie<Z;){var _e,rt,xt,at,ut=N[Ie],it=null,vt=ut>239?4:ut>223?3:ut>191?2:1;if(Ie+vt<=Z)switch(vt){case 1:ut<128&&(it=ut);break;case 2:128==(192&(_e=N[Ie+1]))&&(at=(31&ut)<<6|63&_e)>127&&(it=at);break;case 3:rt=N[Ie+2],128==(192&(_e=N[Ie+1]))&&128==(192&rt)&&(at=(15&ut)<<12|(63&_e)<<6|63&rt)>2047&&(at<55296||at>57343)&&(it=at);break;case 4:rt=N[Ie+2],xt=N[Ie+3],128==(192&(_e=N[Ie+1]))&&128==(192&rt)&&128==(192&xt)&&(at=(15&ut)<<18|(63&_e)<<12|(63&rt)<<6|63&xt)>65535&&at<1114112&&(it=at)}null===it?(it=65533,vt=1):it>65535&&(q.push((it-=65536)>>>10&1023|55296),it=56320|1023&it),q.push(it),Ie+=vt}return function(Bt){var un=Bt.length;if(un<=De)return String.fromCharCode.apply(String,Bt);for(var Zt="",kn=0;kn<un;)Zt+=String.fromCharCode.apply(String,Bt.slice(kn,kn+=De));return Zt}(q)}Qe.kMaxLength=_,(V.TYPED_ARRAY_SUPPORT=function(){try{var N=new Uint8Array(1),I={foo:function(){return 42}};return Object.setPrototypeOf(I,Uint8Array.prototype),Object.setPrototypeOf(N,I),42===N.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(V.prototype,"parent",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.buffer}}),Object.defineProperty(V.prototype,"offset",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.byteOffset}}),V.poolSize=8192,V.from=function(N,I,Z){return D(N,I,Z)},Object.setPrototypeOf(V.prototype,Uint8Array.prototype),Object.setPrototypeOf(V,Uint8Array),V.alloc=function(N,I,Z){return Ie=I,_e=Z,j(q=N),q<=0?F(q):void 0!==Ie?"string"==typeof _e?F(q).fill(Ie,_e):F(q).fill(Ie):F(q);var q,Ie,_e},V.allocUnsafe=function(N){return B(N)},V.allocUnsafeSlow=function(N){return B(N)},V.isBuffer=function(N){return null!=N&&!0===N._isBuffer&&N!==V.prototype},V.compare=function(N,I){if(je(N,Uint8Array)&&(N=V.from(N,N.offset,N.byteLength)),je(I,Uint8Array)&&(I=V.from(I,I.offset,I.byteLength)),!V.isBuffer(N)||!V.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===I)return 0;for(var Z=N.length,q=I.length,Ie=0,_e=Math.min(Z,q);Ie<_e;++Ie)if(N[Ie]!==I[Ie]){Z=N[Ie],q=I[Ie];break}return Z<q?-1:q<Z?1:0},V.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},V.concat=function(N,I){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(0===N.length)return V.alloc(0);var Z;if(void 0===I)for(I=0,Z=0;Z<N.length;++Z)I+=N[Z].length;var q=V.allocUnsafe(I),Ie=0;for(Z=0;Z<N.length;++Z){var _e=N[Z];if(je(_e,Uint8Array))Ie+_e.length>q.length?V.from(_e).copy(q,Ie):Uint8Array.prototype.set.call(q,_e,Ie);else{if(!V.isBuffer(_e))throw new TypeError('"list" argument must be an Array of Buffers');_e.copy(q,Ie)}Ie+=_e.length}return q},V.byteLength=K,V.prototype._isBuffer=!0,V.prototype.swap16=function(){var N=this.length;if(N%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var I=0;I<N;I+=2)pe(this,I,I+1);return this},V.prototype.swap32=function(){var N=this.length;if(N%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var I=0;I<N;I+=4)pe(this,I,I+3),pe(this,I+1,I+2);return this},V.prototype.swap64=function(){var N=this.length;if(N%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var I=0;I<N;I+=8)pe(this,I,I+7),pe(this,I+1,I+6),pe(this,I+2,I+5),pe(this,I+3,I+4);return this},V.prototype.toString=function(){var N=this.length;return 0===N?"":0===arguments.length?et(this,0,N):ce.apply(this,arguments)},V.prototype.toLocaleString=V.prototype.toString,V.prototype.equals=function(N){if(!V.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N||0===V.compare(this,N)},V.prototype.inspect=function(){var N="",I=Qe.INSPECT_MAX_BYTES;return N=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(N+=" ... "),"<Buffer "+N+">"},E&&(V.prototype[E]=V.prototype.inspect),V.prototype.compare=function(N,I,Z,q,Ie){if(je(N,Uint8Array)&&(N=V.from(N,N.offset,N.byteLength)),!V.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(void 0===I&&(I=0),void 0===Z&&(Z=N?N.length:0),void 0===q&&(q=0),void 0===Ie&&(Ie=this.length),I<0||Z>N.length||q<0||Ie>this.length)throw new RangeError("out of range index");if(q>=Ie&&I>=Z)return 0;if(q>=Ie)return-1;if(I>=Z)return 1;if(this===N)return 0;for(var _e=(Ie>>>=0)-(q>>>=0),rt=(Z>>>=0)-(I>>>=0),xt=Math.min(_e,rt),at=this.slice(q,Ie),ut=N.slice(I,Z),it=0;it<xt;++it)if(at[it]!==ut[it]){_e=at[it],rt=ut[it];break}return _e<rt?-1:rt<_e?1:0},V.prototype.includes=function(N,I,Z){return-1!==this.indexOf(N,I,Z)},V.prototype.indexOf=function(N,I,Z){return ue(this,N,I,Z,!0)},V.prototype.lastIndexOf=function(N,I,Z){return ue(this,N,I,Z,!1)},V.prototype.write=function(N,I,Z,q){if(void 0===I)q="utf8",Z=this.length,I=0;else if(void 0===Z&&"string"==typeof I)q=I,Z=this.length,I=0;else{if(!isFinite(I))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");I>>>=0,isFinite(Z)?(Z>>>=0,void 0===q&&(q="utf8")):(q=Z,Z=void 0)}var Ie=this.length-I;if((void 0===Z||Z>Ie)&&(Z=Ie),N.length>0&&(Z<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");for(var _e=!1;;)switch(q){case"hex":return Q(this,N,I,Z);case"utf8":case"utf-8":return Se(this,N,I,Z);case"ascii":case"latin1":case"binary":return Le(this,N,I,Z);case"base64":return x(this,N,I,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ee(this,N,I,Z);default:if(_e)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),_e=!0}},V.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var De=4096;function ot(N,I,Z){var q="";Z=Math.min(N.length,Z);for(var Ie=I;Ie<Z;++Ie)q+=String.fromCharCode(127&N[Ie]);return q}function gt(N,I,Z){var q="";Z=Math.min(N.length,Z);for(var Ie=I;Ie<Z;++Ie)q+=String.fromCharCode(N[Ie]);return q}function St(N,I,Z){var q=N.length;(!I||I<0)&&(I=0),(!Z||Z<0||Z>q)&&(Z=q);for(var Ie="",_e=I;_e<Z;++_e)Ie+=bt[N[_e]];return Ie}function Je(N,I,Z){for(var q=N.slice(I,Z),Ie="",_e=0;_e<q.length-1;_e+=2)Ie+=String.fromCharCode(q[_e]+256*q[_e+1]);return Ie}function Pe(N,I,Z){if(N%1!=0||N<0)throw new RangeError("offset is not uint");if(N+I>Z)throw new RangeError("Trying to access beyond buffer length")}function Nt(N,I,Z,q,Ie,_e){if(!V.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>Ie||I<_e)throw new RangeError('"value" argument is out of bounds');if(Z+q>N.length)throw new RangeError("Index out of range")}function Ht(N,I,Z,q,Ie,_e){if(Z+q>N.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function $e(N,I,Z,q,Ie){return I=+I,Z>>>=0,Ie||Ht(N,0,Z,4),G.write(N,I,Z,q,23,4),Z+4}function ht(N,I,Z,q,Ie){return I=+I,Z>>>=0,Ie||Ht(N,0,Z,8),G.write(N,I,Z,q,52,8),Z+8}V.prototype.slice=function(N,I){var Z=this.length;(N=~~N)<0?(N+=Z)<0&&(N=0):N>Z&&(N=Z),(I=void 0===I?Z:~~I)<0?(I+=Z)<0&&(I=0):I>Z&&(I=Z),I<N&&(I=N);var q=this.subarray(N,I);return Object.setPrototypeOf(q,V.prototype),q},V.prototype.readUintLE=V.prototype.readUIntLE=function(N,I,Z){N>>>=0,I>>>=0,Z||Pe(N,I,this.length);for(var q=this[N],Ie=1,_e=0;++_e<I&&(Ie*=256);)q+=this[N+_e]*Ie;return q},V.prototype.readUintBE=V.prototype.readUIntBE=function(N,I,Z){N>>>=0,I>>>=0,Z||Pe(N,I,this.length);for(var q=this[N+--I],Ie=1;I>0&&(Ie*=256);)q+=this[N+--I]*Ie;return q},V.prototype.readUint8=V.prototype.readUInt8=function(N,I){return N>>>=0,I||Pe(N,1,this.length),this[N]},V.prototype.readUint16LE=V.prototype.readUInt16LE=function(N,I){return N>>>=0,I||Pe(N,2,this.length),this[N]|this[N+1]<<8},V.prototype.readUint16BE=V.prototype.readUInt16BE=function(N,I){return N>>>=0,I||Pe(N,2,this.length),this[N]<<8|this[N+1]},V.prototype.readUint32LE=V.prototype.readUInt32LE=function(N,I){return N>>>=0,I||Pe(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+16777216*this[N+3]},V.prototype.readUint32BE=V.prototype.readUInt32BE=function(N,I){return N>>>=0,I||Pe(N,4,this.length),16777216*this[N]+(this[N+1]<<16|this[N+2]<<8|this[N+3])},V.prototype.readIntLE=function(N,I,Z){N>>>=0,I>>>=0,Z||Pe(N,I,this.length);for(var q=this[N],Ie=1,_e=0;++_e<I&&(Ie*=256);)q+=this[N+_e]*Ie;return q>=(Ie*=128)&&(q-=Math.pow(2,8*I)),q},V.prototype.readIntBE=function(N,I,Z){N>>>=0,I>>>=0,Z||Pe(N,I,this.length);for(var q=I,Ie=1,_e=this[N+--q];q>0&&(Ie*=256);)_e+=this[N+--q]*Ie;return _e>=(Ie*=128)&&(_e-=Math.pow(2,8*I)),_e},V.prototype.readInt8=function(N,I){return N>>>=0,I||Pe(N,1,this.length),128&this[N]?-1*(255-this[N]+1):this[N]},V.prototype.readInt16LE=function(N,I){N>>>=0,I||Pe(N,2,this.length);var Z=this[N]|this[N+1]<<8;return 32768&Z?4294901760|Z:Z},V.prototype.readInt16BE=function(N,I){N>>>=0,I||Pe(N,2,this.length);var Z=this[N+1]|this[N]<<8;return 32768&Z?4294901760|Z:Z},V.prototype.readInt32LE=function(N,I){return N>>>=0,I||Pe(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},V.prototype.readInt32BE=function(N,I){return N>>>=0,I||Pe(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},V.prototype.readFloatLE=function(N,I){return N>>>=0,I||Pe(N,4,this.length),G.read(this,N,!0,23,4)},V.prototype.readFloatBE=function(N,I){return N>>>=0,I||Pe(N,4,this.length),G.read(this,N,!1,23,4)},V.prototype.readDoubleLE=function(N,I){return N>>>=0,I||Pe(N,8,this.length),G.read(this,N,!0,52,8)},V.prototype.readDoubleBE=function(N,I){return N>>>=0,I||Pe(N,8,this.length),G.read(this,N,!1,52,8)},V.prototype.writeUintLE=V.prototype.writeUIntLE=function(N,I,Z,q){N=+N,I>>>=0,Z>>>=0,q||Nt(this,N,I,Z,Math.pow(2,8*Z)-1,0);var Ie=1,_e=0;for(this[I]=255&N;++_e<Z&&(Ie*=256);)this[I+_e]=N/Ie&255;return I+Z},V.prototype.writeUintBE=V.prototype.writeUIntBE=function(N,I,Z,q){N=+N,I>>>=0,Z>>>=0,q||Nt(this,N,I,Z,Math.pow(2,8*Z)-1,0);var Ie=Z-1,_e=1;for(this[I+Ie]=255&N;--Ie>=0&&(_e*=256);)this[I+Ie]=N/_e&255;return I+Z},V.prototype.writeUint8=V.prototype.writeUInt8=function(N,I,Z){return N=+N,I>>>=0,Z||Nt(this,N,I,1,255,0),this[I]=255&N,I+1},V.prototype.writeUint16LE=V.prototype.writeUInt16LE=function(N,I,Z){return N=+N,I>>>=0,Z||Nt(this,N,I,2,65535,0),this[I]=255&N,this[I+1]=N>>>8,I+2},V.prototype.writeUint16BE=V.prototype.writeUInt16BE=function(N,I,Z){return N=+N,I>>>=0,Z||Nt(this,N,I,2,65535,0),this[I]=N>>>8,this[I+1]=255&N,I+2},V.prototype.writeUint32LE=V.prototype.writeUInt32LE=function(N,I,Z){return N=+N,I>>>=0,Z||Nt(this,N,I,4,4294967295,0),this[I+3]=N>>>24,this[I+2]=N>>>16,this[I+1]=N>>>8,this[I]=255&N,I+4},V.prototype.writeUint32BE=V.prototype.writeUInt32BE=function(N,I,Z){return N=+N,I>>>=0,Z||Nt(this,N,I,4,4294967295,0),this[I]=N>>>24,this[I+1]=N>>>16,this[I+2]=N>>>8,this[I+3]=255&N,I+4},V.prototype.writeIntLE=function(N,I,Z,q){if(N=+N,I>>>=0,!q){var Ie=Math.pow(2,8*Z-1);Nt(this,N,I,Z,Ie-1,-Ie)}var _e=0,rt=1,xt=0;for(this[I]=255&N;++_e<Z&&(rt*=256);)N<0&&0===xt&&0!==this[I+_e-1]&&(xt=1),this[I+_e]=(N/rt>>0)-xt&255;return I+Z},V.prototype.writeIntBE=function(N,I,Z,q){if(N=+N,I>>>=0,!q){var Ie=Math.pow(2,8*Z-1);Nt(this,N,I,Z,Ie-1,-Ie)}var _e=Z-1,rt=1,xt=0;for(this[I+_e]=255&N;--_e>=0&&(rt*=256);)N<0&&0===xt&&0!==this[I+_e+1]&&(xt=1),this[I+_e]=(N/rt>>0)-xt&255;return I+Z},V.prototype.writeInt8=function(N,I,Z){return N=+N,I>>>=0,Z||Nt(this,N,I,1,127,-128),N<0&&(N=255+N+1),this[I]=255&N,I+1},V.prototype.writeInt16LE=function(N,I,Z){return N=+N,I>>>=0,Z||Nt(this,N,I,2,32767,-32768),this[I]=255&N,this[I+1]=N>>>8,I+2},V.prototype.writeInt16BE=function(N,I,Z){return N=+N,I>>>=0,Z||Nt(this,N,I,2,32767,-32768),this[I]=N>>>8,this[I+1]=255&N,I+2},V.prototype.writeInt32LE=function(N,I,Z){return N=+N,I>>>=0,Z||Nt(this,N,I,4,2147483647,-2147483648),this[I]=255&N,this[I+1]=N>>>8,this[I+2]=N>>>16,this[I+3]=N>>>24,I+4},V.prototype.writeInt32BE=function(N,I,Z){return N=+N,I>>>=0,Z||Nt(this,N,I,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[I]=N>>>24,this[I+1]=N>>>16,this[I+2]=N>>>8,this[I+3]=255&N,I+4},V.prototype.writeFloatLE=function(N,I,Z){return $e(this,N,I,!0,Z)},V.prototype.writeFloatBE=function(N,I,Z){return $e(this,N,I,!1,Z)},V.prototype.writeDoubleLE=function(N,I,Z){return ht(this,N,I,!0,Z)},V.prototype.writeDoubleBE=function(N,I,Z){return ht(this,N,I,!1,Z)},V.prototype.copy=function(N,I,Z,q){if(!V.isBuffer(N))throw new TypeError("argument should be a Buffer");if(Z||(Z=0),q||0===q||(q=this.length),I>=N.length&&(I=N.length),I||(I=0),q>0&&q<Z&&(q=Z),q===Z||0===N.length||0===this.length)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(Z<0||Z>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),N.length-I<q-Z&&(q=N.length-I+Z);var Ie=q-Z;return this===N&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(I,Z,q):Uint8Array.prototype.set.call(N,this.subarray(Z,q),I),Ie},V.prototype.fill=function(N,I,Z,q){if("string"==typeof N){if("string"==typeof I?(q=I,I=0,Z=this.length):"string"==typeof Z&&(q=Z,Z=this.length),void 0!==q&&"string"!=typeof q)throw new TypeError("encoding must be a string");if("string"==typeof q&&!V.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(1===N.length){var Ie=N.charCodeAt(0);("utf8"===q&&Ie<128||"latin1"===q)&&(N=Ie)}}else"number"==typeof N?N&=255:"boolean"==typeof N&&(N=Number(N));if(I<0||this.length<I||this.length<Z)throw new RangeError("Out of range index");if(Z<=I)return this;var _e;if(I>>>=0,Z=void 0===Z?this.length:Z>>>0,N||(N=0),"number"==typeof N)for(_e=I;_e<Z;++_e)this[_e]=N;else{var rt=V.isBuffer(N)?N:V.from(N,q),xt=rt.length;if(0===xt)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(_e=0;_e<Z-I;++_e)this[_e+I]=rt[_e%xt]}return this};var hn=/[^+/0-9A-Za-z-_]/g;function zt(N,I){var Z;I=I||1/0;for(var q=N.length,Ie=null,_e=[],rt=0;rt<q;++rt){if((Z=N.charCodeAt(rt))>55295&&Z<57344){if(!Ie){if(Z>56319){(I-=3)>-1&&_e.push(239,191,189);continue}if(rt+1===q){(I-=3)>-1&&_e.push(239,191,189);continue}Ie=Z;continue}if(Z<56320){(I-=3)>-1&&_e.push(239,191,189),Ie=Z;continue}Z=65536+(Ie-55296<<10|Z-56320)}else Ie&&(I-=3)>-1&&_e.push(239,191,189);if(Ie=null,Z<128){if((I-=1)<0)break;_e.push(Z)}else if(Z<2048){if((I-=2)<0)break;_e.push(Z>>6|192,63&Z|128)}else if(Z<65536){if((I-=3)<0)break;_e.push(Z>>12|224,Z>>6&63|128,63&Z|128)}else{if(!(Z<1114112))throw new Error("Invalid code point");if((I-=4)<0)break;_e.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,63&Z|128)}}return _e}function mt(N){return Ce.toByteArray(function(I){if((I=(I=I.split("=")[0]).trim().replace(hn,"")).length<2)return"";for(;I.length%4!=0;)I+="=";return I}(N))}function It(N,I,Z,q){for(var Ie=0;Ie<q&&!(Ie+Z>=I.length||Ie>=N.length);++Ie)I[Ie+Z]=N[Ie];return Ie}function je(N,I){return N instanceof I||null!=N&&null!=N.constructor&&null!=N.constructor.name&&N.constructor.name===I.name}function ze(N){return N!=N}var bt=function(){for(var N="0123456789abcdef",I=new Array(256),Z=0;Z<16;++Z)for(var q=16*Z,Ie=0;Ie<16;++Ie)I[q+Ie]=N[Z]+N[Ie];return I}()},6693:function(Vt,Qe){"use strict";Qe.byteLength=function(j){var B=V(j),M=B[1];return 3*(B[0]+M)/4-M},Qe.toByteArray=function(j){var B,T,Se,M=V(j),L=M[0],K=M[1],ce=new G(3*(L+(Se=K))/4-Se),pe=0,ue=K>0?L-4:L;for(T=0;T<ue;T+=4)B=Ce[j.charCodeAt(T)]<<18|Ce[j.charCodeAt(T+1)]<<12|Ce[j.charCodeAt(T+2)]<<6|Ce[j.charCodeAt(T+3)],ce[pe++]=B>>16&255,ce[pe++]=B>>8&255,ce[pe++]=255&B;return 2===K&&(B=Ce[j.charCodeAt(T)]<<2|Ce[j.charCodeAt(T+1)]>>4,ce[pe++]=255&B),1===K&&(B=Ce[j.charCodeAt(T)]<<10|Ce[j.charCodeAt(T+1)]<<4|Ce[j.charCodeAt(T+2)]>>2,ce[pe++]=B>>8&255,ce[pe++]=255&B),ce},Qe.fromByteArray=function(j){for(var B,T=j.length,M=T%3,L=[],K=16383,ce=0,pe=T-M;ce<pe;ce+=K)L.push(D(j,ce,ce+K>pe?pe:ce+K));return 1===M?L.push(ne[(B=j[T-1])>>2]+ne[B<<4&63]+"=="):2===M&&L.push(ne[(B=(j[T-2]<<8)+j[T-1])>>10]+ne[B>>4&63]+ne[B<<2&63]+"="),L.join("")};for(var ne=[],Ce=[],G=typeof Uint8Array<"u"?Uint8Array:Array,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_=0;_<64;++_)ne[_]=E[_],Ce[E.charCodeAt(_)]=_;function V(j){var B=j.length;if(B%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var T=j.indexOf("=");return-1===T&&(T=B),[T,T===B?0:4-T%4]}function D(j,B,T){for(var L,K=[],ce=B;ce<T;ce+=3)K.push(ne[(L=(j[ce]<<16&16711680)+(j[ce+1]<<8&65280)+(255&j[ce+2]))>>18&63]+ne[L>>12&63]+ne[L>>6&63]+ne[63&L]);return K.join("")}Ce["-".charCodeAt(0)]=62,Ce["_".charCodeAt(0)]=63},2165:function(Vt,Qe){Qe.read=function(ne,Ce,G,E,_){var F,V,D=8*_-E-1,j=(1<<D)-1,B=j>>1,T=-7,M=G?_-1:0,L=G?-1:1,K=ne[Ce+M];for(M+=L,F=K&(1<<-T)-1,K>>=-T,T+=D;T>0;F=256*F+ne[Ce+M],M+=L,T-=8);for(V=F&(1<<-T)-1,F>>=-T,T+=E;T>0;V=256*V+ne[Ce+M],M+=L,T-=8);if(0===F)F=1-B;else{if(F===j)return V?NaN:1/0*(K?-1:1);V+=Math.pow(2,E),F-=B}return(K?-1:1)*V*Math.pow(2,F-E)},Qe.write=function(ne,Ce,G,E,_,F){var V,D,j,B=8*F-_-1,T=(1<<B)-1,M=T>>1,L=23===_?Math.pow(2,-24)-Math.pow(2,-77):0,K=E?0:F-1,ce=E?1:-1,pe=Ce<0||0===Ce&&1/Ce<0?1:0;for(Ce=Math.abs(Ce),isNaN(Ce)||Ce===1/0?(D=isNaN(Ce)?1:0,V=T):(V=Math.floor(Math.log(Ce)/Math.LN2),Ce*(j=Math.pow(2,-V))<1&&(V--,j*=2),(Ce+=V+M>=1?L/j:L*Math.pow(2,1-M))*j>=2&&(V++,j/=2),V+M>=T?(D=0,V=T):V+M>=1?(D=(Ce*j-1)*Math.pow(2,_),V+=M):(D=Ce*Math.pow(2,M-1)*Math.pow(2,_),V=0));_>=8;ne[G+K]=255&D,K+=ce,D/=256,_-=8);for(V=V<<_|D,B+=_;B>0;ne[G+K]=255&V,K+=ce,V/=256,B-=8);ne[G+K-ce]|=128*pe}},6934:function(Vt,Qe){var ne={parseBuffer:function(E){return new Ce(E).parse()},addBoxProcessor:function(E,_){"string"==typeof E&&"function"==typeof _&&(G.prototype._boxProcessors[E]=_)},createFile:function(){return new Ce},createBox:function(E,_,F){var V=G.create(E);return _&&_.append(V,F),V},createFullBox:function(E,_,F){var V=ne.createBox(E,_,F);return V.version=0,V.flags=0,V},Utils:{}};ne.Utils.dataViewToString=function(E,_){var F=_||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(F).decode(E);var V=[],D=0;if("utf-8"===F)for(;D<E.byteLength;){var j=E.getUint8(D++);j<128||(j<224?(j=(31&j)<<6,j|=63&E.getUint8(D++)):j<240?(j=(15&j)<<12,j|=(63&E.getUint8(D++))<<6,j|=63&E.getUint8(D++)):(j=(7&j)<<18,j|=(63&E.getUint8(D++))<<12,j|=(63&E.getUint8(D++))<<6,j|=63&E.getUint8(D++))),V.push(String.fromCharCode(j))}else for(;D<E.byteLength;)V.push(String.fromCharCode(E.getUint8(D++)));return V.join("")},ne.Utils.utf8ToByteArray=function(E){var _,F;if(typeof TextEncoder<"u")_=(new TextEncoder).encode(E);else for(_=[],F=0;F<E.length;++F){var V=E.charCodeAt(F);V<128?_.push(V):V<2048?(_.push(192|V>>6),_.push(128|63&V)):V<65536?(_.push(224|V>>12),_.push(128|63&V>>6),_.push(128|63&V)):(_.push(240|V>>18),_.push(128|63&V>>12),_.push(128|63&V>>6),_.push(128|63&V))}return _},ne.Utils.appendBox=function(E,_,F){if(_._offset=E._cursor.offset,_._root=E._root?E._root:E,_._raw=E._raw,_._parent=E,-1!==F)if(null!=F){var V,D=-1;if("number"==typeof F)D=F;else{if("string"==typeof F)V=F;else{if("object"!=typeof F||!F.type)return void E.boxes.push(_);V=F.type}for(var j=0;j<E.boxes.length;j++)if(V===E.boxes[j].type){D=j+1;break}}E.boxes.splice(D,0,_)}else E.boxes.push(_)},Qe.parseBuffer=ne.parseBuffer,Qe.addBoxProcessor=ne.addBoxProcessor,Qe.createFile=ne.createFile,Qe.createBox=ne.createBox,Qe.createFullBox=ne.createFullBox,Qe.Utils=ne.Utils,ne.Cursor=function(E){this.offset=void 0===E?0:E};var Ce=function(E){this._cursor=new ne.Cursor,this.boxes=[],E&&(this._raw=new DataView(E))};Ce.prototype.fetch=function(E){var _=this.fetchAll(E,!0);return _.length?_[0]:null},Ce.prototype.fetchAll=function(E,_){var F=[];return Ce._sweep.call(this,E,F,_),F},Ce.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var E=G.parse(this);if(void 0===E.type)break;this.boxes.push(E)}return this},Ce._sweep=function(E,_,F){for(var V in this.type&&this.type==E&&_.push(this),this.boxes){if(_.length&&F)return;Ce._sweep.call(this.boxes[V],E,_,F)}},Ce.prototype.write=function(){var E,_=0;for(E=0;E<this.boxes.length;E++)_+=this.boxes[E].getLength(!1);var F=new Uint8Array(_);for(this._rawo=new DataView(F.buffer),this.bytes=F,this._cursor.offset=0,E=0;E<this.boxes.length;E++)this.boxes[E].write();return F.buffer},Ce.prototype.append=function(E,_){ne.Utils.appendBox(this,E,_)};var G=function(){this._cursor=new ne.Cursor};G.parse=function(E){var _=new G;return _._offset=E._cursor.offset,_._root=E._root?E._root:E,_._raw=E._raw,_._parent=E,_._parseBox(),E._cursor.offset=_._raw.byteOffset+_._raw.byteLength,_},G.create=function(E){var _=new G;return _.type=E,_.boxes=[],_},G.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],G.prototype._boxProcessors={},G.prototype._procField=function(E,_,F){this._parsing?this[E]=this._readField(_,F):this._writeField(_,F,this[E])},G.prototype._procFieldArray=function(E,_,F,V){var D;if(this._parsing)for(this[E]=[],D=0;D<_;D++)this[E][D]=this._readField(F,V);else for(D=0;D<this[E].length;D++)this._writeField(F,V,this[E][D])},G.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},G.prototype._procEntries=function(E,_,F){var V;if(this._parsing)for(this[E]=[],V=0;V<_;V++)this[E].push({}),F.call(this,this[E][V]);else for(V=0;V<_;V++)F.call(this,this[E][V])},G.prototype._procSubEntries=function(E,_,F,V){var D;if(this._parsing)for(E[_]=[],D=0;D<F;D++)E[_].push({}),V.call(this,E[_][D]);else for(D=0;D<F;D++)V.call(this,E[_][D])},G.prototype._procEntryField=function(E,_,F,V){this._parsing?E[_]=this._readField(F,V):this._writeField(F,V,E[_])},G.prototype._procSubBoxes=function(E,_){var F;if(this._parsing)for(this[E]=[],F=0;F<_;F++)this[E].push(G.parse(this));else for(F=0;F<_;F++)this._rawo?this[E][F].write():this.size+=this[E][F].getLength()},G.prototype._readField=function(E,_){switch(E){case"uint":return this._readUint(_);case"int":return this._readInt(_);case"template":return this._readTemplate(_);case"string":return-1===_?this._readTerminatedString():this._readString(_);case"data":return this._readData(_);case"utf8":return this._readUTF8String();default:return-1}},G.prototype._readInt=function(E){var _=null,F=this._cursor.offset-this._raw.byteOffset;switch(E){case 8:_=this._raw.getInt8(F);break;case 16:_=this._raw.getInt16(F);break;case 32:_=this._raw.getInt32(F);break;case 64:var V=this._raw.getInt32(F),D=this._raw.getInt32(F+4);_=V*Math.pow(2,32)+D}return this._cursor.offset+=E>>3,_},G.prototype._readUint=function(E){var _,F,V=null,D=this._cursor.offset-this._raw.byteOffset;switch(E){case 8:V=this._raw.getUint8(D);break;case 16:V=this._raw.getUint16(D);break;case 24:V=((_=this._raw.getUint16(D))<<8)+(F=this._raw.getUint8(D+2));break;case 32:V=this._raw.getUint32(D);break;case 64:_=this._raw.getUint32(D),F=this._raw.getUint32(D+4),V=_*Math.pow(2,32)+F}return this._cursor.offset+=E>>3,V},G.prototype._readString=function(E){for(var _="",F=0;F<E;F++){var V=this._readUint(8);_+=String.fromCharCode(V)}return _},G.prototype._readTemplate=function(E){return this._readUint(E/2)+this._readUint(E/2)/Math.pow(2,E/2)},G.prototype._readTerminatedString=function(){for(var E="";this._cursor.offset-this._offset<this._raw.byteLength;){var _=this._readUint(8);if(0===_)break;E+=String.fromCharCode(_)}return E},G.prototype._readData=function(E){var _=E>0?E:this._raw.byteLength-(this._cursor.offset-this._offset);if(_>0){var F=new Uint8Array(this._raw.buffer,this._cursor.offset,_);return this._cursor.offset+=_,F}return null},G.prototype._readUTF8String=function(){var E=this._raw.byteLength-(this._cursor.offset-this._offset),_=null;return E>0&&(_=new DataView(this._raw.buffer,this._cursor.offset,E),this._cursor.offset+=E),_&&ne.Utils.dataViewToString(_)},G.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},G.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},G.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(G.parse(this))},G.prototype.append=function(E,_){ne.Utils.appendBox(this,E,_)},G.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var E=0;E<this.boxes.length;E++)this.size+=this.boxes[E].getLength();return this._data&&this._writeData(this._data),this.size},G.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var E=0;E<this.boxes.length;E++)this.boxes[E].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},G.prototype._writeInt=function(E,_){if(this._rawo){var F=this._cursor.offset-this._rawo.byteOffset;switch(E){case 8:this._rawo.setInt8(F,_);break;case 16:this._rawo.setInt16(F,_);break;case 32:this._rawo.setInt32(F,_);break;case 64:var V=Math.floor(_/Math.pow(2,32)),D=_-V*Math.pow(2,32);this._rawo.setUint32(F,V),this._rawo.setUint32(F+4,D)}this._cursor.offset+=E>>3}else this.size+=E>>3},G.prototype._writeUint=function(E,_){if(this._rawo){var F,V,D=this._cursor.offset-this._rawo.byteOffset;switch(E){case 8:this._rawo.setUint8(D,_);break;case 16:this._rawo.setUint16(D,_);break;case 24:V=255&_,this._rawo.setUint16(D,F=(16776960&_)>>8),this._rawo.setUint8(D+2,V);break;case 32:this._rawo.setUint32(D,_);break;case 64:V=_-(F=Math.floor(_/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(D,F),this._rawo.setUint32(D+4,V)}this._cursor.offset+=E>>3}else this.size+=E>>3},G.prototype._writeString=function(E,_){for(var F=0;F<E;F++)this._writeUint(8,_.charCodeAt(F))},G.prototype._writeTerminatedString=function(E){if(0!==E.length){for(var _=0;_<E.length;_++)this._writeUint(8,E.charCodeAt(_));this._writeUint(8,0)}},G.prototype._writeTemplate=function(E,_){var F=Math.floor(_),V=(_-F)*Math.pow(2,E/2);this._writeUint(E/2,F),this._writeUint(E/2,V)},G.prototype._writeData=function(E){if(E)if(this._rawo){if(E instanceof Array){for(var _=this._cursor.offset-this._rawo.byteOffset,F=0;F<E.length;F++)this._rawo.setInt8(_+F,E[F]);this._cursor.offset+=E.length}E instanceof Uint8Array&&(this._root.bytes.set(E,this._cursor.offset),this._cursor.offset+=E.length)}else this.size+=E.length},G.prototype._writeUTF8String=function(E){var _=ne.Utils.utf8ToByteArray(E);if(this._rawo)for(var F=new DataView(this._rawo.buffer,this._cursor.offset,_.length),V=0;V<_.length;V++)F.setUint8(V,_[V]);else this.size+=_.length},G.prototype._writeField=function(E,_,F){switch(E){case"uint":this._writeUint(_,F);break;case"int":this._writeInt(_,F);break;case"template":this._writeTemplate(_,F);break;case"string":-1==_?this._writeTerminatedString(F):this._writeString(_,F);break;case"data":this._writeData(F);break;case"utf8":this._writeUTF8String(F)}},G.prototype._boxProcessors.avc1=G.prototype._boxProcessors.avc2=G.prototype._boxProcessors.avc3=G.prototype._boxProcessors.avc4=G.prototype._boxProcessors.hvc1=G.prototype._boxProcessors.hev1=G.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},G.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(E){this._procEntryField(E,"sample_count","uint",32),this._procEntryField(E,"sample_offset",1===this.version?"int":"uint",32)})},G.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},G.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(E){this._procEntryField(E,"segment_duration","uint",1===this.version?64:32),this._procEntryField(E,"media_time","int",1===this.version?64:32),this._procEntryField(E,"media_rate_integer","int",16),this._procEntryField(E,"media_rate_fraction","int",16)})},G.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},G.prototype._boxProcessors.free=G.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},G.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},G.prototype._boxProcessors.ftyp=G.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var E=-1;this._parsing&&(E=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",E,"string",4)},G.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},G.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},G.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},G.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},G.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},G.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},G.prototype._boxProcessors.mp4a=G.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},G.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},G.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},G.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",1==this.version?64:32)},G.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},G.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},G.prototype._boxProcessors.sdtp=function(){this._procFullBox();var E=-1;this._parsing&&(E=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",E,"uint",8)},G.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(E){this._parsing||(E.reference=(1&E.reference_type)<<31,E.reference|=2147483647&E.referenced_size,E.sap=(1&E.starts_with_SAP)<<31,E.sap|=(3&E.SAP_type)<<28,E.sap|=268435455&E.SAP_delta_time),this._procEntryField(E,"reference","uint",32),this._procEntryField(E,"subsegment_duration","uint",32),this._procEntryField(E,"sap","uint",32),this._parsing&&(E.reference_type=E.reference>>31&1,E.referenced_size=2147483647&E.reference,E.starts_with_SAP=E.sap>>31&1,E.SAP_type=E.sap>>28&7,E.SAP_delta_time=268435455&E.sap)})},G.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},G.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(E){this._procEntryField(E,"ranges_count","uint",32),this._procSubEntries(E,"ranges",E.ranges_count,function(_){this._procEntryField(_,"level","uint",8),this._procEntryField(_,"range_size","uint",24)})})},G.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},G.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},G.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(E){this._procEntryField(E,"sample_count","uint",32),this._procEntryField(E,"sample_delta","uint",32)})},G.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(E){this._procEntryField(E,"sample_delta","uint",32),this._procEntryField(E,"subsample_count","uint",16),this._procSubEntries(E,"subsamples",E.subsample_count,function(_){this._procEntryField(_,"subsample_size","uint",1===this.version?32:16),this._procEntryField(_,"subsample_priority","uint",8),this._procEntryField(_,"discardable","uint",8),this._procEntryField(_,"codec_specific_parameters","uint",32)})})},G.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},G.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},G.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},G.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(E){this._procEntryField(E,"time","uint",1===this.version?64:32),this._procEntryField(E,"moof_offset","uint",1===this.version?64:32),this._procEntryField(E,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(E,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(E,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},G.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},G.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},G.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(E){256&this.flags&&this._procEntryField(E,"sample_duration","uint",32),512&this.flags&&this._procEntryField(E,"sample_size","uint",32),1024&this.flags&&this._procEntryField(E,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(E,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},G.prototype._boxProcessors["url "]=G.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},G.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},G.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},G.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},G.prototype._boxProcessors.vtte=function(){}},5530:function(Vt,Qe,ne){"use strict";Vt.exports=ne(6146).polyfill()},6146:function(Vt,Qe,ne){Vt.exports=function(){"use strict";function Ce(mt){return"function"==typeof mt}var G=Array.isArray?Array.isArray:function(mt){return"[object Array]"===Object.prototype.toString.call(mt)},E=0,_=void 0,F=void 0,V=function(mt,It){K[E]=mt,K[E+1]=It,2===(E+=2)&&(F?F(ce):Se())},D=typeof window<"u"?window:void 0,j=D||{},B=j.MutationObserver||j.WebKitMutationObserver,T=typeof self>"u"&&typeof process<"u"&&"[object process]"==={}.toString.call(process),M=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function L(){var mt=setTimeout;return function(){return mt(ce,1)}}var K=new Array(1e3);function ce(){for(var mt=0;mt<E;mt+=2)(0,K[mt])(K[mt+1]),K[mt]=void 0,K[mt+1]=void 0;E=0}var pe,ue,Me,Q,Se=void 0;function Le(mt,It){var je=this,ze=new this.constructor(ge);void 0===ze[Ee]&&ht(ze);var bt=je._state;if(bt){var N=arguments[bt-1];V(function(){return Ht(bt,ze,N,je._result)})}else Pe(je,ze,mt,It);return ze}function x(mt){if(mt&&"object"==typeof mt&&mt.constructor===this)return mt;var It=new this(ge);return ot(It,mt),It}Se=T?function(){return process.nextTick(ce)}:B?(ue=0,Me=new B(ce),Q=document.createTextNode(""),Me.observe(Q,{characterData:!0}),function(){Q.data=ue=++ue%2}):M?((pe=new MessageChannel).port1.onmessage=ce,function(){return pe.port2.postMessage(0)}):void 0===D?function(){try{var mt=Function("return this")().require("vertx");return void 0!==(_=mt.runOnLoop||mt.runOnContext)?function(){_(ce)}:L()}catch{return L()}}():L();var Ee=Math.random().toString(36).substring(2);function ge(){}var et=void 0;function De(mt,It,je){var ze,bt;It.constructor===mt.constructor&&je===Le&&It.constructor.resolve===x?(ze=mt,1===(bt=It)._state?St(ze,bt._result):2===bt._state?Je(ze,bt._result):Pe(bt,void 0,function(N){return ot(ze,N)},function(N){return Je(ze,N)})):void 0===je?St(mt,It):Ce(je)?function(ze,bt,N){V(function(I){var Z=!1,q=function(Ie,_e,rt,xt){try{Ie.call(_e,function(Ie){Z||(Z=!0,bt!==Ie?ot(I,Ie):St(I,Ie))},function(Ie){Z||(Z=!0,Je(I,Ie))})}catch(at){return at}}(N,bt);!Z&&q&&(Z=!0,Je(I,q))},ze)}(mt,It,je):St(mt,It)}function ot(mt,It){if(mt===It)Je(mt,new TypeError("You cannot resolve a promise with itself"));else if(bt=typeof(ze=It),null===ze||"object"!==bt&&"function"!==bt)St(mt,It);else{var je=void 0;try{je=It.then}catch(N){return void Je(mt,N)}De(mt,It,je)}var ze,bt}function gt(mt){mt._onerror&&mt._onerror(mt._result),Nt(mt)}function St(mt,It){mt._state===et&&(mt._result=It,mt._state=1,0!==mt._subscribers.length&&V(Nt,mt))}function Je(mt,It){mt._state===et&&(mt._state=2,mt._result=It,V(gt,mt))}function Pe(mt,It,je,ze){var bt=mt._subscribers,N=bt.length;mt._onerror=null,bt[N]=It,bt[N+1]=je,bt[N+2]=ze,0===N&&mt._state&&V(Nt,mt)}function Nt(mt){var It=mt._subscribers,je=mt._state;if(0!==It.length){for(var ze=void 0,bt=void 0,N=mt._result,I=0;I<It.length;I+=3)bt=It[I+je],(ze=It[I])?Ht(je,ze,bt,N):bt(N);mt._subscribers.length=0}}function Ht(mt,It,je,ze){var bt=Ce(je),N=void 0,I=void 0,Z=!0;if(bt){try{N=je(ze)}catch(q){Z=!1,I=q}if(It===N)return void Je(It,new TypeError("A promises callback cannot return that same promise."))}else N=ze;It._state!==et||(bt&&Z?ot(It,N):!1===Z?Je(It,I):1===mt?St(It,N):2===mt&&Je(It,N))}var $e=0;function ht(mt){mt[Ee]=$e++,mt._state=void 0,mt._result=void 0,mt._subscribers=[]}var hn=function(){function mt(It,je){this._instanceConstructor=It,this.promise=new It(ge),this.promise[Ee]||ht(this.promise),G(je)?(this.length=je.length,this._remaining=je.length,this._result=new Array(this.length),0===this.length?St(this.promise,this._result):(this.length=this.length||0,this._enumerate(je),0===this._remaining&&St(this.promise,this._result))):Je(this.promise,new Error("Array Methods must be provided an Array"))}return mt.prototype._enumerate=function(It){for(var je=0;this._state===et&&je<It.length;je++)this._eachEntry(It[je],je)},mt.prototype._eachEntry=function(It,je){var ze=this._instanceConstructor,bt=ze.resolve;if(bt===x){var N=void 0,I=void 0,Z=!1;try{N=It.then}catch(Ie){Z=!0,I=Ie}if(N===Le&&It._state!==et)this._settledAt(It._state,je,It._result);else if("function"!=typeof N)this._remaining--,this._result[je]=It;else if(ze===zt){var q=new ze(ge);Z?Je(q,I):De(q,It,N),this._willSettleAt(q,je)}else this._willSettleAt(new ze(function(Ie){return Ie(It)}),je)}else this._willSettleAt(bt(It),je)},mt.prototype._settledAt=function(It,je,ze){var bt=this.promise;bt._state===et&&(this._remaining--,2===It?Je(bt,ze):this._result[je]=ze),0===this._remaining&&St(bt,this._result)},mt.prototype._willSettleAt=function(It,je){var ze=this;Pe(It,void 0,function(bt){return ze._settledAt(1,je,bt)},function(bt){return ze._settledAt(2,je,bt)})},mt}(),zt=function(){function mt(It){this[Ee]=$e++,this._result=this._state=void 0,this._subscribers=[],ge!==It&&("function"!=typeof It&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof mt?function(je,ze){try{ze(function(bt){ot(je,bt)},function(bt){Je(je,bt)})}catch(bt){Je(je,bt)}}(this,It):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return mt.prototype.catch=function(It){return this.then(null,It)},mt.prototype.finally=function(It){var ze=this.constructor;return Ce(It)?this.then(function(bt){return ze.resolve(It()).then(function(){return bt})},function(bt){return ze.resolve(It()).then(function(){throw bt})}):this.then(It,It)},mt}();return zt.prototype.then=Le,zt.all=function(mt){return new hn(this,mt).promise},zt.race=function(mt){var It=this;return G(mt)?new It(function(je,ze){for(var bt=mt.length,N=0;N<bt;N++)It.resolve(mt[N]).then(je,ze)}):new It(function(je,ze){return ze(new TypeError("You must pass an array to race."))})},zt.resolve=x,zt.reject=function(mt){var It=new this(ge);return Je(It,mt),It},zt._setScheduler=function(mt){F=mt},zt._setAsap=function(mt){V=mt},zt._asap=V,zt.polyfill=function(){var mt=void 0;if(void 0!==ne.g)mt=ne.g;else if(typeof self<"u")mt=self;else try{mt=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var It=mt.Promise;if(It){var je=null;try{je=Object.prototype.toString.call(It.resolve())}catch{}if("[object Promise]"===je&&!It.cast)return}mt.Promise=zt},zt.Promise=zt,zt}()},1159:function(Vt){"use strict";var Qe,ne="object"==typeof Reflect?Reflect:null,Ce=ne&&"function"==typeof ne.apply?ne.apply:function(ce,pe,ue){return Function.prototype.apply.call(ce,pe,ue)};Qe=ne&&"function"==typeof ne.ownKeys?ne.ownKeys:Object.getOwnPropertySymbols?function(ce){return Object.getOwnPropertyNames(ce).concat(Object.getOwnPropertySymbols(ce))}:function(ce){return Object.getOwnPropertyNames(ce)};var G=Number.isNaN||function(ce){return ce!=ce};function E(){E.init.call(this)}Vt.exports=E,Vt.exports.once=function(ce,pe){return new Promise(function(ue,Me){function Q(Le){ce.removeListener(pe,Se),Me(Le)}function Se(){"function"==typeof ce.removeListener&&ce.removeListener("error",Q),ue([].slice.call(arguments))}var Le;K(ce,pe,Se,{once:!0}),"error"!==pe&&("function"==typeof(Le=ce).on&&K(Le,"error",Q,{once:!0}))})},E.EventEmitter=E,E.prototype._events=void 0,E.prototype._eventsCount=0,E.prototype._maxListeners=void 0;var _=10;function F(ce){if("function"!=typeof ce)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ce)}function V(ce){return void 0===ce._maxListeners?E.defaultMaxListeners:ce._maxListeners}function D(ce,pe,ue,Me){var Q,Se,Le;if(F(ue),void 0===(Se=ce._events)?(Se=ce._events=Object.create(null),ce._eventsCount=0):(void 0!==Se.newListener&&(ce.emit("newListener",pe,ue.listener?ue.listener:ue),Se=ce._events),Le=Se[pe]),void 0===Le)Le=Se[pe]=ue,++ce._eventsCount;else if("function"==typeof Le?Le=Se[pe]=Me?[ue,Le]:[Le,ue]:Me?Le.unshift(ue):Le.push(ue),(Q=V(ce))>0&&Le.length>Q&&!Le.warned){Le.warned=!0;var Ee=new Error("Possible EventEmitter memory leak detected. "+Le.length+" "+String(pe)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ee.name="MaxListenersExceededWarning",Ee.emitter=ce,Ee.type=pe,Ee.count=Le.length,console&&console.warn&&console.warn(Ee)}return ce}function j(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function B(ce,pe,ue){var Me={fired:!1,wrapFn:void 0,target:ce,type:pe,listener:ue},Q=j.bind(Me);return Q.listener=ue,Me.wrapFn=Q,Q}function T(ce,pe,ue){var Me=ce._events;if(void 0===Me)return[];var Q=Me[pe];return void 0===Q?[]:"function"==typeof Q?ue?[Q.listener||Q]:[Q]:ue?function(Se){for(var Le=new Array(Se.length),x=0;x<Le.length;++x)Le[x]=Se[x].listener||Se[x];return Le}(Q):L(Q,Q.length)}function M(ce){var pe=this._events;if(void 0!==pe){var ue=pe[ce];if("function"==typeof ue)return 1;if(void 0!==ue)return ue.length}return 0}function L(ce,pe){for(var ue=new Array(pe),Me=0;Me<pe;++Me)ue[Me]=ce[Me];return ue}function K(ce,pe,ue,Me){if("function"==typeof ce.on)Me.once?ce.once(pe,ue):ce.on(pe,ue);else{if("function"!=typeof ce.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ce);ce.addEventListener(pe,function Q(Se){Me.once&&ce.removeEventListener(pe,Q),ue(Se)})}}Object.defineProperty(E,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(ce){if("number"!=typeof ce||ce<0||G(ce))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ce+".");_=ce}}),E.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},E.prototype.setMaxListeners=function(ce){if("number"!=typeof ce||ce<0||G(ce))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ce+".");return this._maxListeners=ce,this},E.prototype.getMaxListeners=function(){return V(this)},E.prototype.emit=function(ce){for(var pe=[],ue=1;ue<arguments.length;ue++)pe.push(arguments[ue]);var Me="error"===ce,Q=this._events;if(void 0!==Q)Me=Me&&void 0===Q.error;else if(!Me)return!1;if(Me){var Se;if(pe.length>0&&(Se=pe[0]),Se instanceof Error)throw Se;var Le=new Error("Unhandled error."+(Se?" ("+Se.message+")":""));throw Le.context=Se,Le}var x=Q[ce];if(void 0===x)return!1;if("function"==typeof x)Ce(x,this,pe);else{var Ee=x.length,ge=L(x,Ee);for(ue=0;ue<Ee;++ue)Ce(ge[ue],this,pe)}return!0},E.prototype.on=E.prototype.addListener=function(ce,pe){return D(this,ce,pe,!1)},E.prototype.prependListener=function(ce,pe){return D(this,ce,pe,!0)},E.prototype.once=function(ce,pe){return F(pe),this.on(ce,B(this,ce,pe)),this},E.prototype.prependOnceListener=function(ce,pe){return F(pe),this.prependListener(ce,B(this,ce,pe)),this},E.prototype.off=E.prototype.removeListener=function(ce,pe){var ue,Me,Q,Se,Le;if(F(pe),void 0===(Me=this._events))return this;if(void 0===(ue=Me[ce]))return this;if(ue===pe||ue.listener===pe)0==--this._eventsCount?this._events=Object.create(null):(delete Me[ce],Me.removeListener&&this.emit("removeListener",ce,ue.listener||pe));else if("function"!=typeof ue){for(Q=-1,Se=ue.length-1;Se>=0;Se--)if(ue[Se]===pe||ue[Se].listener===pe){Le=ue[Se].listener,Q=Se;break}if(Q<0)return this;0===Q?ue.shift():function(x,Ee){for(;Ee+1<x.length;Ee++)x[Ee]=x[Ee+1];x.pop()}(ue,Q),1===ue.length&&(Me[ce]=ue[0]),void 0!==Me.removeListener&&this.emit("removeListener",ce,Le||pe)}return this},E.prototype.removeAllListeners=function(ce){var pe,ue,Me;if(void 0===(ue=this._events))return this;if(void 0===ue.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ue[ce]&&(0==--this._eventsCount?this._events=Object.create(null):delete ue[ce]),this;if(0===arguments.length){var Q,Se=Object.keys(ue);for(Me=0;Me<Se.length;++Me)"removeListener"!==(Q=Se[Me])&&this.removeAllListeners(Q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(pe=ue[ce]))this.removeListener(ce,pe);else if(void 0!==pe)for(Me=pe.length-1;Me>=0;Me--)this.removeListener(ce,pe[Me]);return this},E.prototype.listeners=function(ce){return T(this,ce,!0)},E.prototype.rawListeners=function(ce){return T(this,ce,!1)},E.listenerCount=function(ce,pe){return"function"==typeof ce.listenerCount?ce.listenerCount(pe):M.call(ce,pe)},E.prototype.listenerCount=M,E.prototype.eventNames=function(){return this._eventsCount>0?Qe(this._events):[]}},3101:function(Vt){"use strict";var Qe=Array.isArray,ne=Object.keys,Ce=Object.prototype.hasOwnProperty;Vt.exports=function G(E,_){if(E===_)return!0;if(E&&_&&"object"==typeof E&&"object"==typeof _){var F,V,D,j=Qe(E),B=Qe(_);if(j&&B){if((V=E.length)!=_.length)return!1;for(F=V;0!=F--;)if(!G(E[F],_[F]))return!1;return!0}if(j!=B)return!1;var T=E instanceof Date,M=_ instanceof Date;if(T!=M)return!1;if(T&&M)return E.getTime()==_.getTime();var L=E instanceof RegExp,K=_ instanceof RegExp;if(L!=K)return!1;if(L&&K)return E.toString()==_.toString();var ce=ne(E);if((V=ce.length)!==ne(_).length)return!1;for(F=V;0!=F--;)if(!Ce.call(_,ce[F]))return!1;for(F=V;0!=F--;)if(!G(E[D=ce[F]],_[D]))return!1;return!0}return E!=E&&_!=_}},3362:function(Vt,Qe,ne){!function(Ce,G,E,_,F){function V(I){if("contents"in I)for(var Z=("styleAttrs"in I?I.styleAttrs[_.byName.ruby.qname]:null),q="span"===I.kind&&("container"===Z||"textContainer"===Z||"baseContainer"===Z),Ie=I.contents.length-1;Ie>=0;Ie--)!q||"styleAttrs"in I.contents[Ie]&&_.byName.ruby.qname in I.contents[Ie].styleAttrs?V(I.contents[Ie]):delete I.contents[Ie]}function D(I,Z,q,Ie){var _e=Ie&&"seq"===Ie.timeContainer,rt=0;Ie&&(rt=_e&&q?q.end:Ie.begin),Z.begin=Z.explicit_begin?Z.explicit_begin+rt:rt;var xt=Z.begin,at=null;if("sets"in Z)for(var ut=0;ut<Z.sets.length;ut++)D(I,Z.sets[ut],at,Z),xt="seq"===Z.timeContainer?Z.sets[ut].end:Math.max(xt,Z.sets[ut].end),at=Z.sets[ut];if("contents"in Z){if("contents"in Z)for(var it=0;it<Z.contents.length;it++)D(I,Z.contents[it],at,Z),xt="seq"===Z.timeContainer?Z.contents[it].end:Math.max(xt,Z.contents[it].end),at=Z.contents[it]}else xt=_e?Z.begin:Number.POSITIVE_INFINITY;Z.end=null!==Z.explicit_end&&null!==Z.explicit_dur?Math.min(Z.begin+Z.explicit_dur,rt+Z.explicit_end):null===Z.explicit_end&&null!==Z.explicit_dur?Z.begin+Z.explicit_dur:null!==Z.explicit_end&&null===Z.explicit_dur?rt+Z.explicit_end:xt,delete Z.explicit_begin,delete Z.explicit_dur,delete Z.explicit_end,I._registerEvent(Z)}function j(I){this.node=I}function B(){this.events=[],this.head=new T,this.body=null}function T(){this.styling=new M,this.layout=new ce}function M(){this.styles={},this.initials={}}function L(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function K(){this.styleAttrs=null}function ce(){this.regions={}}function pe(I,Z){ue.call(this,"image"),this.src=I,this.type=Z}function ue(I){this.kind=I}function Me(I){this.id=I}function Q(I){this.regionID=I}function Se(I){this.styleAttrs=I}function Le(I){this.sets=I}function x(I){this.contents=I}function Ee(I,Z,q){this.explicit_begin=I,this.explicit_end=Z,this.explicit_dur=q}function ge(){ue.call(this,"body")}function et(){ue.call(this,"div")}function De(){ue.call(this,"p")}function ot(){ue.call(this,"span")}function gt(){ue.call(this,"span")}function St(){ue.call(this,"br")}function Je(){}function Pe(){}function Nt(I){return I&&"xml:id"in I.attributes&&I.attributes["xml:id"].value||null}function Ht(I){return I&&"style"in I.attributes?I.attributes.style.value.split(" "):[]}function $e(I,Z){var q={};if(null!==I)for(var Ie in I.attributes){var _e=I.attributes[Ie].uri+" "+I.attributes[Ie].local,rt=_.byQName[_e];if(void 0!==rt){var xt=rt.parse(I.attributes[Ie].value);null!==xt?(q[_e]=xt,rt===_.byName.zIndex&&je(Z,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):ze(Z,"Cannot parse styling attribute "+_e+" --\x3e "+I.attributes[Ie].value)}}return q}function ht(I,Z,q){for(var Ie in I.attributes)if(I.attributes[Ie].uri===Z&&I.attributes[Ie].local===q)return I.attributes[Ie].value;return null}function hn(I,Z,q){var Ie,_e=null;return null!==(Ie=/^(\d+(?:\.\d+)?)f$/.exec(q))?null!==Z&&(_e=parseFloat(Ie[1])/Z):null!==(Ie=/^(\d+(?:\.\d+)?)t$/.exec(q))?null!==I&&(_e=parseFloat(Ie[1])/I):null!==(Ie=/^(\d+(?:\.\d+)?)ms$/.exec(q))?_e=parseFloat(Ie[1])/1e3:null!==(Ie=/^(\d+(?:\.\d+)?)s$/.exec(q))?_e=parseFloat(Ie[1]):null!==(Ie=/^(\d+(?:\.\d+)?)h$/.exec(q))?_e=3600*parseFloat(Ie[1]):null!==(Ie=/^(\d+(?:\.\d+)?)m$/.exec(q))?_e=60*parseFloat(Ie[1]):null!==(Ie=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(q))?_e=3600*parseInt(Ie[1])+60*parseInt(Ie[2])+parseFloat(Ie[3]):null!==(Ie=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(q))&&null!==Z&&(_e=3600*parseInt(Ie[1])+60*parseInt(Ie[2])+parseInt(Ie[3])+(null===Ie[4]?0:parseInt(Ie[4])/Z)),_e}function zt(I,Z,q){for(;Z.styleRefs.length>0;){var Ie=Z.styleRefs.pop();Ie in I.styles?(zt(I,I.styles[Ie],q),It(I.styles[Ie].styleAttrs,Z.styleAttrs)):ze(q,"Non-existant style id referenced")}}function mt(I,Z,q,Ie){for(var _e=Z.length-1;_e>=0;_e--){var rt=Z[_e];rt in I.styles?It(I.styles[rt].styleAttrs,q):ze(Ie,"Non-existant style id referenced")}}function It(I,Z){for(var q in I)I.hasOwnProperty(q)&&(q in Z||(Z[q]=I[q]))}function je(I,Z){if(I&&I.warn&&I.warn(Z))throw Z}function ze(I,Z){if(I&&I.error&&I.error(Z))throw Z}function bt(I,Z){throw I&&I.fatal&&I.fatal(Z),Z}function N(I,Z){for(var q,Ie=0,_e=I.length-1;Ie<=_e;){var rt=I[q=Math.floor((Ie+_e)/2)];if(rt<Z)Ie=q+1;else{if(!(rt>Z))return{found:!0,index:q};_e=q-1}}return{found:!1,index:Ie}}Ce.fromXML=function(I,Z,q){var Ie=G.parser(!0,{xmlns:!0}),_e=[],rt=[],xt=[],at=0,ut=null;Ie.onclosetag=function(Zt){if(_e[0]instanceof Je)null!==ut.head&&null!==ut.head.styling&&mt(ut.head.styling,_e[0].styleRefs,_e[0].styleAttrs,Z),delete _e[0].styleRefs;else if(_e[0]instanceof M)for(var kn in _e[0].styles)_e[0].styles.hasOwnProperty(kn)&&zt(_e[0],_e[0].styles[kn],Z);else if(_e[0]instanceof De||_e[0]instanceof ot){if(_e[0].contents.length>1){var vn,xn=[_e[0].contents[0]];for(vn=1;vn<_e[0].contents.length;vn++)_e[0].contents[vn]instanceof gt&&xn[xn.length-1]instanceof gt?xn[xn.length-1].text+=_e[0].contents[vn].text:xn.push(_e[0].contents[vn]);_e[0].contents=xn}_e[0]instanceof ot&&1===_e[0].contents.length&&_e[0].contents[0]instanceof gt&&(_e[0].text=_e[0].contents[0].text,delete _e[0].contents)}else _e[0]instanceof j&&(_e[0].node.uri===E.ns_tt&&"metadata"===_e[0].node.local?at--:at>0&&q&&"onCloseTag"in q&&q.onCloseTag());xt.shift(),rt.shift(),_e.shift()},Ie.ontext=function(Zt){if(void 0!==_e[0])if(_e[0]instanceof ot||_e[0]instanceof De){if(_e[0]instanceof ot){var kn=_e[0].styleAttrs[_.byName.ruby.qname];if("container"===kn||"textContainer"===kn||"baseContainer"===kn)return}var vn=new gt;vn.initFromText(ut,_e[0],Zt,rt[0],xt[0],Z),_e[0].contents.push(vn)}else _e[0]instanceof j&&at>0&&q&&"onText"in q&&q.onText(Zt)},Ie.onopentag=function(Zt){var kn=Zt.attributes["xml:space"];xt.unshift(kn?kn.value:0===xt.length?"default":xt[0]);var vn=Zt.attributes["xml:lang"];if(rt.unshift(vn?vn.value:0===rt.length?"":rt[0]),Zt.uri===E.ns_tt)if("tt"===Zt.local)null!==ut&&bt(Z,"Two <tt> elements at ("+this.line+","+this.column+")"),(ut=new B).initFromNode(Zt,rt[0],Z),_e.unshift(ut);else if("head"===Zt.local)_e[0]instanceof B||bt(Z,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),_e.unshift(ut.head);else if("styling"===Zt.local)_e[0]instanceof T||bt(Z,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),_e.unshift(ut.head.styling);else if("style"===Zt.local){var xn;_e[0]instanceof M?((xn=new L).initFromNode(Zt,Z),xn.id?ut.head.styling.styles[xn.id]=xn:ze(Z,"<style> element missing @id attribute"),_e.unshift(xn)):_e[0]instanceof Je?((xn=new L).initFromNode(Zt,Z),It(xn.styleAttrs,_e[0].styleAttrs),_e.unshift(xn)):bt(Z,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("initial"===Zt.local){var Tn;if(_e[0]instanceof M){for(var sr in(Tn=new K).initFromNode(Zt,Z),Tn.styleAttrs)Tn.styleAttrs.hasOwnProperty(sr)&&(ut.head.styling.initials[sr]=Tn.styleAttrs[sr]);_e.unshift(Tn)}else bt(Z,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if("layout"===Zt.local)_e[0]instanceof T||bt(Z,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),_e.unshift(ut.head.layout);else if("region"===Zt.local){_e[0]instanceof ce||bt(Z,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var Or=new Je;Or.initFromNode(ut,Zt,rt[0],Z),!Or.id||Or.id in ut.head.layout.regions?ze(Z,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):ut.head.layout.regions[Or.id]=Or,_e.unshift(Or)}else if("body"===Zt.local){_e[0]instanceof B||bt(Z,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==ut.body&&bt(Z,"Second <body> element at "+this.line+","+this.column+")");var ei=new ge;ei.initFromNode(ut,Zt,rt[0],Z),ut.body=ei,_e.unshift(ei)}else if("div"===Zt.local){_e[0]instanceof et||_e[0]instanceof ge||bt(Z,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var ti=new et;ti.initFromNode(ut,_e[0],Zt,rt[0],Z);var yi=ti.styleAttrs[_.byName.backgroundImage.qname];yi&&(ti.contents.push(new pe(yi)),delete ti.styleAttrs[_.byName.backgroundImage.qname]),_e[0].contents.push(ti),_e.unshift(ti)}else if("image"===Zt.local){_e[0]instanceof et||bt(Z,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var zi=new pe;zi.initFromNode(ut,_e[0],Zt,rt[0],Z),_e[0].contents.push(zi),_e.unshift(zi)}else if("p"===Zt.local){_e[0]instanceof et||bt(Z,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var ni=new De;ni.initFromNode(ut,_e[0],Zt,rt[0],Z),_e[0].contents.push(ni),_e.unshift(ni)}else if("span"===Zt.local){_e[0]instanceof ot||_e[0]instanceof De||bt(Z,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var xo=new ot;xo.initFromNode(ut,_e[0],Zt,rt[0],xt[0],Z),_e[0].contents.push(xo),_e.unshift(xo)}else if("br"===Zt.local){_e[0]instanceof ot||_e[0]instanceof De||bt(Z,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var Ui=new St;Ui.initFromNode(ut,_e[0],Zt,rt[0],Z),_e[0].contents.push(Ui),_e.unshift(Ui)}else if("set"===Zt.local){_e[0]instanceof ot||_e[0]instanceof De||_e[0]instanceof et||_e[0]instanceof ge||_e[0]instanceof Je||_e[0]instanceof St||bt(Z,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var mo=new Pe;mo.initFromNode(ut,_e[0],Zt,Z),_e[0].sets.push(mo),_e.unshift(mo)}else _e.unshift(new j(Zt));else _e.unshift(new j(Zt));if(_e[0]instanceof j)if(Zt.uri===E.ns_tt&&"metadata"===Zt.local)at++;else if(at>0&&q&&"onOpenTag"in q){var Zo=[];for(var vo in Zt.attributes)Zo[Zt.attributes[vo].uri+" "+Zt.attributes[vo].local]={uri:Zt.attributes[vo].uri,local:Zt.attributes[vo].local,value:Zt.attributes[vo].value};q.onOpenTag(Zt.uri,Zt.local,Zo)}},Ie.write(I).close(),delete ut.head.styling.styles;var it=!1;for(var vt in ut.head.layout.regions)if(ut.head.layout.regions.hasOwnProperty(vt)){it=!0;break}if(!it){var Bt=Je.prototype.createDefaultRegion(ut.lang);ut.head.layout.regions[Bt.id]=Bt}for(var un in ut.head.layout.regions)ut.head.layout.regions.hasOwnProperty(un)&&D(ut,ut.head.layout.regions[un],null,null);return ut.body&&D(ut,ut.body,null,null),ut.body&&V(ut.body),ut},B.prototype.initFromNode=function(I,Z,q){var Ie=function(at,ut){var it=ht(at,E.ns_ttp,"cellResolution"),vt=15,Bt=32;if(null!==it){var un=/(\d+) (\d+)/.exec(it);null!==un?(Bt=parseInt(un[1]),vt=parseInt(un[2])):je(ut,"Malformed cellResolution value (using initial value instead)")}return{w:Bt,h:vt}}(I,q);this.cellLength={h:new F.ComputedLength(0,1/Ie.h),w:new F.ComputedLength(1/Ie.w,0)};var _e=function(at,ut){var it,vt=ht(at,E.ns_ttp,"frameRate"),Bt=30;null!==vt&&(null!==(it=/(\d+)/.exec(vt))?Bt=parseInt(it[1]):je(ut,"Malformed frame rate attribute (using initial value instead)"));var un=ht(at,E.ns_ttp,"frameRateMultiplier"),Zt=1;null!==un&&(null!==(it=/(\d+) (\d+)/.exec(un))?Zt=parseInt(it[1])/parseInt(it[2]):je(ut,"Malformed frame rate multiplier attribute (using initial value instead)"));var kn=Zt*Bt,vn=1,xn=ht(at,E.ns_ttp,"tickRate");return null===xn?null!==vt&&(vn=kn):null!==(it=/(\d+)/.exec(xn))?vn=parseInt(it[1]):je(ut,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:kn,tickRate:vn}}(I,q);this.effectiveFrameRate=_e.effectiveFrameRate,this.tickRate=_e.tickRate,this.aspectRatio=function(at,ut){var it=ht(at,E.ns_ittp,"aspectRatio");null===it&&(it=ht(at,E.ns_ttp,"displayAspectRatio"));var vt=null;if(null!==it){var Bt=/(\d+)\s+(\d+)/.exec(it);if(null!==Bt){var un=parseInt(Bt[1]),Zt=parseInt(Bt[2]);0!==un&&0!==Zt?vt=un/Zt:ze(ut,"Illegal aspectRatio values (ignoring)")}else ze(ut,"Malformed aspectRatio attribute (ignoring)")}return vt}(I,q);var rt=ht(I,E.ns_ttp,"timeBase");null!==rt&&"media"!==rt&&bt(q,"Unsupported time base");var xt=function(at,ut){var it=ht(at,E.ns_tts,"extent");if(null===it)return null;var vt=it.split(" ");if(2!==vt.length)return je(ut,"Malformed extent (ignoring)"),null;var Bt=F.parseLength(vt[0]),un=F.parseLength(vt[1]);return un&&Bt?{h:un,w:Bt}:(je(ut,"Malformed extent values (ignoring)"),null)}(I,q);null===xt?this.pxLength={h:null,w:null}:("px"===xt.h.unit&&"px"===xt.w.unit||bt(q,"Extent on TT must be in px or absent"),this.pxLength={h:new F.ComputedLength(0,1/xt.h.value),w:new F.ComputedLength(1/xt.w.value,0)}),this.dimensions={h:new F.ComputedLength(0,1),w:new F.ComputedLength(1,0)},this.lang=Z},B.prototype._registerEvent=function(I){if(!(I.end<=I.begin)){var Z=N(this.events,I.begin);if(Z.found||this.events.splice(Z.index,0,I.begin),I.end!==Number.POSITIVE_INFINITY){var q=N(this.events,I.end);q.found||this.events.splice(q.index,0,I.end)}}},B.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},B.prototype.getMediaTimeEvents=function(){return this.events},L.prototype.initFromNode=function(I,Z){this.id=Nt(I),this.styleAttrs=$e(I,Z),this.styleRefs=Ht(I)},K.prototype.initFromNode=function(I,Z){for(var q in this.styleAttrs={},I.attributes)I.attributes[q].uri!==E.ns_itts&&I.attributes[q].uri!==E.ns_ebutts&&I.attributes[q].uri!==E.ns_tts||(this.styleAttrs[I.attributes[q].uri+" "+I.attributes[q].local]=I.attributes[q].value)},pe.prototype.initFromNode=function(I,Z,q,Ie,_e){this.src="src"in q.attributes?q.attributes.src.value:null,this.src||ze(_e,"Invalid image@src attribute"),this.type="type"in q.attributes?q.attributes.type.value:null,this.type||ze(_e,"Invalid image@type attribute"),Se.prototype.initFromNode.call(this,I,Z,q,_e),Ee.prototype.initFromNode.call(this,I,Z,q,_e),Le.prototype.initFromNode.call(this,I,Z,q,_e),Q.prototype.initFromNode.call(this,I,Z,q,_e),this.lang=Ie},Me.prototype.initFromNode=function(I,Z,q,Ie){this.id=Nt(q)},Q.prototype.initFromNode=function(I,Z,q,Ie){var _e;this.regionID=(_e=q)&&"region"in _e.attributes?_e.attributes.region.value:""},Se.prototype.initFromNode=function(I,Z,q,Ie){this.styleAttrs=$e(q,Ie),null!==I.head&&null!==I.head.styling&&mt(I.head.styling,Ht(q),this.styleAttrs,Ie)},Le.prototype.initFromNode=function(I,Z,q,Ie){this.sets=[]},x.prototype.initFromNode=function(I,Z,q,Ie){this.contents=[]},Ee.prototype.initFromNode=function(I,Z,q,Ie){var rt,at,_e=function(rt,xt,at,ut){var it=null;at&&"begin"in at.attributes&&null===(it=hn(rt.tickRate,rt.effectiveFrameRate,at.attributes.begin.value))&&je(ut,"Malformed begin value "+at.attributes.begin.value+" (using 0)");var vt=null;at&&"dur"in at.attributes&&null===(vt=hn(rt.tickRate,rt.effectiveFrameRate,at.attributes.dur.value))&&je(ut,"Malformed dur value "+at.attributes.dur.value+" (ignoring)");var Bt=null;return at&&"end"in at.attributes&&null===(Bt=hn(rt.tickRate,rt.effectiveFrameRate,at.attributes.end.value))&&je(ut,"Malformed end value (ignoring)"),{explicit_begin:it,explicit_end:Bt,explicit_dur:vt}}(I,0,q,Ie);this.explicit_begin=_e.explicit_begin,this.explicit_end=_e.explicit_end,this.explicit_dur=_e.explicit_dur,this.timeContainer=(at=(rt=q)&&"timeContainer"in rt.attributes?rt.attributes.timeContainer.value:null)&&"par"!==at?"seq"===at?"seq":(ze(Ie,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"},ge.prototype.initFromNode=function(I,Z,q,Ie){Se.prototype.initFromNode.call(this,I,null,Z,Ie),Ee.prototype.initFromNode.call(this,I,null,Z,Ie),Le.prototype.initFromNode.call(this,I,null,Z,Ie),Q.prototype.initFromNode.call(this,I,null,Z,Ie),x.prototype.initFromNode.call(this,I,null,Z,Ie),this.lang=q},et.prototype.initFromNode=function(I,Z,q,Ie,_e){Se.prototype.initFromNode.call(this,I,Z,q,_e),Ee.prototype.initFromNode.call(this,I,Z,q,_e),Le.prototype.initFromNode.call(this,I,Z,q,_e),Q.prototype.initFromNode.call(this,I,Z,q,_e),x.prototype.initFromNode.call(this,I,Z,q,_e),this.lang=Ie},De.prototype.initFromNode=function(I,Z,q,Ie,_e){Se.prototype.initFromNode.call(this,I,Z,q,_e),Ee.prototype.initFromNode.call(this,I,Z,q,_e),Le.prototype.initFromNode.call(this,I,Z,q,_e),Q.prototype.initFromNode.call(this,I,Z,q,_e),x.prototype.initFromNode.call(this,I,Z,q,_e),this.lang=Ie},ot.prototype.initFromNode=function(I,Z,q,Ie,_e,rt){Se.prototype.initFromNode.call(this,I,Z,q,rt),Ee.prototype.initFromNode.call(this,I,Z,q,rt),Le.prototype.initFromNode.call(this,I,Z,q,rt),Q.prototype.initFromNode.call(this,I,Z,q,rt),x.prototype.initFromNode.call(this,I,Z,q,rt),this.space=_e,this.lang=Ie},gt.prototype.initFromText=function(I,Z,q,Ie,_e,rt){Ee.prototype.initFromNode.call(this,I,Z,null,rt),this.text=q,this.space=_e,this.lang=Ie},St.prototype.initFromNode=function(I,Z,q,Ie,_e){Q.prototype.initFromNode.call(this,I,Z,q,_e),Ee.prototype.initFromNode.call(this,I,Z,q,_e),this.lang=Ie},Je.prototype.createDefaultRegion=function(I){var Z=new Je;return Me.call(Z,""),Se.call(Z,{}),Le.call(Z,[]),Ee.call(Z,0,Number.POSITIVE_INFINITY,null),this.lang=I,Z},Je.prototype.initFromNode=function(I,Z,q,Ie){Me.prototype.initFromNode.call(this,I,null,Z,Ie),Ee.prototype.initFromNode.call(this,I,null,Z,Ie),Le.prototype.initFromNode.call(this,I,null,Z,Ie),this.styleAttrs=$e(Z,Ie),this.styleRefs=Ht(Z),this.lang=q},Pe.prototype.initFromNode=function(I,Z,q,Ie){Ee.prototype.initFromNode.call(this,I,Z,q,Ie);var _e=$e(q,Ie);for(var rt in this.qname=null,this.value=null,_e)if(_e.hasOwnProperty(rt)){if(this.qname){ze(Ie,"More than one style specified on set");break}this.qname=rt,this.value=_e[rt]}}}(Qe,typeof sax>"u"?ne(5378):sax,typeof imscNames>"u"?ne(210):imscNames,typeof imscStyles>"u"?ne(6811):imscStyles,typeof imscUtils>"u"?ne(5926):imscUtils)},506:function(Vt,Qe,ne){var Ce=/firefox/i.test(navigator.userAgent);!function(G,E,_){function F(x,Ee,ge,et){var De;if("region"===ge.kind)(De=document.createElement("div")).style.position="absolute";else if("body"===ge.kind)De=document.createElement("div");else if("div"===ge.kind)De=document.createElement("div");else if("image"===ge.kind){if(De=document.createElement("img"),null!==x.imgResolver&&null!==ge.src){var ot=x.imgResolver(ge.src,De);ot&&(De.src=ot),De.height=x.regionH,De.width=x.regionW}}else if("p"===ge.kind)De=document.createElement("p");else if("span"===ge.kind)if("container"===ge.styleAttrs[_.byName.ruby.qname])De=document.createElement("ruby"),x.ruby=!0;else if("base"===ge.styleAttrs[_.byName.ruby.qname])De=document.createElement("span");else if("text"===ge.styleAttrs[_.byName.ruby.qname])De=document.createElement("rt");else if("baseContainer"===ge.styleAttrs[_.byName.ruby.qname])De=document.createElement("rbc");else if("textContainer"===ge.styleAttrs[_.byName.ruby.qname])De=document.createElement("rtc");else{if("delimiter"===ge.styleAttrs[_.byName.ruby.qname])return;De=document.createElement("span")}else"br"===ge.kind&&(De=document.createElement("br"));if(De){if(ge.lang&&("region"!==ge.kind&&ge.lang===et.lang||(De.lang=ge.lang)),Ee.appendChild(De),De.style.margin="0","region"===ge.kind){var gt=ge.styleAttrs[_.byName.writingMode.qname];"lrtb"===gt||"lr"===gt?(x.ipd="lr",x.bpd="tb"):"rltb"===gt||"rl"===gt?(x.ipd="rl",x.bpd="tb"):"tblr"===gt?(x.ipd="tb",x.bpd="lr"):"tbrl"!==gt&&"tb"!==gt||(x.ipd="tb",x.bpd="rl")}else"p"===ge.kind&&"tb"===x.bpd&&(x.ipd="ltr"===ge.styleAttrs[_.byName.direction.qname]?"lr":"rl");for(var Je=0;Je<K.length;Je++){var Pe=K[Je],Nt=ge.styleAttrs[Pe.qname];void 0!==Nt&&null!==Pe.map&&Pe.map(x,De,ge,Nt)}var Ht=De,$e=ge.styleAttrs[_.byName.linePadding.qname];if($e&&!$e.isZero()){var ht=$e.toUsedLength(x.w,x.h);if(ht>0){var hn=Math.ceil(ht)+"px";"tb"===x.bpd?(Ht.style.paddingLeft=hn,Ht.style.paddingRight=hn):(Ht.style.paddingTop=hn,Ht.style.paddingBottom=hn),x.lp=$e}}var zt=ge.styleAttrs[_.byName.multiRowAlign.qname];if(zt&&"auto"!==zt){var mt=document.createElement("span");mt.style.display="inline-block",mt.style.textAlign=zt,De.appendChild(mt),Ht=mt,x.mra=zt}var It=ge.styleAttrs[_.byName.rubyReserve.qname];if(It&&"none"!==It[0]&&(x.rubyReserve=It),ge.styleAttrs[_.byName.fillLineGap.qname]&&(x.flg=!0),"span"===ge.kind&&ge.text){var je=ge.styleAttrs[_.byName.textEmphasis.qname];if(je&&"none"!==je.style&&(x.textEmphasis=!0),_.byName.textCombine.qname in ge.styleAttrs&&"all"===ge.styleAttrs[_.byName.textCombine.qname])De.textContent=ge.text,De._isd_element=ge,je&&M(x,De,0,je);else for(var ze="",bt=0;bt<ge.text.length;bt++){ze+=ge.text.charAt(bt);var N=ge.text.charCodeAt(bt);if(N<55296||N>56319||bt===ge.text.length-1){var I=document.createElement("span");I.textContent=ze,je&&M(x,I,0,je),De.appendChild(I),ze="",I._isd_element=ge}}}if("contents"in ge)for(var Z=0;Z<ge.contents.length;Z++)F(x,Ht,ge.contents[Z],ge);var q=[];if("p"===ge.kind&&(T(x,Ht,q,null),x.rubyReserve&&(function(at,ut){for(var it=0;it<at.length;it++){var vt,Bt,un=document.createElement("ruby"),Zt=document.createElement("span");Zt.textContent="\u200b",un.appendChild(Zt);var vn=ut.rubyReserve[1].toUsedLength(ut.w,ut.h)+"px";"both"===ut.rubyReserve[0]||"outside"===ut.rubyReserve[0]&&1==at.length?((vt=document.createElement("rtc")).style[Me]=ue?"after":"under",vt.textContent="\u200b",vt.style.fontSize=vn,(Bt=document.createElement("rtc")).style[Me]=ue?"before":"over",Bt.textContent="\u200b",Bt.style.fontSize=vn,un.appendChild(vt),un.appendChild(Bt)):((vt=document.createElement("rtc")).textContent="\u200b",vt.style.fontSize=vn,vt.style[Me]="after"===ut.rubyReserve[0]||"outside"===ut.rubyReserve[0]&&it>0?ue?"after":"tb"===ut.bpd||"rl"===ut.bpd?"under":"over":ue?"before":"tb"===ut.bpd||"rl"===ut.bpd?"over":"under",un.appendChild(vt));for(var xn=null,Tn=0;Tn<at[it].rbc.length;Tn++)if("ruby"===at[it].rbc[Tn].localName){xn=at[it].rbc[Tn];for(var sr=0;sr<xn.style.length;sr++)un.style.setProperty(xn.style.item(sr),xn.style.getPropertyValue(xn.style.item(sr)));break}(xn=xn||at[it].elements[0].node).parentElement.insertBefore(un,xn)}}(q,x),x.rubyReserve=null),(x.ruby||x.rubyReserve)&&(function(at,ut){for(var it=0;it<at.length;it++)for(var vt=0;vt<at[it].rbc.length;vt++)at[it].rbc[vt].style[Me]||(at[it].rbc[vt].style[Me]=ue?0===it?"before":"after":"tb"===ut.bpd||"rl"===ut.bpd?0===it?"over":"under":0===it?"under":"over")}(q,x),x.ruby=null),x.textEmphasis&&(function(at,ut){for(var it=0;it<at.length;it++)for(var vt=0;vt<at[it].te.length;vt++)at[it].te[vt].style[Se]&&"none"!==at[it].te[vt].style[Se]||(at[it].te[vt].style[Se]="tb"===ut.bpd?0===it?"left over":"left under":"rl"===ut.bpd?0===it?"right under":"left under":0===it?"left under":"right under")}(q,x),x.textEmphasis=null),x.mra&&(function(at){for(var ut=0;ut<at.length-1;ut++){var it=at[ut].elements.length;if(0!==it&&!1===at[ut].br){var vt=document.createElement("br"),Bt=at[ut].elements[it-1].node;Bt.parentElement.insertBefore(vt,Bt.nextSibling)}}}(q),x.mra=null),x.lp&&(function(at,ut,it){if(null!==at)for(var vt=0;vt<at.length;vt++){var Bt=at[vt].elements.length,un=Math.ceil(ut)+"px",Zt="-"+Math.ceil(ut)+"px";if(0!==Bt){var kn=at[vt].elements[at[vt].start_elem],vn=at[vt].elements[at[vt].end_elem];if(kn===vn){var xn=kn.node.getBoundingClientRect();if(0==xn.width||0==xn.height)continue}"lr"===it.ipd?(kn.node.style.marginLeft=Zt,kn.node.style.paddingLeft=un):"rl"===it.ipd?(kn.node.style.paddingRight=un,kn.node.style.marginRight=Zt):"tb"===it.ipd&&(kn.node.style.paddingTop=un,kn.node.style.marginTop=Zt),"lr"===it.ipd?(Ce||(vn.node.style.marginRight=Zt),vn.node.style.paddingRight=un):"rl"===it.ipd?(vn.node.style.paddingLeft=un,Ce||(vn.node.style.marginLeft=Zt)):"tb"===it.ipd&&(vn.node.style.paddingBottom=un,vn.node.style.marginBottom=Zt)}}}(q,x.lp.toUsedLength(x.w,x.h),x),x.lp=null),function(at,ut){for(var it=0;it<at.length;it++)for(var vt=at[it],Bt=1;Bt<vt.elements.length;)D(vt.elements[Bt-1].node,vt.elements[Bt].node,ut)?vt.elements.splice(Bt,1):Bt++;for(var kn,vn,xn=[],Tn=0;Tn<at.length;Tn++)for(var sr=0;sr<at[Tn].elements.length;sr++)(vn=V(kn=at[Tn].elements[sr].node,xn,!1))&&(kn.style.backgroundColor=vn);for(var Or=0;Or<xn.length;Or++)xn[Or].style.backgroundColor=""}(q,x),x.flg)){var Ie=B(Ht.getBoundingClientRect(),x);(function(at,ut,it,vt,Bt){for(var un=Math.sign(it-ut),Zt=0;Zt<=at.length;Zt++){var kn,vn,xn,Tn;if(kn=0===Zt?Math.round(ut):Zt===at.length?Math.round(it):Math.round((at[Zt-1].after+at[Zt].before)/2),Zt>0&&at[Zt-1])for(xn=0;xn<at[Zt-1].elements.length;xn++)vn=un*(kn-(Tn=at[Zt-1].elements[xn]).after)+"px","lr"===vt.bpd?Tn.node.style.paddingRight=vn:"rl"===vt.bpd?Tn.node.style.paddingLeft=vn:"tb"===vt.bpd&&(Tn.node.style.paddingBottom=vn);if(Zt<at.length)for(xn=0;xn<at[Zt].elements.length;xn++)vn=un*((Tn=at[Zt].elements[xn]).before-kn)+"px","lr"===vt.bpd?Tn.node.style.paddingLeft=vn:"rl"===vt.bpd?Tn.node.style.paddingRight=vn:"tb"===vt.bpd&&(Tn.node.style.paddingTop=vn)}})(q,Ie.before,Ie.after,x),x.flg=null}if("region"===ge.kind&&"tb"===x.bpd&&x.enableRollUp&&ge.contents.length>0&&"after"===ge.styleAttrs[_.byName.displayAlign.qname]){T(x,Ht,q,null);var _e=new j(""===ge.id?"_":ge.id,q);if(x.currentISDState[_e.id]=_e,x.previousISDState&&_e.id in x.previousISDState&&x.previousISDState[_e.id].plist.length>0&&_e.plist.length>1&&_e.plist[_e.plist.length-2].text===x.previousISDState[_e.id].plist[x.previousISDState[_e.id].plist.length-1].text){var rt=De.firstElementChild,xt=_e.plist[_e.plist.length-1].after-_e.plist[_e.plist.length-1].before;rt.style.bottom="-"+xt+"px",rt.style.transition="transform 0.4s",rt.style.position="relative",rt.style.transform="translateY(-"+xt+"px)"}}}else Le(x.errorHandler,"Error processing ISD element kind: "+ge.kind)}function V(x,Ee,ge){return x.style.backgroundColor?(ge&&!Ee.includes(x)&&Ee.push(x),x.style.backgroundColor):"SPAN"===x.parentElement.nodeName||"RUBY"===x.parentElement.nodeName||"RBC"===x.parentElement.nodeName||"RTC"===x.parentElement.nodeName||"RT"===x.parentElement.nodeName?V(x.parentElement,Ee,!0):void 0}function D(x,Ee,ge){if("SPAN"===x.tagName&&"SPAN"===Ee.tagName&&x._isd_element===Ee._isd_element){if(!x._isd_element)return Le(ge.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;x.textContent+=Ee.textContent;for(var et=0;et<Ee.style.length;et++){var De=Ee.style[et];(De.indexOf("border")>=0||De.indexOf("padding")>=0||De.indexOf("margin")>=0)&&(x.style[De]=Ee.style[De])}return Ee.parentElement.removeChild(Ee),!0}return!1}function j(x,Ee){this.id=x,this.plist=Ee}function B(x,Ee){var ge={before:null,after:null,start:null,end:null};return"tb"===Ee.bpd?(ge.before=x.top,ge.after=x.bottom,"lr"===Ee.ipd?(ge.start=x.left,ge.end=x.right):(ge.start=x.right,ge.end=x.left)):"lr"===Ee.bpd?(ge.before=x.left,ge.after=x.right,ge.start=x.top,ge.end=x.bottom):"rl"===Ee.bpd&&(ge.before=x.right,ge.after=x.left,ge.start=x.top,ge.end=x.bottom),ge}function T(x,Ee,ge,et){if("rt"!==Ee.localName&&"rtc"!==Ee.localName){var De,ot,gt,St,Je=Ee.style.backgroundColor||et;if(0===Ee.childElementCount)if("span"===Ee.localName||"rb"===Ee.localName){var Pe=B(Ee.getBoundingClientRect(),x);if(0!==ge.length&&(De=Pe.before,gt=ge[ge.length-1].before,(ot=Pe.after)<(St=ge[ge.length-1].after)&&De>gt||St<=ot&&gt>=De)){var Nt=Math.sign(Pe.after-Pe.before),Ht=Math.sign(Pe.end-Pe.start);Nt*(Pe.before-ge[ge.length-1].before)<0&&(ge[ge.length-1].before=Pe.before),Nt*(Pe.after-ge[ge.length-1].after)>0&&(ge[ge.length-1].after=Pe.after),Ht*(Pe.start-ge[ge.length-1].start)<0&&(ge[ge.length-1].start=Pe.start,ge[ge.length-1].start_elem=ge[ge.length-1].elements.length),Ht*(Pe.end-ge[ge.length-1].end)>0&&(ge[ge.length-1].end=Pe.end,ge[ge.length-1].end_elem=ge[ge.length-1].elements.length)}else ge.push({before:Pe.before,after:Pe.after,start:Pe.start,end:Pe.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});ge[ge.length-1].text+=Ee.textContent,ge[ge.length-1].elements.push({node:Ee,bgcolor:Je,before:Pe.before,after:Pe.after})}else"br"===Ee.localName&&0!==ge.length&&(ge[ge.length-1].br=!0);else for(var $e=Ee.firstChild;$e;)$e.nodeType===Node.ELEMENT_NODE&&(T(x,$e,ge,Je),"ruby"===$e.localName||"rtc"===$e.localName?ge.length>0&&ge[ge.length-1].rbc.push($e):"span"===$e.localName&&$e.style[Q]&&"none"!==$e.style[Q]&&ge.length>0&&ge[ge.length-1].te.push($e)),$e=$e.nextSibling}}function M(x,Ee,ge,et){"none"!==et.style&&(Ee.style[Q]="auto"===et.style?"filled":et.style+" "+et.symbol,("before"===et.position||"after"===et.position)&&(Ee.style[Se]="tb"===x.bpd?"before"===et.position?"left over":"left under":"rl"===x.bpd?"before"===et.position?"right under":"left under":"before"===et.position?"left under":"right under"))}function L(x,Ee){this.qname=x,this.map=Ee}G.render=function(x,Ee,ge,et,De,ot,gt,St,Je){var Pe=et||Ee.clientHeight,Nt=De||Ee.clientWidth;if(null!==x.aspectRatio){var Ht=Pe*x.aspectRatio;Ht>Nt?Pe=Math.round(Nt/x.aspectRatio):Nt=Ht}var $e=document.createElement("div");$e.style.position="relative",$e.style.width=Nt+"px",$e.style.height=Pe+"px",$e.style.margin="auto",$e.style.top=0,$e.style.bottom=0,$e.style.left=0,$e.style.right=0,$e.style.zIndex=0;var ht={h:Pe,w:Nt,regionH:null,regionW:null,imgResolver:ge,displayForcedOnlyMode:ot||!1,isd:x,errorHandler:gt,previousISDState:St,enableRollUp:Je||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(Ee.appendChild($e),"contents"in x)for(var hn=0;hn<x.contents.length;hn++)F(ht,$e,x.contents[hn],x);return ht.currentISDState};for(var K=[new L("http://www.w3.org/ns/ttml#styling backgroundColor",function(x,Ee,ge,et){0!==et[3]&&(Ee.style.backgroundColor="rgba("+et[0].toString()+","+et[1].toString()+","+et[2].toString()+","+(et[3]/255).toString()+")")}),new L("http://www.w3.org/ns/ttml#styling color",function(x,Ee,ge,et){Ee.style.color="rgba("+et[0].toString()+","+et[1].toString()+","+et[2].toString()+","+(et[3]/255).toString()+")"}),new L("http://www.w3.org/ns/ttml#styling direction",function(x,Ee,ge,et){Ee.style.direction=et}),new L("http://www.w3.org/ns/ttml#styling display",function(x,Ee,ge,et){}),new L("http://www.w3.org/ns/ttml#styling displayAlign",function(x,Ee,ge,et){Ee.style.display="flex",Ee.style.flexDirection="column","before"===et?Ee.style.justifyContent="flex-start":"center"===et?Ee.style.justifyContent="center":"after"===et&&(Ee.style.justifyContent="flex-end")}),new L("http://www.w3.org/ns/ttml#styling extent",function(x,Ee,ge,et){x.regionH=et.h.toUsedLength(x.w,x.h),x.regionW=et.w.toUsedLength(x.w,x.h);var De=0,ot=0,gt=ge.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];gt&&(De=gt[0].toUsedLength(x.w,x.h)+gt[2].toUsedLength(x.w,x.h),ot=gt[1].toUsedLength(x.w,x.h)+gt[3].toUsedLength(x.w,x.h)),Ee.style.height=x.regionH-De+"px",Ee.style.width=x.regionW-ot+"px"}),new L("http://www.w3.org/ns/ttml#styling fontFamily",function(x,Ee,ge,et){for(var De=[],ot=0;ot<et.length;ot++)et[ot]=et[ot].trim(),"monospaceSerif"===et[ot]?(De.push("Courier New"),De.push('"Liberation Mono"'),De.push("Courier"),De.push("monospace")):"proportionalSansSerif"===et[ot]?(De.push("Arial"),De.push("Helvetica"),De.push('"Liberation Sans"'),De.push("sans-serif")):"monospace"===et[ot]?De.push("monospace"):"sansSerif"===et[ot]?De.push("sans-serif"):"serif"===et[ot]?De.push("serif"):"monospaceSansSerif"===et[ot]?(De.push("Consolas"),De.push("monospace")):De.push("proportionalSerif"===et[ot]?"serif":et[ot]);if(De.length>0){for(var gt=[De[0]],St=1;St<De.length;St++)-1==gt.indexOf(De[St])&&gt.push(De[St]);De=gt}Ee.style.fontFamily=De.join(",")}),new L("http://www.w3.org/ns/ttml#styling shear",function(x,Ee,ge,et){if(0!==et){var De=-.9*et;Ee.style.transform="tb"===x.bpd?"skewX("+De+"deg)":"skewY("+De+"deg)"}}),new L("http://www.w3.org/ns/ttml#styling fontSize",function(x,Ee,ge,et){Ee.style.fontSize=et.toUsedLength(x.w,x.h)+"px"}),new L("http://www.w3.org/ns/ttml#styling fontStyle",function(x,Ee,ge,et){Ee.style.fontStyle=et}),new L("http://www.w3.org/ns/ttml#styling fontWeight",function(x,Ee,ge,et){Ee.style.fontWeight=et}),new L("http://www.w3.org/ns/ttml#styling lineHeight",function(x,Ee,ge,et){Ee.style.lineHeight="normal"===et?"normal":et.toUsedLength(x.w,x.h)+"px"}),new L("http://www.w3.org/ns/ttml#styling opacity",function(x,Ee,ge,et){Ee.style.opacity=et}),new L("http://www.w3.org/ns/ttml#styling origin",function(x,Ee,ge,et){Ee.style.top=et.h.toUsedLength(x.w,x.h)+"px",Ee.style.left=et.w.toUsedLength(x.w,x.h)+"px"}),new L("http://www.w3.org/ns/ttml#styling overflow",function(x,Ee,ge,et){Ee.style.overflow=et}),new L("http://www.w3.org/ns/ttml#styling padding",function(x,Ee,ge,et){var De=[];De[0]=et[0].toUsedLength(x.w,x.h)+"px",De[1]=et[3].toUsedLength(x.w,x.h)+"px",De[2]=et[2].toUsedLength(x.w,x.h)+"px",De[3]=et[1].toUsedLength(x.w,x.h)+"px",Ee.style.padding=De.join(" ")}),new L("http://www.w3.org/ns/ttml#styling position",function(x,Ee,ge,et){Ee.style.top=et.h.toUsedLength(x.w,x.h)+"px",Ee.style.left=et.w.toUsedLength(x.w,x.h)+"px"}),new L("http://www.w3.org/ns/ttml#styling rubyAlign",function(x,Ee,ge,et){Ee.style.rubyAlign="spaceAround"===et?"space-around":"center"}),new L("http://www.w3.org/ns/ttml#styling rubyPosition",function(x,Ee,ge,et){"before"!==et&&"after"!==et||(Ee.parentElement.style[Me]=ue?et:"tb"===x.bpd||"rl"===x.bpd?"before"===et?"over":"under":"before"===et?"under":"over")}),new L("http://www.w3.org/ns/ttml#styling showBackground",null),new L("http://www.w3.org/ns/ttml#styling textAlign",function(x,Ee,ge,et){Ee.style.textAlign="start"===et?"rl"===x.ipd?"right":"left":"end"===et?"rl"===x.ipd?"left":"right":et}),new L("http://www.w3.org/ns/ttml#styling textDecoration",function(x,Ee,ge,et){Ee.style.textDecoration=et.join(" ").replace("lineThrough","line-through")}),new L("http://www.w3.org/ns/ttml#styling textOutline",function(x,Ee,ge,et){}),new L("http://www.w3.org/ns/ttml#styling textShadow",function(x,Ee,ge,et){var De=ge.styleAttrs[_.byName.textOutline.qname];if("none"===et&&"none"===De)Ee.style.textShadow="";else{var ot=[];if("none"!==De){var gt="rgba("+De.color[0].toString()+","+De.color[1].toString()+","+De.color[2].toString()+","+(De.color[3]/255).toString()+")";ot.push("1px 1px 1px "+gt),ot.push("-1px 1px 1px "+gt),ot.push("1px -1px 1px "+gt),ot.push("-1px -1px 1px "+gt)}if("none"!==et)for(var St=0;St<et.length;St++)ot.push(et[St].x_off.toUsedLength(x.w,x.h)+"px "+et[St].y_off.toUsedLength(x.w,x.h)+"px "+et[St].b_radius.toUsedLength(x.w,x.h)+"px rgba("+et[St].color[0].toString()+","+et[St].color[1].toString()+","+et[St].color[2].toString()+","+(et[St].color[3]/255).toString()+")");Ee.style.textShadow=ot.join(",")}}),new L("http://www.w3.org/ns/ttml#styling textCombine",function(x,Ee,ge,et){Ee.style.textCombineUpright=et}),new L("http://www.w3.org/ns/ttml#styling textEmphasis",function(x,Ee,ge,et){}),new L("http://www.w3.org/ns/ttml#styling unicodeBidi",function(x,Ee,ge,et){Ee.style.unicodeBidi="bidiOverride"===et?"bidi-override":et}),new L("http://www.w3.org/ns/ttml#styling visibility",function(x,Ee,ge,et){Ee.style.visibility=et}),new L("http://www.w3.org/ns/ttml#styling wrapOption",function(x,Ee,ge,et){Ee.style.whiteSpace="wrap"===et?"preserve"===ge.space?"pre-wrap":"normal":"preserve"===ge.space?"pre":"noWrap"}),new L("http://www.w3.org/ns/ttml#styling writingMode",function(x,Ee,ge,et){"lrtb"===et||"lr"===et||"rltb"===et||"rl"===et?Ee.style.writingMode="horizontal-tb":"tblr"===et?Ee.style.writingMode="vertical-lr":"tbrl"!==et&&"tb"!==et||(Ee.style.writingMode="vertical-rl")}),new L("http://www.w3.org/ns/ttml#styling zIndex",function(x,Ee,ge,et){Ee.style.zIndex=et}),new L("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(x,Ee,ge,et){x.displayForcedOnlyMode&&!1===et&&(Ee.style.visibility="hidden")})],ce={},pe=0;pe<K.length;pe++)ce[K[pe].qname]=K[pe];var ue="webkitRubyPosition"in window.getComputedStyle(document.documentElement),Me=ue?"webkitRubyPosition":"rubyPosition",Q="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",Se="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function Le(x,Ee){if(x&&x.error&&x.error(Ee))throw Ee}}(Qe,typeof imscNames>"u"?ne(210):imscNames,typeof imscStyles>"u"?ne(6811):imscStyles,typeof imscUtils>"u"?ne(5926):imscUtils)},4080:function(Vt,Qe,ne){!function(Ce,G,E,_){Ce.generateISD=function(L,K,ce){var pe,ue=new B(L),Me={},Q={},Se=L.head.styling.initials[E.byName.showBackground.qname],Le=L.head.styling.initials[E.byName.backgroundColor.qname];for(var x in L.head.layout.regions)if(L.head.layout.regions.hasOwnProperty(x)){var Ee=L.head.layout.regions[x],ge=Ee.styleAttrs[E.byName.showBackground.qname]||Se;Q[Ee.id]=("always"===ge||void 0===ge)&&void 0!==(Ee.styleAttrs[E.byName.backgroundColor.qname]||Le)&&!(K<Ee.begin||K>=Ee.end)}for(var De in L.body&&L.body.regionID&&(Q[L.body.regionID]=!0),pe=null!==L.body?function gt(St,Je){if(Je.contents){var Pe={};for(var Nt in Je)Je.hasOwnProperty(Nt)&&(Pe[Nt]=Je[Nt]);return Pe.contents=[],Je.contents.filter(function(Ht){return!(St<Ht.begin||St>=Ht.end)}).forEach(function(Ht){var $e=gt(St,Ht);$e.regionID&&(Q[$e.regionID]=!0),null!==$e&&Pe.contents.push($e)}),Pe}return Je}(K,L.body):null,void 0!==Q[""]&&(Q[""]=!0),Q)if(Q[De]){var ot=V(L,K,L.head.layout.regions[De],pe,null,"",L.head.layout.regions[De],ce,Me);null!==ot&&ue.contents.push(ot.element)}return ue};var F=[E.byName.color.qname,E.byName.textCombine.qname,E.byName.textDecoration.qname,E.byName.textEmphasis.qname,E.byName.textOutline.qname,E.byName.textShadow.qname];function V(L,K,ce,pe,ue,Me,Q,Se,Le){if(K<Q.begin||K>=Q.end)return null;var x="regionID"in Q&&""!==Q.regionID?Q.regionID:Me;if(null!==ue&&x!==ce.id&&(!("contents"in Q)||"contents"in Q&&0===Q.contents.length||""!==x))return null;var Ee=new T(Q);if("sets"in Q)for(var ge=0;ge<Q.sets.length;ge++)K<Q.sets[ge].begin||K>=Q.sets[ge].end||(Ee.styleAttrs[Q.sets[ge].qname]=Q.sets[ge].value);var et={};for(var De in Ee.styleAttrs)if(Ee.styleAttrs.hasOwnProperty(De)&&(et[De]=!0,"region"===Ee.kind&&De===E.byName.writingMode.qname&&!(E.byName.direction.qname in Ee.styleAttrs))){var ot=Ee.styleAttrs[De];"lrtb"===ot||"lr"===ot?Ee.styleAttrs[E.byName.direction.qname]="ltr":"rltb"!==ot&&"rl"!==ot||(Ee.styleAttrs[E.byName.direction.qname]="rtl")}if(null!==ue)for(var gt=0;gt<E.all.length;gt++){var St=E.all[gt];if(St.qname===E.byName.textDecoration.qname){var Je=ue.styleAttrs[St.qname],Pe=Ee.styleAttrs[St.qname],Nt=[];void 0===Pe?Nt=Je:-1===Pe.indexOf("none")?((-1===Pe.indexOf("noUnderline")&&-1!==Je.indexOf("underline")||-1!==Pe.indexOf("underline"))&&Nt.push("underline"),(-1===Pe.indexOf("noLineThrough")&&-1!==Je.indexOf("lineThrough")||-1!==Pe.indexOf("lineThrough"))&&Nt.push("lineThrough"),(-1===Pe.indexOf("noOverline")&&-1!==Je.indexOf("overline")||-1!==Pe.indexOf("overline"))&&Nt.push("overline")):Nt.push("none"),Ee.styleAttrs[St.qname]=Nt}else if(St.qname!==E.byName.fontSize.qname||St.qname in Ee.styleAttrs||"span"!==Ee.kind||"textContainer"!==Ee.styleAttrs[E.byName.ruby.qname])if(St.qname!==E.byName.fontSize.qname||St.qname in Ee.styleAttrs||"span"!==Ee.kind||"text"!==Ee.styleAttrs[E.byName.ruby.qname])St.inherit&&St.qname in ue.styleAttrs&&!(St.qname in Ee.styleAttrs)&&(Ee.styleAttrs[St.qname]=ue.styleAttrs[St.qname]);else{var Ht=ue.styleAttrs[E.byName.fontSize.qname];Ee.styleAttrs[St.qname]="textContainer"===ue.styleAttrs[E.byName.ruby.qname]?Ht:new _.ComputedLength(.5*Ht.rw,.5*Ht.rh)}else{var $e=ue.styleAttrs[E.byName.fontSize.qname];Ee.styleAttrs[St.qname]=new _.ComputedLength(.5*$e.rw,.5*$e.rh)}}for(var ht=0;ht<E.all.length;ht++){var hn=E.all[ht];if(!(hn.qname in Ee.styleAttrs)&&!(hn.qname===E.byName.position.qname&&E.byName.origin.qname in Ee.styleAttrs||hn.qname===E.byName.origin.qname&&E.byName.position.qname in Ee.styleAttrs)){var zt=L.head.styling.initials[hn.qname]||hn.initial;if(null!==zt&&("region"===Ee.kind||!1===hn.inherit&&null!==zt)){var mt=hn.parse(zt);null!==mt?(Ee.styleAttrs[hn.qname]=mt,et[hn.qname]=!0):M(Se,"Invalid initial value for '"+hn.qname+"' on element '"+Ee.kind)}}}for(var It=0;It<E.all.length;It++){var je=E.all[It];if(je.qname in et&&null!==je.compute){var ze=je.compute(L,ue,Ee,Ee.styleAttrs[je.qname],Le);null!==ze?Ee.styleAttrs[je.qname]=ze:(Ee.styleAttrs[je.qname]=je.compute(L,ue,Ee,je.parse(je.initial),Le),M(Se,"Style '"+je.qname+"' on element '"+Ee.kind+"' cannot be computed"))}}if("none"===Ee.styleAttrs[E.byName.display.qname])return null;var bt=null;null===ue?bt=null===pe?[]:[pe]:"contents"in Q&&(bt=Q.contents);for(var N=0;null!==bt&&N<bt.length;N++){var I=V(L,K,ce,pe,Ee,x,bt[N],Se,Le);null!==I&&Ee.contents.push(I.element)}for(var Z in Ee.styleAttrs)if(Ee.styleAttrs.hasOwnProperty(Z)){var q=!1;if("span"===Ee.kind){var Ie=Ee.styleAttrs[E.byName.ruby.qname];(q=("container"===Ie||"textContainer"===Ie||"baseContainer"===Ie)&&-1!==F.indexOf(Z))||(q="container"!==Ie&&Z===E.byName.rubyAlign.qname),q||(q=!("textContainer"===Ie||"text"===Ie)&&Z===E.byName.rubyPosition.qname)}if(!q){var _e=E.byQName[Z];"applies"in _e&&(q=-1===_e.applies.indexOf(Ee.kind))}q&&delete Ee.styleAttrs[Z]}var rt=Ee.styleAttrs[E.byName.ruby.qname];if("p"===Ee.kind||"span"===Ee.kind&&("textContainer"===rt||"text"===rt)){var xt=[];D(Ee,xt),function(at){for(var ut,it=0;it<at.length;)if("br"!==(ut=at[it]).kind&&"preserve"!==ut.space){var vt=ut.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(vt)&&(0===it||"br"===(Bt=at[it-1]).kind||/[\r\n\t ]$/.test(Bt.text))&&(vt=vt.substring(1)),ut.text=vt,0===vt.length?at.splice(it,1):it++}else it++;var Bt,un;for(it=0;it<at.length;it++)"br"!==(ut=at[it]).kind&&"preserve"!==ut.space?/[ ]$/.test(ut.text)&&(it===at.length-1||"br"===(un=at[it+1]).kind||"preserve"===un.space&&/^[\r\n]/.test(un.text))&&(ut.text=ut.text.slice(0,-1)):it++}(xt),j(Ee)}return"div"===Ee.kind&&E.byName.backgroundImage.qname in Ee.styleAttrs||"br"===Ee.kind||"image"===Ee.kind||"contents"in Ee&&Ee.contents.length>0||"span"===Ee.kind&&null!==Ee.text||"region"===Ee.kind&&"always"===Ee.styleAttrs[E.byName.showBackground.qname]?{region_id:x,element:Ee}:null}function D(L,K){if("contents"in L)for(var ce=0;ce<L.contents.length;ce++){var pe=L.contents[ce],ue=pe.styleAttrs[E.byName.ruby.qname];("span"!==pe.kind||"textContainer"!==ue&&"text"!==ue)&&("contents"in pe?D(pe,K):("span"===pe.kind&&0!==pe.text.length||"br"===pe.kind)&&K.push(pe))}}function j(L){if("br"===L.kind)return!1;if("text"in L)return 0===L.text.length;if("contents"in L){for(var K=L.contents.length;K--;)j(L.contents[K])&&L.contents.splice(K,1);return 0===L.contents.length}}function B(L){this.contents=[],this.aspectRatio=L.aspectRatio,this.lang=L.lang}function T(L){for(var K in this.kind=L.kind||"region",this.lang=L.lang,L.id&&(this.id=L.id),this.styleAttrs={},L.styleAttrs)L.styleAttrs.hasOwnProperty(K)&&(this.styleAttrs[K]=L.styleAttrs[K]);"src"in L&&(this.src=L.src),"type"in L&&(this.type=L.type),"text"in L?this.text=L.text:("region"===this.kind||"contents"in L)&&(this.contents=[]),"space"in L&&(this.space=L.space)}function M(L,K){if(L&&L.error&&L.error(K))throw K}}(Qe,typeof imscNames>"u"?ne(210):imscNames,typeof imscStyles>"u"?ne(6811):imscStyles,typeof imscUtils>"u"?ne(5926):imscUtils)},4403:function(Vt,Qe,ne){Qe.generateISD=ne(4080).generateISD,Qe.fromXML=ne(3362).fromXML,Qe.renderHTML=ne(506).render},210:function(Vt,Qe){var ne;(ne=Qe).ns_tt="http://www.w3.org/ns/ttml",ne.ns_tts="http://www.w3.org/ns/ttml#styling",ne.ns_ttp="http://www.w3.org/ns/ttml#parameter",ne.ns_xml="http://www.w3.org/XML/1998/namespace",ne.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",ne.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",ne.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",ne.ns_ebutts="urn:ebu:tt:style"},6811:function(Vt,Qe,ne){!function(Ce,G,E){function _(D,j,B,T,M,L,K,ce){this.name=j,this.ns=D,this.qname=D+" "+j,this.inherit=M,this.animatable=L,this.initial=B,this.applies=T,this.parse=K,this.compute=ce}for(var F in Ce.all=[new _(G.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,E.parseColor,null),new _(G.ns_tts,"color","white",["span"],!0,!0,E.parseColor,null),new _(G.ns_tts,"direction","ltr",["p","span"],!0,!0,function(D){return D},null),new _(G.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(D){return D},null),new _(G.ns_tts,"displayAlign","before",["region"],!1,!0,function(D){return D},null),new _(G.ns_tts,"extent","auto",["tt","region"],!1,!0,function(D){if("auto"===D)return D;var j=D.split(" ");if(2!==j.length)return null;var B=E.parseLength(j[0]),T=E.parseLength(j[1]);return T&&B?{h:T,w:B}:null},function(D,j,B,T,M){var L,K;if("auto"===T)L=new E.ComputedLength(0,1);else if(null===(L=E.toComputedLength(T.h.value,T.h.unit,null,D.dimensions.h,null,D.pxLength.h)))return null;if("auto"===T)K=new E.ComputedLength(1,0);else if(null===(K=E.toComputedLength(T.w.value,T.w.unit,null,D.dimensions.w,null,D.pxLength.w)))return null;return{h:L,w:K}}),new _(G.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(D){for(var j=D.split(","),B=[],T=0;T<j.length;T++)j[T]=j[T].trim(),"'"!==j[T].charAt(0)&&'"'!==j[T].charAt(0)&&"default"===j[T]?B.push("monospaceSerif"):B.push(j[T]);return B},null),new _(G.ns_tts,"shear","0%",["p"],!0,!0,E.parseLength,function(D,j,B,T){return"%"!==T.unit?null:Math.abs(T.value)>100?100*Math.sign(T.value):T.value}),new _(G.ns_tts,"fontSize","1c",["span","p"],!0,!0,E.parseLength,function(D,j,B,T,M){return E.toComputedLength(T.value,T.unit,null!==j?j.styleAttrs[Ce.byName.fontSize.qname]:D.cellLength.h,null!==j?j.styleAttrs[Ce.byName.fontSize.qname]:D.cellLength.h,D.cellLength.h,D.pxLength.h)}),new _(G.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(D){return D},null),new _(G.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(D){return D},null),new _(G.ns_tts,"lineHeight","normal",["p"],!0,!0,function(D){return"normal"===D?D:E.parseLength(D)},function(D,j,B,T,M){var L;if("normal"===T)L=T;else if(null===(L=E.toComputedLength(T.value,T.unit,B.styleAttrs[Ce.byName.fontSize.qname],B.styleAttrs[Ce.byName.fontSize.qname],D.cellLength.h,D.pxLength.h)))return null;return L}),new _(G.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new _(G.ns_tts,"origin","auto",["region"],!1,!0,function(D){if("auto"===D)return D;var j=D.split(" ");if(2!==j.length)return null;var B=E.parseLength(j[0]),T=E.parseLength(j[1]);return T&&B?{h:T,w:B}:null},function(D,j,B,T,M){var L,K;if("auto"===T)L=new E.ComputedLength(0,0);else if(null===(L=E.toComputedLength(T.h.value,T.h.unit,null,D.dimensions.h,null,D.pxLength.h)))return null;if("auto"===T)K=new E.ComputedLength(0,0);else if(null===(K=E.toComputedLength(T.w.value,T.w.unit,null,D.dimensions.w,null,D.pxLength.w)))return null;return{h:L,w:K}}),new _(G.ns_tts,"overflow","hidden",["region"],!1,!0,function(D){return D},null),new _(G.ns_tts,"padding","0px",["region"],!1,!0,function(D){var j=D.split(" ");if(j.length>4)return null;for(var B=[],T=0;T<j.length;T++){var M=E.parseLength(j[T]);if(!M)return null;B.push(M)}return B},function(D,j,B,T,M){var L;if(1===T.length)L=[T[0],T[0],T[0],T[0]];else if(2===T.length)L=[T[0],T[1],T[0],T[1]];else if(3===T.length)L=[T[0],T[1],T[2],T[1]];else{if(4!==T.length)return null;L=[T[0],T[1],T[2],T[3]]}var K=B.styleAttrs[Ce.byName.writingMode.qname];if("lrtb"===K||"lr"===K)L=[L[0],L[3],L[2],L[1]];else if("rltb"===K||"rl"===K)L=[L[0],L[1],L[2],L[3]];else if("tblr"===K)L=[L[3],L[0],L[1],L[2]];else{if("tbrl"!==K&&"tb"!==K)return null;L=[L[3],L[2],L[1],L[0]]}for(var ce=[],pe=0;pe<L.length;pe++)if(0===L[pe].value)ce[pe]=new E.ComputedLength(0,0);else if(ce[pe]=E.toComputedLength(L[pe].value,L[pe].unit,B.styleAttrs[Ce.byName.fontSize.qname],0===pe||2===pe?B.styleAttrs[Ce.byName.extent.qname].h:B.styleAttrs[Ce.byName.extent.qname].w,0===pe||2===pe?D.cellLength.h:D.cellLength.w,0===pe||2===pe?D.pxLength.h:D.pxLength.w),null===ce[pe])return null;return ce}),new _(G.ns_tts,"position","top left",["region"],!1,!0,function(D){return E.parsePosition(D)},function(D,j,B,T){var M,L;return null===(M=E.toComputedLength(T.v.offset.value,T.v.offset.unit,null,new E.ComputedLength(-B.styleAttrs[Ce.byName.extent.qname].h.rw,D.dimensions.h.rh-B.styleAttrs[Ce.byName.extent.qname].h.rh),null,D.pxLength.h))?null:("bottom"===T.v.edge&&(M=new E.ComputedLength(-M.rw-B.styleAttrs[Ce.byName.extent.qname].h.rw,D.dimensions.h.rh-M.rh-B.styleAttrs[Ce.byName.extent.qname].h.rh)),L=E.toComputedLength(T.h.offset.value,T.h.offset.unit,null,new E.ComputedLength(D.dimensions.w.rw-B.styleAttrs[Ce.byName.extent.qname].w.rw,-B.styleAttrs[Ce.byName.extent.qname].w.rh),null,D.pxLength.w),null===M?null:("right"===T.h.edge&&(L=new E.ComputedLength(D.dimensions.w.rw-L.rw-B.styleAttrs[Ce.byName.extent.qname].w.rw,-L.rh-B.styleAttrs[Ce.byName.extent.qname].w.rh)),{h:M,w:L}))}),new _(G.ns_tts,"ruby","none",["span"],!1,!0,function(D){return D},null),new _(G.ns_tts,"rubyAlign","center",["span"],!0,!0,function(D){return"center"!==D&&"spaceAround"!==D?null:D},null),new _(G.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(D){return D},null),new _(G.ns_tts,"rubyReserve","none",["p"],!0,!0,function(D){var j=D.split(" "),B=[null,null];if(0===j.length||j.length>2||"none"!==j[0]&&"both"!==j[0]&&"after"!==j[0]&&"before"!==j[0]&&"outside"!==j[0])return null;if(B[0]=j[0],2===j.length&&"none"!==j[0]){var T=E.parseLength(j[1]);if(!T)return null;B[1]=T}return B},function(D,j,B,T,M){return"none"===T[0]?T:null===(L=null===T[1]?new E.ComputedLength(.5*B.styleAttrs[Ce.byName.fontSize.qname].rw,.5*B.styleAttrs[Ce.byName.fontSize.qname].rh):E.toComputedLength(T[1].value,T[1].unit,B.styleAttrs[Ce.byName.fontSize.qname],B.styleAttrs[Ce.byName.fontSize.qname],D.cellLength.h,D.pxLength.h))?null:[T[0],L];var L}),new _(G.ns_tts,"showBackground","always",["region"],!1,!0,function(D){return D},null),new _(G.ns_tts,"textAlign","start",["p"],!0,!0,function(D){return D},function(D,j,B,T,M){return"left"===T?"start":"right"===T?"end":T}),new _(G.ns_tts,"textCombine","none",["span"],!0,!0,function(D){return"none"===D||"all"===D?D:null},null),new _(G.ns_tts,"textDecoration","none",["span"],!0,!0,function(D){return D.split(" ")},null),new _(G.ns_tts,"textEmphasis","none",["span"],!0,!0,function(D){for(var j=D.split(" "),B={style:null,symbol:null,color:null,position:null},T=0;T<j.length;T++)if("none"===j[T]||"auto"===j[T])B.style=j[T];else if("filled"===j[T]||"open"===j[T])B.style=j[T];else if("circle"===j[T]||"dot"===j[T]||"sesame"===j[T])B.symbol=j[T];else if("current"===j[T])B.color=j[T];else if("outside"===j[T]||"before"===j[T]||"after"===j[T])B.position=j[T];else if(B.color=E.parseColor(j[T]),null===B.color)return null;return null==B.style&&null==B.symbol?B.style="auto":(B.symbol=B.symbol||"circle",B.style=B.style||"filled"),B.position=B.position||"outside",B.color=B.color||"current",B},null),new _(G.ns_tts,"textOutline","none",["span"],!0,!0,function(D){if("none"===D)return D;var j={},B=D.split(" ");if(0===B.length||B.length>2)return null;var T=E.parseColor(B[0]);if(j.color=T,null!==T&&B.shift(),1!==B.length)return null;var M=E.parseLength(B[0]);return M?(j.thickness=M,j):null},function(D,j,B,T,M){if("none"===T)return T;var L={};return L.color=null===T.color?B.styleAttrs[Ce.byName.color.qname]:T.color,L.thickness=E.toComputedLength(T.thickness.value,T.thickness.unit,B.styleAttrs[Ce.byName.fontSize.qname],B.styleAttrs[Ce.byName.fontSize.qname],D.cellLength.h,D.pxLength.h),null===L.thickness?null:L}),new _(G.ns_tts,"textShadow","none",["span"],!0,!0,E.parseTextShadow,function(D,j,B,T){if("none"===T)return T;for(var M=[],L=0;L<T.length;L++){var K={};if(K.x_off=E.toComputedLength(T[L][0].value,T[L][0].unit,null,B.styleAttrs[Ce.byName.fontSize.qname],null,D.pxLength.w),null===K.x_off||(K.y_off=E.toComputedLength(T[L][1].value,T[L][1].unit,null,B.styleAttrs[Ce.byName.fontSize.qname],null,D.pxLength.h),null===K.y_off))return null;if(null===T[L][2])K.b_radius=0;else if(K.b_radius=E.toComputedLength(T[L][2].value,T[L][2].unit,null,B.styleAttrs[Ce.byName.fontSize.qname],null,D.pxLength.h),null===K.b_radius)return null;K.color=null===T[L][3]?B.styleAttrs[Ce.byName.color.qname]:T[L][3],M.push(K)}return M}),new _(G.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(D){return D},null),new _(G.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(D){return D},null),new _(G.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(D){return D},null),new _(G.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(D){return D},null),new _(G.ns_tts,"zIndex","auto",["region"],!1,!0,function(D){var j;return"auto"===D?j=D:(j=parseInt(D),isNaN(j)&&(j=null)),j},null),new _(G.ns_ebutts,"linePadding","0c",["p"],!0,!1,E.parseLength,function(D,j,B,T,M){return E.toComputedLength(T.value,T.unit,null,null,D.cellLength.w,null)}),new _(G.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(D){return D},null),new _(G.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(D){return D},null),new _(G.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(D){return"true"===D},null),new _(G.ns_itts,"fillLineGap","false",["p"],!0,!0,function(D){return"true"===D},null)],Ce.byQName={},Ce.all)Ce.byQName[Ce.all[F].qname]=Ce.all[F];for(var V in Ce.byName={},Ce.all)Ce.byName[Ce.all[V].name]=Ce.all[V]}(Qe,typeof imscNames>"u"?ne(210):imscNames,typeof imscUtils>"u"?ne(5926):imscUtils)},5926:function(Vt,Qe){!function(ne){var Ce=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,G=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,E=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,_={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};ne.parseColor=function(V){var D,j=null,B=_[V.toLowerCase()];return void 0!==B?j=B:null!==(D=Ce.exec(V))?j=[parseInt(D[1],16),parseInt(D[2],16),parseInt(D[3],16),void 0!==D[4]?parseInt(D[4],16):255]:null!==(D=G.exec(V))?j=[parseInt(D[1]),parseInt(D[2]),parseInt(D[3]),255]:null!==(D=E.exec(V))&&(j=[parseInt(D[1]),parseInt(D[2]),parseInt(D[3]),parseInt(D[4])]),j};var F=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;ne.parseLength=function(V){var D,j=null;return null!==(D=F.exec(V))&&(j={value:parseFloat(D[1]),unit:D[2]}),j},ne.parseTextShadow=function(V){for(var D=V.match(/([^\(,\)]|\([^\)]+\))+/g),j=[],B=0;B<D.length;B++){var T=D[B].split(" ");if(1===T.length&&"none"===T[0])return"none";if(T.length>1&&T.length<5){var M=[null,null,null,null],L=ne.parseLength(T.shift());if(null===L||(M[0]=L,null===(L=ne.parseLength(T.shift()))))return null;if(M[1]=L,0===T.length){j.push(M);continue}if(null!==(L=ne.parseLength(T[0]))&&(M[2]=L,T.shift()),0===T.length){j.push(M);continue}var K=ne.parseColor(T[0]);if(null===K)return null;M[3]=K,j.push(M)}}return j},ne.parsePosition=function(V){var D=V.split(" "),j=function(pe){return"center"===pe||"left"===pe||"top"===pe||"bottom"===pe||"right"===pe};if(D.length>4)return null;for(var B=0;B<D.length;B++)if(!j(D[B])){var T=ne.parseLength(D[B]);if(null===T)return null;D[B]=T}for(var M={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},L=0;L<D.length;){var K=D[L++];if(j(K)){var ce={value:0,unit:"%"};2!==D.length&&L<D.length&&!j(D[L])&&(ce=D[L++]),"right"===K?(M.h.edge=K,M.h.offset=ce):"bottom"===K?(M.v.edge=K,M.v.offset=ce):"left"===K?M.h.offset=ce:"top"===K&&(M.v.offset=ce)}else{if(1!==D.length&&2!==D.length)return null;1===L?M.h.offset=K:M.v.offset=K}}return M},ne.ComputedLength=function(V,D){this.rw=V,this.rh=D},ne.ComputedLength.prototype.toUsedLength=function(V,D){return V*this.rw+D*this.rh},ne.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh},ne.toComputedLength=function(V,D,j,B,T,M){return"%"===D&&B?new ne.ComputedLength(B.rw*V/100,B.rh*V/100):"em"===D&&j?new ne.ComputedLength(j.rw*V,j.rh*V):"c"===D&&T?new ne.ComputedLength(V*T.rw,V*T.rh):"px"===D&&M?new ne.ComputedLength(V*M.rw,V*M.rh):"rh"===D?new ne.ComputedLength(0,V/100):"rw"===D?new ne.ComputedLength(V/100,0):null}}(Qe)},3516:function(Vt){"use strict";Vt.exports=function(Qe){var ne="string"==typeof Qe?Qe.charCodeAt(0):Qe;return ne>=97&&ne<=122||ne>=65&&ne<=90}},2219:function(Vt,Qe,ne){"use strict";var Ce=ne(3516),G=ne(395);Vt.exports=function(E){return Ce(E)||G(E)}},395:function(Vt){"use strict";Vt.exports=function(Qe){var ne="string"==typeof Qe?Qe.charCodeAt(0):Qe;return ne>=48&&ne<=57}},3875:function(Vt){"use strict";function Qe(G){if("string"!=typeof G)throw new TypeError("Path must be a string. Received "+JSON.stringify(G))}function ne(G,E){for(var _,F="",V=0,D=-1,j=0,B=0;B<=G.length;++B){if(B<G.length)_=G.charCodeAt(B);else{if(47===_)break;_=47}if(47===_){if(D!==B-1&&1!==j)if(D!==B-1&&2===j){if(F.length<2||2!==V||46!==F.charCodeAt(F.length-1)||46!==F.charCodeAt(F.length-2))if(F.length>2){var T=F.lastIndexOf("/");if(T!==F.length-1){-1===T?(F="",V=0):V=(F=F.slice(0,T)).length-1-F.lastIndexOf("/"),D=B,j=0;continue}}else if(2===F.length||1===F.length){F="",V=0,D=B,j=0;continue}E&&(F.length>0?F+="/..":F="..",V=2)}else F.length>0?F+="/"+G.slice(D+1,B):F=G.slice(D+1,B),V=B-D-1;D=B,j=0}else 46===_&&-1!==j?++j:j=-1}return F}var Ce={resolve:function(){for(var G,E="",_=!1,F=arguments.length-1;F>=-1&&!_;F--){var V;F>=0?V=arguments[F]:(void 0===G&&(G=process.cwd()),V=G),Qe(V),0!==V.length&&(E=V+"/"+E,_=47===V.charCodeAt(0))}return E=ne(E,!_),_?E.length>0?"/"+E:"/":E.length>0?E:"."},normalize:function(G){if(Qe(G),0===G.length)return".";var E=47===G.charCodeAt(0),_=47===G.charCodeAt(G.length-1);return 0!==(G=ne(G,!E)).length||E||(G="."),G.length>0&&_&&(G+="/"),E?"/"+G:G},isAbsolute:function(G){return Qe(G),G.length>0&&47===G.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var G,E=0;E<arguments.length;++E){var _=arguments[E];Qe(_),_.length>0&&(void 0===G?G=_:G+="/"+_)}return void 0===G?".":Ce.normalize(G)},relative:function(G,E){if(Qe(G),Qe(E),G===E||(G=Ce.resolve(G))===(E=Ce.resolve(E)))return"";for(var _=1;_<G.length&&47===G.charCodeAt(_);++_);for(var F=G.length,V=F-_,D=1;D<E.length&&47===E.charCodeAt(D);++D);for(var j=E.length-D,B=V<j?V:j,T=-1,M=0;M<=B;++M){if(M===B){if(j>B){if(47===E.charCodeAt(D+M))return E.slice(D+M+1);if(0===M)return E.slice(D+M)}else V>B&&(47===G.charCodeAt(_+M)?T=M:0===M&&(T=0));break}var L=G.charCodeAt(_+M);if(L!==E.charCodeAt(D+M))break;47===L&&(T=M)}var K="";for(M=_+T+1;M<=F;++M)M!==F&&47!==G.charCodeAt(M)||(K+=0===K.length?"..":"/..");return K.length>0?K+E.slice(D+T):(47===E.charCodeAt(D+=T)&&++D,E.slice(D))},_makeLong:function(G){return G},dirname:function(G){if(Qe(G),0===G.length)return".";for(var E=G.charCodeAt(0),_=47===E,F=-1,V=!0,D=G.length-1;D>=1;--D)if(47===(E=G.charCodeAt(D))){if(!V){F=D;break}}else V=!1;return-1===F?_?"/":".":_&&1===F?"//":G.slice(0,F)},basename:function(G,E){if(void 0!==E&&"string"!=typeof E)throw new TypeError('"ext" argument must be a string');Qe(G);var _,F=0,V=-1,D=!0;if(void 0!==E&&E.length>0&&E.length<=G.length){if(E.length===G.length&&E===G)return"";var j=E.length-1,B=-1;for(_=G.length-1;_>=0;--_){var T=G.charCodeAt(_);if(47===T){if(!D){F=_+1;break}}else-1===B&&(D=!1,B=_+1),j>=0&&(T===E.charCodeAt(j)?-1==--j&&(V=_):(j=-1,V=B))}return F===V?V=B:-1===V&&(V=G.length),G.slice(F,V)}for(_=G.length-1;_>=0;--_)if(47===G.charCodeAt(_)){if(!D){F=_+1;break}}else-1===V&&(D=!1,V=_+1);return-1===V?"":G.slice(F,V)},extname:function(G){Qe(G);for(var E=-1,_=0,F=-1,V=!0,D=0,j=G.length-1;j>=0;--j){var B=G.charCodeAt(j);if(47!==B)-1===F&&(V=!1,F=j+1),46===B?-1===E?E=j:1!==D&&(D=1):-1!==E&&(D=-1);else if(!V){_=j+1;break}}return-1===E||-1===F||0===D||1===D&&E===F-1&&E===_+1?"":G.slice(E,F)},format:function(G){if(null===G||"object"!=typeof G)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof G);return V=(_=G).base||(_.name||"")+(_.ext||""),(F=_.dir||_.root)?F===_.root?F+V:F+"/"+V:V;var _,F,V},parse:function(G){Qe(G);var E={root:"",dir:"",base:"",ext:"",name:""};if(0===G.length)return E;var _,F=G.charCodeAt(0),V=47===F;V?(E.root="/",_=1):_=0;for(var D=-1,j=0,B=-1,T=!0,M=G.length-1,L=0;M>=_;--M)if(47!==(F=G.charCodeAt(M)))-1===B&&(T=!1,B=M+1),46===F?-1===D?D=M:1!==L&&(L=1):-1!==D&&(L=-1);else if(!T){j=M+1;break}return-1===D||-1===B||0===L||1===L&&D===B-1&&D===j+1?-1!==B&&(E.base=E.name=G.slice(0===j&&V?1:j,B)):(0===j&&V?(E.name=G.slice(1,D),E.base=G.slice(1,B)):(E.name=G.slice(j,D),E.base=G.slice(j,B)),E.ext=G.slice(D,B)),j>0?E.dir=G.slice(0,j-1):V&&(E.dir="/"),E},sep:"/",delimiter:":",win32:null,posix:null};Ce.posix=Ce,Vt.exports=Ce},8387:function(Vt,Qe,ne){var Ce=ne(1549),G=Ce.Buffer;function E(F,V){for(var D in F)V[D]=F[D]}function _(F,V,D){return G(F,V,D)}G.from&&G.alloc&&G.allocUnsafe&&G.allocUnsafeSlow?Vt.exports=Ce:(E(Ce,Qe),Qe.Buffer=_),E(G,_),_.from=function(F,V,D){if("number"==typeof F)throw new TypeError("Argument must not be a number");return G(F,V,D)},_.alloc=function(F,V,D){if("number"!=typeof F)throw new TypeError("Argument must be a number");var j=G(F);return void 0!==V?"string"==typeof D?j.fill(V,D):j.fill(V):j.fill(0),j},_.allocUnsafe=function(F){if("number"!=typeof F)throw new TypeError("Argument must be a number");return G(F)},_.allocUnsafeSlow=function(F){if("number"!=typeof F)throw new TypeError("Argument must be a number");return Ce.SlowBuffer(F)}},5378:function(Vt,Qe,ne){!function(Ce){Ce.parser=function(N,I){return new _(N,I)},Ce.SAXParser=_,Ce.SAXStream=V,Ce.createStream=function(N,I){return new V(N,I)},Ce.MAX_BUFFER_LENGTH=65536;var G,E=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function _(N,I){if(!(this instanceof _))return new _(N,I);var Z=this;(function(q){for(var Ie=0,_e=E.length;Ie<_e;Ie++)q[E[Ie]]=""})(Z),Z.q=Z.c="",Z.bufferCheckPosition=Ce.MAX_BUFFER_LENGTH,Z.opt=I||{},Z.opt.lowercase=Z.opt.lowercase||Z.opt.lowercasetags,Z.looseCase=Z.opt.lowercase?"toLowerCase":"toUpperCase",Z.tags=[],Z.closed=Z.closedRoot=Z.sawRoot=!1,Z.tag=Z.error=null,Z.strict=!!N,Z.noscript=!(!N&&!Z.opt.noscript),Z.state=De.BEGIN,Z.strictEntities=Z.opt.strictEntities,Z.ENTITIES=Object.create(Z.strictEntities?Ce.XML_ENTITIES:Ce.ENTITIES),Z.attribList=[],Z.opt.xmlns&&(Z.ns=Object.create(ce)),Z.trackPosition=!1!==Z.opt.position,Z.trackPosition&&(Z.position=Z.line=Z.column=0),gt(Z,"onready")}Ce.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(N){function I(){}return I.prototype=N,new I}),Object.keys||(Object.keys=function(N){var I=[];for(var Z in N)N.hasOwnProperty(Z)&&I.push(Z);return I}),_.prototype={end:function(){Ht(this)},write:function(N){var I=this;if(this.error)throw this.error;if(I.closed)return Nt(I,"Cannot write after close. Assign an onready handler.");if(null===N)return Ht(I);"object"==typeof N&&(N=N.toString());for(var Z=0,q="";q=bt(N,Z++),I.c=q,q;)switch(I.trackPosition&&(I.position++,"\n"===q?(I.line++,I.column=0):I.column++),I.state){case De.BEGIN:if(I.state=De.BEGIN_WHITESPACE,"\ufeff"===q)continue;ze(I,q);continue;case De.BEGIN_WHITESPACE:ze(I,q);continue;case De.TEXT:if(I.sawRoot&&!I.closedRoot){for(var Ie=Z-1;q&&"<"!==q&&"&"!==q;)(q=bt(N,Z++))&&I.trackPosition&&(I.position++,"\n"===q?(I.line++,I.column=0):I.column++);I.textNode+=N.substring(Ie,Z-1)}"<"!==q||I.sawRoot&&I.closedRoot&&!I.strict?(!x(D,q)||I.sawRoot&&!I.closedRoot||$e(I,"Text data outside of root node."),"&"===q?I.state=De.TEXT_ENTITY:I.textNode+=q):(I.state=De.OPEN_WAKA,I.startTagPosition=I.position);continue;case De.SCRIPT:"<"===q?I.state=De.SCRIPT_ENDING:I.script+=q;continue;case De.SCRIPT_ENDING:"/"===q?I.state=De.CLOSE_TAG:(I.script+="<"+q,I.state=De.SCRIPT);continue;case De.OPEN_WAKA:"!"===q?(I.state=De.SGML_DECL,I.sgmlDecl=""):Le(D,q)||(Le(pe,q)?(I.state=De.OPEN_TAG,I.tagName=q):"/"===q?(I.state=De.CLOSE_TAG,I.tagName=""):"?"===q?(I.state=De.PROC_INST,I.procInstName=I.procInstBody=""):($e(I,"Unencoded <"),I.startTagPosition+1<I.position&&(q=new Array(I.position-I.startTagPosition).join(" ")+q),I.textNode+="<"+q,I.state=De.TEXT));continue;case De.SGML_DECL:"[CDATA["===(I.sgmlDecl+q).toUpperCase()?(St(I,"onopencdata"),I.state=De.CDATA,I.sgmlDecl="",I.cdata=""):I.sgmlDecl+q==="--"?(I.state=De.COMMENT,I.comment="",I.sgmlDecl=""):"DOCTYPE"===(I.sgmlDecl+q).toUpperCase()?(I.state=De.DOCTYPE,(I.doctype||I.sawRoot)&&$e(I,"Inappropriately located doctype declaration"),I.doctype="",I.sgmlDecl=""):">"===q?(St(I,"onsgmldeclaration",I.sgmlDecl),I.sgmlDecl="",I.state=De.TEXT):(Le(T,q)&&(I.state=De.SGML_DECL_QUOTED),I.sgmlDecl+=q);continue;case De.SGML_DECL_QUOTED:q===I.q&&(I.state=De.SGML_DECL,I.q=""),I.sgmlDecl+=q;continue;case De.DOCTYPE:">"===q?(I.state=De.TEXT,St(I,"ondoctype",I.doctype),I.doctype=!0):(I.doctype+=q,"["===q?I.state=De.DOCTYPE_DTD:Le(T,q)&&(I.state=De.DOCTYPE_QUOTED,I.q=q));continue;case De.DOCTYPE_QUOTED:I.doctype+=q,q===I.q&&(I.q="",I.state=De.DOCTYPE);continue;case De.DOCTYPE_DTD:I.doctype+=q,"]"===q?I.state=De.DOCTYPE:Le(T,q)&&(I.state=De.DOCTYPE_DTD_QUOTED,I.q=q);continue;case De.DOCTYPE_DTD_QUOTED:I.doctype+=q,q===I.q&&(I.state=De.DOCTYPE_DTD,I.q="");continue;case De.COMMENT:"-"===q?I.state=De.COMMENT_ENDING:I.comment+=q;continue;case De.COMMENT_ENDING:"-"===q?(I.state=De.COMMENT_ENDED,I.comment=Pe(I.opt,I.comment),I.comment&&St(I,"oncomment",I.comment),I.comment=""):(I.comment+="-"+q,I.state=De.COMMENT);continue;case De.COMMENT_ENDED:">"!==q?($e(I,"Malformed comment"),I.comment+="--"+q,I.state=De.COMMENT):I.state=De.TEXT;continue;case De.CDATA:"]"===q?I.state=De.CDATA_ENDING:I.cdata+=q;continue;case De.CDATA_ENDING:"]"===q?I.state=De.CDATA_ENDING_2:(I.cdata+="]"+q,I.state=De.CDATA);continue;case De.CDATA_ENDING_2:">"===q?(I.cdata&&St(I,"oncdata",I.cdata),St(I,"onclosecdata"),I.cdata="",I.state=De.TEXT):"]"===q?I.cdata+="]":(I.cdata+="]]"+q,I.state=De.CDATA);continue;case De.PROC_INST:"?"===q?I.state=De.PROC_INST_ENDING:Le(D,q)?I.state=De.PROC_INST_BODY:I.procInstName+=q;continue;case De.PROC_INST_BODY:if(!I.procInstBody&&Le(D,q))continue;"?"===q?I.state=De.PROC_INST_ENDING:I.procInstBody+=q;continue;case De.PROC_INST_ENDING:">"===q?(St(I,"onprocessinginstruction",{name:I.procInstName,body:I.procInstBody}),I.procInstName=I.procInstBody="",I.state=De.TEXT):(I.procInstBody+="?"+q,I.state=De.PROC_INST_BODY);continue;case De.OPEN_TAG:Le(ue,q)?I.tagName+=q:(ht(I),">"===q?mt(I):"/"===q?I.state=De.OPEN_TAG_SLASH:(x(D,q)&&$e(I,"Invalid character in tag name"),I.state=De.ATTRIB));continue;case De.OPEN_TAG_SLASH:">"===q?(mt(I,!0),It(I)):($e(I,"Forward-slash in opening tag not followed by >"),I.state=De.ATTRIB);continue;case De.ATTRIB:if(Le(D,q))continue;">"===q?mt(I):"/"===q?I.state=De.OPEN_TAG_SLASH:Le(pe,q)?(I.attribName=q,I.attribValue="",I.state=De.ATTRIB_NAME):$e(I,"Invalid attribute name");continue;case De.ATTRIB_NAME:"="===q?I.state=De.ATTRIB_VALUE:">"===q?($e(I,"Attribute without value"),I.attribValue=I.attribName,zt(I),mt(I)):Le(D,q)?I.state=De.ATTRIB_NAME_SAW_WHITE:Le(ue,q)?I.attribName+=q:$e(I,"Invalid attribute name");continue;case De.ATTRIB_NAME_SAW_WHITE:if("="===q)I.state=De.ATTRIB_VALUE;else{if(Le(D,q))continue;$e(I,"Attribute without value"),I.tag.attributes[I.attribName]="",I.attribValue="",St(I,"onattribute",{name:I.attribName,value:""}),I.attribName="",">"===q?mt(I):Le(pe,q)?(I.attribName=q,I.state=De.ATTRIB_NAME):($e(I,"Invalid attribute name"),I.state=De.ATTRIB)}continue;case De.ATTRIB_VALUE:if(Le(D,q))continue;Le(T,q)?(I.q=q,I.state=De.ATTRIB_VALUE_QUOTED):($e(I,"Unquoted attribute value"),I.state=De.ATTRIB_VALUE_UNQUOTED,I.attribValue=q);continue;case De.ATTRIB_VALUE_QUOTED:if(q!==I.q){"&"===q?I.state=De.ATTRIB_VALUE_ENTITY_Q:I.attribValue+=q;continue}zt(I),I.q="",I.state=De.ATTRIB_VALUE_CLOSED;continue;case De.ATTRIB_VALUE_CLOSED:Le(D,q)?I.state=De.ATTRIB:">"===q?mt(I):"/"===q?I.state=De.OPEN_TAG_SLASH:Le(pe,q)?($e(I,"No whitespace between attributes"),I.attribName=q,I.attribValue="",I.state=De.ATTRIB_NAME):$e(I,"Invalid attribute name");continue;case De.ATTRIB_VALUE_UNQUOTED:if(x(M,q)){"&"===q?I.state=De.ATTRIB_VALUE_ENTITY_U:I.attribValue+=q;continue}zt(I),">"===q?mt(I):I.state=De.ATTRIB;continue;case De.CLOSE_TAG:if(I.tagName)">"===q?It(I):Le(ue,q)?I.tagName+=q:I.script?(I.script+="</"+I.tagName,I.tagName="",I.state=De.SCRIPT):(x(D,q)&&$e(I,"Invalid tagname in closing tag"),I.state=De.CLOSE_TAG_SAW_WHITE);else{if(Le(D,q))continue;x(pe,q)?I.script?(I.script+="</"+q,I.state=De.SCRIPT):$e(I,"Invalid tagname in closing tag."):I.tagName=q}continue;case De.CLOSE_TAG_SAW_WHITE:if(Le(D,q))continue;">"===q?It(I):$e(I,"Invalid characters in closing tag");continue;case De.TEXT_ENTITY:case De.ATTRIB_VALUE_ENTITY_Q:case De.ATTRIB_VALUE_ENTITY_U:var rt,xt;switch(I.state){case De.TEXT_ENTITY:rt=De.TEXT,xt="textNode";break;case De.ATTRIB_VALUE_ENTITY_Q:rt=De.ATTRIB_VALUE_QUOTED,xt="attribValue";break;case De.ATTRIB_VALUE_ENTITY_U:rt=De.ATTRIB_VALUE_UNQUOTED,xt="attribValue"}";"===q?(I[xt]+=je(I),I.entity="",I.state=rt):Le(I.entity.length?Q:Me,q)?I.entity+=q:($e(I,"Invalid character in entity name"),I[xt]+="&"+I.entity+q,I.entity="",I.state=rt);continue;default:throw new Error(I,"Unknown state: "+I.state)}return I.position>=I.bufferCheckPosition&&function(at){for(var ut=Math.max(Ce.MAX_BUFFER_LENGTH,10),it=0,vt=0,Bt=E.length;vt<Bt;vt++){var un=at[E[vt]].length;if(un>ut)switch(E[vt]){case"textNode":Je(at);break;case"cdata":St(at,"oncdata",at.cdata),at.cdata="";break;case"script":St(at,"onscript",at.script),at.script="";break;default:Nt(at,"Max buffer length exceeded: "+E[vt])}it=Math.max(it,un)}at.bufferCheckPosition=Ce.MAX_BUFFER_LENGTH-it+at.position}(I),I},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var N;Je(N=this),""!==N.cdata&&(St(N,"oncdata",N.cdata),N.cdata=""),""!==N.script&&(St(N,"onscript",N.script),N.script="")}};try{G=ne(182).Stream}catch{G=function(){}}var F=Ce.EVENTS.filter(function(N){return"error"!==N&&"end"!==N});function V(N,I){if(!(this instanceof V))return new V(N,I);G.apply(this),this._parser=new _(N,I),this.writable=!0,this.readable=!0;var Z=this;this._parser.onend=function(){Z.emit("end")},this._parser.onerror=function(q){Z.emit("error",q),Z._parser.error=null},this._decoder=null,F.forEach(function(q){Object.defineProperty(Z,"on"+q,{get:function(){return Z._parser["on"+q]},set:function(Ie){if(!Ie)return Z.removeAllListeners(q),Z._parser["on"+q]=Ie,Ie;Z.on(q,Ie)},enumerable:!0,configurable:!1})})}(V.prototype=Object.create(G.prototype,{constructor:{value:V}})).write=function(N){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(N)){if(!this._decoder){var I=ne(7503).s;this._decoder=new I("utf8")}N=this._decoder.write(N)}return this._parser.write(N.toString()),this.emit("data",N),!0},V.prototype.end=function(N){return N&&N.length&&this.write(N),this._parser.end(),!0},V.prototype.on=function(N,I){var Z=this;return Z._parser["on"+N]||-1===F.indexOf(N)||(Z._parser["on"+N]=function(){var q=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);q.splice(0,0,N),Z.emit.apply(Z,q)}),G.prototype.on.call(Z,N,I)};var D="\r\n\t ",j="0124356789",B="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",T="'\"",M=D+">",L="http://www.w3.org/XML/1998/namespace",K="http://www.w3.org/2000/xmlns/",ce={xml:L,xmlns:K};D=Se(D),j=Se(j),B=Se(B);var pe=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ue=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,Me=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Q=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function Se(N){return N.split("").reduce(function(I,Z){return I[Z]=!0,I},{})}function Le(N,I){return"[object RegExp]"===Object.prototype.toString.call(N)?!!I.match(N):N[I]}function x(N,I){return!Le(N,I)}T=Se(T),M=Se(M);var Ee,ge,et,De=0;for(var ot in Ce.STATE={BEGIN:De++,BEGIN_WHITESPACE:De++,TEXT:De++,TEXT_ENTITY:De++,OPEN_WAKA:De++,SGML_DECL:De++,SGML_DECL_QUOTED:De++,DOCTYPE:De++,DOCTYPE_QUOTED:De++,DOCTYPE_DTD:De++,DOCTYPE_DTD_QUOTED:De++,COMMENT_STARTING:De++,COMMENT:De++,COMMENT_ENDING:De++,COMMENT_ENDED:De++,CDATA:De++,CDATA_ENDING:De++,CDATA_ENDING_2:De++,PROC_INST:De++,PROC_INST_BODY:De++,PROC_INST_ENDING:De++,OPEN_TAG:De++,OPEN_TAG_SLASH:De++,ATTRIB:De++,ATTRIB_NAME:De++,ATTRIB_NAME_SAW_WHITE:De++,ATTRIB_VALUE:De++,ATTRIB_VALUE_QUOTED:De++,ATTRIB_VALUE_CLOSED:De++,ATTRIB_VALUE_UNQUOTED:De++,ATTRIB_VALUE_ENTITY_Q:De++,ATTRIB_VALUE_ENTITY_U:De++,CLOSE_TAG:De++,CLOSE_TAG_SAW_WHITE:De++,SCRIPT:De++,SCRIPT_ENDING:De++},Ce.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},Ce.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(Ce.ENTITIES).forEach(function(N){var I=Ce.ENTITIES[N],Z="number"==typeof I?String.fromCharCode(I):I;Ce.ENTITIES[N]=Z}),Ce.STATE)Ce.STATE[Ce.STATE[ot]]=ot;function gt(N,I,Z){N[I]&&N[I](Z)}function St(N,I,Z){N.textNode&&Je(N),gt(N,I,Z)}function Je(N){N.textNode=Pe(N.opt,N.textNode),N.textNode&&gt(N,"ontext",N.textNode),N.textNode=""}function Pe(N,I){return N.trim&&(I=I.trim()),N.normalize&&(I=I.replace(/\s+/g," ")),I}function Nt(N,I){return Je(N),N.trackPosition&&(I+="\nLine: "+N.line+"\nColumn: "+N.column+"\nChar: "+N.c),I=new Error(I),N.error=I,gt(N,"onerror",I),N}function Ht(N){return N.sawRoot&&!N.closedRoot&&$e(N,"Unclosed root tag"),N.state!==De.BEGIN&&N.state!==De.BEGIN_WHITESPACE&&N.state!==De.TEXT&&Nt(N,"Unexpected end"),Je(N),N.c="",N.closed=!0,gt(N,"onend"),_.call(N,N.strict,N.opt),N}function $e(N,I){if("object"!=typeof N||!(N instanceof _))throw new Error("bad call to strictFail");N.strict&&Nt(N,I)}function ht(N){N.strict||(N.tagName=N.tagName[N.looseCase]());var I=N.tags[N.tags.length-1]||N,Z=N.tag={name:N.tagName,attributes:{}};N.opt.xmlns&&(Z.ns=I.ns),N.attribList.length=0,St(N,"onopentagstart",Z)}function hn(N,I){var Z=N.indexOf(":")<0?["",N]:N.split(":"),q=Z[0],Ie=Z[1];return I&&"xmlns"===N&&(q="xmlns",Ie=""),{prefix:q,local:Ie}}function zt(N){if(N.strict||(N.attribName=N.attribName[N.looseCase]()),-1!==N.attribList.indexOf(N.attribName)||N.tag.attributes.hasOwnProperty(N.attribName))N.attribName=N.attribValue="";else{if(N.opt.xmlns){var I=hn(N.attribName,!0),q=I.local;if("xmlns"===I.prefix)if("xml"===q&&N.attribValue!==L)$e(N,"xml: prefix must be bound to "+L+"\nActual: "+N.attribValue);else if("xmlns"===q&&N.attribValue!==K)$e(N,"xmlns: prefix must be bound to "+K+"\nActual: "+N.attribValue);else{var Ie=N.tag,_e=N.tags[N.tags.length-1]||N;Ie.ns===_e.ns&&(Ie.ns=Object.create(_e.ns)),Ie.ns[q]=N.attribValue}N.attribList.push([N.attribName,N.attribValue])}else N.tag.attributes[N.attribName]=N.attribValue,St(N,"onattribute",{name:N.attribName,value:N.attribValue});N.attribName=N.attribValue=""}}function mt(N,I){if(N.opt.xmlns){var Z=N.tag,q=hn(N.tagName);Z.prefix=q.prefix,Z.local=q.local,Z.uri=Z.ns[q.prefix]||"",Z.prefix&&!Z.uri&&($e(N,"Unbound namespace prefix: "+JSON.stringify(N.tagName)),Z.uri=q.prefix),Z.ns&&(N.tags[N.tags.length-1]||N).ns!==Z.ns&&Object.keys(Z.ns).forEach(function(kn){St(N,"onopennamespace",{prefix:kn,uri:Z.ns[kn]})});for(var _e=0,rt=N.attribList.length;_e<rt;_e++){var xt=N.attribList[_e],at=xt[0],ut=xt[1],it=hn(at,!0),vt=it.prefix,un=""===vt?"":Z.ns[vt]||"",Zt={name:at,value:ut,prefix:vt,local:it.local,uri:un};vt&&"xmlns"!==vt&&!un&&($e(N,"Unbound namespace prefix: "+JSON.stringify(vt)),Zt.uri=vt),N.tag.attributes[at]=Zt,St(N,"onattribute",Zt)}N.attribList.length=0}N.tag.isSelfClosing=!!I,N.sawRoot=!0,N.tags.push(N.tag),St(N,"onopentag",N.tag),I||(N.state=N.noscript||"script"!==N.tagName.toLowerCase()?De.TEXT:De.SCRIPT,N.tag=null,N.tagName=""),N.attribName=N.attribValue="",N.attribList.length=0}function It(N){if(!N.tagName)return $e(N,"Weird empty close tag."),N.textNode+="</>",void(N.state=De.TEXT);if(N.script){if("script"!==N.tagName)return N.script+="</"+N.tagName+">",N.tagName="",void(N.state=De.SCRIPT);St(N,"onscript",N.script),N.script=""}var I=N.tags.length,Z=N.tagName;N.strict||(Z=Z[N.looseCase]());for(var q=Z;I--&&N.tags[I].name!==q;)$e(N,"Unexpected close tag");if(I<0)return $e(N,"Unmatched closing tag: "+N.tagName),N.textNode+="</"+N.tagName+">",void(N.state=De.TEXT);N.tagName=Z;for(var Ie=N.tags.length;Ie-- >I;){var _e=N.tag=N.tags.pop();N.tagName=N.tag.name,St(N,"onclosetag",N.tagName);var rt={};for(var xt in _e.ns)rt[xt]=_e.ns[xt];N.opt.xmlns&&_e.ns!==(N.tags[N.tags.length-1]||N).ns&&Object.keys(_e.ns).forEach(function(ut){St(N,"onclosenamespace",{prefix:ut,uri:_e.ns[ut]})})}0===I&&(N.closedRoot=!0),N.tagName=N.attribValue=N.attribName="",N.attribList.length=0,N.state=De.TEXT}function je(N){var I,Z=N.entity,q=Z.toLowerCase(),Ie="";return N.ENTITIES[Z]?N.ENTITIES[Z]:N.ENTITIES[q]?N.ENTITIES[q]:("#"===(Z=q).charAt(0)&&("x"===Z.charAt(1)?(Z=Z.slice(2),Ie=(I=parseInt(Z,16)).toString(16)):(Z=Z.slice(1),Ie=(I=parseInt(Z,10)).toString(10))),Z=Z.replace(/^0+/,""),Ie.toLowerCase()!==Z?($e(N,"Invalid character entity"),"&"+N.entity+";"):String.fromCodePoint(I))}function ze(N,I){"<"===I?(N.state=De.OPEN_WAKA,N.startTagPosition=N.position):x(D,I)&&($e(N,"Non-whitespace before first tag."),N.textNode=I,N.state=De.TEXT)}function bt(N,I){var Z="";return I<N.length&&(Z=N.charAt(I)),Z}De=Ce.STATE,String.fromCodePoint||(Ee=String.fromCharCode,ge=Math.floor,et=function(){var N,q=[],Ie=-1,_e=arguments.length;if(!_e)return"";for(var rt="";++Ie<_e;){var xt=Number(arguments[Ie]);if(!isFinite(xt)||xt<0||xt>1114111||ge(xt)!==xt)throw RangeError("Invalid code point: "+xt);xt<=65535?q.push(xt):(N=55296+((xt-=65536)>>10),q.push(N,xt%1024+56320)),(Ie+1===_e||q.length>16384)&&(rt+=Ee.apply(null,q),q.length=0)}return rt},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:et,configurable:!0,writable:!0}):String.fromCodePoint=et)}(Qe)},182:function(Vt,Qe,ne){Vt.exports=G;var Ce=ne(1159).EventEmitter;function G(){Ce.call(this)}ne(1765)(G,Ce),G.Readable=ne(2846),G.Writable=ne(8318),G.Duplex=ne(6138),G.Transform=ne(9798),G.PassThrough=ne(5472),G.finished=ne(8800),G.pipeline=ne(7295),G.Stream=G,G.prototype.pipe=function(E,_){var F=this;function V(K){E.writable&&!1===E.write(K)&&F.pause&&F.pause()}function D(){F.readable&&F.resume&&F.resume()}F.on("data",V),E.on("drain",D),E._isStdio||_&&!1===_.end||(F.on("end",B),F.on("close",T));var j=!1;function B(){j||(j=!0,E.end())}function T(){j||(j=!0,"function"==typeof E.destroy&&E.destroy())}function M(K){if(L(),0===Ce.listenerCount(this,"error"))throw K}function L(){F.removeListener("data",V),E.removeListener("drain",D),F.removeListener("end",B),F.removeListener("close",T),F.removeListener("error",M),E.removeListener("error",M),F.removeListener("end",L),F.removeListener("close",L),E.removeListener("close",L)}return F.on("error",M),E.on("error",M),F.on("end",L),F.on("close",L),E.on("close",L),E.emit("pipe",F),E}},1765:function(Vt){Vt.exports="function"==typeof Object.create?function(Qe,ne){ne&&(Qe.super_=ne,Qe.prototype=Object.create(ne.prototype,{constructor:{value:Qe,enumerable:!1,writable:!0,configurable:!0}}))}:function(Qe,ne){if(ne){Qe.super_=ne;var Ce=function(){};Ce.prototype=ne.prototype,Qe.prototype=new Ce,Qe.prototype.constructor=Qe}}},3690:function(Vt){"use strict";var Qe={};function ne(G,E,_){_||(_=Error);var F=function(V){var D,j;function B(T,M,L){return V.call(this,"string"==typeof E?E:E(T,M,L))||this}return j=V,(D=B).prototype=Object.create(j.prototype),D.prototype.constructor=D,D.__proto__=j,B}(_);F.prototype.name=_.name,F.prototype.code=G,Qe[G]=F}function Ce(G,E){if(Array.isArray(G)){var _=G.length;return G=G.map(function(F){return String(F)}),_>2?"one of ".concat(E," ").concat(G.slice(0,_-1).join(", "),", or ")+G[_-1]:2===_?"one of ".concat(E," ").concat(G[0]," or ").concat(G[1]):"of ".concat(E," ").concat(G[0])}return"of ".concat(E," ").concat(String(G))}ne("ERR_INVALID_OPT_VALUE",function(G,E){return'The value "'+E+'" is invalid for option "'+G+'"'},TypeError),ne("ERR_INVALID_ARG_TYPE",function(G,E,_){var F,D,j,B,M,K;if("string"==typeof E&&"not "===E.substr(0,"not ".length)?(F="must not be",E=E.replace(/^not /,"")):F="must be",M=G,(void 0===K||K>M.length)&&(K=M.length)," argument"===M.substring(K-" argument".length,K))D="The ".concat(G," ").concat(F," ").concat(Ce(E,"type"));else{var T=("number"!=typeof B&&(B=0),B+1>(j=G).length||-1===j.indexOf(".",B)?"argument":"property");D='The "'.concat(G,'" ').concat(T," ").concat(F," ").concat(Ce(E,"type"))}return D+". Received type ".concat(typeof _)},TypeError),ne("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),ne("ERR_METHOD_NOT_IMPLEMENTED",function(G){return"The "+G+" method is not implemented"}),ne("ERR_STREAM_PREMATURE_CLOSE","Premature close"),ne("ERR_STREAM_DESTROYED",function(G){return"Cannot call "+G+" after a stream was destroyed"}),ne("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),ne("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),ne("ERR_STREAM_WRITE_AFTER_END","write after end"),ne("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),ne("ERR_UNKNOWN_ENCODING",function(G){return"Unknown encoding: "+G},TypeError),ne("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Vt.exports.q=Qe},6138:function(Vt,Qe,ne){"use strict";var Ce=Object.keys||function(T){var M=[];for(var L in T)M.push(L);return M};Vt.exports=D;var G=ne(2846),E=ne(8318);ne(1765)(D,G);for(var _=Ce(E.prototype),F=0;F<_.length;F++){var V=_[F];D.prototype[V]||(D.prototype[V]=E.prototype[V])}function D(T){if(!(this instanceof D))return new D(T);G.call(this,T),E.call(this,T),this.allowHalfOpen=!0,T&&(!1===T.readable&&(this.readable=!1),!1===T.writable&&(this.writable=!1),!1===T.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",j)))}function j(){this._writableState.ended||process.nextTick(B,this)}function B(T){T.end()}Object.defineProperty(D.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(D.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(D.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(T){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=T,this._writableState.destroyed=T)}})},5472:function(Vt,Qe,ne){"use strict";Vt.exports=G;var Ce=ne(9798);function G(E){if(!(this instanceof G))return new G(E);Ce.call(this,E)}ne(1765)(G,Ce),G.prototype._transform=function(E,_,F){F(null,E)}},2846:function(Vt,Qe,ne){"use strict";var Ce;Vt.exports=Ee,Ee.ReadableState=x,ne(1159);var G,E=function(je,ze){return je.listeners(ze).length},_=ne(9299),F=ne(1549).Buffer,V=ne.g.Uint8Array||function(){},D=ne(964);G=D&&D.debuglog?D.debuglog("stream"):function(){};var j,B,T,M=ne(8393),L=ne(6163),K=ne(7269).getHighWaterMark,ce=ne(3690).q,pe=ce.ERR_INVALID_ARG_TYPE,ue=ce.ERR_STREAM_PUSH_AFTER_EOF,Me=ce.ERR_METHOD_NOT_IMPLEMENTED,Q=ce.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;ne(1765)(Ee,_);var Se=L.errorOrDestroy,Le=["error","close","destroy","pause","resume"];function x(je,ze,bt){Ce=Ce||ne(6138),"boolean"!=typeof bt&&(bt=ze instanceof Ce),this.objectMode=!!(je=je||{}).objectMode,bt&&(this.objectMode=this.objectMode||!!je.readableObjectMode),this.highWaterMark=K(this,je,"readableHighWaterMark",bt),this.buffer=new M,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==je.emitClose,this.autoDestroy=!!je.autoDestroy,this.destroyed=!1,this.defaultEncoding=je.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,je.encoding&&(j||(j=ne(7503).s),this.decoder=new j(je.encoding),this.encoding=je.encoding)}function Ee(je){if(Ce=Ce||ne(6138),!(this instanceof Ee))return new Ee(je);this._readableState=new x(je,this,this instanceof Ce),this.readable=!0,je&&("function"==typeof je.read&&(this._read=je.read),"function"==typeof je.destroy&&(this._destroy=je.destroy)),_.call(this)}function ge(je,ze,bt,N,I){G("readableAddChunk",ze);var Z,Ie,_e,rt,xt,q=je._readableState;if(null===ze)q.reading=!1,function(Ie,_e){if(G("onEofChunk"),!_e.ended){if(_e.decoder){var rt=_e.decoder.end();rt&&rt.length&&(_e.buffer.push(rt),_e.length+=_e.objectMode?1:rt.length)}_e.ended=!0,_e.sync?gt(Ie):(_e.needReadable=!1,_e.emittedReadable||(_e.emittedReadable=!0,St(Ie)))}}(je,q);else if(I||(Ie=q,F.isBuffer(xt=_e=ze)||xt instanceof V||"string"==typeof _e||void 0===_e||Ie.objectMode||(rt=new pe("chunk",["string","Buffer","Uint8Array"],_e)),Z=rt),Z)Se(je,Z);else if(q.objectMode||ze&&ze.length>0)if("string"==typeof ze||q.objectMode||Object.getPrototypeOf(ze)===F.prototype||(ze=function(Ie){return F.from(Ie)}(ze)),N)q.endEmitted?Se(je,new Q):et(je,q,ze,!0);else if(q.ended)Se(je,new ue);else{if(q.destroyed)return!1;q.reading=!1,q.decoder&&!bt?(ze=q.decoder.write(ze),q.objectMode||0!==ze.length?et(je,q,ze,!1):Je(je,q)):et(je,q,ze,!1)}else N||(q.reading=!1,Je(je,q));return!q.ended&&(q.length<q.highWaterMark||0===q.length)}function et(je,ze,bt,N){ze.flowing&&0===ze.length&&!ze.sync?(ze.awaitDrain=0,je.emit("data",bt)):(ze.length+=ze.objectMode?1:bt.length,N?ze.buffer.unshift(bt):ze.buffer.push(bt),ze.needReadable&&gt(je)),Je(je,ze)}Object.defineProperty(Ee.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(je){this._readableState&&(this._readableState.destroyed=je)}}),Ee.prototype.destroy=L.destroy,Ee.prototype._undestroy=L.undestroy,Ee.prototype._destroy=function(je,ze){ze(je)},Ee.prototype.push=function(je,ze){var bt,N=this._readableState;return N.objectMode?bt=!0:"string"==typeof je&&((ze=ze||N.defaultEncoding)!==N.encoding&&(je=F.from(je,ze),ze=""),bt=!0),ge(this,je,ze,!1,bt)},Ee.prototype.unshift=function(je){return ge(this,je,null,!0,!1)},Ee.prototype.isPaused=function(){return!1===this._readableState.flowing},Ee.prototype.setEncoding=function(je){j||(j=ne(7503).s);var ze=new j(je);this._readableState.decoder=ze,this._readableState.encoding=this._readableState.decoder.encoding;for(var bt=this._readableState.buffer.head,N="";null!==bt;)N+=ze.write(bt.data),bt=bt.next;return this._readableState.buffer.clear(),""!==N&&this._readableState.buffer.push(N),this._readableState.length=N.length,this};var De=1073741824;function ot(je,ze){return je<=0||0===ze.length&&ze.ended?0:ze.objectMode?1:je!=je?ze.flowing&&ze.length?ze.buffer.head.data.length:ze.length:(je>ze.highWaterMark&&(ze.highWaterMark=((bt=je)>=De?bt=De:(bt--,bt|=bt>>>1,bt|=bt>>>2,bt|=bt>>>4,bt|=bt>>>8,bt|=bt>>>16,bt++),bt)),je<=ze.length?je:ze.ended?ze.length:(ze.needReadable=!0,0));var bt}function gt(je){var ze=je._readableState;G("emitReadable",ze.needReadable,ze.emittedReadable),ze.needReadable=!1,ze.emittedReadable||(G("emitReadable",ze.flowing),ze.emittedReadable=!0,process.nextTick(St,je))}function St(je){var ze=je._readableState;G("emitReadable_",ze.destroyed,ze.length,ze.ended),ze.destroyed||!ze.length&&!ze.ended||(je.emit("readable"),ze.emittedReadable=!1),ze.needReadable=!ze.flowing&&!ze.ended&&ze.length<=ze.highWaterMark,ht(je)}function Je(je,ze){ze.readingMore||(ze.readingMore=!0,process.nextTick(Pe,je,ze))}function Pe(je,ze){for(;!ze.reading&&!ze.ended&&(ze.length<ze.highWaterMark||ze.flowing&&0===ze.length);){var bt=ze.length;if(G("maybeReadMore read 0"),je.read(0),bt===ze.length)break}ze.readingMore=!1}function Nt(je){var ze=je._readableState;ze.readableListening=je.listenerCount("readable")>0,ze.resumeScheduled&&!ze.paused?ze.flowing=!0:je.listenerCount("data")>0&&je.resume()}function Ht(je){G("readable nexttick read 0"),je.read(0)}function $e(je,ze){G("resume",ze.reading),ze.reading||je.read(0),ze.resumeScheduled=!1,je.emit("resume"),ht(je),ze.flowing&&!ze.reading&&je.read(0)}function ht(je){var ze=je._readableState;for(G("flow",ze.flowing);ze.flowing&&null!==je.read(););}function hn(je,ze){return 0===ze.length?null:(ze.objectMode?bt=ze.buffer.shift():!je||je>=ze.length?(bt=ze.decoder?ze.buffer.join(""):1===ze.buffer.length?ze.buffer.first():ze.buffer.concat(ze.length),ze.buffer.clear()):bt=ze.buffer.consume(je,ze.decoder),bt);var bt}function zt(je){var ze=je._readableState;G("endReadable",ze.endEmitted),ze.endEmitted||(ze.ended=!0,process.nextTick(mt,ze,je))}function mt(je,ze){if(G("endReadableNT",je.endEmitted,je.length),!je.endEmitted&&0===je.length&&(je.endEmitted=!0,ze.readable=!1,ze.emit("end"),je.autoDestroy)){var bt=ze._writableState;(!bt||bt.autoDestroy&&bt.finished)&&ze.destroy()}}function It(je,ze){for(var bt=0,N=je.length;bt<N;bt++)if(je[bt]===ze)return bt;return-1}Ee.prototype.read=function(je){G("read",je),je=parseInt(je,10);var ze=this._readableState,bt=je;if(0!==je&&(ze.emittedReadable=!1),0===je&&ze.needReadable&&((0!==ze.highWaterMark?ze.length>=ze.highWaterMark:ze.length>0)||ze.ended))return G("read: emitReadable",ze.length,ze.ended),0===ze.length&&ze.ended?zt(this):gt(this),null;if(0===(je=ot(je,ze))&&ze.ended)return 0===ze.length&&zt(this),null;var N,I=ze.needReadable;return G("need readable",I),(0===ze.length||ze.length-je<ze.highWaterMark)&&G("length less than watermark",I=!0),ze.ended||ze.reading?G("reading or ended",I=!1):I&&(G("do read"),ze.reading=!0,ze.sync=!0,0===ze.length&&(ze.needReadable=!0),this._read(ze.highWaterMark),ze.sync=!1,ze.reading||(je=ot(bt,ze))),null===(N=je>0?hn(je,ze):null)?(ze.needReadable=ze.length<=ze.highWaterMark,je=0):(ze.length-=je,ze.awaitDrain=0),0===ze.length&&(ze.ended||(ze.needReadable=!0),bt!==je&&ze.ended&&zt(this)),null!==N&&this.emit("data",N),N},Ee.prototype._read=function(je){Se(this,new Me("_read()"))},Ee.prototype.pipe=function(je,ze){var bt=this,N=this._readableState;switch(N.pipesCount){case 0:N.pipes=je;break;case 1:N.pipes=[N.pipes,je];break;default:N.pipes.push(je)}N.pipesCount+=1,G("pipe count=%d opts=%j",N.pipesCount,ze);var I=ze&&!1===ze.end||je===process.stdout||je===process.stderr?ut:Z;function Z(){G("onend"),je.end()}N.endEmitted?process.nextTick(I):bt.once("end",I),je.on("unpipe",function it(vt,Bt){G("onunpipe"),vt===bt&&Bt&&!1===Bt.hasUnpiped&&(Bt.hasUnpiped=!0,G("cleanup"),je.removeListener("close",xt),je.removeListener("finish",at),je.removeListener("drain",q),je.removeListener("error",rt),je.removeListener("unpipe",it),bt.removeListener("end",Z),bt.removeListener("end",ut),bt.removeListener("data",_e),Ie=!0,!N.awaitDrain||je._writableState&&!je._writableState.needDrain||q())});var it,q=(it=bt,function(){var vt=it._readableState;G("pipeOnDrain",vt.awaitDrain),vt.awaitDrain&&vt.awaitDrain--,0===vt.awaitDrain&&E(it,"data")&&(vt.flowing=!0,ht(it))});je.on("drain",q);var Ie=!1;function _e(it){G("ondata");var vt=je.write(it);G("dest.write",vt),!1===vt&&((1===N.pipesCount&&N.pipes===je||N.pipesCount>1&&-1!==It(N.pipes,je))&&!Ie&&(G("false write response, pause",N.awaitDrain),N.awaitDrain++),bt.pause())}function rt(it){G("onerror",it),ut(),je.removeListener("error",rt),0===E(je,"error")&&Se(je,it)}function xt(){je.removeListener("finish",at),ut()}function at(){G("onfinish"),je.removeListener("close",xt),ut()}function ut(){G("unpipe"),bt.unpipe(je)}return bt.on("data",_e),function(it,vt,Bt){if("function"==typeof it.prependListener)return it.prependListener(vt,Bt);it._events&&it._events[vt]?Array.isArray(it._events[vt])?it._events[vt].unshift(Bt):it._events[vt]=[Bt,it._events[vt]]:it.on(vt,Bt)}(je,"error",rt),je.once("close",xt),je.once("finish",at),je.emit("pipe",bt),N.flowing||(G("pipe resume"),bt.resume()),je},Ee.prototype.unpipe=function(je){var ze=this._readableState,bt={hasUnpiped:!1};if(0===ze.pipesCount)return this;if(1===ze.pipesCount)return je&&je!==ze.pipes||(je||(je=ze.pipes),ze.pipes=null,ze.pipesCount=0,ze.flowing=!1,je&&je.emit("unpipe",this,bt)),this;if(!je){var N=ze.pipes,I=ze.pipesCount;ze.pipes=null,ze.pipesCount=0,ze.flowing=!1;for(var Z=0;Z<I;Z++)N[Z].emit("unpipe",this,{hasUnpiped:!1});return this}var q=It(ze.pipes,je);return-1===q||(ze.pipes.splice(q,1),ze.pipesCount-=1,1===ze.pipesCount&&(ze.pipes=ze.pipes[0]),je.emit("unpipe",this,bt)),this},Ee.prototype.addListener=Ee.prototype.on=function(je,ze){var bt=_.prototype.on.call(this,je,ze),N=this._readableState;return"data"===je?(N.readableListening=this.listenerCount("readable")>0,!1!==N.flowing&&this.resume()):"readable"===je&&(N.endEmitted||N.readableListening||(N.readableListening=N.needReadable=!0,N.flowing=!1,N.emittedReadable=!1,G("on readable",N.length,N.reading),N.length?gt(this):N.reading||process.nextTick(Ht,this))),bt},Ee.prototype.removeListener=function(je,ze){var bt=_.prototype.removeListener.call(this,je,ze);return"readable"===je&&process.nextTick(Nt,this),bt},Ee.prototype.removeAllListeners=function(je){var ze=_.prototype.removeAllListeners.apply(this,arguments);return"readable"!==je&&void 0!==je||process.nextTick(Nt,this),ze},Ee.prototype.resume=function(){var bt,je=this._readableState;return je.flowing||(G("resume"),je.flowing=!je.readableListening,this,(bt=je).resumeScheduled||(bt.resumeScheduled=!0,process.nextTick($e,this,bt))),je.paused=!1,this},Ee.prototype.pause=function(){return G("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(G("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Ee.prototype.wrap=function(je){var ze=this,bt=this._readableState,N=!1;for(var I in je.on("end",function(){if(G("wrapped end"),bt.decoder&&!bt.ended){var q=bt.decoder.end();q&&q.length&&ze.push(q)}ze.push(null)}),je.on("data",function(q){G("wrapped data"),bt.decoder&&(q=bt.decoder.write(q)),bt.objectMode&&null==q||(bt.objectMode||q&&q.length)&&(ze.push(q)||(N=!0,je.pause()))}),je)void 0===this[I]&&"function"==typeof je[I]&&(this[I]=function(q){return function(){return je[q].apply(je,arguments)}}(I));for(var Z=0;Z<Le.length;Z++)je.on(Le[Z],this.emit.bind(this,Le[Z]));return this._read=function(q){G("wrapped _read",q),N&&(N=!1,je.resume())},this},"function"==typeof Symbol&&(Ee.prototype[Symbol.asyncIterator]=function(){return void 0===B&&(B=ne(7299)),B(this)}),Object.defineProperty(Ee.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Ee.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Ee.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(je){this._readableState&&(this._readableState.flowing=je)}}),Ee._fromList=hn,Object.defineProperty(Ee.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(Ee.from=function(je,ze){return void 0===T&&(T=ne(6233)),T(Ee,je,ze)})},9798:function(Vt,Qe,ne){"use strict";Vt.exports=j;var Ce=ne(3690).q,G=Ce.ERR_METHOD_NOT_IMPLEMENTED,E=Ce.ERR_MULTIPLE_CALLBACK,_=Ce.ERR_TRANSFORM_ALREADY_TRANSFORMING,F=Ce.ERR_TRANSFORM_WITH_LENGTH_0,V=ne(6138);function D(M,L){var K=this._transformState;K.transforming=!1;var ce=K.writecb;if(null===ce)return this.emit("error",new E);K.writechunk=null,K.writecb=null,null!=L&&this.push(L),ce(M);var pe=this._readableState;pe.reading=!1,(pe.needReadable||pe.length<pe.highWaterMark)&&this._read(pe.highWaterMark)}function j(M){if(!(this instanceof j))return new j(M);V.call(this,M),this._transformState={afterTransform:D.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,M&&("function"==typeof M.transform&&(this._transform=M.transform),"function"==typeof M.flush&&(this._flush=M.flush)),this.on("prefinish",B)}function B(){var M=this;"function"!=typeof this._flush||this._readableState.destroyed?T(this,null,null):this._flush(function(L,K){T(M,L,K)})}function T(M,L,K){if(L)return M.emit("error",L);if(null!=K&&M.push(K),M._writableState.length)throw new F;if(M._transformState.transforming)throw new _;return M.push(null)}ne(1765)(j,V),j.prototype.push=function(M,L){return this._transformState.needTransform=!1,V.prototype.push.call(this,M,L)},j.prototype._transform=function(M,L,K){K(new G("_transform()"))},j.prototype._write=function(M,L,K){var ce=this._transformState;if(ce.writecb=K,ce.writechunk=M,ce.writeencoding=L,!ce.transforming){var pe=this._readableState;(ce.needTransform||pe.needReadable||pe.length<pe.highWaterMark)&&this._read(pe.highWaterMark)}},j.prototype._read=function(M){var L=this._transformState;null===L.writechunk||L.transforming?L.needTransform=!0:(L.transforming=!0,this._transform(L.writechunk,L.writeencoding,L.afterTransform))},j.prototype._destroy=function(M,L){V.prototype._destroy.call(this,M,function(K){L(K)})}},8318:function(Vt,Qe,ne){"use strict";function Ce(Je){var Pe=this;this.next=null,this.entry=null,this.finish=function(){!function(Nt,Ht,$e){var ht=Nt.entry;for(Nt.entry=null;ht;){var hn=ht.callback;Ht.pendingcb--,hn(void 0),ht=ht.next}Ht.corkedRequestsFree.next=Nt}(Pe,Je)}}var G;Vt.exports=Ee,Ee.WritableState=x;var E,_={deprecate:ne(7839)},F=ne(9299),V=ne(1549).Buffer,D=ne.g.Uint8Array||function(){},j=ne(6163),B=ne(7269).getHighWaterMark,T=ne(3690).q,M=T.ERR_INVALID_ARG_TYPE,L=T.ERR_METHOD_NOT_IMPLEMENTED,K=T.ERR_MULTIPLE_CALLBACK,ce=T.ERR_STREAM_CANNOT_PIPE,pe=T.ERR_STREAM_DESTROYED,ue=T.ERR_STREAM_NULL_VALUES,Me=T.ERR_STREAM_WRITE_AFTER_END,Q=T.ERR_UNKNOWN_ENCODING,Se=j.errorOrDestroy;function Le(){}function x(Je,Pe,Nt){G=G||ne(6138),"boolean"!=typeof Nt&&(Nt=Pe instanceof G),this.objectMode=!!(Je=Je||{}).objectMode,Nt&&(this.objectMode=this.objectMode||!!Je.writableObjectMode),this.highWaterMark=B(this,Je,"writableHighWaterMark",Nt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===Je.decodeStrings),this.defaultEncoding=Je.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function($e){!function(ht,hn){var ze,zt=ht._writableState,mt=zt.sync,It=zt.writecb;if("function"!=typeof It)throw new K;if((ze=zt).writing=!1,ze.writecb=null,ze.length-=ze.writelen,ze.writelen=0,hn)!function(ze,bt,N,I,Z){--bt.pendingcb,N?(process.nextTick(Z,I),process.nextTick(St,ze,bt),ze._writableState.errorEmitted=!0,Se(ze,I)):(Z(I),ze._writableState.errorEmitted=!0,Se(ze,I),St(ze,bt))}(ht,zt,mt,hn,It);else{var je=ot(zt)||ht.destroyed;je||zt.corked||zt.bufferProcessing||!zt.bufferedRequest||De(ht,zt),mt?process.nextTick(et,ht,zt,je,It):et(ht,zt,je,It)}}(Pe,$e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==Je.emitClose,this.autoDestroy=!!Je.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Ce(this)}function Ee(Je){var Pe=this instanceof(G=G||ne(6138));if(!Pe&&!E.call(Ee,this))return new Ee(Je);this._writableState=new x(Je,this,Pe),this.writable=!0,Je&&("function"==typeof Je.write&&(this._write=Je.write),"function"==typeof Je.writev&&(this._writev=Je.writev),"function"==typeof Je.destroy&&(this._destroy=Je.destroy),"function"==typeof Je.final&&(this._final=Je.final)),F.call(this)}function ge(Je,Pe,Nt,Ht,$e,ht,hn){Pe.writelen=Ht,Pe.writecb=hn,Pe.writing=!0,Pe.sync=!0,Pe.destroyed?Pe.onwrite(new pe("write")):Nt?Je._writev($e,Pe.onwrite):Je._write($e,ht,Pe.onwrite),Pe.sync=!1}function et(Je,Pe,Nt,Ht){var $e,ht;Nt||($e=Je,0===(ht=Pe).length&&ht.needDrain&&(ht.needDrain=!1,$e.emit("drain"))),Pe.pendingcb--,Ht(),St(Je,Pe)}function De(Je,Pe){Pe.bufferProcessing=!0;var Nt=Pe.bufferedRequest;if(Je._writev&&Nt&&Nt.next){var $e=new Array(Pe.bufferedRequestCount),ht=Pe.corkedRequestsFree;ht.entry=Nt;for(var hn=0,zt=!0;Nt;)$e[hn]=Nt,Nt.isBuf||(zt=!1),Nt=Nt.next,hn+=1;$e.allBuffers=zt,ge(Je,Pe,!0,Pe.length,$e,"",ht.finish),Pe.pendingcb++,Pe.lastBufferedRequest=null,ht.next?(Pe.corkedRequestsFree=ht.next,ht.next=null):Pe.corkedRequestsFree=new Ce(Pe),Pe.bufferedRequestCount=0}else{for(;Nt;){var mt=Nt.chunk;if(ge(Je,Pe,!1,Pe.objectMode?1:mt.length,mt,Nt.encoding,Nt.callback),Nt=Nt.next,Pe.bufferedRequestCount--,Pe.writing)break}null===Nt&&(Pe.lastBufferedRequest=null)}Pe.bufferedRequest=Nt,Pe.bufferProcessing=!1}function ot(Je){return Je.ending&&0===Je.length&&null===Je.bufferedRequest&&!Je.finished&&!Je.writing}function gt(Je,Pe){Je._final(function(Nt){Pe.pendingcb--,Nt&&Se(Je,Nt),Pe.prefinished=!0,Je.emit("prefinish"),St(Je,Pe)})}function St(Je,Pe){var $e,ht,Nt=ot(Pe);if(Nt&&($e=Je,(ht=Pe).prefinished||ht.finalCalled||("function"!=typeof $e._final||ht.destroyed?(ht.prefinished=!0,$e.emit("prefinish")):(ht.pendingcb++,ht.finalCalled=!0,process.nextTick(gt,$e,ht))),0===Pe.pendingcb&&(Pe.finished=!0,Je.emit("finish"),Pe.autoDestroy))){var Ht=Je._readableState;(!Ht||Ht.autoDestroy&&Ht.endEmitted)&&Je.destroy()}return Nt}ne(1765)(Ee,F),x.prototype.getBuffer=function(){for(var Je=this.bufferedRequest,Pe=[];Je;)Pe.push(Je),Je=Je.next;return Pe},function(){try{Object.defineProperty(x.prototype,"buffer",{get:_.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(Ee,Symbol.hasInstance,{value:function(Je){return!!E.call(this,Je)||this===Ee&&Je&&Je._writableState instanceof x}})):E=function(Je){return Je instanceof this},Ee.prototype.pipe=function(){Se(this,new ce)},Ee.prototype.write=function(Je,Pe,Nt){var Ht,zt,mt,It,$e=this._writableState,ht=!1,hn=!$e.objectMode&&(V.isBuffer(Ht=Je)||Ht instanceof D);return hn&&!V.isBuffer(Je)&&(Je=V.from(Je)),"function"==typeof Pe&&(Nt=Pe,Pe=null),hn?Pe="buffer":Pe||(Pe=$e.defaultEncoding),"function"!=typeof Nt&&(Nt=Le),$e.ending?(zt=this,mt=Nt,It=new Me,Se(zt,It),process.nextTick(mt,It)):(hn||function(zt,mt,It,je){var ze;return null===It?ze=new ue:"string"==typeof It||mt.objectMode||(ze=new M("chunk",["string","Buffer"],It)),!ze||(Se(zt,ze),process.nextTick(je,ze),!1)}(this,$e,Je,Nt))&&($e.pendingcb++,ht=function(zt,mt,It,je,ze,bt){if(!It){var N=(_e=je,(Ie=mt).objectMode||!1===Ie.decodeStrings||"string"!=typeof _e||(_e=V.from(_e,ze)),_e);je!==N&&(It=!0,ze="buffer",je=N)}var Ie,_e,I=mt.objectMode?1:je.length;mt.length+=I;var Z=mt.length<mt.highWaterMark;if(Z||(mt.needDrain=!0),mt.writing||mt.corked){var q=mt.lastBufferedRequest;mt.lastBufferedRequest={chunk:je,encoding:ze,isBuf:It,callback:bt,next:null},q?q.next=mt.lastBufferedRequest:mt.bufferedRequest=mt.lastBufferedRequest,mt.bufferedRequestCount+=1}else ge(zt,mt,!1,I,je,ze,bt);return Z}(this,$e,hn,Je,Pe,Nt)),ht},Ee.prototype.cork=function(){this._writableState.corked++},Ee.prototype.uncork=function(){var Je=this._writableState;Je.corked&&(Je.corked--,Je.writing||Je.corked||Je.bufferProcessing||!Je.bufferedRequest||De(this,Je))},Ee.prototype.setDefaultEncoding=function(Je){if("string"==typeof Je&&(Je=Je.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Je+"").toLowerCase())>-1))throw new Q(Je);return this._writableState.defaultEncoding=Je,this},Object.defineProperty(Ee.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Ee.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Ee.prototype._write=function(Je,Pe,Nt){Nt(new L("_write()"))},Ee.prototype._writev=null,Ee.prototype.end=function(Je,Pe,Nt){var ht,hn,Ht=this._writableState;return"function"==typeof Je?(Nt=Je,Je=null,Pe=null):"function"==typeof Pe&&(Nt=Pe,Pe=null),null!=Je&&this.write(Je,Pe),Ht.corked&&(Ht.corked=1,this.uncork()),Ht.ending||(this,hn=Nt,(ht=Ht).ending=!0,St(this,ht),hn&&(ht.finished?process.nextTick(hn):this.once("finish",hn)),ht.ended=!0,this.writable=!1),this},Object.defineProperty(Ee.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Ee.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(Je){this._writableState&&(this._writableState.destroyed=Je)}}),Ee.prototype.destroy=j.destroy,Ee.prototype._undestroy=j.undestroy,Ee.prototype._destroy=function(Je,Pe){Pe(Je)}},7299:function(Vt,Qe,ne){"use strict";var Ce;function G(ue,Me,Q){return Me in ue?Object.defineProperty(ue,Me,{value:Q,enumerable:!0,configurable:!0,writable:!0}):ue[Me]=Q,ue}var E=ne(8800),_=Symbol("lastResolve"),F=Symbol("lastReject"),V=Symbol("error"),D=Symbol("ended"),j=Symbol("lastPromise"),B=Symbol("handlePromise"),T=Symbol("stream");function M(ue,Me){return{value:ue,done:Me}}function L(ue){var Me=ue[_];if(null!==Me){var Q=ue[T].read();null!==Q&&(ue[j]=null,ue[_]=null,ue[F]=null,Me(M(Q,!1)))}}function K(ue){process.nextTick(L,ue)}var ce=Object.getPrototypeOf(function(){}),pe=Object.setPrototypeOf((G(Ce={get stream(){return this[T]},next:function(){var ue=this,Me=this[V];if(null!==Me)return Promise.reject(Me);if(this[D])return Promise.resolve(M(void 0,!0));if(this[T].destroyed)return new Promise(function(x,Ee){process.nextTick(function(){ue[V]?Ee(ue[V]):x(M(void 0,!0))})});var Q,x,Ee,Se=this[j];if(Se)Q=new Promise((x=Se,Ee=this,function(ge,et){x.then(function(){Ee[D]?ge(M(void 0,!0)):Ee[B](ge,et)},et)}));else{var Le=this[T].read();if(null!==Le)return Promise.resolve(M(Le,!1));Q=new Promise(this[B])}return this[j]=Q,Q}},Symbol.asyncIterator,function(){return this}),G(Ce,"return",function(){var ue=this;return new Promise(function(Me,Q){ue[T].destroy(null,function(Se){Se?Q(Se):Me(M(void 0,!0))})})}),Ce),ce);Vt.exports=function(ue){var Me,Q=Object.create(pe,(G(Me={},T,{value:ue,writable:!0}),G(Me,_,{value:null,writable:!0}),G(Me,F,{value:null,writable:!0}),G(Me,V,{value:null,writable:!0}),G(Me,D,{value:ue._readableState.endEmitted,writable:!0}),G(Me,B,{value:function(Se,Le){var x=Q[T].read();x?(Q[j]=null,Q[_]=null,Q[F]=null,Se(M(x,!1))):(Q[_]=Se,Q[F]=Le)},writable:!0}),Me));return Q[j]=null,E(ue,function(Se){if(Se&&"ERR_STREAM_PREMATURE_CLOSE"!==Se.code){var Le=Q[F];return null!==Le&&(Q[j]=null,Q[_]=null,Q[F]=null,Le(Se)),void(Q[V]=Se)}var x=Q[_];null!==x&&(Q[j]=null,Q[_]=null,Q[F]=null,x(M(void 0,!0))),Q[D]=!0}),ue.on("readable",K.bind(null,Q)),Q}},8393:function(Vt,Qe,ne){"use strict";function Ce(D,j){var B=Object.keys(D);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(D);j&&(T=T.filter(function(M){return Object.getOwnPropertyDescriptor(D,M).enumerable})),B.push.apply(B,T)}return B}function G(D,j,B){return j in D?Object.defineProperty(D,j,{value:B,enumerable:!0,configurable:!0,writable:!0}):D[j]=B,D}var _=ne(1549).Buffer,F=ne(9862).inspect,V=F&&F.custom||"inspect";Vt.exports=function(){function D(){(function(T,M){if(!(T instanceof M))throw new TypeError("Cannot call a class as a function")})(this,D),this.head=null,this.tail=null,this.length=0}var B;return B=[{key:"push",value:function(T){var M={data:T,next:null};this.length>0?this.tail.next=M:this.head=M,this.tail=M,++this.length}},{key:"unshift",value:function(T){var M={data:T,next:this.head};0===this.length&&(this.tail=M),this.head=M,++this.length}},{key:"shift",value:function(){if(0!==this.length){var T=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,T}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(T){if(0===this.length)return"";for(var M=this.head,L=""+M.data;M=M.next;)L+=T+M.data;return L}},{key:"concat",value:function(T){if(0===this.length)return _.alloc(0);for(var ce=_.allocUnsafe(T>>>0),pe=this.head,ue=0;pe;)_.prototype.copy.call(pe.data,ce,ue),ue+=pe.data.length,pe=pe.next;return ce}},{key:"consume",value:function(T,M){var L;return T<this.head.data.length?(L=this.head.data.slice(0,T),this.head.data=this.head.data.slice(T)):L=T===this.head.data.length?this.shift():M?this._getString(T):this._getBuffer(T),L}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(T){var M=this.head,L=1,K=M.data;for(T-=K.length;M=M.next;){var ce=M.data,pe=T>ce.length?ce.length:T;if(K+=pe===ce.length?ce:ce.slice(0,T),0==(T-=pe)){pe===ce.length?(++L,this.head=M.next?M.next:this.tail=null):(this.head=M,M.data=ce.slice(pe));break}++L}return this.length-=L,K}},{key:"_getBuffer",value:function(T){var M=_.allocUnsafe(T),L=this.head,K=1;for(L.data.copy(M),T-=L.data.length;L=L.next;){var ce=L.data,pe=T>ce.length?ce.length:T;if(ce.copy(M,M.length-T,0,pe),0==(T-=pe)){pe===ce.length?(++K,this.head=L.next?L.next:this.tail=null):(this.head=L,L.data=ce.slice(pe));break}++K}return this.length-=K,M}},{key:V,value:function(T,M){return F(this,function(L){for(var K=1;K<arguments.length;K++){var ce=null!=arguments[K]?arguments[K]:{};K%2?Ce(Object(ce),!0).forEach(function(pe){G(L,pe,ce[pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(ce)):Ce(Object(ce)).forEach(function(pe){Object.defineProperty(L,pe,Object.getOwnPropertyDescriptor(ce,pe))})}return L}({},M,{depth:0,customInspect:!1}))}}],B&&function E(D,j){for(var B=0;B<j.length;B++){var T=j[B];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(D,T.key,T)}}(D.prototype,B),D}()},6163:function(Vt){"use strict";function Qe(G,E){Ce(G,E),ne(G)}function ne(G){G._writableState&&!G._writableState.emitClose||G._readableState&&!G._readableState.emitClose||G.emit("close")}function Ce(G,E){G.emit("error",E)}Vt.exports={destroy:function(G,E){var _=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(E?E(G):G&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Ce,this,G)):process.nextTick(Ce,this,G)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(G||null,function(D){!E&&D?_._writableState?_._writableState.errorEmitted?process.nextTick(ne,_):(_._writableState.errorEmitted=!0,process.nextTick(Qe,_,D)):process.nextTick(Qe,_,D):E?(process.nextTick(ne,_),E(D)):process.nextTick(ne,_)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(G,E){var _=G._readableState,F=G._writableState;_&&_.autoDestroy||F&&F.autoDestroy?G.destroy(E):G.emit("error",E)}}},8800:function(Vt,Qe,ne){"use strict";var Ce=ne(3690).q.ERR_STREAM_PREMATURE_CLOSE;function G(){}Vt.exports=function E(_,F,V){if("function"==typeof F)return E(_,null,F);var Me,Q;F||(F={}),Me=V||G,Q=!1,V=function(){if(!Q){Q=!0;for(var Se=arguments.length,Le=new Array(Se),x=0;x<Se;x++)Le[x]=arguments[x];Me.apply(this,Le)}};var D=F.readable||!1!==F.readable&&_.readable,j=F.writable||!1!==F.writable&&_.writable,B=function(){_.writable||M()},T=_._writableState&&_._writableState.finished,M=function(){j=!1,T=!0,D||V.call(_)},L=_._readableState&&_._readableState.endEmitted,K=function(){D=!1,L=!0,j||V.call(_)},ce=function(Me){V.call(_,Me)},pe=function(){var Me;return D&&!L?(_._readableState&&_._readableState.ended||(Me=new Ce),V.call(_,Me)):j&&!T?(_._writableState&&_._writableState.ended||(Me=new Ce),V.call(_,Me)):void 0},ue=function(){_.req.on("finish",M)};return function(Me){return Me.setHeader&&"function"==typeof Me.abort}(_)?(_.on("complete",M),_.on("abort",pe),_.req?ue():_.on("request",ue)):j&&!_._writableState&&(_.on("end",B),_.on("close",B)),_.on("end",K),_.on("finish",M),!1!==F.error&&_.on("error",ce),_.on("close",pe),function(){_.removeListener("complete",M),_.removeListener("abort",pe),_.removeListener("request",ue),_.req&&_.req.removeListener("finish",M),_.removeListener("end",B),_.removeListener("close",B),_.removeListener("finish",M),_.removeListener("end",K),_.removeListener("error",ce),_.removeListener("close",pe)}}},6233:function(Vt){Vt.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(Vt,Qe,ne){"use strict";var Ce,G=ne(3690).q,E=G.ERR_MISSING_ARGS,_=G.ERR_STREAM_DESTROYED;function F(T){if(T)throw T}function D(T){T()}function j(T,M){return T.pipe(M)}Vt.exports=function(){for(var T=arguments.length,M=new Array(T),L=0;L<T;L++)M[L]=arguments[L];var K,ce=function B(T){return T.length?"function"!=typeof T[T.length-1]?F:T.pop():F}(M);if(Array.isArray(M[0])&&(M=M[0]),M.length<2)throw new E("streams");var pe=M.map(function(ue,Me){var Q=Me<M.length-1;return function V(T,M,L,K){var ue,Me;ue=K,Me=!1,K=function(){Me||(Me=!0,ue.apply(void 0,arguments))};var ce=!1;T.on("close",function(){ce=!0}),void 0===Ce&&(Ce=ne(8800)),Ce(T,{readable:M,writable:L},function(ue){if(ue)return K(ue);ce=!0,K()});var pe=!1;return function(ue){if(!ce&&!pe)return pe=!0,function(Me){return Me.setHeader&&"function"==typeof Me.abort}(T)?T.abort():"function"==typeof T.destroy?T.destroy():void K(ue||new _("pipe"))}}(ue,Q,Me>0,function(Se){K||(K=Se),Se&&pe.forEach(D),Q||(pe.forEach(D),ce(K))})});return M.reduce(j)}},7269:function(Vt,Qe,ne){"use strict";var Ce=ne(3690).q.ERR_INVALID_OPT_VALUE;Vt.exports={getHighWaterMark:function(G,E,_,F){var D,V=null!=(D=E).highWaterMark?D.highWaterMark:F?D[_]:null;if(null!=V){if(!isFinite(V)||Math.floor(V)!==V||V<0)throw new Ce(F?_:"highWaterMark",V);return Math.floor(V)}return G.objectMode?16:16384}}},9299:function(Vt,Qe,ne){Vt.exports=ne(1159).EventEmitter},7503:function(Vt,Qe,ne){"use strict";var Ce=ne(8387).Buffer,G=Ce.isEncoding||function(L){switch((L=""+L)&&L.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function E(L){var K;switch(this.encoding=function(ce){var pe=function(ue){if(!ue)return"utf8";for(var Me;;)switch(ue){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ue;default:if(Me)return;ue=(""+ue).toLowerCase(),Me=!0}}(ce);if("string"!=typeof pe&&(Ce.isEncoding===G||!G(ce)))throw new Error("Unknown encoding: "+ce);return pe||ce}(L),this.encoding){case"utf16le":this.text=V,this.end=D,K=4;break;case"utf8":this.fillLast=F,K=4;break;case"base64":this.text=j,this.end=B,K=3;break;default:return this.write=T,void(this.end=M)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Ce.allocUnsafe(K)}function _(L){return L<=127?0:L>>5==6?2:L>>4==14?3:L>>3==30?4:L>>6==2?-1:-2}function F(L){var K=this.lastTotal-this.lastNeed,ce=function(pe,ue,Me){if(128!=(192&ue[0]))return pe.lastNeed=0,"\ufffd";if(pe.lastNeed>1&&ue.length>1){if(128!=(192&ue[1]))return pe.lastNeed=1,"\ufffd";if(pe.lastNeed>2&&ue.length>2&&128!=(192&ue[2]))return pe.lastNeed=2,"\ufffd"}}(this,L);return void 0!==ce?ce:this.lastNeed<=L.length?(L.copy(this.lastChar,K,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(L.copy(this.lastChar,K,0,L.length),void(this.lastNeed-=L.length))}function V(L,K){if((L.length-K)%2==0){var ce=L.toString("utf16le",K);if(ce){var pe=ce.charCodeAt(ce.length-1);if(pe>=55296&&pe<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=L[L.length-2],this.lastChar[1]=L[L.length-1],ce.slice(0,-1)}return ce}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=L[L.length-1],L.toString("utf16le",K,L.length-1)}function D(L){var K=L&&L.length?this.write(L):"";return this.lastNeed?K+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):K}function j(L,K){var ce=(L.length-K)%3;return 0===ce?L.toString("base64",K):(this.lastNeed=3-ce,this.lastTotal=3,1===ce?this.lastChar[0]=L[L.length-1]:(this.lastChar[0]=L[L.length-2],this.lastChar[1]=L[L.length-1]),L.toString("base64",K,L.length-ce))}function B(L){var K=L&&L.length?this.write(L):"";return this.lastNeed?K+this.lastChar.toString("base64",0,3-this.lastNeed):K}function T(L){return L.toString(this.encoding)}function M(L){return L&&L.length?this.write(L):""}Qe.s=E,E.prototype.write=function(L){if(0===L.length)return"";var K,ce;if(this.lastNeed){if(void 0===(K=this.fillLast(L)))return"";ce=this.lastNeed,this.lastNeed=0}else ce=0;return ce<L.length?K?K+this.text(L,ce):this.text(L,ce):K||""},E.prototype.end=function(L){var K=L&&L.length?this.write(L):"";return this.lastNeed?K+"\ufffd":K},E.prototype.text=function(L,K){var ce=function(ue,Me,Q){var Se=Me.length-1;if(Se<Q)return 0;var Le=_(Me[Se]);return Le>=0?(Le>0&&(ue.lastNeed=Le-1),Le):--Se<Q||-2===Le?0:(Le=_(Me[Se]))>=0?(Le>0&&(ue.lastNeed=Le-2),Le):--Se<Q||-2===Le?0:(Le=_(Me[Se]))>=0?(Le>0&&(2===Le?Le=0:ue.lastNeed=Le-3),Le):0}(this,L,K);if(!this.lastNeed)return L.toString("utf8",K);this.lastTotal=ce;var pe=L.length-(ce-this.lastNeed);return L.copy(this.lastChar,0,pe),L.toString("utf8",K,pe)},E.prototype.fillLast=function(L){if(this.lastNeed<=L.length)return L.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);L.copy(this.lastChar,this.lastTotal-this.lastNeed,0,L.length),this.lastNeed-=L.length}},1067:function(Vt,Qe,ne){var Ce;!function(G,E){"use strict";var _="function",F="undefined",V="object",D="string",j="major",B="model",T="name",M="type",L="vendor",K="version",ce="architecture",pe="console",ue="mobile",Me="tablet",Q="smarttv",Se="wearable",Le="embedded",x="Amazon",Ee="Apple",et="BlackBerry",De="Browser",ot="Chrome",gt="Firefox",St="Google",Nt="Microsoft",Ht="Motorola",$e="Opera",ht="Samsung",zt="Sony",mt="Xiaomi",It="Zebra",je="Facebook",ze="Chromium OS",N=function(vt){for(var Bt={},un=0;un<vt.length;un++)Bt[vt[un].toUpperCase()]=vt[un];return Bt},I=function(vt,Bt){return typeof vt===D&&-1!==Z(Bt).indexOf(Z(vt))},Z=function(vt){return vt.toLowerCase()},q=function(vt,Bt){if(typeof vt===D)return vt=vt.replace(/^\s\s*/,""),typeof Bt===F?vt:vt.substring(0,500)},Ie=function(vt,Bt){for(var un,Zt,kn,vn,xn,Tn,sr=0;sr<Bt.length&&!xn;){var Or=Bt[sr],ei=Bt[sr+1];for(un=Zt=0;un<Or.length&&!xn&&Or[un];)if(xn=Or[un++].exec(vt))for(kn=0;kn<ei.length;kn++)Tn=xn[++Zt],typeof(vn=ei[kn])===V&&vn.length>0?2===vn.length?this[vn[0]]=typeof vn[1]==_?vn[1].call(this,Tn):vn[1]:3===vn.length?this[vn[0]]=typeof vn[1]!==_||vn[1].exec&&vn[1].test?Tn?Tn.replace(vn[1],vn[2]):E:Tn?vn[1].call(this,Tn,vn[2]):E:4===vn.length&&(this[vn[0]]=Tn?vn[3].call(this,Tn.replace(vn[1],vn[2])):E):this[vn]=Tn||E;sr+=2}},_e=function(vt,Bt){for(var un in Bt)if(typeof Bt[un]===V&&Bt[un].length>0){for(var Zt=0;Zt<Bt[un].length;Zt++)if(I(Bt[un][Zt],vt))return"?"===un?E:un}else if(I(Bt[un],vt))return"?"===un?E:un;return vt},rt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},xt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[K,[T,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[K,[T,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[T,K],[/opios[\/ ]+([\w\.]+)/i],[K,[T,$e+" Mini"]],[/\bopr\/([\w\.]+)/i],[K,[T,$e]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[K,[T,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[T,K],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[K,[T,"UC"+De]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[K,[T,"WeChat"]],[/konqueror\/([\w\.]+)/i],[K,[T,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[K,[T,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[K,[T,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[K,[T,"Smart Lenovo "+De]],[/(avast|avg)\/([\w\.]+)/i],[[T,/(.+)/,"$1 Secure "+De],K],[/\bfocus\/([\w\.]+)/i],[K,[T,gt+" Focus"]],[/\bopt\/([\w\.]+)/i],[K,[T,$e+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[K,[T,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[K,[T,"Dolphin"]],[/coast\/([\w\.]+)/i],[K,[T,$e+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[K,[T,"MIUI "+De]],[/fxios\/([-\w\.]+)/i],[K,[T,gt]],[/\bqihu|(qi?ho?o?|360)browser/i],[[T,"360 "+De]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[T,/(.+)/,"$1 "+De],K],[/samsungbrowser\/([\w\.]+)/i],[K,[T,ht+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[T,/_/g," "],K],[/metasr[\/ ]?([\d\.]+)/i],[K,[T,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[T,"Sogou Mobile"],K],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[T,K],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[T],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[T,je],K],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[T,K],[/\bgsa\/([\w\.]+) .*safari\//i],[K,[T,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[K,[T,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[K,[T,ot+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[T,ot+" WebView"],K],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[K,[T,"Android "+De]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[T,K],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[K,[T,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[K,T],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[T,[K,_e,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[T,K],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[T,"Netscape"],K],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[K,[T,gt+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[T,K],[/(cobalt)\/([\w\.]+)/i],[T,[K,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[ce,"amd64"]],[/(ia32(?=;))/i],[[ce,Z]],[/((?:i[346]|x)86)[;\)]/i],[[ce,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[ce,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[ce,"armhf"]],[/windows (ce|mobile); ppc;/i],[[ce,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[ce,/ower/,"",Z]],[/(sun4\w)[;\)]/i],[[ce,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[ce,Z]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[B,[L,ht],[M,Me]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[B,[L,ht],[M,ue]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[B,[L,Ee],[M,ue]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[B,[L,Ee],[M,Me]],[/(macintosh);/i],[B,[L,Ee]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[B,[L,"Sharp"],[M,ue]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[B,[L,"Huawei"],[M,Me]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[B,[L,"Huawei"],[M,ue]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[B,/_/g," "],[L,mt],[M,ue]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[B,/_/g," "],[L,mt],[M,Me]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[B,[L,"OPPO"],[M,ue]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[B,[L,"Vivo"],[M,ue]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[B,[L,"Realme"],[M,ue]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[B,[L,Ht],[M,ue]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[B,[L,Ht],[M,Me]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[B,[L,"LG"],[M,Me]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[B,[L,"LG"],[M,ue]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[B,[L,"Lenovo"],[M,Me]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[B,/_/g," "],[L,"Nokia"],[M,ue]],[/(pixel c)\b/i],[B,[L,St],[M,Me]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[B,[L,St],[M,ue]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[B,[L,zt],[M,ue]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[B,"Xperia Tablet"],[L,zt],[M,Me]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[B,[L,"OnePlus"],[M,ue]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[B,[L,x],[M,Me]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[B,/(.+)/g,"Fire Phone $1"],[L,x],[M,ue]],[/(playbook);[-\w\),; ]+(rim)/i],[B,L,[M,Me]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[B,[L,et],[M,ue]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[B,[L,"ASUS"],[M,Me]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[B,[L,"ASUS"],[M,ue]],[/(nexus 9)/i],[B,[L,"HTC"],[M,Me]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[L,[B,/_/g," "],[M,ue]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[B,[L,"Acer"],[M,Me]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[B,[L,"Meizu"],[M,ue]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[B,[L,"Ulefone"],[M,ue]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[L,B,[M,ue]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[L,B,[M,Me]],[/(surface duo)/i],[B,[L,Nt],[M,Me]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[B,[L,"Fairphone"],[M,ue]],[/(u304aa)/i],[B,[L,"AT&T"],[M,ue]],[/\bsie-(\w*)/i],[B,[L,"Siemens"],[M,ue]],[/\b(rct\w+) b/i],[B,[L,"RCA"],[M,Me]],[/\b(venue[\d ]{2,7}) b/i],[B,[L,"Dell"],[M,Me]],[/\b(q(?:mv|ta)\w+) b/i],[B,[L,"Verizon"],[M,Me]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[B,[L,"Barnes & Noble"],[M,Me]],[/\b(tm\d{3}\w+) b/i],[B,[L,"NuVision"],[M,Me]],[/\b(k88) b/i],[B,[L,"ZTE"],[M,Me]],[/\b(nx\d{3}j) b/i],[B,[L,"ZTE"],[M,ue]],[/\b(gen\d{3}) b.+49h/i],[B,[L,"Swiss"],[M,ue]],[/\b(zur\d{3}) b/i],[B,[L,"Swiss"],[M,Me]],[/\b((zeki)?tb.*\b) b/i],[B,[L,"Zeki"],[M,Me]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[L,"Dragon Touch"],B,[M,Me]],[/\b(ns-?\w{0,9}) b/i],[B,[L,"Insignia"],[M,Me]],[/\b((nxa|next)-?\w{0,9}) b/i],[B,[L,"NextBook"],[M,Me]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[L,"Voice"],B,[M,ue]],[/\b(lvtel\-)?(v1[12]) b/i],[[L,"LvTel"],B,[M,ue]],[/\b(ph-1) /i],[B,[L,"Essential"],[M,ue]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[B,[L,"Envizen"],[M,Me]],[/\b(trio[-\w\. ]+) b/i],[B,[L,"MachSpeed"],[M,Me]],[/\btu_(1491) b/i],[B,[L,"Rotor"],[M,Me]],[/(shield[\w ]+) b/i],[B,[L,"Nvidia"],[M,Me]],[/(sprint) (\w+)/i],[L,B,[M,ue]],[/(kin\.[onetw]{3})/i],[[B,/\./g," "],[L,Nt],[M,ue]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[B,[L,It],[M,Me]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[B,[L,It],[M,ue]],[/smart-tv.+(samsung)/i],[L,[M,Q]],[/hbbtv.+maple;(\d+)/i],[[B,/^/,"SmartTV"],[L,ht],[M,Q]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[L,"LG"],[M,Q]],[/(apple) ?tv/i],[L,[B,Ee+" TV"],[M,Q]],[/crkey/i],[[B,ot+"cast"],[L,St],[M,Q]],[/droid.+aft(\w+)( bui|\))/i],[B,[L,x],[M,Q]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[B,[L,"Sharp"],[M,Q]],[/(bravia[\w ]+)( bui|\))/i],[B,[L,zt],[M,Q]],[/(mitv-\w{5}) bui/i],[B,[L,mt],[M,Q]],[/Hbbtv.*(technisat) (.*);/i],[L,B,[M,Q]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[L,q],[B,q],[M,Q]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[M,Q]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[L,B,[M,pe]],[/droid.+; (shield) bui/i],[B,[L,"Nvidia"],[M,pe]],[/(playstation [345portablevi]+)/i],[B,[L,zt],[M,pe]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[B,[L,Nt],[M,pe]],[/((pebble))app/i],[L,B,[M,Se]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[B,[L,Ee],[M,Se]],[/droid.+; (glass) \d/i],[B,[L,St],[M,Se]],[/droid.+; (wt63?0{2,3})\)/i],[B,[L,It],[M,Se]],[/(quest( 2| pro)?)/i],[B,[L,je],[M,Se]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[L,[M,Le]],[/(aeobc)\b/i],[B,[L,x],[M,Le]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[B,[M,ue]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[B,[M,Me]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[M,Me]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[M,ue]],[/(android[-\w\. ]{0,9});.+buil/i],[B,[L,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[K,[T,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[K,[T,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[T,K],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[K,T]],os:[[/microsoft (windows) (vista|xp)/i],[T,K],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[T,[K,_e,rt]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[K,_e,rt],[T,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[K,/_/g,"."],[T,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[T,"Mac OS"],[K,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[K,T],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[T,K],[/\(bb(10);/i],[K,[T,et]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[K,[T,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[K,[T,gt+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[K,[T,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[K,[T,"watchOS"]],[/crkey\/([\d\.]+)/i],[K,[T,ot+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[T,ze],K],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[T,K],[/(sunos) ?([\w\.\d]*)/i],[[T,"Solaris"],K],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[T,K]]},at=function(vt,Bt){if(typeof vt===V&&(Bt=vt,vt=E),!(this instanceof at))return new at(vt,Bt).getResult();var un=typeof G!==F&&G.navigator?G.navigator:E,Zt=vt||(un&&un.userAgent?un.userAgent:""),kn=un&&un.userAgentData?un.userAgentData:E,vn=Bt?function(Tn,sr){var Or={};for(var ei in Tn)Or[ei]=sr[ei]&&sr[ei].length%2==0?sr[ei].concat(Tn[ei]):Tn[ei];return Or}(xt,Bt):xt,xn=un&&un.userAgent==Zt;return this.getBrowser=function(){var Tn,sr={};return sr[T]=E,sr[K]=E,Ie.call(sr,Zt,vn.browser),sr[j]=typeof(Tn=sr[K])===D?Tn.replace(/[^\d\.]/g,"").split(".")[0]:E,xn&&un&&un.brave&&typeof un.brave.isBrave==_&&(sr[T]="Brave"),sr},this.getCPU=function(){var Tn={};return Tn[ce]=E,Ie.call(Tn,Zt,vn.cpu),Tn},this.getDevice=function(){var Tn={};return Tn[L]=E,Tn[B]=E,Tn[M]=E,Ie.call(Tn,Zt,vn.device),xn&&!Tn[M]&&kn&&kn.mobile&&(Tn[M]=ue),xn&&"Macintosh"==Tn[B]&&un&&typeof un.standalone!==F&&un.maxTouchPoints&&un.maxTouchPoints>2&&(Tn[B]="iPad",Tn[M]=Me),Tn},this.getEngine=function(){var Tn={};return Tn[T]=E,Tn[K]=E,Ie.call(Tn,Zt,vn.engine),Tn},this.getOS=function(){var Tn={};return Tn[T]=E,Tn[K]=E,Ie.call(Tn,Zt,vn.os),xn&&!Tn[T]&&kn&&"Unknown"!=kn.platform&&(Tn[T]=kn.platform.replace(/chrome os/i,ze).replace(/macos/i,"Mac OS")),Tn},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Zt},this.setUA=function(Tn){return Zt=typeof Tn===D&&Tn.length>500?q(Tn,500):Tn,this},this.setUA(Zt),this};at.VERSION="1.0.37",at.BROWSER=N([T,K,j]),at.CPU=N([ce]),at.DEVICE=N([B,L,M,pe,ue,Q,Me,Se,Le]),at.ENGINE=at.OS=N([T,K]),typeof Qe!==F?(Vt.exports&&(Qe=Vt.exports=at),Qe.UAParser=at):ne.amdO?(Ce=function(){return at}.call(Qe,ne,Qe,Vt))===E||(Vt.exports=Ce):typeof G!==F&&(G.UAParser=at);var ut=typeof G!==F&&(G.jQuery||G.Zepto);if(ut&&!ut.ua){var it=new at;ut.ua=it.getResult(),ut.ua.get=function(){return it.getUA()},ut.ua.set=function(vt){it.setUA(vt);var Bt=it.getResult();for(var un in Bt)ut.ua[un]=Bt[un]}}}("object"==typeof window?window:this)},7839:function(Vt,Qe,ne){function Ce(G){try{if(!ne.g.localStorage)return!1}catch{return!1}var E=ne.g.localStorage[G];return null!=E&&"true"===String(E).toLowerCase()}Vt.exports=function(G,E){if(Ce("noDeprecation"))return G;var _=!1;return function(){if(!_){if(Ce("throwDeprecation"))throw new Error(E);Ce("traceDeprecation")?console.trace(E):console.warn(E),_=!0}return G.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(Vt){"use strict";Vt.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(Vt){"use strict";Vt.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(Vt){"use strict";Vt.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(Vt){"use strict";Vt.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(Vt){"use strict";Vt.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(Vt){"use strict";Vt.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},Ci={};function _r(Vt){var Qe=Ci[Vt];if(void 0!==Qe)return Qe.exports;var ne=Ci[Vt]={exports:{}};return Jr[Vt].call(ne.exports,ne,ne.exports,_r),ne.exports}_r.amdO={},_r.n=function(Vt){var Qe=Vt&&Vt.__esModule?function(){return Vt.default}:function(){return Vt};return _r.d(Qe,{a:Qe}),Qe},_r.d=function(Vt,Qe){for(var ne in Qe)_r.o(Qe,ne)&&!_r.o(Vt,ne)&&Object.defineProperty(Vt,ne,{enumerable:!0,get:Qe[ne]})},_r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),_r.o=function(Vt,Qe){return Object.prototype.hasOwnProperty.call(Vt,Qe)};var hr={};return function(){"use strict";_r.d(hr,{default:function(){return V}}),_r(8416);var Vt,Qe=_r(1715),ne=_r(8080),Ce=_r(1737),G=_r(1139),E=function(){var D,j="application/dash+xml";function B(M,L,K){if(!M||!/^VIDEO$/i.test(M.nodeName))return null;if(M._dashjs_player)return M._dashjs_player;var ce,pe=M.id||M.name||"video element";if(!(L=L||[].slice.call(M.querySelectorAll("source")).filter(function(ue){return ue.type==j})[0])&&M.src)(L=document.createElement("source")).src=M.src;else if(!L&&!M.src)return null;return(ce=(0,G.Z)(K=K||{}).create()).initialize(M,L.src,M.autoplay),D||(D=ce.getDebug().getLogger()),D.debug("Converted "+pe+" to dash.js player and added content: "+L.src),M._dashjs_player=ce,ce}function T(M){return/^VIDEO$/i.test(M.nodeName)?M:T(M.parentNode)}return{create:B,createAll:function(M,L){var K=[];M=M||"[data-dashjs-player]";for(var ce=(L=L||document).querySelectorAll(M),pe=0;pe<ce.length;pe++){var ue=B(ce[pe],null);K.push(ue)}for(var Me=L.querySelectorAll('source[type="'+j+'"]'),Q=0;Q<Me.length;Q++){var Se=B(T(Me[Q]),null);K.push(Se)}return K}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?E.createAll():Vt=window.setInterval(function(){window.dashjs&&(window.clearInterval(Vt),E.createAll())},500):window.addEventListener("load",function D(){window.removeEventListener("load",D),E.createAll()}));var _=E,F=_r(6398);dashjs.Protection=Ce.default,dashjs.MetricsReporting=ne.default,dashjs.MediaPlayerFactory=_,dashjs.Debug=F.Z,dashjs.supportsMediaSource=Qe.B;var V=dashjs}(),hr.default}()},857:Na=>{!function Jr(Ci){Na.exports=function(){"use strict";function _r(g,d){var c=Object.keys(g);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(g);d&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(g,o).enumerable})),c.push.apply(c,i)}return c}function hr(g){for(var d=1;d<arguments.length;d++){var c=null!=arguments[d]?arguments[d]:{};d%2?_r(Object(c),!0).forEach(function(i){G(g,i,c[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(c)):_r(Object(c)).forEach(function(i){Object.defineProperty(g,i,Object.getOwnPropertyDescriptor(c,i))})}return g}function Qe(g){var d=function Vt(g,d){if("object"!=typeof g||!g)return g;var c=g[Symbol.toPrimitive];if(void 0!==c){var i=c.call(g,d||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===d?String:Number)(g)}(g,"string");return"symbol"==typeof d?d:String(d)}function ne(g,d){for(var c=0;c<d.length;c++){var i=d[c];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(g,Qe(i.key),i)}}function Ce(g,d,c){return d&&ne(g.prototype,d),c&&ne(g,c),Object.defineProperty(g,"prototype",{writable:!1}),g}function G(g,d,c){return(d=Qe(d))in g?Object.defineProperty(g,d,{value:c,enumerable:!0,configurable:!0,writable:!0}):g[d]=c,g}function E(){return E=Object.assign?Object.assign.bind():function(g){for(var d=1;d<arguments.length;d++){var c=arguments[d];for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&(g[i]=c[i])}return g},E.apply(this,arguments)}function _(g,d){g.prototype=Object.create(d.prototype),g.prototype.constructor=g,V(g,d)}function F(g){return(F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)})(g)}function V(g,d){return(V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i})(g,d)}function j(g,d,c){return(j=function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(o,u,h){var p=[null];p.push.apply(p,u);var y=new(Function.bind.apply(o,p));return h&&V(y,h.prototype),y}).apply(null,arguments)}function T(g){var d="function"==typeof Map?new Map:void 0;return T=function(i){if(null===i||!function B(g){try{return-1!==Function.toString.call(g).indexOf("[native code]")}catch{return"function"==typeof g}}(i))return i;if("function"!=typeof i)throw new TypeError("Super expression must either be null or a function");if(typeof d<"u"){if(d.has(i))return d.get(i);d.set(i,o)}function o(){return j(i,arguments,F(this).constructor)}return o.prototype=Object.create(i.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),V(o,i)},T(g)}function K(g,d){(null==d||d>g.length)&&(d=g.length);for(var c=0,i=new Array(d);c<d;c++)i[c]=g[c];return i}function ce(g,d){var c=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(c)return(c=c.call(g)).next.bind(c);if(Array.isArray(g)||(c=function L(g,d){if(g){if("string"==typeof g)return K(g,d);var c=Object.prototype.toString.call(g).slice(8,-1);if("Object"===c&&g.constructor&&(c=g.constructor.name),"Map"===c||"Set"===c)return Array.from(g);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return K(g,d)}}(g))||d&&g&&"number"==typeof g.length){c&&(g=c);var i=0;return function(){return i>=g.length?{done:!0}:{done:!1,value:g[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pe(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var i,o,u,h,p,ue={exports:{}};i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,o=/^(?=([^\/?#]*))\1([^]*)$/,u=/(?:\/|^)\.(?=\/)/g,h=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,ue.exports=p={buildAbsoluteURL:function(v,y,C){if(C=C||{},v=v.trim(),!(y=y.trim())){if(!C.alwaysNormalize)return v;var R=p.parseURL(v);if(!R)throw new Error("Error trying to parse base URL.");return R.path=p.normalizePath(R.path),p.buildURLFromParts(R)}var U=p.parseURL(y);if(!U)throw new Error("Error trying to parse relative URL.");if(U.scheme)return C.alwaysNormalize?(U.path=p.normalizePath(U.path),p.buildURLFromParts(U)):y;var J=p.parseURL(v);if(!J)throw new Error("Error trying to parse base URL.");if(!J.netLoc&&J.path&&"/"!==J.path[0]){var se=o.exec(J.path);J.netLoc=se[1],J.path=se[2]}J.netLoc&&!J.path&&(J.path="/");var ye={scheme:J.scheme,netLoc:U.netLoc,path:null,params:U.params,query:U.query,fragment:U.fragment};if(!U.netLoc&&(ye.netLoc=J.netLoc,"/"!==U.path[0]))if(U.path){var Ae=J.path,Ue=Ae.substring(0,Ae.lastIndexOf("/")+1)+U.path;ye.path=p.normalizePath(Ue)}else ye.path=J.path,U.params||(ye.params=J.params,U.query||(ye.query=J.query));return null===ye.path&&(ye.path=C.alwaysNormalize?p.normalizePath(U.path):U.path),p.buildURLFromParts(ye)},parseURL:function(v){var y=i.exec(v);return y?{scheme:y[1]||"",netLoc:y[2]||"",path:y[3]||"",params:y[4]||"",query:y[5]||"",fragment:y[6]||""}:null},normalizePath:function(v){for(v=v.split("").reverse().join("").replace(u,"");v.length!==(v=v.replace(h,"")).length;);return v.split("").reverse().join("")},buildURLFromParts:function(v){return v.scheme+v.netLoc+v.path+v.params+v.query+v.fragment}};var Me=ue.exports,Q=Number.isFinite||function(g){return"number"==typeof g&&isFinite(g)},Se=Number.isSafeInteger||function(g){return"number"==typeof g&&Math.abs(g)<=Le},Le=Number.MAX_SAFE_INTEGER||9007199254740991,x=function(g){return g.MEDIA_ATTACHING="hlsMediaAttaching",g.MEDIA_ATTACHED="hlsMediaAttached",g.MEDIA_DETACHING="hlsMediaDetaching",g.MEDIA_DETACHED="hlsMediaDetached",g.BUFFER_RESET="hlsBufferReset",g.BUFFER_CODECS="hlsBufferCodecs",g.BUFFER_CREATED="hlsBufferCreated",g.BUFFER_APPENDING="hlsBufferAppending",g.BUFFER_APPENDED="hlsBufferAppended",g.BUFFER_EOS="hlsBufferEos",g.BUFFER_FLUSHING="hlsBufferFlushing",g.BUFFER_FLUSHED="hlsBufferFlushed",g.MANIFEST_LOADING="hlsManifestLoading",g.MANIFEST_LOADED="hlsManifestLoaded",g.MANIFEST_PARSED="hlsManifestParsed",g.LEVEL_SWITCHING="hlsLevelSwitching",g.LEVEL_SWITCHED="hlsLevelSwitched",g.LEVEL_LOADING="hlsLevelLoading",g.LEVEL_LOADED="hlsLevelLoaded",g.LEVEL_UPDATED="hlsLevelUpdated",g.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",g.LEVELS_UPDATED="hlsLevelsUpdated",g.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",g.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",g.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",g.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",g.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",g.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",g.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",g.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",g.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",g.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",g.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",g.CUES_PARSED="hlsCuesParsed",g.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",g.INIT_PTS_FOUND="hlsInitPtsFound",g.FRAG_LOADING="hlsFragLoading",g.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",g.FRAG_LOADED="hlsFragLoaded",g.FRAG_DECRYPTED="hlsFragDecrypted",g.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",g.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",g.FRAG_PARSING_METADATA="hlsFragParsingMetadata",g.FRAG_PARSED="hlsFragParsed",g.FRAG_BUFFERED="hlsFragBuffered",g.FRAG_CHANGED="hlsFragChanged",g.FPS_DROP="hlsFpsDrop",g.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",g.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",g.ERROR="hlsError",g.DESTROYING="hlsDestroying",g.KEY_LOADING="hlsKeyLoading",g.KEY_LOADED="hlsKeyLoaded",g.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",g.BACK_BUFFER_REACHED="hlsBackBufferReached",g.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",g}({}),Ee=function(g){return g.NETWORK_ERROR="networkError",g.MEDIA_ERROR="mediaError",g.KEY_SYSTEM_ERROR="keySystemError",g.MUX_ERROR="muxError",g.OTHER_ERROR="otherError",g}({}),ge=function(g){return g.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",g.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",g.KEY_SYSTEM_NO_SESSION="keySystemNoSession",g.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",g.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",g.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",g.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",g.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",g.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",g.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",g.MANIFEST_LOAD_ERROR="manifestLoadError",g.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",g.MANIFEST_PARSING_ERROR="manifestParsingError",g.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",g.LEVEL_EMPTY_ERROR="levelEmptyError",g.LEVEL_LOAD_ERROR="levelLoadError",g.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",g.LEVEL_PARSING_ERROR="levelParsingError",g.LEVEL_SWITCH_ERROR="levelSwitchError",g.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",g.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",g.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",g.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",g.FRAG_LOAD_ERROR="fragLoadError",g.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",g.FRAG_DECRYPT_ERROR="fragDecryptError",g.FRAG_PARSING_ERROR="fragParsingError",g.FRAG_GAP="fragGap",g.REMUX_ALLOC_ERROR="remuxAllocError",g.KEY_LOAD_ERROR="keyLoadError",g.KEY_LOAD_TIMEOUT="keyLoadTimeOut",g.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",g.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",g.BUFFER_APPEND_ERROR="bufferAppendError",g.BUFFER_APPENDING_ERROR="bufferAppendingError",g.BUFFER_STALLED_ERROR="bufferStalledError",g.BUFFER_FULL_ERROR="bufferFullError",g.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",g.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",g.INTERNAL_EXCEPTION="internalException",g.INTERNAL_ABORTED="aborted",g.UNKNOWN="unknown",g}({}),et=function(){},De={trace:et,debug:et,log:et,warn:et,info:et,error:et},ot=De;function St(g){for(var d=arguments.length,c=new Array(d>1?d-1:0),i=1;i<d;i++)c[i-1]=arguments[i];c.forEach(function(o){ot[o]=g[o]?g[o].bind(g):function gt(g){var d=self.console[g];return d?d.bind(self.console,"["+g+"] >"):et}(o)})}function Je(g,d){if("object"==typeof console&&!0===g||"object"==typeof g){St(g,"debug","log","info","warn","error");try{ot.log('Debug logs enabled for "'+d+'" in hls.js version 1.5.8')}catch{ot=De}}else ot=De}var Pe=ot,Nt=/^(\d+)x(\d+)$/,Ht=/(.+?)=(".*?"|.*?)(?:,|$)/g,$e=function(){function g(c){"string"==typeof c&&(c=g.parseAttrList(c)),E(this,c)}var d=g.prototype;return d.decimalInteger=function(i){var o=parseInt(this[i],10);return o>Number.MAX_SAFE_INTEGER?1/0:o},d.hexadecimalInteger=function(i){if(this[i]){var o=(this[i]||"0x").slice(2);o=(1&o.length?"0":"")+o;for(var u=new Uint8Array(o.length/2),h=0;h<o.length/2;h++)u[h]=parseInt(o.slice(2*h,2*h+2),16);return u}return null},d.hexadecimalIntegerAsNumber=function(i){var o=parseInt(this[i],16);return o>Number.MAX_SAFE_INTEGER?1/0:o},d.decimalFloatingPoint=function(i){return parseFloat(this[i])},d.optionalFloat=function(i,o){var u=this[i];return u?parseFloat(u):o},d.enumeratedString=function(i){return this[i]},d.bool=function(i){return"YES"===this[i]},d.decimalResolution=function(i){var o=Nt.exec(this[i]);if(null!==o)return{width:parseInt(o[1],10),height:parseInt(o[2],10)}},g.parseAttrList=function(i){var o,u={};for(Ht.lastIndex=0;null!==(o=Ht.exec(i));){var p=o[2];0===p.indexOf('"')&&p.lastIndexOf('"')===p.length-1&&(p=p.slice(1,-1)),u[o[1].trim()]=p}return u},Ce(g,[{key:"clientAttrs",get:function(){return Object.keys(this).filter(function(i){return"X-"===i.substring(0,2)})}}]),g}();function ht(g){return"ID"!==g&&"CLASS"!==g&&"START-DATE"!==g&&"DURATION"!==g&&"END-DATE"!==g&&"END-ON-NEXT"!==g}function hn(g){return"SCTE35-OUT"===g||"SCTE35-IN"===g}var zt=function(){function g(d,c){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,c){var i=c.attr;for(var o in i)if(Object.prototype.hasOwnProperty.call(d,o)&&d[o]!==i[o]){Pe.warn('DATERANGE tag attribute: "'+o+'" does not match for tags with ID: "'+d.ID+'"'),this._badValueForSameId=o;break}d=E(new $e({}),i,d)}if(this.attr=d,this._startDate=new Date(d["START-DATE"]),"END-DATE"in this.attr){var u=new Date(this.attr["END-DATE"]);Q(u.getTime())&&(this._endDate=u)}}return Ce(g,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var c=this.duration;return null!==c?new Date(this._startDate.getTime()+1e3*c):null}},{key:"duration",get:function(){if("DURATION"in this.attr){var c=this.attr.decimalFloatingPoint("DURATION");if(Q(c))return c}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}},{key:"endOnNext",get:function(){return this.attr.bool("END-ON-NEXT")}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&Q(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),g}(),mt=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}},It_AUDIO="audio",It_VIDEO="video",It_AUDIOVIDEO="audiovideo",je=function(){function g(c){var i;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((i={})[It_AUDIO]=null,i[It_VIDEO]=null,i[It_AUDIOVIDEO]=null,i),this.baseurl=c}return g.prototype.setByteRange=function(i,o){var h,u=i.split("@",2);h=1===u.length?o?.byteRangeEndOffset||0:parseInt(u[1]),this._byteRange=[h,parseInt(u[0])+h]},Ce(g,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Me.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(i){this._url=i}}]),g}(),ze=function(g){function d(i,o){var u;return(u=g.call(this,o)||this)._decryptdata=null,u.rawProgramDateTime=null,u.programDateTime=null,u.tagList=[],u.duration=0,u.sn=0,u.levelkeys=void 0,u.type=void 0,u.loader=null,u.keyLoader=null,u.level=-1,u.cc=0,u.startPTS=void 0,u.endPTS=void 0,u.startDTS=void 0,u.endDTS=void 0,u.start=0,u.deltaPTS=void 0,u.maxStartPTS=void 0,u.minEndPTS=void 0,u.stats=new mt,u.data=void 0,u.bitrateTest=!1,u.title=null,u.initSegment=null,u.endList=void 0,u.gap=void 0,u.urlId=0,u.type=i,u}_(d,g);var c=d.prototype;return c.setKeyFormat=function(o){if(this.levelkeys){var u=this.levelkeys[o];u&&!this._decryptdata&&(this._decryptdata=u.getDecryptData(this.sn))}},c.abortRequests=function(){var o,u;null==(o=this.loader)||o.abort(),null==(u=this.keyLoader)||u.abort()},c.setElementaryStreamInfo=function(o,u,h,p,v,y){void 0===y&&(y=!1);var C=this.elementaryStreams,R=C[o];R?(R.startPTS=Math.min(R.startPTS,u),R.endPTS=Math.max(R.endPTS,h),R.startDTS=Math.min(R.startDTS,p),R.endDTS=Math.max(R.endDTS,v)):C[o]={startPTS:u,endPTS:h,startDTS:p,endDTS:v,partial:y}},c.clearElementaryStreamInfo=function(){var o=this.elementaryStreams;o[It_AUDIO]=null,o[It_VIDEO]=null,o[It_AUDIOVIDEO]=null},Ce(d,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var u=this.levelkeys.identity;if(u)this._decryptdata=u.getDecryptData(this.sn);else{var h=Object.keys(this.levelkeys);if(1===h.length)return this._decryptdata=this.levelkeys[h[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime||!Q(this.programDateTime))return null;var o=Q(this.duration)?this.duration:0;return this.programDateTime+1e3*o}},{key:"encrypted",get:function(){var o;if(null!=(o=this._decryptdata)&&o.encrypted)return!0;if(this.levelkeys){var u=Object.keys(this.levelkeys),h=u.length;if(h>1||1===h&&this.levelkeys[u[0]].encrypted)return!0}return!1}}]),d}(je),bt=function(g){function d(c,i,o,u,h){var p;(p=g.call(this,o)||this).fragOffset=0,p.duration=0,p.gap=!1,p.independent=!1,p.relurl=void 0,p.fragment=void 0,p.index=void 0,p.stats=new mt,p.duration=c.decimalFloatingPoint("DURATION"),p.gap=c.bool("GAP"),p.independent=c.bool("INDEPENDENT"),p.relurl=c.enumeratedString("URI"),p.fragment=i,p.index=u;var v=c.enumeratedString("BYTERANGE");return v&&p.setByteRange(v,h),h&&(p.fragOffset=h.fragOffset+h.duration),p}return _(d,g),Ce(d,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var i=this.elementaryStreams;return!!(i.audio||i.video||i.audiovideo)}}]),d}(je),I=function(){function g(c){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=c}return g.prototype.reloaded=function(i){if(!i)return this.advanced=!0,void(this.updated=!0);var o=this.lastPartSn-i.lastPartSn,u=this.lastPartIndex-i.lastPartIndex;this.updated=this.endSN!==i.endSN||!!u||!!o||!this.live,this.advanced=this.endSN>i.endSN||o>0||0===o&&u>0,this.misses=this.updated||this.advanced?Math.floor(.6*i.misses):i.misses+1,this.availabilityDelay=i.availabilityDelay},Ce(g,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Q(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var i=this.driftEndTime-this.driftStartTime;return i>0?1e3*(this.driftEnd-this.driftStart)/i:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var i;return null!=(i=this.partList)&&i.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var i;return null!=(i=this.fragments)&&i.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var i;return null!=(i=this.partList)&&i.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var i;return null!=(i=this.partList)&&i.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),g}();function Z(g){return Uint8Array.from(atob(g),function(d){return d.charCodeAt(0)})}function _e(g){var d=g.split(":"),c=null;if("data"===d[0]&&2===d.length){var i=d[1].split(";"),o=i[i.length-1].split(",");if(2===o.length){var h=o[1];"base64"===o[0]?(i.splice(-1,1),c=Z(h)):c=function q(g){var d=rt(g).subarray(0,16),c=new Uint8Array(16);return c.set(d,16-d.length),c}(h)}}return c}function rt(g){return Uint8Array.from(unescape(encodeURIComponent(g)),function(d){return d.charCodeAt(0)})}var xt=typeof self<"u"?self:void 0,at={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},ut_CLEARKEY="org.w3.clearkey",ut_FAIRPLAY="com.apple.streamingkeydelivery",ut_PLAYREADY="com.microsoft.playready",ut_WIDEVINE="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function it(g){switch(g){case ut_FAIRPLAY:return at.FAIRPLAY;case ut_PLAYREADY:return at.PLAYREADY;case ut_WIDEVINE:return at.WIDEVINE;case ut_CLEARKEY:return at.CLEARKEY}}var vt_WIDEVINE="edef8ba979d64acea3c827dcd51d21ed";function un(g){switch(g){case at.FAIRPLAY:return ut_FAIRPLAY;case at.PLAYREADY:return ut_PLAYREADY;case at.WIDEVINE:return ut_WIDEVINE;case at.CLEARKEY:return ut_CLEARKEY}}function Zt(g){var d=g.drmSystems,c=g.widevineLicenseUrl,i=d?[at.FAIRPLAY,at.WIDEVINE,at.PLAYREADY,at.CLEARKEY].filter(function(o){return!!d[o]}):[];return!i[at.WIDEVINE]&&c&&i.push(at.WIDEVINE),i}var g,kn=null!=xt&&null!=(g=xt.navigator)&&g.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function Tn(g,d,c){return Uint8Array.prototype.slice?g.slice(d,c):new Uint8Array(Array.prototype.slice.call(g,d,c))}var dn,sr=function(d,c){return c+10<=d.length&&73===d[c]&&68===d[c+1]&&51===d[c+2]&&d[c+3]<255&&d[c+4]<255&&d[c+6]<128&&d[c+7]<128&&d[c+8]<128&&d[c+9]<128},Or=function(d,c){return c+10<=d.length&&51===d[c]&&68===d[c+1]&&73===d[c+2]&&d[c+3]<255&&d[c+4]<255&&d[c+6]<128&&d[c+7]<128&&d[c+8]<128&&d[c+9]<128},ei=function(d,c){for(var i=c,o=0;sr(d,c);)o+=10,o+=ti(d,c+6),Or(d,c+10)&&(o+=10),c+=o;if(o>0)return d.subarray(i,i+o)},ti=function(d,c){var i=0;return i=(127&d[c])<<21,i|=(127&d[c+1])<<14,(i|=(127&d[c+2])<<7)|127&d[c+3]},yi=function(d,c){return sr(d,c)&&ti(d,c+6)+10<=d.length-c},zi=function(d){for(var c=Ui(d),i=0;i<c.length;i++){var o=c[i];if(ni(o))return ha(o)}},ni=function(d){return d&&"PRIV"===d.key&&"com.apple.streaming.transportStreamTimestamp"===d.info},xo=function(d){var c=String.fromCharCode(d[0],d[1],d[2],d[3]),i=ti(d,4);return{type:c,size:i,data:d.subarray(10,10+i)}},Ui=function(d){for(var c=0,i=[];sr(d,c);){for(var o=ti(d,c+6),u=(c+=10)+o;c+8<u;){var h=xo(d.subarray(c)),p=mo(h);p&&i.push(p),c+=h.size+10}Or(d,c)&&(c+=10)}return i},mo=function(d){return"PRIV"===d.type?Zo(d):"W"===d.type[0]?ea(d):vo(d)},Zo=function(d){if(!(d.size<2)){var c=Co(d.data,!0),i=new Uint8Array(d.data.subarray(c.length+1));return{key:d.type,info:c,data:i.buffer}}},vo=function(d){if(!(d.size<2)){if("TXXX"===d.type){var c=1,i=Co(d.data.subarray(c),!0),o=Co(d.data.subarray(c+=i.length+1));return{key:d.type,info:i,data:o}}var u=Co(d.data.subarray(1));return{key:d.type,data:u}}},ea=function(d){if("WXXX"===d.type){if(d.size<2)return;var c=1,i=Co(d.data.subarray(c),!0),o=Co(d.data.subarray(c+=i.length+1));return{key:d.type,info:i,data:o}}var u=Co(d.data);return{key:d.type,data:u}},ha=function(d){if(8===d.data.byteLength){var c=new Uint8Array(d.data),o=(c[4]<<23)+(c[5]<<15)+(c[6]<<7)+c[7];return o/=45,1&c[3]&&(o+=47721858.84),Math.round(o)}},Co=function(d,c){void 0===c&&(c=!1);var i=function fn(){if(!navigator.userAgent.includes("PlayStation 4"))return!dn&&typeof self.TextDecoder<"u"&&(dn=new self.TextDecoder("utf-8")),dn}();if(i){var o=i.decode(d);if(c){var u=o.indexOf("\0");return-1!==u?o.substring(0,u):o}return o.replace(/\0/g,"")}for(var p,v,y,h=d.length,C="",R=0;R<h;){if(0===(p=d[R++])&&c)return C;if(0!==p&&3!==p)switch(p>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:C+=String.fromCharCode(p);break;case 12:case 13:v=d[R++],C+=String.fromCharCode((31&p)<<6|63&v);break;case 14:v=d[R++],y=d[R++],C+=String.fromCharCode((15&p)<<12|(63&v)<<6|(63&y)<<0)}}return C};var sn_hexDump=function(d){for(var c="",i=0;i<d.length;i++){var o=d[i].toString(16);o.length<2&&(o="0"+o),c+=o}return c},Tt=Math.pow(2,32)-1,en=[].push,wt={video:1,audio:2,id3:3,text:4};function Pt(g){return String.fromCharCode.apply(null,g)}function In(g,d){var c=g[d]<<8|g[d+1];return c<0?65536+c:c}function Qt(g,d){var c=Xn(g,d);return c<0?4294967296+c:c}function jn(g,d){var c=Qt(g,d);return(c*=Math.pow(2,32))+Qt(g,d+4)}function Xn(g,d){return g[d]<<24|g[d+1]<<16|g[d+2]<<8|g[d+3]}function Pn(g,d,c){g[d]=c>>24,g[d+1]=c>>16&255,g[d+2]=c>>8&255,g[d+3]=255&c}function En(g,d){var c=[];if(!d.length)return c;for(var i=g.byteLength,o=0;o<i;){var u=Qt(g,o),p=u>1?o+u:i;if(Pt(g.subarray(o+4,o+8))===d[0])if(1===d.length)c.push(g.subarray(o+8,p));else{var v=En(g.subarray(o+8,p),d.slice(1));v.length&&en.apply(c,v)}o=p}return c}function qn(g){var d=[],c=g[0],i=8,o=Qt(g,i);i+=4;var u=0,h=0;0===c?(u=Qt(g,i),h=Qt(g,i+4),i+=8):(u=jn(g,i),h=jn(g,i+8),i+=16);var p=g.length+h,v=In(g,i+=2);i+=2;for(var y=0;y<v;y++){var C=i,R=Qt(g,C);C+=4;var U=2147483647&R;if(1==(2147483648&R)>>>31)return Pe.warn("SIDX has hierarchical references (not supported)"),null;var se=Qt(g,C);C+=4,d.push({referenceSize:U,subsegmentDuration:se,info:{duration:se/o,start:p,end:p+U-1}}),p+=U,i=C+=4}return{earliestPresentationTime:u,timescale:o,version:c,referencesCount:v,references:d}}function fr(g){for(var d=[],c=En(g,["moov","trak"]),i=0;i<c.length;i++){var o=c[i],u=En(o,["tkhd"])[0];if(u){var h=u[0],p=Qt(u,0===h?12:20),v=En(o,["mdia","mdhd"])[0];if(v){var y=Qt(v,0===(h=v[0])?12:20),C=En(o,["mdia","hdlr"])[0];if(C){var R=Pt(C.subarray(8,12)),U={soun:It_AUDIO,vide:It_VIDEO}[R];if(U){var se=Fr(En(o,["mdia","minf","stbl","stsd"])[0]);d[p]={timescale:y,type:U},d[U]=hr({timescale:y,id:p},se)}}}}}return En(g,["moov","mvex","trex"]).forEach(function(Ae){var Ue=Qt(Ae,4),Ke=d[Ue];Ke&&(Ke.default={duration:Qt(Ae,12),flags:Qt(Ae,20)})}),d}function Fr(g){var d=g.subarray(8),c=d.subarray(86),i=Pt(d.subarray(4,8)),o=i,u="enca"===i||"encv"===i;if(u){var h=En(d,[i])[0];En(h.subarray("enca"===i?28:78),["sinf"]).forEach(function(bo){var sa=En(bo,["schm"])[0];if(sa){var Ji=Pt(sa.subarray(4,8));if("cbcs"===Ji||"cenc"===Ji){var la=En(bo,["frma"])[0];la&&(o=Pt(la))}}})}switch(o){case"avc1":case"avc2":case"avc3":case"avc4":var y=En(c,["avcC"])[0];o+="."+rr(y[1])+rr(y[2])+rr(y[3]);break;case"mp4a":var C=En(d,[i])[0],R=En(C.subarray(28),["esds"])[0];if(R&&R.length>12){var U=4;if(3!==R[U++])break;U=Ur(R,U),U+=2;var J=R[U++];if(128&J&&(U+=2),64&J&&(U+=R[U++]),4!==R[U++])break;U=Ur(R,U);var se=R[U++];if(64!==se)break;if(o+="."+rr(se),U+=12,5!==R[U++])break;U=Ur(R,U);var ye=R[U++],Ae=(248&ye)>>3;31===Ae&&(Ae+=1+((7&ye)<<3)+((224&R[U])>>5)),o+="."+Ae}break;case"hvc1":case"hev1":var Ue=En(c,["hvcC"])[0],Ke=Ue[1],Xe=["","A","B","C"][Ke>>6],pt=31&Ke,yt=Qt(Ue,2),nn=(32&Ke)>>5?"H":"L",qt=Ue[12],Dt=Ue.subarray(6,12);o+="."+Xe+pt,o+="."+yt.toString(16).toUpperCase(),o+="."+nn+qt;for(var on="",an=Dt.length;an--;){var Sn=Dt[an];(Sn||on)&&(on="."+Sn.toString(16).toUpperCase()+on)}o+=on;break;case"dvh1":case"dvhe":var Qn=En(c,["dvcC"])[0],mr=Qn[2]<<5&32|Qn[3]>>3&31;o+="."+tn(Qn[2]>>1&127)+"."+tn(mr);break;case"vp09":var Pr=En(c,["vpcC"])[0],Xr=Pr[5],oi=Pr[6]>>4&15;o+="."+tn(Pr[4])+"."+tn(Xr)+"."+tn(oi);break;case"av01":var kr=En(c,["av1C"])[0],Fi=kr[1]>>>5,so=kr[2]>>>7?"H":"M",lo=(64&kr[2])>>6,Ai=2===Fi&&lo?(32&kr[2])>>5?12:10:lo?10:8,Wi=(16&kr[2])>>4,Xo=(8&kr[2])>>3,Ca=(4&kr[2])>>2,vi=3&kr[2];o+="."+Fi+"."+tn(31&kr[1])+so+"."+tn(Ai)+"."+Wi+"."+Xo+Ca+vi+"."+tn(1)+"."+tn(1)+"."+tn(1)+".0"}return{codec:o,encrypted:u}}function Ur(g,d){for(var c=d+5;128&g[d++]&&d<c;);return d}function rr(g){return("0"+g.toString(16).toUpperCase()).slice(-2)}function tn(g){return(g<10?"0":"")+g}function On(g){var d=En(g,["schm"])[0];if(d){var c=Pt(d.subarray(4,8));if("cbcs"===c||"cenc"===c)return En(g,["schi","tenc"])[0]}return Pe.error("[eme] missing 'schm' box"),null}function qr(g){var d=Qt(g,0),c=8;1&d&&(c+=4),4&d&&(c+=4);for(var i=0,o=Qt(g,4),u=0;u<o;u++)256&d&&(i+=Qt(g,c),c+=4),512&d&&(c+=4),1024&d&&(c+=4),2048&d&&(c+=4);return i}function pi(g,d){var c=new Uint8Array(g.length+d.length);return c.set(g),c.set(d,g.length),c}function Ei(g,d){var c=[],i=d.samples,o=d.timescale,u=d.id,h=!1;return En(i,["moof"]).map(function(v){var y=v.byteOffset-8;En(v,["traf"]).map(function(R){var U=En(R,["tfdt"]).map(function(J){var se=J[0],ye=Qt(J,4);return 1===se&&(ye*=Math.pow(2,32),ye+=Qt(J,8)),ye/o})[0];return void 0!==U&&(g=U),En(R,["tfhd"]).map(function(J){var se=Qt(J,4),ye=16777215&Qt(J,0),Xe=0,pt=0!=(16&ye),yt=0,nn=0!=(32&ye),qt=8;se===u&&(0!=(1&ye)&&(qt+=8),0!=(2&ye)&&(qt+=4),0!=(8&ye)&&(Xe=Qt(J,qt),qt+=4),pt&&(yt=Qt(J,qt),qt+=4),nn&&(qt+=4),"video"===d.type&&(h=function Gi(g){if(!g)return!1;var d=g.indexOf("."),c=d<0?g:g.substring(0,d);return"hvc1"===c||"hev1"===c||"dvh1"===c||"dvhe"===c}(d.codec)),En(R,["trun"]).map(function(Dt){var on=Dt[0],an=16777215&Qt(Dt,0),Sn=0!=(1&an),Rn=0,Qn=0!=(4&an),or=0!=(256&an),mr=0,Pr=0!=(512&an),Hr=0,Xr=0!=(1024&an),oi=0!=(2048&an),kr=0,Fi=Qt(Dt,4),bi=8;Sn&&(Rn=Qt(Dt,bi),bi+=4),Qn&&(bi+=4);for(var so=Rn+y,lo=0;lo<Fi;lo++){if(or?(mr=Qt(Dt,bi),bi+=4):mr=Xe,Pr?(Hr=Qt(Dt,bi),bi+=4):Hr=yt,Xr&&(bi+=4),oi&&(kr=0===on?Qt(Dt,bi):Xn(Dt,bi),bi+=4),d.type===It_VIDEO)for(var So=0;So<Hr;){var Ai=Qt(i,so);Mi(h,i[so+=4])&&to(i.subarray(so,so+Ai),h?2:1,g+kr/o,c),so+=Ai,So+=Ai+4}g+=mr/o}}))})})}),c}function Mi(g,d){if(g){var c=d>>1&63;return 39===c||40===c}return 6==(31&d)}function to(g,d,c,i){var o=Za(g),u=0;u+=d;for(var h=0,p=0,v=0;u<o.length;){h=0;do{if(u>=o.length)break;h+=v=o[u++]}while(255===v);p=0;do{if(u>=o.length)break;p+=v=o[u++]}while(255===v);var y=o.length-u,C=u;if(p<y)u+=p;else if(p>y){Pe.error("Malformed SEI payload. "+p+" is too small, only "+y+" bytes left to parse.");break}if(4===h){if(181===o[C++]){var U=In(o,C);if(C+=2,49===U){var J=Qt(o,C);if(C+=4,1195456820===J){var se=o[C++];if(3===se){var ye=o[C++],Ue=64&ye,Ke=Ue?2+3*(31&ye):0,Xe=new Uint8Array(Ke);if(Ue){Xe[0]=ye;for(var pt=1;pt<Ke;pt++)Xe[pt]=o[C++]}i.push({type:se,payloadType:h,pts:c,bytes:Xe})}}}}}else if(5===h&&p>16){for(var yt=[],nn=0;nn<16;nn++){var qt=o[C++].toString(16);yt.push(1==qt.length?"0"+qt:qt),(3===nn||5===nn||7===nn||9===nn)&&yt.push("-")}for(var Dt=p-16,on=new Uint8Array(Dt),an=0;an<Dt;an++)on[an]=o[C++];i.push({payloadType:h,pts:c,uuid:yt.join(""),userData:Co(on),userDataBytes:on})}}}function Za(g){for(var d=g.byteLength,c=[],i=1;i<d-2;)0===g[i]&&0===g[i+1]&&3===g[i+2]?(c.push(i+2),i+=2):i++;if(0===c.length)return g;var o=d-c.length,u=new Uint8Array(o),h=0;for(i=0;i<o;h++,i++)h===c[0]&&(h++,c.shift()),u[i]=g[h];return u}function yo(g,d,c){if(16!==g.byteLength)throw new RangeError("Invalid system id");var i,o,p;if(d){i=1,o=new Uint8Array(16*d.length);for(var u=0;u<d.length;u++){var h=d[u];if(16!==h.byteLength)throw new RangeError("Invalid key");o.set(h,16*u)}}else i=0,o=new Uint8Array;i>0?(p=new Uint8Array(4),d.length>0&&new DataView(p.buffer).setUint32(0,d.length,!1)):p=new Uint8Array;var v=new Uint8Array(4);return c&&c.byteLength>0&&new DataView(v.buffer).setUint32(0,c.byteLength,!1),function ga(g){for(var d=arguments.length,c=new Array(d>1?d-1:0),i=1;i<d;i++)c[i-1]=arguments[i];for(var o=c.length,u=8,h=o;h--;)u+=c[h].byteLength;var p=new Uint8Array(u);for(p[0]=u>>24&255,p[1]=u>>16&255,p[2]=u>>8&255,p[3]=255&u,p.set(g,4),h=0,u=8;h<o;h++)p.set(c[h],u),u+=c[h].byteLength;return p}([112,115,115,104],new Uint8Array([i,0,0,0]),g,p,o,v,c||new Uint8Array)}var ja={},qa=function(){function g(c,i,o,u,h){void 0===u&&(u=[1]),void 0===h&&(h=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=c,this.uri=i,this.keyFormat=o,this.keyFormatVersions=u,this.iv=h,this.encrypted=!!c&&"NONE"!==c,this.isCommonEncryption=this.encrypted&&"AES-128"!==c}g.clearKeyUriToKeyIdMap=function(){ja={}};var d=g.prototype;return d.isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case ut_FAIRPLAY:case ut_WIDEVINE:case ut_PLAYREADY:case ut_CLEARKEY:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},d.getDecryptData=function(i){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof i&&("AES-128"===this.method&&!this.iv&&Pe.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),i=0);var o=function Yl(g){for(var d=new Uint8Array(16),c=12;c<16;c++)d[c]=g>>8*(15-c)&255;return d}(i);return new g(this.method,this.uri,"identity",this.keyFormatVersions,o)}var h=_e(this.uri);if(h)switch(this.keyFormat){case ut_WIDEVINE:this.pssh=h,h.length>=22&&(this.keyId=h.subarray(h.length-22,h.length-6));break;case ut_PLAYREADY:var p=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=yo(p,null,h);var v=new Uint16Array(h.buffer,h.byteOffset,h.byteLength/2),y=String.fromCharCode.apply(null,Array.from(v)),C=y.substring(y.indexOf("<"),y.length),J=(new DOMParser).parseFromString(C,"text/xml").getElementsByTagName("KID")[0];if(J){var se=J.childNodes[0]?J.childNodes[0].nodeValue:J.getAttribute("VALUE");if(se){var ye=Z(se).subarray(0,16);(function Ie(g){var d=function(i,o,u){var h=i[o];i[o]=i[u],i[u]=h};d(g,0,3),d(g,1,2),d(g,4,5),d(g,6,7)})(ye),this.keyId=ye}}break;default:var Ae=h.subarray(0,16);if(16!==Ae.length){var Ue=new Uint8Array(16);Ue.set(Ae,16-Ae.length),Ae=Ue}this.keyId=Ae}if(!this.keyId||16!==this.keyId.byteLength){var Ke=ja[this.uri];if(!Ke){var Xe=Object.keys(ja).length%Number.MAX_SAFE_INTEGER;Ke=new Uint8Array(16),new DataView(Ke.buffer,12,4).setUint32(0,Xe),ja[this.uri]=Ke}this.keyId=Ke}return this},g}();var El=/\{\$([a-zA-Z0-9-_]+)\}/g;function Ka(g){return El.test(g)}function yn(g,d,c){if(null!==g.variableList||g.hasVariableRefs)for(var i=c.length;i--;){var o=c[i],u=d[o];u&&(d[o]=ir(g,u))}}function ir(g,d){if(null!==g.variableList||g.hasVariableRefs){var c=g.variableList;return d.replace(El,function(i){var o=i.substring(2,i.length-1),u=c?.[o];return void 0===u?(g.playlistParsingError||(g.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'+o+'"')),i):u})}return d}function Ar(g,d,c){var o,u,i=g.variableList;if(i||(g.variableList=i={}),"QUERYPARAM"in d){o=d.QUERYPARAM;try{var h=new self.URL(c).searchParams;if(!h.has(o))throw new Error('"'+o+'" does not match any query parameter in URI: "'+c+'"');u=h.get(o)}catch(p){g.playlistParsingError||(g.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: "+p.message))}}else o=d.NAME,u=d.VALUE;o in i?g.playlistParsingError||(g.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'+o+'"')):i[o]=u||""}function Oi(g,d,c){var i=d.IMPORT;if(c&&i in c){var o=g.variableList;o||(g.variableList=o={}),o[i]=c[i]}else g.playlistParsingError||(g.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'+i+'"'))}function Kr(g){if(void 0===g&&(g=!0),!(typeof self>"u"))return(g||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}var ri={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Ni(g,d,c){return void 0===c&&(c=!0),!g.split(",").some(function(i){return!_i(i,d,c)})}function _i(g,d,c){var i;void 0===c&&(c=!0);var o=Kr(c);return null!=(i=o?.isTypeSupported(Nr(g,d)))&&i}function Nr(g,d){return d+'/mp4;codecs="'+g+'"'}function dr(g){if(g){var d=g.substring(0,4);return ri.video[d]}return 2}function Io(g){return g.split(",").reduce(function(d,c){var i=ri.video[c];return i?(2*i+d)/(d?3:2):(ri.audio[c]+d)/(d?2:1)},0)}var Do={};var Ya=/flac|opus/i;function Yn(g,d){return void 0===d&&(d=!0),g.replace(Ya,function(c){return function xa(g,d){if(void 0===d&&(d=!0),Do[g])return Do[g];for(var c={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[g],i=0;i<c.length;i++)if(_i(c[i],"audio",d))return Do[g]=c[i],c[i];return g}(c.toLowerCase(),d)})}function La(g,d){return g&&"mp4a"!==g?g:d&&d.split(",")[0]}var si=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,_l=/#EXT-X-MEDIA:(.*)/g,Pc=/^#EXT(?:INF|-X-TARGETDURATION):/m,zl=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),Ys=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),Xi=function(){function g(){}return g.findGroup=function(c,i){for(var o=0;o<c.length;o++){var u=c[o];if(u.id===i)return u}},g.resolve=function(c,i){return Me.buildAbsoluteURL(i,c,{alwaysNormalize:!0})},g.isMediaPlaylist=function(c){return Pc.test(c)},g.parseMasterPlaylist=function(c,i){var p,u={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:Ka(c)},h=[];for(si.lastIndex=0;null!=(p=si.exec(c));)if(p[1]){var v,y=new $e(p[1]);yn(u,y,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);var C=ir(u,p[2]),R={attrs:y,bitrate:y.decimalInteger("BANDWIDTH")||y.decimalInteger("AVERAGE-BANDWIDTH"),name:y.NAME,url:g.resolve(C,i)},U=y.decimalResolution("RESOLUTION");U&&(R.width=U.width,R.height=U.height),Ou(y.CODECS,R),null!=(v=R.unknownCodecs)&&v.length||h.push(R),u.levels.push(R)}else if(p[3]){var se=p[4];switch(p[3]){case"SESSION-DATA":var ye=new $e(se);yn(u,ye,["DATA-ID","LANGUAGE","VALUE","URI"]);var Ae=ye["DATA-ID"];Ae&&(null===u.sessionData&&(u.sessionData={}),u.sessionData[Ae]=ye);break;case"SESSION-KEY":var Ue=Lu(se,i,u);Ue.encrypted&&Ue.isSupported()?(null===u.sessionKeys&&(u.sessionKeys=[]),u.sessionKeys.push(Ue)):Pe.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+se+'"');break;case"DEFINE":var Ke=new $e(se);yn(u,Ke,["NAME","VALUE","QUERYPARAM"]),Ar(u,Ke,i);break;case"CONTENT-STEERING":var Xe=new $e(se);yn(u,Xe,["SERVER-URI","PATHWAY-ID"]),u.contentSteering={uri:g.resolve(Xe["SERVER-URI"],i),pathwayId:Xe["PATHWAY-ID"]||"."};break;case"START":u.startTimeOffset=zs(se)}}return u.levels=h.length>0&&h.length<u.levels.length?h:u.levels,0===u.levels.length&&(u.playlistParsingError=new Error("no levels found in manifest")),u},g.parseMasterPlaylistMedia=function(c,i,o){var u,h={},p=o.levels,v={AUDIO:p.map(function(yt){return{id:yt.attrs.AUDIO,audioCodec:yt.audioCodec}}),SUBTITLES:p.map(function(yt){return{id:yt.attrs.SUBTITLES,textCodec:yt.textCodec}}),"CLOSED-CAPTIONS":[]},y=0;for(_l.lastIndex=0;null!==(u=_l.exec(c));){var C=new $e(u[1]),R=C.TYPE;if(R){var U=v[R],J=h[R]||[];h[R]=J,yn(o,C,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);var se=C.LANGUAGE,ye=C["ASSOC-LANGUAGE"],Ae=C.CHANNELS,Ue=C.CHARACTERISTICS,Ke=C["INSTREAM-ID"],Xe={attrs:C,bitrate:0,id:y++,groupId:C["GROUP-ID"]||"",name:C.NAME||se||"",type:R,default:C.bool("DEFAULT"),autoselect:C.bool("AUTOSELECT"),forced:C.bool("FORCED"),lang:se,url:C.URI?g.resolve(C.URI,i):""};if(ye&&(Xe.assocLang=ye),Ae&&(Xe.channels=Ae),Ue&&(Xe.characteristics=Ue),Ke&&(Xe.instreamId=Ke),null!=U&&U.length){var pt=g.findGroup(U,Xe.groupId)||U[0];jo(Xe,pt,"audioCodec"),jo(Xe,pt,"textCodec")}J.push(Xe)}}return h},g.parseLevelPlaylist=function(c,i,o,u,h,p){var Ue,Ke,Xe,v=new I(i),y=v.fragments,C=null,R=0,U=0,J=0,se=0,ye=null,Ae=new ze(u,i),pt=-1,yt=!1,nn=null;for(zl.lastIndex=0,v.m3u8=c,v.hasVariableRefs=Ka(c);null!==(Ue=zl.exec(c));){yt&&(yt=!1,(Ae=new ze(u,i)).start=J,Ae.sn=R,Ae.cc=se,Ae.level=o,C&&(Ae.initSegment=C,Ae.rawProgramDateTime=C.rawProgramDateTime,C.rawProgramDateTime=null,nn&&(Ae.setByteRange(nn),nn=null)));var qt=Ue[1];if(qt){Ae.duration=parseFloat(qt);var Dt=(" "+Ue[2]).slice(1);Ae.title=Dt||null,Ae.tagList.push(Dt?["INF",qt,Dt]:["INF",qt])}else if(Ue[3]){if(Q(Ae.duration)){Ae.start=J,Xe&&Ws(Ae,Xe,v),Ae.sn=R,Ae.level=o,Ae.cc=se,y.push(Ae);var on=(" "+Ue[3]).slice(1);Ae.relurl=ir(v,on),Ti(Ae,ye),ye=Ae,J+=Ae.duration,R++,U=0,yt=!0}}else if(Ue[4]){var an=(" "+Ue[4]).slice(1);ye?Ae.setByteRange(an,ye):Ae.setByteRange(an)}else if(Ue[5])Ae.rawProgramDateTime=(" "+Ue[5]).slice(1),Ae.tagList.push(["PROGRAM-DATE-TIME",Ae.rawProgramDateTime]),-1===pt&&(pt=y.length);else{if(!(Ue=Ue[0].match(Ys))){Pe.warn("No matches on slow regex match for level playlist!");continue}for(Ke=1;Ke<Ue.length&&!(typeof Ue[Ke]<"u");Ke++);var Sn=(" "+Ue[Ke]).slice(1),Rn=(" "+Ue[Ke+1]).slice(1),Qn=Ue[Ke+2]?(" "+Ue[Ke+2]).slice(1):"";switch(Sn){case"PLAYLIST-TYPE":v.type=Rn.toUpperCase();break;case"MEDIA-SEQUENCE":R=v.startSN=parseInt(Rn);break;case"SKIP":var or=new $e(Rn);yn(v,or,["RECENTLY-REMOVED-DATERANGES"]);var mr=or.decimalInteger("SKIPPED-SEGMENTS");if(Q(mr)){v.skippedSegments=mr;for(var Pr=mr;Pr--;)y.unshift(null);R+=mr}var Hr=or.enumeratedString("RECENTLY-REMOVED-DATERANGES");Hr&&(v.recentlyRemovedDateranges=Hr.split("\t"));break;case"TARGETDURATION":v.targetduration=Math.max(parseInt(Rn),1);break;case"VERSION":v.version=parseInt(Rn);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":v.live=!1;break;case"#":(Rn||Qn)&&Ae.tagList.push(Qn?[Rn,Qn]:[Rn]);break;case"DISCONTINUITY":se++,Ae.tagList.push(["DIS"]);break;case"GAP":Ae.gap=!0,Ae.tagList.push([Sn]);break;case"BITRATE":Ae.tagList.push([Sn,Rn]);break;case"DATERANGE":var Xr=new $e(Rn);yn(v,Xr,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),yn(v,Xr,Xr.clientAttrs);var oi=new zt(Xr,v.dateRanges[Xr.ID]);oi.isValid||v.skippedSegments?v.dateRanges[oi.id]=oi:Pe.warn('Ignoring invalid DATERANGE tag: "'+Rn+'"'),Ae.tagList.push(["EXT-X-DATERANGE",Rn]);break;case"DEFINE":var kr=new $e(Rn);yn(v,kr,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in kr?Oi(v,kr,p):Ar(v,kr,i);break;case"DISCONTINUITY-SEQUENCE":se=parseInt(Rn);break;case"KEY":var Fi=Lu(Rn,i,v);if(Fi.isSupported()){if("NONE"===Fi.method){Xe=void 0;break}Xe||(Xe={}),Xe[Fi.keyFormat]&&(Xe=E({},Xe)),Xe[Fi.keyFormat]=Fi}else Pe.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+Rn+'"');break;case"START":v.startTimeOffset=zs(Rn);break;case"MAP":var bi=new $e(Rn);if(yn(v,bi,["BYTERANGE","URI"]),Ae.duration){var so=new ze(u,i);bs(so,bi,o,Xe),Ae.initSegment=C=so,C.rawProgramDateTime&&!Ae.rawProgramDateTime&&(Ae.rawProgramDateTime=C.rawProgramDateTime)}else{var lo=Ae.byteRangeEndOffset;if(lo){var So=Ae.byteRangeStartOffset;nn=lo-So+"@"+So}else nn=null;bs(Ae,bi,o,Xe),C=Ae,yt=!0}break;case"SERVER-CONTROL":var Ai=new $e(Rn);v.canBlockReload=Ai.bool("CAN-BLOCK-RELOAD"),v.canSkipUntil=Ai.optionalFloat("CAN-SKIP-UNTIL",0),v.canSkipDateRanges=v.canSkipUntil>0&&Ai.bool("CAN-SKIP-DATERANGES"),v.partHoldBack=Ai.optionalFloat("PART-HOLD-BACK",0),v.holdBack=Ai.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var Wi=new $e(Rn);v.partTarget=Wi.decimalFloatingPoint("PART-TARGET");break;case"PART":var Xo=v.partList;Xo||(Xo=v.partList=[]);var Ca=U>0?Xo[Xo.length-1]:void 0,vi=U++,Qo=new $e(Rn);yn(v,Qo,["BYTERANGE","URI"]);var Jo=new bt(Qo,Ae,i,vi,Ca);Xo.push(Jo),Ae.duration+=Jo.duration;break;case"PRELOAD-HINT":var ki=new $e(Rn);yn(v,ki,["URI"]),v.preloadHint=ki;break;case"RENDITION-REPORT":var $i=new $e(Rn);yn(v,$i,["URI"]),v.renditionReports=v.renditionReports||[],v.renditionReports.push($i);break;default:Pe.warn("line parsed but not handled: "+Ue)}}}ye&&!ye.relurl?(y.pop(),J-=ye.duration,v.partList&&(v.fragmentHint=ye)):v.partList&&(Ti(Ae,ye),Ae.cc=se,v.fragmentHint=Ae,Xe&&Ws(Ae,Xe,v));var bo=y.length,sa=y[0],Ji=y[bo-1];if((J+=v.skippedSegments*v.targetduration)>0&&bo&&Ji){v.averagetargetduration=J/bo;var la=Ji.sn;v.endSN="initSegment"!==la?la:0,v.live||(Ji.endList=!0),sa&&(v.startCC=sa.cc)}else v.endSN=0,v.startCC=0;return v.fragmentHint&&(J+=v.fragmentHint.duration),v.totalduration=J,v.endCC=se,pt>0&&function Fc(g,d){for(var c=g[d],i=d;i--;){var o=g[i];if(!o)return;o.programDateTime=c.programDateTime-1e3*o.duration,c=o}}(y,pt),v},g}();function Lu(g,d,c){var i,o,u=new $e(g);yn(c,u,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);var h=null!=(i=u.METHOD)?i:"",p=u.URI,v=u.hexadecimalInteger("IV"),y=u.KEYFORMATVERSIONS,C=null!=(o=u.KEYFORMAT)?o:"identity";p&&u.IV&&!v&&Pe.error("Invalid IV: "+u.IV);var R=p?Xi.resolve(p,d):"",U=(y||"1").split("/").map(Number).filter(Number.isFinite);return new qa(h,R,C,U,v)}function zs(g){var c=new $e(g).decimalFloatingPoint("TIME-OFFSET");return Q(c)?c:null}function Ou(g,d){var c=(g||"").split(/[ ,]+/).filter(function(i){return i});["video","audio","text"].forEach(function(i){var o=c.filter(function(u){return function hi(g,d){var c=ri[d];return!!c&&!!c[g.slice(0,4)]}(u,i)});o.length&&(d[i+"Codec"]=o.join(","),c=c.filter(function(u){return-1===o.indexOf(u)}))}),d.unknownCodecs=c}function jo(g,d,c){var i=d[c];i&&(g[c]=i)}function Ti(g,d){g.rawProgramDateTime?g.programDateTime=Date.parse(g.rawProgramDateTime):null!=d&&d.programDateTime&&(g.programDateTime=d.endProgramDateTime),Q(g.programDateTime)||(g.programDateTime=null,g.rawProgramDateTime=null)}function bs(g,d,c,i){g.relurl=d.URI,d.BYTERANGE&&g.setByteRange(d.BYTERANGE),g.level=c,g.sn="initSegment",i&&(g.levelkeys=i),g.initSegment=null}function Ws(g,d,c){g.levelkeys=d;var i=c.encryptedFragments;(!i.length||i[i.length-1].levelkeys!==d)&&Object.keys(d).some(function(o){return d[o].isCommonEncryption})&&i.push(g)}var Gr_MANIFEST="manifest",Gr_LEVEL="level",Gr_AUDIO_TRACK="audioTrack",Gr_SUBTITLE_TRACK="subtitleTrack",Tr_MAIN="main",Tr_AUDIO="audio",Tr_SUBTITLE="subtitle";function qo(g){switch(g.type){case Gr_AUDIO_TRACK:return Tr_AUDIO;case Gr_SUBTITLE_TRACK:return Tr_SUBTITLE;default:return Tr_MAIN}}function Tl(g,d){var c=g.url;return(void 0===c||0===c.indexOf("data:"))&&(c=d.url),c}var no=function(){function g(c){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=c,this.registerListeners()}var d=g.prototype;return d.startLoad=function(i){},d.stopLoad=function(){this.destroyInternalLoaders()},d.registerListeners=function(){var i=this.hls;i.on(x.MANIFEST_LOADING,this.onManifestLoading,this),i.on(x.LEVEL_LOADING,this.onLevelLoading,this),i.on(x.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),i.on(x.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},d.unregisterListeners=function(){var i=this.hls;i.off(x.MANIFEST_LOADING,this.onManifestLoading,this),i.off(x.LEVEL_LOADING,this.onLevelLoading,this),i.off(x.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),i.off(x.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},d.createInternalLoader=function(i){var o=this.hls.config,v=new(o.pLoader||o.loader)(o);return this.loaders[i.type]=v,v},d.getInternalLoader=function(i){return this.loaders[i.type]},d.resetInternalLoader=function(i){this.loaders[i]&&delete this.loaders[i]},d.destroyInternalLoaders=function(){for(var i in this.loaders){var o=this.loaders[i];o&&o.destroy(),this.resetInternalLoader(i)}},d.destroy=function(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()},d.onManifestLoading=function(i,o){var u=o.url;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Gr_MANIFEST,url:u,deliveryDirectives:null})},d.onLevelLoading=function(i,o){this.load({id:o.id,level:o.level,pathwayId:o.pathwayId,responseType:"text",type:Gr_LEVEL,url:o.url,deliveryDirectives:o.deliveryDirectives})},d.onAudioTrackLoading=function(i,o){this.load({id:o.id,groupId:o.groupId,level:null,responseType:"text",type:Gr_AUDIO_TRACK,url:o.url,deliveryDirectives:o.deliveryDirectives})},d.onSubtitleTrackLoading=function(i,o){this.load({id:o.id,groupId:o.groupId,level:null,responseType:"text",type:Gr_SUBTITLE_TRACK,url:o.url,deliveryDirectives:o.deliveryDirectives})},d.load=function(i){var o,y,C,u=this,h=this.hls.config,p=this.getInternalLoader(i);if(p){var v=p.context;if(v&&v.url===i.url&&v.level===i.level)return void Pe.trace("[playlist-loader]: playlist request ongoing");Pe.log("[playlist-loader]: aborting previous loader for type: "+i.type),p.abort()}if(y=i.type===Gr_MANIFEST?h.manifestLoadPolicy.default:E({},h.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),p=this.createInternalLoader(i),Q(null==(o=i.deliveryDirectives)?void 0:o.part)&&(i.type===Gr_LEVEL&&null!==i.level?C=this.hls.levels[i.level].details:i.type===Gr_AUDIO_TRACK&&null!==i.id?C=this.hls.audioTracks[i.id].details:i.type===Gr_SUBTITLE_TRACK&&null!==i.id&&(C=this.hls.subtitleTracks[i.id].details),C)){var R=C.partTarget,U=C.targetduration;if(R&&U){var J=1e3*Math.max(3*R,.8*U);y=E({},y,{maxTimeToFirstByteMs:Math.min(J,y.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(J,y.maxTimeToFirstByteMs)})}}var se=y.errorRetry||y.timeoutRetry||{};p.load(i,{loadPolicy:y,timeout:y.maxLoadTimeMs,maxRetry:se.maxNumRetry||0,retryDelay:se.retryDelayMs||0,maxRetryDelay:se.maxRetryDelayMs||0},{onSuccess:function(Ke,Xe,pt,yt){var nn=u.getInternalLoader(pt);u.resetInternalLoader(pt.type);var qt=Ke.data;0===qt.indexOf("#EXTM3U")?(Xe.parsing.start=performance.now(),Xi.isMediaPlaylist(qt)?u.handleTrackOrLevelPlaylist(Ke,Xe,pt,yt||null,nn):u.handleMasterPlaylist(Ke,Xe,pt,yt)):u.handleManifestParsingError(Ke,pt,new Error("no EXTM3U delimiter"),yt||null,Xe)},onError:function(Ke,Xe,pt,yt){u.handleNetworkError(Xe,pt,!1,Ke,yt)},onTimeout:function(Ke,Xe,pt){u.handleNetworkError(Xe,pt,!0,void 0,Ke)}})},d.handleMasterPlaylist=function(i,o,u,h){var p=this.hls,v=i.data,y=Tl(i,u),C=Xi.parseMasterPlaylist(v,y);if(C.playlistParsingError)this.handleManifestParsingError(i,u,C.playlistParsingError,h,o);else{var R=C.contentSteering,U=C.levels,J=C.sessionData,se=C.sessionKeys,ye=C.startTimeOffset,Ae=C.variableList;this.variableList=Ae;var Ue=Xi.parseMasterPlaylistMedia(v,y,C),Ke=Ue.AUDIO,Xe=void 0===Ke?[]:Ke,pt=Ue.SUBTITLES,yt=Ue["CLOSED-CAPTIONS"];Xe.length&&!Xe.some(function(qt){return!qt.url})&&U[0].audioCodec&&!U[0].attrs.AUDIO&&(Pe.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),Xe.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new $e({}),bitrate:0,url:""})),p.trigger(x.MANIFEST_LOADED,{levels:U,audioTracks:Xe,subtitles:pt,captions:yt,contentSteering:R,url:y,stats:o,networkDetails:h,sessionData:J,sessionKeys:se,startTimeOffset:ye,variableList:Ae})}},d.handleTrackOrLevelPlaylist=function(i,o,u,h,p){var v=this.hls,y=u.id,C=u.level,R=u.type,U=Tl(i,u),se=Q(C)?C:Q(y)?y:0,ye=qo(u),Ae=Xi.parseLevelPlaylist(i.data,U,se,ye,0,this.variableList);if(R===Gr_MANIFEST){var Ue={attrs:new $e({}),bitrate:0,details:Ae,name:"",url:U};v.trigger(x.MANIFEST_LOADED,{levels:[Ue],audioTracks:[],url:U,stats:o,networkDetails:h,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}o.parsing.end=performance.now(),u.levelDetails=Ae,this.handlePlaylistLoaded(Ae,i,o,u,h,p)},d.handleManifestParsingError=function(i,o,u,h,p){this.hls.trigger(x.ERROR,{type:Ee.NETWORK_ERROR,details:ge.MANIFEST_PARSING_ERROR,fatal:o.type===Gr_MANIFEST,url:i.url,err:u,error:u,reason:u.message,response:i,context:o,networkDetails:h,stats:p})},d.handleNetworkError=function(i,o,u,h,p){void 0===u&&(u=!1);var v="A network "+(u?"timeout":"error"+(h?" (status "+h.code+")":""))+" occurred while loading "+i.type;i.type===Gr_LEVEL?v+=": "+i.level+" id: "+i.id:(i.type===Gr_AUDIO_TRACK||i.type===Gr_SUBTITLE_TRACK)&&(v+=" id: "+i.id+' group-id: "'+i.groupId+'"');var y=new Error(v);Pe.warn("[playlist-loader]: "+v);var C=ge.UNKNOWN,R=!1,U=this.getInternalLoader(i);switch(i.type){case Gr_MANIFEST:C=u?ge.MANIFEST_LOAD_TIMEOUT:ge.MANIFEST_LOAD_ERROR,R=!0;break;case Gr_LEVEL:C=u?ge.LEVEL_LOAD_TIMEOUT:ge.LEVEL_LOAD_ERROR,R=!1;break;case Gr_AUDIO_TRACK:C=u?ge.AUDIO_TRACK_LOAD_TIMEOUT:ge.AUDIO_TRACK_LOAD_ERROR,R=!1;break;case Gr_SUBTITLE_TRACK:C=u?ge.SUBTITLE_TRACK_LOAD_TIMEOUT:ge.SUBTITLE_LOAD_ERROR,R=!1}U&&this.resetInternalLoader(i.type);var J={type:Ee.NETWORK_ERROR,details:C,fatal:R,url:i.url,loader:U,context:i,error:y,networkDetails:o,stats:p};h&&(J.response=hr({url:o?.url||i.url,data:void 0},h)),this.hls.trigger(x.ERROR,J)},d.handlePlaylistLoaded=function(i,o,u,h,p,v){var y=this.hls,C=h.type,R=h.level,U=h.id,J=h.groupId,se=h.deliveryDirectives,ye=Tl(o,h),Ae=qo(h),Ue="number"==typeof h.level&&Ae===Tr_MAIN?R:void 0;if(i.fragments.length){i.targetduration||(i.playlistParsingError=new Error("Missing Target Duration"));var Xe=i.playlistParsingError;if(Xe)y.trigger(x.ERROR,{type:Ee.NETWORK_ERROR,details:ge.LEVEL_PARSING_ERROR,fatal:!1,url:ye,error:Xe,reason:Xe.message,response:o,context:h,level:Ue,parent:Ae,networkDetails:p,stats:u});else switch(i.live&&v&&(v.getCacheAge&&(i.ageHeader=v.getCacheAge()||0),(!v.getCacheAge||isNaN(i.ageHeader))&&(i.ageHeader=0)),C){case Gr_MANIFEST:case Gr_LEVEL:y.trigger(x.LEVEL_LOADED,{details:i,level:Ue||0,id:U||0,stats:u,networkDetails:p,deliveryDirectives:se});break;case Gr_AUDIO_TRACK:y.trigger(x.AUDIO_TRACK_LOADED,{details:i,id:U||0,groupId:J||"",stats:u,networkDetails:p,deliveryDirectives:se});break;case Gr_SUBTITLE_TRACK:y.trigger(x.SUBTITLE_TRACK_LOADED,{details:i,id:U||0,groupId:J||"",stats:u,networkDetails:p,deliveryDirectives:se})}}else{var Ke=new Error("No Segments found in Playlist");y.trigger(x.ERROR,{type:Ee.NETWORK_ERROR,details:ge.LEVEL_EMPTY_ERROR,fatal:!1,url:ye,error:Ke,reason:Ke.message,response:o,context:h,level:Ue,parent:Ae,networkDetails:p,stats:u})}},g}();function Sr(g,d){var c;try{c=new Event("addtrack")}catch{(c=document.createEvent("Event")).initEvent("addtrack",!1,!1)}c.track=g,d.dispatchEvent(c)}function kc(g,d){var c=g.mode;if("disabled"===c&&(g.mode="hidden"),g.cues&&!g.cues.getCueById(d.id))try{if(g.addCue(d),!g.cues.getCueById(d.id))throw new Error("addCue is failed for: "+d)}catch(o){Pe.debug("[texttrack-utils]: "+o);try{var i=new self.TextTrackCue(d.startTime,d.endTime,d.text);i.id=d.id,g.addCue(i)}catch(u){Pe.debug("[texttrack-utils]: Legacy TextTrackCue fallback failed: "+u)}}"disabled"===c&&(g.mode=c)}function As(g){var d=g.mode;if("disabled"===d&&(g.mode="hidden"),g.cues)for(var c=g.cues.length;c--;)g.removeCue(g.cues[c]);"disabled"===d&&(g.mode=d)}function Wl(g,d,c,i){var o=g.mode;if("disabled"===o&&(g.mode="hidden"),g.cues&&g.cues.length>0)for(var u=function qf(g,d,c){var i=[],o=function ii(g,d){if(d<g[0].startTime)return 0;var c=g.length-1;if(d>g[c].endTime)return-1;for(var i=0,o=c;i<=o;){var u=Math.floor((o+i)/2);if(d<g[u].startTime)o=u-1;else{if(!(d>g[u].startTime&&i<c))return u;i=u+1}}return g[i].startTime-d<d-g[o].startTime?i:o}(g,d);if(o>-1)for(var u=o,h=g.length;u<h;u++){var p=g[u];if(p.startTime>=d&&p.endTime<=c)i.push(p);else if(p.startTime>c)return i}return i}(g.cues,d,c),h=0;h<u.length;h++)(!i||i(u[h]))&&g.removeCue(u[h]);"disabled"===o&&(g.mode=o)}function Ko(g){for(var d=[],c=0;c<g.length;c++){var i=g[c];("subtitles"===i.kind||"captions"===i.kind)&&i.label&&d.push(g[c])}return d}var Lo_audioId3="org.id3",Lo_dateRange="com.apple.quicktime.HLS",Lo_emsg="https://aomedia.org/emsg/ID3";function za(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function $l(g,d,c,i,o){var u=new g(d,c,"");try{u.value=i,o&&(u.type=o)}catch{u=new g(d,c,JSON.stringify(o?hr({type:o},i):i))}return u}var as=function(){var g=za();try{g&&new g(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function Cs(g,d){return g.getTime()/1e3-d}function Xl(g){return Uint8Array.from(g.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}var Uc=function(){function g(c){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=c,this._registerListeners()}var d=g.prototype;return d.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},d._registerListeners=function(){var i=this.hls;i.on(x.MEDIA_ATTACHED,this.onMediaAttached,this),i.on(x.MEDIA_DETACHING,this.onMediaDetaching,this),i.on(x.MANIFEST_LOADING,this.onManifestLoading,this),i.on(x.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),i.on(x.BUFFER_FLUSHING,this.onBufferFlushing,this),i.on(x.LEVEL_UPDATED,this.onLevelUpdated,this)},d._unregisterListeners=function(){var i=this.hls;i.off(x.MEDIA_ATTACHED,this.onMediaAttached,this),i.off(x.MEDIA_DETACHING,this.onMediaDetaching,this),i.off(x.MANIFEST_LOADING,this.onManifestLoading,this),i.off(x.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),i.off(x.BUFFER_FLUSHING,this.onBufferFlushing,this),i.off(x.LEVEL_UPDATED,this.onLevelUpdated,this)},d.onMediaAttached=function(i,o){this.media=o.media},d.onMediaDetaching=function(){this.id3Track&&(As(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},d.onManifestLoading=function(){this.dateRangeCuesAppended={}},d.createTrack=function(i){var o=this.getID3Track(i.textTracks);return o.mode="hidden",o},d.getID3Track=function(i){if(this.media){for(var o=0;o<i.length;o++){var u=i[o];if("metadata"===u.kind&&"id3"===u.label)return Sr(u,this.media),u}return this.media.addTextTrack("metadata","id3")}},d.onFragParsingMetadata=function(i,o){if(this.media){var u=this.hls.config,h=u.enableEmsgMetadataCues,p=u.enableID3MetadataCues;if(h||p){var v=o.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));var y=za();if(y)for(var C=0;C<v.length;C++){var R=v[C].type;if((R!==Lo_emsg||h)&&p){var U=Ui(v[C].data);if(U){var J=v[C].pts,se=J+v[C].duration;se>as&&(se=as),se-J<=0&&(se=J+.25);for(var Ae=0;Ae<U.length;Ae++){var Ue=U[Ae];if(!ni(Ue)){this.updateId3CueEnds(J,R);var Ke=$l(y,J,se,Ue,R);Ke&&this.id3Track.addCue(Ke)}}}}}}}},d.updateId3CueEnds=function(i,o){var u,h=null==(u=this.id3Track)?void 0:u.cues;if(h)for(var p=h.length;p--;){var v=h[p];v.type===o&&v.startTime<i&&v.endTime===as&&(v.endTime=i)}},d.onBufferFlushing=function(i,o){var p=o.type,v=this.id3Track,y=this.hls;if(y){var C=y.config,R=C.enableEmsgMetadataCues,U=C.enableID3MetadataCues;v&&(R||U)&&Wl(v,o.startOffset,o.endOffset,"audio"===p?function(ye){return ye.type===Lo_audioId3&&U}:"video"===p?function(ye){return ye.type===Lo_emsg&&R}:function(ye){return ye.type===Lo_audioId3&&U||ye.type===Lo_emsg&&R})}},d.onLevelUpdated=function(i,o){var u=this,h=o.details;if(this.media&&h.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var p=this.dateRangeCuesAppended,v=this.id3Track,y=h.dateRanges,C=Object.keys(y);if(v)for(var R=Object.keys(p).filter(function(Xe){return!C.includes(Xe)}),U=function(){var pt=R[J];Object.keys(p[pt].cues).forEach(function(yt){v.removeCue(p[pt].cues[yt])}),delete p[pt]},J=R.length;J--;)U();var se=h.fragments[h.fragments.length-1];if(0!==C.length&&Q(se?.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var ye=se.programDateTime/1e3-se.start,Ae=za(),Ue=function(){var pt=C[Ke],yt=y[pt],nn=Cs(yt.startDate,ye),qt=p[pt],Dt=qt?.cues||{},on=qt?.durationKnown||!1,an=as,Sn=yt.endDate;if(Sn)an=Cs(Sn,ye),on=!0;else if(yt.endOnNext&&!on){var Rn=C.reduce(function(oi,kr){if(kr!==yt.id){var Fi=y[kr];if(Fi.class===yt.class&&Fi.startDate>yt.startDate&&(!oi||yt.startDate<oi.startDate))return Fi}return oi},null);Rn&&(an=Cs(Rn.startDate,ye),on=!0)}for(var Qn=Object.keys(yt.attr),or=0;or<Qn.length;or++){var mr=Qn[or];if(ht(mr)){var Pr=Dt[mr];if(Pr)on&&!qt.durationKnown&&(Pr.endTime=an);else if(Ae){var Hr=yt.attr[mr];hn(mr)&&(Hr=Xl(Hr));var Xr=$l(Ae,nn,an,{key:mr,data:Hr},Lo_dateRange);Xr&&(Xr.id=pt,u.id3Track.addCue(Xr),Dt[mr]=Xr)}}}p[pt]={cues:Dt,dateRange:yt,durationKnown:on}},Ke=0;Ke<C.length;Ke++)Ue()}}},g}(),Bc=function(){function g(c){var i=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return i.timeupdate()},this.hls=c,this.config=c.config,this.registerListeners()}var d=g.prototype;return d.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},d.registerListeners=function(){this.hls.on(x.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(x.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(x.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(x.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(x.ERROR,this.onError,this)},d.unregisterListeners=function(){this.hls.off(x.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(x.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(x.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(x.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(x.ERROR,this.onError,this)},d.onMediaAttached=function(i,o){this.media=o.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},d.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},d.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},d.onLevelUpdated=function(i,o){var u=o.details;this.levelDetails=u,u.advanced&&this.timeupdate(),!u.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},d.onError=function(i,o){var u;o.details===ge.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(u=this.levelDetails)&&u.live&&Pe.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},d.timeupdate=function(){var i=this.media,o=this.levelDetails;if(i&&o){this.currentTime=i.currentTime;var u=this.computeLatency();if(null!==u){this._latency=u;var h=this.config,v=h.maxLiveSyncPlaybackRate;if(h.lowLatencyMode&&1!==v&&o.live){var y=this.targetLatency;if(null!==y){var C=u-y;if(C<Math.min(this.maxLatency,y+o.targetduration)&&C>.05&&this.forwardBufferLength>1){var J=Math.min(2,Math.max(1,v)),se=Math.round(2/(1+Math.exp(-.75*C-this.edgeStalled))*20)/20;i.playbackRate=Math.min(J,Math.max(1,se))}else 1!==i.playbackRate&&0!==i.playbackRate&&(i.playbackRate=1)}}}}},d.estimateLiveEdge=function(){var i=this.levelDetails;return null===i?null:i.edge+i.age},d.computeLatency=function(){var i=this.estimateLiveEdge();return null===i?null:i-this.currentTime},Ce(g,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var i=this.config,o=this.levelDetails;return void 0!==i.liveMaxLatencyDuration?i.liveMaxLatencyDuration:o?i.liveMaxLatencyDurationCount*o.targetduration:0}},{key:"targetLatency",get:function(){var i=this.levelDetails;if(null===i)return null;var h=i.targetduration,p=this.config,v=p.liveSyncDuration,R=this.hls.userConfig,U=p.lowLatencyMode&&i.partHoldBack||i.holdBack;return(R.liveSyncDuration||R.liveSyncDurationCount||0===U)&&(U=void 0!==v?v:p.liveSyncDurationCount*h),U+Math.min(1*this.stallCount,h)}},{key:"liveSyncPosition",get:function(){var i=this.estimateLiveEdge(),o=this.targetLatency,u=this.levelDetails;if(null===i||null===o||null===u)return null;var h=u.edge,y=h-(this.config.lowLatencyMode&&u.partTarget||u.targetduration);return Math.min(Math.max(h-u.totalduration,i-o-this.edgeStalled),y)}},{key:"drift",get:function(){var i=this.levelDetails;return null===i?1:i.drift}},{key:"edgeStalled",get:function(){var i=this.levelDetails;return null===i?0:Math.max(i.age-3*(this.config.lowLatencyMode&&i.partTarget||i.targetduration),0)}},{key:"forwardBufferLength",get:function(){var i=this.media,o=this.levelDetails;if(!i||!o)return 0;var u=i.buffered.length;return(u?i.buffered.end(u-1):o.edge)-this.currentTime}}]),g}(),zr=["NONE","TYPE-0","TYPE-1",null];var $s=["SDR","PQ","HLG"];var Xs_No="",Xs_Yes="YES",Xs_v2="v2";function Kf(g){var d=g.canSkipUntil;return d&&g.age<d/2?g.canSkipDateRanges?Xs_v2:Xs_Yes:Xs_No}var Ii=function(){function g(c,i,o){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=c,this.part=i,this.skip=o}return g.prototype.addDirectives=function(i){var o=new self.URL(i);return void 0!==this.msn&&o.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&o.searchParams.set("_HLS_part",this.part.toString()),this.skip&&o.searchParams.set("_HLS_skip",this.skip),o.href},g}(),ss=function(){function g(c){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[c.url],this._attrs=[c.attrs],this.bitrate=c.bitrate,c.details&&(this.details=c.details),this.id=c.id||0,this.name=c.name,this.width=c.width||0,this.height=c.height||0,this.frameRate=c.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=c.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=c.audioCodec,this.videoCodec=c.videoCodec,this.codecSet=[c.videoCodec,c.audioCodec].filter(function(i){return!!i}).map(function(i){return i.substring(0,4)}).join(","),this.addGroupId("audio",c.attrs.AUDIO),this.addGroupId("text",c.attrs.SUBTITLES)}var d=g.prototype;return d.hasAudioGroup=function(i){return Vc(this._audioGroups,i)},d.hasSubtitleGroup=function(i){return Vc(this._subtitleGroups,i)},d.addGroupId=function(i,o){if(o)if("audio"===i){var u=this._audioGroups;u||(u=this._audioGroups=[]),-1===u.indexOf(o)&&u.push(o)}else if("text"===i){var h=this._subtitleGroups;h||(h=this._subtitleGroups=[]),-1===h.indexOf(o)&&h.push(o)}},d.addFallback=function(){},Ce(g,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"averageBitrate",get:function(){return this._avgBitrate||this.realBitrate||this.bitrate}},{key:"attrs",get:function(){return this._attrs[0]}},{key:"codecs",get:function(){return this.attrs.CODECS||""}},{key:"pathwayId",get:function(){return this.attrs["PATHWAY-ID"]||"."}},{key:"videoRange",get:function(){return this.attrs["VIDEO-RANGE"]||"SDR"}},{key:"score",get:function(){return this.attrs.optionalFloat("SCORE",0)}},{key:"uri",get:function(){return this.url[0]||""}},{key:"audioGroups",get:function(){return this._audioGroups}},{key:"subtitleGroups",get:function(){return this._subtitleGroups}},{key:"urlId",get:function(){return 0},set:function(i){}},{key:"audioGroupIds",get:function(){return this.audioGroups?[this.audioGroupId]:void 0}},{key:"textGroupIds",get:function(){return this.subtitleGroups?[this.textGroupId]:void 0}},{key:"audioGroupId",get:function(){var i;return null==(i=this.audioGroups)?void 0:i[0]}},{key:"textGroupId",get:function(){var i;return null==(i=this.subtitleGroups)?void 0:i[0]}}]),g}();function Vc(g,d){return!(!d||!g)&&-1!==g.indexOf(d)}function ur(g,d){var c=d.startPTS;if(Q(c)){var o,i=0;d.sn>g.sn?(i=c-g.start,o=g):(i=g.start-c,o=d),o.duration!==i&&(o.duration=i)}else d.start=d.sn>g.sn?g.cc===d.cc&&g.minEndPTS?g.start+(g.minEndPTS-g.start):g.start+g.duration:Math.max(g.start-d.duration,0)}function Sl(g,d,c,i,o,u){i-c<=0&&(Pe.warn("Fragment should have a positive duration",d),i=c+d.duration,u=o+d.duration);var p=c,v=i,y=d.startPTS,C=d.endPTS;if(Q(y)){var R=Math.abs(y-c);d.deltaPTS=Q(d.deltaPTS)?Math.max(R,d.deltaPTS):R,p=Math.max(c,y),c=Math.min(c,y),o=Math.min(o,d.startDTS),v=Math.min(i,C),i=Math.max(i,C),u=Math.max(u,d.endDTS)}var U=c-d.start;0!==d.start&&(d.start=c),d.duration=i-d.start,d.startPTS=c,d.maxStartPTS=p,d.startDTS=o,d.endPTS=i,d.minEndPTS=v,d.endDTS=u;var J=d.sn;if(!g||J<g.startSN||J>g.endSN)return 0;var se,ye=J-g.startSN,Ae=g.fragments;for(Ae[ye]=d,se=ye;se>0;se--)ur(Ae[se],Ae[se-1]);for(se=ye;se<Ae.length-1;se++)ur(Ae[se],Ae[se+1]);return g.fragmentHint&&ur(Ae[Ae.length-1],g.fragmentHint),g.PTSKnown=g.alignedSliding=!0,U}function Fu(g,d){for(var c=null,i=g.fragments,o=i.length-1;o>=0;o--){var u=i[o].initSegment;if(u){c=u;break}}g.fragmentHint&&delete g.fragmentHint.endPTS;var p,h=0;if(function Hc(g,d,c){for(var i=d.skippedSegments,o=Math.max(g.startSN,d.startSN)-d.startSN,u=(g.fragmentHint?1:0)+(i?d.endSN:Math.min(g.endSN,d.endSN))-d.startSN,h=d.startSN-g.startSN,p=d.fragmentHint?d.fragments.concat(d.fragmentHint):d.fragments,v=g.fragmentHint?g.fragments.concat(g.fragmentHint):g.fragments,y=o;y<=u;y++){var C=v[h+y],R=p[y];i&&!R&&y<i&&(R=d.fragments[y]=C),C&&R&&c(C,R)}}(g,d,function(se,ye){se.relurl&&(h=se.cc-ye.cc),Q(se.startPTS)&&Q(se.endPTS)&&(ye.start=ye.startPTS=se.startPTS,ye.startDTS=se.startDTS,ye.maxStartPTS=se.maxStartPTS,ye.endPTS=se.endPTS,ye.endDTS=se.endDTS,ye.minEndPTS=se.minEndPTS,ye.duration=se.endPTS-se.startPTS,ye.duration&&(p=ye),d.PTSKnown=d.alignedSliding=!0),ye.elementaryStreams=se.elementaryStreams,ye.loader=se.loader,ye.stats=se.stats,se.initSegment&&(ye.initSegment=se.initSegment,c=se.initSegment)}),c&&(d.fragmentHint?d.fragments.concat(d.fragmentHint):d.fragments).forEach(function(se){var ye;se&&(!se.initSegment||se.initSegment.relurl===(null==(ye=c)?void 0:ye.relurl))&&(se.initSegment=c)}),d.skippedSegments)if(d.deltaUpdateFailed=d.fragments.some(function(se){return!se}),d.deltaUpdateFailed){Pe.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var y=d.skippedSegments;y--;)d.fragments.shift();d.startSN=d.fragments[0].sn,d.startCC=d.fragments[0].cc}else d.canSkipDateRanges&&(d.dateRanges=function bl(g,d,c){var i=E({},g);return c&&c.forEach(function(o){delete i[o]}),Object.keys(d).forEach(function(o){var u=new zt(d[o].attr,i[o]);u.isValid?i[o]=u:Pe.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(d[o].attr)+'"')}),i}(g.dateRanges,d.dateRanges,d.recentlyRemovedDateranges));var C=d.fragments;if(h){Pe.warn("discontinuity sliding from playlist, take drift into account");for(var R=0;R<C.length;R++)C[R].cc+=h}d.skippedSegments&&(d.startCC=d.fragments[0].cc),function Ql(g,d,c){if(g&&d)for(var i=0,o=0,u=g.length;o<=u;o++){var h=g[o],p=d[o+i];h&&p&&h.index===p.index&&h.fragment.sn===p.fragment.sn?c(h,p):i--}}(g.partList,d.partList,function(se,ye){ye.elementaryStreams=se.elementaryStreams,ye.stats=se.stats}),p?Sl(d,p,p.startPTS,p.endPTS,p.startDTS,p.endDTS):Jl(g,d),C.length&&(d.totalduration=d.edge-C[0].start),d.driftStartTime=g.driftStartTime,d.driftStart=g.driftStart;var U=d.advancedDateTime;if(d.advanced&&U){var J=d.edge;d.driftStart||(d.driftStartTime=U,d.driftStart=J),d.driftEndTime=U,d.driftEnd=J}else d.driftEndTime=g.driftEndTime,d.driftEnd=g.driftEnd,d.advancedDateTime=g.advancedDateTime}function Jl(g,d){var c=d.startSN+d.skippedSegments-g.startSN,i=g.fragments;c<0||c>=i.length||ku(d,i[c].start)}function ku(g,d){if(d){for(var c=g.fragments,i=g.skippedSegments;i<c.length;i++)c[i].start+=d;g.fragmentHint&&(g.fragmentHint.start+=d)}}function zf(g,d,c){var i;return null!=g&&g.details?Gc(null==(i=g.details)?void 0:i.partList,d,c):null}function Gc(g,d,c){if(g)for(var i=g.length;i--;){var o=g[i];if(o.index===c&&o.fragment.sn===d)return o}return null}function Qs(g){g.forEach(function(d,c){var i=d.details;null!=i&&i.fragments&&i.fragments.forEach(function(o){o.level=c})})}function Is(g){switch(g.details){case ge.FRAG_LOAD_TIMEOUT:case ge.KEY_LOAD_TIMEOUT:case ge.LEVEL_LOAD_TIMEOUT:case ge.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Al(g,d){var c=Is(d);return g.default[(c?"timeout":"error")+"Retry"]}function eu(g,d){var c="linear"===g.backoff?1:Math.pow(2,d);return Math.min(c*g.retryDelayMs,g.maxRetryDelayMs)}function Zc(g){return hr(hr({},g),{errorRetry:null,timeoutRetry:null})}function Js(g,d,c,i){if(!g)return!1;var o=i?.code,u=d<g.maxNumRetry&&(function tu(g){return 0===g&&!1===navigator.onLine||!!g&&(g<400||g>499)}(o)||!!c);return g.shouldRetry?g.shouldRetry(g,d,c,i,u):u}var Ds_search=function(d,c){for(var i=0,o=d.length-1,u=null,h=null;i<=o;){var p=c(h=d[u=(i+o)/2|0]);if(p>0)i=u+1;else{if(!(p<0))return h;o=u-1}}return null};function na(g,d,c,i){void 0===c&&(c=0),void 0===i&&(i=0);var o=null;if(g){o=d[g.sn-d[0].sn+1]||null;var u=g.endDTS-c;u>0&&u<15e-7&&(c+=15e-7)}else 0===c&&0===d[0].start&&(o=d[0]);if(o&&(!g||g.level===o.level)&&0===ru(c,i,o))return o;var h=Ds_search(d,ru.bind(null,c,i));return!h||h===g&&o?o:h}function ru(g,d,c){if(void 0===g&&(g=0),void 0===d&&(d=0),c.start<=g&&c.start+c.duration>g)return 0;var i=Math.min(d,c.duration+(c.deltaPTS?c.deltaPTS:0));return c.start+c.duration-i<=g?1:c.start-i>g&&c.start?-1:0}function Br(g,d,c){var i=1e3*Math.min(d,c.duration+(c.deltaPTS?c.deltaPTS:0));return(c.endProgramDateTime||0)-i>g}var Er_DoNothing=0,Er_SendAlternateToPenaltyBox=2,Er_RemoveAlternatePermanently=3,Er_RetryRequest=5,Po_None=0,Po_MoveAllAlternatesMatchingHost=1,Po_MoveAllAlternatesMatchingHDCP=2,Bu=function(){function g(c){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=c,this.log=Pe.log.bind(Pe,"[info]:"),this.warn=Pe.warn.bind(Pe,"[warning]:"),this.error=Pe.error.bind(Pe,"[error]:"),this.registerListeners()}var d=g.prototype;return d.registerListeners=function(){var i=this.hls;i.on(x.ERROR,this.onError,this),i.on(x.MANIFEST_LOADING,this.onManifestLoading,this),i.on(x.LEVEL_UPDATED,this.onLevelUpdated,this)},d.unregisterListeners=function(){var i=this.hls;i&&(i.off(x.ERROR,this.onError,this),i.off(x.ERROR,this.onErrorOut,this),i.off(x.MANIFEST_LOADING,this.onManifestLoading,this),i.off(x.LEVEL_UPDATED,this.onLevelUpdated,this))},d.destroy=function(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}},d.startLoad=function(i){},d.stopLoad=function(){this.playlistError=0},d.getVariantLevelIndex=function(i){return i?.type===Tr_MAIN?i.level:this.hls.loadLevel},d.onManifestLoading=function(){this.playlistError=0,this.penalizedRenditions={}},d.onLevelUpdated=function(){this.playlistError=0},d.onError=function(i,o){var u,h;if(!o.fatal){var p=this.hls,v=o.context;switch(o.details){case ge.FRAG_LOAD_ERROR:case ge.FRAG_LOAD_TIMEOUT:case ge.KEY_LOAD_ERROR:case ge.KEY_LOAD_TIMEOUT:return void(o.errorAction=this.getFragRetryOrSwitchAction(o));case ge.FRAG_PARSING_ERROR:if(null!=(u=o.frag)&&u.gap)return void(o.errorAction={action:Er_DoNothing,flags:Po_None});case ge.FRAG_GAP:case ge.FRAG_DECRYPT_ERROR:return o.errorAction=this.getFragRetryOrSwitchAction(o),void(o.errorAction.action=Er_SendAlternateToPenaltyBox);case ge.LEVEL_EMPTY_ERROR:case ge.LEVEL_PARSING_ERROR:var y,C,R=o.parent===Tr_MAIN?o.level:p.loadLevel;return void(o.details===ge.LEVEL_EMPTY_ERROR&&null!=(y=o.context)&&null!=(C=y.levelDetails)&&C.live?o.errorAction=this.getPlaylistRetryOrSwitchAction(o,R):(o.levelRetry=!1,o.errorAction=this.getLevelSwitchAction(o,R)));case ge.LEVEL_LOAD_ERROR:case ge.LEVEL_LOAD_TIMEOUT:return void("number"==typeof v?.level&&(o.errorAction=this.getPlaylistRetryOrSwitchAction(o,v.level)));case ge.AUDIO_TRACK_LOAD_ERROR:case ge.AUDIO_TRACK_LOAD_TIMEOUT:case ge.SUBTITLE_LOAD_ERROR:case ge.SUBTITLE_TRACK_LOAD_TIMEOUT:if(v){var U=p.levels[p.loadLevel];if(U&&(v.type===Gr_AUDIO_TRACK&&U.hasAudioGroup(v.groupId)||v.type===Gr_SUBTITLE_TRACK&&U.hasSubtitleGroup(v.groupId)))return o.errorAction=this.getPlaylistRetryOrSwitchAction(o,p.loadLevel),o.errorAction.action=Er_SendAlternateToPenaltyBox,void(o.errorAction.flags=Po_MoveAllAlternatesMatchingHost)}return;case ge.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var J=p.levels[p.loadLevel],se=J?.attrs["HDCP-LEVEL"];return void(se?o.errorAction={action:Er_SendAlternateToPenaltyBox,flags:Po_MoveAllAlternatesMatchingHDCP,hdcpLevel:se}:this.keySystemError(o));case ge.BUFFER_ADD_CODEC_ERROR:case ge.REMUX_ALLOC_ERROR:case ge.BUFFER_APPEND_ERROR:return void(o.errorAction=this.getLevelSwitchAction(o,null!=(h=o.level)?h:p.loadLevel));case ge.INTERNAL_EXCEPTION:case ge.BUFFER_APPENDING_ERROR:case ge.BUFFER_FULL_ERROR:case ge.LEVEL_SWITCH_ERROR:case ge.BUFFER_STALLED_ERROR:case ge.BUFFER_SEEK_OVER_HOLE:case ge.BUFFER_NUDGE_ON_STALL:return void(o.errorAction={action:Er_DoNothing,flags:Po_None})}o.type===Ee.KEY_SYSTEM_ERROR&&this.keySystemError(o)}},d.keySystemError=function(i){var o=this.getVariantLevelIndex(i.frag);i.levelRetry=!1,i.errorAction=this.getLevelSwitchAction(i,o)},d.getPlaylistRetryOrSwitchAction=function(i,o){var h=Al(this.hls.config.playlistLoadPolicy,i),p=this.playlistError++;if(Js(h,p,Is(i),i.response))return{action:Er_RetryRequest,flags:Po_None,retryConfig:h,retryCount:p};var y=this.getLevelSwitchAction(i,o);return h&&(y.retryConfig=h,y.retryCount=p),y},d.getFragRetryOrSwitchAction=function(i){var o=this.hls,u=this.getVariantLevelIndex(i.frag),h=o.levels[u],p=o.config,v=p.fragLoadPolicy,y=p.keyLoadPolicy,C=Al(i.details.startsWith("key")?y:v,i),R=o.levels.reduce(function(se,ye){return se+ye.fragmentError},0);if(h&&(i.details!==ge.FRAG_GAP&&h.fragmentError++,Js(C,R,Is(i),i.response)))return{action:Er_RetryRequest,flags:Po_None,retryConfig:C,retryCount:R};var J=this.getLevelSwitchAction(i,u);return C&&(J.retryConfig=C,J.retryCount=R),J},d.getLevelSwitchAction=function(i,o){var u=this.hls;null==o&&(o=u.loadLevel);var h=this.hls.levels[o];if(h){var p,v,y=i.details;h.loadError++,y===ge.BUFFER_APPEND_ERROR&&h.fragmentError++;var C=-1,R=u.levels,U=u.loadLevel,J=u.minAutoLevel,se=u.maxAutoLevel;u.autoLevelEnabled||(u.loadLevel=-1);for(var Dt,ye=null==(p=i.frag)?void 0:p.type,Ue=(ye===Tr_AUDIO&&y===ge.FRAG_PARSING_ERROR||"audio"===i.sourceBufferName&&(y===ge.BUFFER_ADD_CODEC_ERROR||y===ge.BUFFER_APPEND_ERROR))&&R.some(function(an){return h.audioCodec!==an.audioCodec}),Xe="video"===i.sourceBufferName&&(y===ge.BUFFER_ADD_CODEC_ERROR||y===ge.BUFFER_APPEND_ERROR)&&R.some(function(an){return h.codecSet!==an.codecSet&&h.audioCodec===an.audioCodec}),pt=null!=(v=i.context)?v:{},yt=pt.type,nn=pt.groupId,qt=function(){var Sn=(on+U)%R.length;if(Sn!==U&&Sn>=J&&Sn<=se&&0===R[Sn].loadError){var Rn,Qn,or=R[Sn];if(y===ge.FRAG_GAP&&i.frag){var mr=R[Sn].details;if(mr){var Pr=na(i.frag,mr.fragments,i.frag.start);if(null!=Pr&&Pr.gap)return 0}}else{if(yt===Gr_AUDIO_TRACK&&or.hasAudioGroup(nn)||yt===Gr_SUBTITLE_TRACK&&or.hasSubtitleGroup(nn))return 0;if(ye===Tr_AUDIO&&null!=(Rn=h.audioGroups)&&Rn.some(function(Hr){return or.hasAudioGroup(Hr)})||ye===Tr_SUBTITLE&&null!=(Qn=h.subtitleGroups)&&Qn.some(function(Hr){return or.hasSubtitleGroup(Hr)})||Ue&&h.audioCodec===or.audioCodec||!Ue&&h.audioCodec!==or.audioCodec||Xe&&h.codecSet===or.codecSet)return 0}return C=Sn,1}},on=R.length;on--&&(0===(Dt=qt())||1!==Dt););if(C>-1&&u.loadLevel!==C)return i.levelRetry=!0,this.playlistError=0,{action:Er_SendAlternateToPenaltyBox,flags:Po_None,nextAutoLevel:C}}return{action:Er_SendAlternateToPenaltyBox,flags:Po_MoveAllAlternatesMatchingHost}},d.onErrorOut=function(i,o){var u;switch(null==(u=o.errorAction)?void 0:u.action){case Er_DoNothing:break;case Er_SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(o),o.errorAction.resolved||o.details===ge.FRAG_GAP?/MediaSource readyState: ended/.test(o.error.message)&&(this.warn('MediaSource ended after "'+o.sourceBufferName+'" sourceBuffer append error. Attempting to recover from media error.'),this.hls.recoverMediaError()):o.fatal=!0}o.fatal&&this.hls.stopLoad()},d.sendAlternateToPenaltyBox=function(i){var o=this.hls,u=i.errorAction;if(u){var p=u.hdcpLevel,v=u.nextAutoLevel;switch(u.flags){case Po_None:this.switchLevel(i,v);break;case Po_MoveAllAlternatesMatchingHDCP:p&&(o.maxHdcpLevel=zr[zr.indexOf(p)-1],u.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'+o.maxHdcpLevel+'" or lower')}u.resolved||this.switchLevel(i,v)}},d.switchLevel=function(i,o){void 0!==o&&i.errorAction&&(this.warn("switching to level "+o+" after "+i.details),this.hls.nextAutoLevel=o,i.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)},g}(),pa=function(){function g(c,i){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=Pe.log.bind(Pe,i+":"),this.warn=Pe.warn.bind(Pe,i+":"),this.hls=c}var d=g.prototype;return d.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},d.clearTimer=function(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)},d.startLoad=function(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()},d.stopLoad=function(){this.canLoad=!1,this.clearTimer()},d.switchParams=function(i,o,u){var h=o?.renditionReports;if(h){for(var p=-1,v=0;v<h.length;v++){var y=h[v],C=void 0;try{C=new self.URL(y.URI,o.url).href}catch(Ae){Pe.warn("Could not construct new URL for Rendition Report: "+Ae),C=y.URI||""}if(C===i){p=v;break}C===i.substring(0,C.length)&&(p=v)}if(-1!==p){var R=h[p],U=parseInt(R["LAST-MSN"])||o?.lastPartSn,J=parseInt(R["LAST-PART"])||o?.lastPartIndex;if(this.hls.config.lowLatencyMode){var se=Math.min(o.age-o.partTarget,o.targetduration);J>=0&&se>o.partTarget&&(J+=1)}var ye=u&&Kf(u);return new Ii(U,J>=0?J:void 0,ye)}}},d.loadPlaylist=function(i){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},d.shouldLoadPlaylist=function(i){return this.canLoad&&!!i&&!!i.url&&(!i.details||i.details.live)},d.shouldReloadPlaylist=function(i){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(i)},d.playlistLoaded=function(i,o,u){var h=this,p=o.details,v=o.stats,y=self.performance.now(),C=v.loading.first?Math.max(0,y-v.loading.first):0;if(p.advancedDateTime=Date.now()-C,p.live||null!=u&&u.live){if(p.reloaded(u),u&&this.log("live playlist "+i+" "+(p.advanced?"REFRESHED "+p.lastPartSn+"-"+p.lastPartIndex:p.updated?"UPDATED":"MISSED")),u&&p.fragments.length>0&&Fu(u,p),!this.canLoad||!p.live)return;var R,U=void 0,J=void 0;if(p.canBlockReload&&p.endSN&&p.advanced){var se=this.hls.config.lowLatencyMode,ye=p.lastPartSn,Ae=p.endSN,Ue=p.lastPartIndex,Xe=ye===Ae;-1!==Ue?(U=Xe?Ae+1:ye,J=Xe?se?0:Ue:Ue+1):U=Ae+1;var yt=p.age,qt=Math.min(yt+p.ageHeader-p.partTarget,1.5*p.targetduration);if(qt>0){if(u&&qt>u.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+u.tuneInGoal+" to: "+qt+" with playlist age: "+p.age),qt=0;else{var Dt=Math.floor(qt/p.targetduration);U+=Dt,void 0!==J&&(J+=Math.round(qt%p.targetduration/p.partTarget)),this.log("CDN Tune-in age: "+p.ageHeader+"s last advanced "+yt.toFixed(2)+"s goal: "+qt+" skip sn "+Dt+" to part "+J)}p.tuneInGoal=qt}if(R=this.getDeliveryDirectives(p,o.deliveryDirectives,U,J),se||!Xe)return void this.loadPlaylist(R)}else(p.canBlockReload||p.canSkipUntil)&&(R=this.getDeliveryDirectives(p,o.deliveryDirectives,U,J));var an=this.hls.mainForwardBufferInfo,Qn=function hh(g,d){void 0===d&&(d=1/0);var c=1e3*g.targetduration;if(g.updated){var i=g.fragments;if(i.length&&4*c>d){var u=1e3*i[i.length-1].duration;u<c&&(c=u)}}else c/=2;return Math.round(c)}(p,1e3*(p.edge-(an?an.end-an.len:0)));p.updated&&y>this.requestScheduled+Qn&&(this.requestScheduled=v.loading.start),void 0!==U&&p.canBlockReload?this.requestScheduled=v.loading.first+Qn-(1e3*p.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+Qn<y?this.requestScheduled=y:this.requestScheduled-y<=0&&(this.requestScheduled+=Qn);var or=this.requestScheduled-y;or=Math.max(0,or),this.log("reload live playlist "+i+" in "+Math.round(or)+" ms"),this.timer=self.setTimeout(function(){return h.loadPlaylist(R)},or)}else this.clearTimer()},d.getDeliveryDirectives=function(i,o,u,h){var p=Kf(i);return null!=o&&o.skip&&i.deltaUpdateFailed&&(u=o.msn,h=o.part,p=Xs_No),new Ii(u,h,p)},d.checkRetry=function(i){var o=this,u=i.details,h=Is(i),p=i.errorAction,v=p||{},y=v.action,C=v.retryCount,R=void 0===C?0:C,U=v.retryConfig,J=!!p&&!!U&&(y===Er_RetryRequest||!p.resolved&&y===Er_SendAlternateToPenaltyBox);if(J){var se;if(this.requestScheduled=-1,R>=U.maxNumRetry)return!1;if(h&&null!=(se=i.context)&&se.deliveryDirectives)this.warn("Retrying playlist loading "+(R+1)+"/"+U.maxNumRetry+' after "'+u+'" without delivery-directives'),this.loadPlaylist();else{var ye=eu(U,R);this.timer=self.setTimeout(function(){return o.loadPlaylist()},ye),this.warn("Retrying playlist loading "+(R+1)+"/"+U.maxNumRetry+' after "'+u+'" in '+ye+"ms")}i.levelRetry=!0,p.resolved=!0}return J},g}(),ws=function(){function g(c,i,o){void 0===i&&(i=0),void 0===o&&(o=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=c,this.alpha_=c?Math.exp(Math.log(.5)/c):0,this.estimate_=i,this.totalWeight_=o}var d=g.prototype;return d.sample=function(i,o){var u=Math.pow(this.alpha_,i);this.estimate_=o*(1-u)+u*this.estimate_,this.totalWeight_+=i},d.getTotalWeight=function(){return this.totalWeight_},d.getEstimate=function(){if(this.alpha_){var i=1-Math.pow(this.alpha_,this.totalWeight_);if(i)return this.estimate_/i}return this.estimate_},g}(),Wf=function(){function g(c,i,o,u){void 0===u&&(u=100),this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=o,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ws(c),this.fast_=new ws(i),this.defaultTTFB_=u,this.ttfb_=new ws(c)}var d=g.prototype;return d.update=function(i,o){var u=this.slow_,h=this.fast_,p=this.ttfb_;u.halfLife!==i&&(this.slow_=new ws(i,u.getEstimate(),u.getTotalWeight())),h.halfLife!==o&&(this.fast_=new ws(o,h.getEstimate(),h.getTotalWeight())),p.halfLife!==i&&(this.ttfb_=new ws(i,p.getEstimate(),p.getTotalWeight()))},d.sample=function(i,o){var h=(i=Math.max(i,this.minDelayMs_))/1e3,p=8*o/h;this.fast_.sample(h,p),this.slow_.sample(h,p)},d.sampleTTFB=function(i){var o=i/1e3,u=Math.sqrt(2)*Math.exp(-Math.pow(o,2)/2);this.ttfb_.sample(u,Math.max(i,5))},d.canEstimate=function(){return this.fast_.getTotalWeight()>=this.minWeight_},d.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},d.getEstimateTTFB=function(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_},d.destroy=function(){},g}(),jc={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},Bo={};function Yr(g,d,c){var i=g.videoCodec,o=g.audioCodec;if(!i||!o||!c)return Promise.resolve(jc);var u={width:g.width,height:g.height,bitrate:Math.ceil(Math.max(.9*g.bitrate,g.averageBitrate)),framerate:g.frameRate||30},h=g.videoRange;"SDR"!==h&&(u.transferFunction=h.toLowerCase());var p=i.split(",").map(function(v){return{type:"media-source",video:hr(hr({},u),{},{contentType:Nr(v,"video")})}});return o&&g.audioGroups&&g.audioGroups.forEach(function(v){var y;v&&(null==(y=d.groups[v])||y.tracks.forEach(function(C){if(C.groupId===v){var U=parseFloat(C.channels||"");Q(U)&&U>2&&p.push.apply(p,o.split(",").map(function(J){return{type:"media-source",audio:{contentType:Nr(J,"audio"),channels:""+U}}}))}}))}),Promise.all(p.map(function(v){var y=function ra(g){var d=g.audio,c=g.video,i=c||d;if(i){var o=i.contentType.split('"')[1];if(c)return"r"+c.height+"x"+c.width+"f"+Math.ceil(c.framerate)+(c.transferFunction||"sd")+"_"+o+"_"+Math.ceil(c.bitrate/1e5);if(d)return"c"+d.channels+(d.spatialRendering?"s":"n")+"_"+o}return""}(v);return Bo[y]||(Bo[y]=c.decodingInfo(v))})).then(function(v){return{supported:!v.some(function(y){return!y.supported}),configurations:p,decodingInfoResults:v}}).catch(function(v){return{supported:!1,configurations:p,decodingInfoResults:[],error:v}})}function Rs(g,d){var c=!1,i=[];return g&&(c="SDR"!==g,i=[g]),d&&(i=d.allowedVideoRanges||$s.slice(0),i=(c=void 0!==d.preferHDR?d.preferHDR:function fi(){if("function"==typeof matchMedia){var g=matchMedia("(dynamic-range: high)"),d=matchMedia("bad query");if(g.media!==d.media)return!0===g.matches}return!1}())?i.filter(function(o){return"SDR"!==o}):["SDR"]),{preferHDR:c,allowedVideoRanges:i}}function Yo(g,d){Pe.log('[abr] start candidates with "'+g+'" ignored because '+d)}function Eo(g,d,c){if("attrs"in g){var i=d.indexOf(g);if(-1!==i)return i}for(var o=0;o<d.length;o++)if(ls(g,d[o],c))return o;return-1}function ls(g,d,c){var i=g.groupId,o=g.name,u=g.lang,p=g.characteristics,v=g.default,y=g.forced;return(void 0===i||d.groupId===i)&&(void 0===o||d.name===o)&&(void 0===u||d.lang===u)&&(void 0===u||d.assocLang===g.assocLang)&&(void 0===v||d.default===v)&&(void 0===y||d.forced===y)&&(void 0===p||function qc(g,d){void 0===d&&(d="");var c=g.split(","),i=d.split(",");return c.length===i.length&&!c.some(function(o){return-1===i.indexOf(o)})}(p,d.characteristics))&&(void 0===c||c(g,d))}function Oa(g,d){var c=g.audioCodec,i=g.channels;return!(void 0!==c&&(d.audioCodec||"").substring(0,4)!==c.substring(0,4)||void 0!==i&&i!==(d.channels||"2"))}function Hu(g,d,c){for(var i=d;i;i--)if(c(g[i]))return i;for(var o=d+1;o<g.length;o++)if(c(g[o]))return o;return-1}var us=function(){function g(c){var i=this;this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=function(){var o=i.fragCurrent,u=i.partCurrent,h=i.hls,p=h.autoLevelEnabled,v=h.media;if(o&&v){var y=performance.now(),C=u?u.stats:o.stats,R=u?u.duration:o.duration,U=y-C.loading.start,J=h.minAutoLevel;if(C.aborted||C.loaded&&C.loaded===C.total||o.level<=J)return i.clearTimer(),void(i._nextAutoLevel=-1);if(p&&!v.paused&&v.playbackRate&&v.readyState){var se=h.mainForwardBufferInfo;if(null!==se){var ye=i.bwEstimator.getEstimateTTFB(),Ae=Math.abs(v.playbackRate);if(!(U<=Math.max(ye,R/(2*Ae)*1e3))){var Ue=se.len/Ae,Ke=C.loading.first?C.loading.first-C.loading.start:-1,Xe=C.loaded&&Ke>-1,pt=i.getBwEstimate(),yt=h.levels,qt=C.total||Math.max(C.loaded,Math.round(R*yt[o.level].averageBitrate/8)),Dt=Xe?U-Ke:U;Dt<1&&Xe&&(Dt=Math.min(U,8*C.loaded/pt));var on=Xe?1e3*C.loaded/Dt:0,an=on?(qt-C.loaded)/on:8*qt/pt+ye/1e3;if(!(an<=Ue)){var Qn,Sn=on?8*on:pt,Rn=Number.POSITIVE_INFINITY;for(Qn=o.level-1;Qn>J&&!((Rn=i.getTimeToLoadFrag(ye/1e3,Sn,R*yt[Qn].maxBitrate,!yt[Qn].details))<Ue);Qn--);if(!(Rn>=an||Rn>10*R)){h.nextLoadLevel=h.nextAutoLevel=Qn,Xe?i.bwEstimator.sample(U-Math.min(ye,Ke),C.loaded):i.bwEstimator.sampleTTFB(U);var mr=yt[Qn].maxBitrate;i.getBwEstimate()*i.hls.config.abrBandWidthUpFactor>mr&&i.resetEstimator(mr),i.clearTimer(),Pe.warn("[abr] Fragment "+o.sn+(u?" part "+u.index:"")+" of level "+o.level+" is loading too slowly;\n      Time to underbuffer: "+Ue.toFixed(3)+" s\n      Estimated load time for current fragment: "+an.toFixed(3)+" s\n      Estimated load time for down switch fragment: "+Rn.toFixed(3)+" s\n      TTFB estimate: "+(0|Ke)+" ms\n      Current BW estimate: "+(Q(pt)?0|pt:"Unknown")+" bps\n      New BW estimate: "+(0|i.getBwEstimate())+" bps\n      Switching to level "+Qn+" @ "+(0|mr)+" bps"),h.trigger(x.FRAG_LOAD_EMERGENCY_ABORTED,{frag:o,part:u,stats:C})}}}}}}},this.hls=c,this.bwEstimator=this.initEstimator(),this.registerListeners()}var d=g.prototype;return d.resetEstimator=function(i){i&&(Pe.log("setting initial bwe to "+i),this.hls.config.abrEwmaDefaultEstimate=i),this.firstSelection=-1,this.bwEstimator=this.initEstimator()},d.initEstimator=function(){var i=this.hls.config;return new Wf(i.abrEwmaSlowVoD,i.abrEwmaFastVoD,i.abrEwmaDefaultEstimate)},d.registerListeners=function(){var i=this.hls;i.on(x.MANIFEST_LOADING,this.onManifestLoading,this),i.on(x.FRAG_LOADING,this.onFragLoading,this),i.on(x.FRAG_LOADED,this.onFragLoaded,this),i.on(x.FRAG_BUFFERED,this.onFragBuffered,this),i.on(x.LEVEL_SWITCHING,this.onLevelSwitching,this),i.on(x.LEVEL_LOADED,this.onLevelLoaded,this),i.on(x.LEVELS_UPDATED,this.onLevelsUpdated,this),i.on(x.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),i.on(x.ERROR,this.onError,this)},d.unregisterListeners=function(){var i=this.hls;i&&(i.off(x.MANIFEST_LOADING,this.onManifestLoading,this),i.off(x.FRAG_LOADING,this.onFragLoading,this),i.off(x.FRAG_LOADED,this.onFragLoaded,this),i.off(x.FRAG_BUFFERED,this.onFragBuffered,this),i.off(x.LEVEL_SWITCHING,this.onLevelSwitching,this),i.off(x.LEVEL_LOADED,this.onLevelLoaded,this),i.off(x.LEVELS_UPDATED,this.onLevelsUpdated,this),i.off(x.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),i.off(x.ERROR,this.onError,this))},d.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null},d.onManifestLoading=function(i,o){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()},d.onLevelsUpdated=function(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null},d.onMaxAutoLevelUpdated=function(){this.firstSelection=-1,this.nextAutoLevelKey=""},d.onFragLoading=function(i,o){var h,u=o.frag;this.ignoreFragment(u)||(u.bitrateTest||(this.fragCurrent=u,this.partCurrent=null!=(h=o.part)?h:null),this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100))},d.onLevelSwitching=function(i,o){this.clearTimer()},d.onError=function(i,o){if(!o.fatal)switch(o.details){case ge.BUFFER_ADD_CODEC_ERROR:case ge.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case ge.FRAG_LOAD_TIMEOUT:var u=o.frag,h=this.fragCurrent,p=this.partCurrent;if(u&&h&&u.sn===h.sn&&u.level===h.level){var v=performance.now(),y=p?p.stats:u.stats,C=v-y.loading.start,R=y.loading.first?y.loading.first-y.loading.start:-1;if(y.loaded&&R>-1){var J=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(C-Math.min(J,R),y.loaded)}else this.bwEstimator.sampleTTFB(C)}}},d.getTimeToLoadFrag=function(i,o,u,h){return i+u/o+(h?this.lastLevelLoadSec:0)},d.onLevelLoaded=function(i,o){var u=this.hls.config,h=o.stats.loading,p=h.end-h.start;Q(p)&&(this.lastLevelLoadSec=p/1e3),o.details.live?this.bwEstimator.update(u.abrEwmaSlowLive,u.abrEwmaFastLive):this.bwEstimator.update(u.abrEwmaSlowVoD,u.abrEwmaFastVoD)},d.onFragLoaded=function(i,o){var u=o.frag,h=o.part,p=h?h.stats:u.stats;if(u.type===Tr_MAIN&&this.bwEstimator.sampleTTFB(p.loading.first-p.loading.start),!this.ignoreFragment(u)){if(this.clearTimer(),u.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){var y=this.hls.levels[u.level],C=(y.loaded?y.loaded.bytes:0)+p.loaded,R=(y.loaded?y.loaded.duration:0)+(h?h.duration:u.duration);y.loaded={bytes:C,duration:R},y.realBitrate=Math.round(8*C/R)}u.bitrateTest?(this.onFragBuffered(x.FRAG_BUFFERED,{stats:p,frag:u,part:h,id:u.type}),u.bitrateTest=!1):this.lastLoadedFragLevel=u.level}},d.onFragBuffered=function(i,o){var u=o.frag,h=o.part,p=null!=h&&h.stats.loaded?h.stats:u.stats;if(!p.aborted&&!this.ignoreFragment(u)){var v=p.parsing.end-p.loading.start-Math.min(p.loading.first-p.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(v,p.loaded),p.bwEstimate=this.getBwEstimate(),this.bitrateTestDelay=u.bitrateTest?v/1e3:0}},d.ignoreFragment=function(i){return i.type!==Tr_MAIN||"initSegment"===i.sn},d.clearTimer=function(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)},d.getAutoLevelKey=function(){return this.getBwEstimate()+"_"+this.getStarvationDelay().toFixed(2)},d.getNextABRAutoLevel=function(){var i=this.fragCurrent,o=this.partCurrent,u=this.hls,h=u.maxAutoLevel,p=u.config,v=u.minAutoLevel,y=o?o.duration:i?i.duration:0,C=this.getBwEstimate(),R=this.getStarvationDelay(),U=p.abrBandWidthFactor,J=p.abrBandWidthUpFactor;if(R){var se=this.findBestLevel(C,v,h,R,0,U,J);if(se>=0)return se}var ye=y?Math.min(y,p.maxStarvationDelay):p.maxStarvationDelay;if(!R){var Ae=this.bitrateTestDelay;Ae&&(ye=(y?Math.min(y,p.maxLoadingDelay):p.maxLoadingDelay)-Ae,Pe.info("[abr] bitrate test took "+Math.round(1e3*Ae)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*ye)+" ms"),U=J=1)}var Ke=this.findBestLevel(C,v,h,R,ye,U,J);if(Pe.info("[abr] "+(R?"rebuffering expected":"buffer is empty")+", optimal quality level "+Ke),Ke>-1)return Ke;var Xe=u.levels[v],pt=u.levels[u.loadLevel];return Xe?.bitrate<pt?.bitrate?v:u.loadLevel},d.getStarvationDelay=function(){var i=this.hls,o=i.media;if(!o)return 1/0;var u=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,h=i.mainForwardBufferInfo;return(h?h.len:0)/u},d.getBwEstimate=function(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate},d.findBestLevel=function(i,o,u,h,p,v,y){var C,R=this,U=h+p,J=this.lastLoadedFragLevel,se=-1===J?this.hls.firstLevel:J,ye=this.fragCurrent,Ae=this.partCurrent,Ue=this.hls,Ke=Ue.levels,Xe=Ue.allAudioTracks,pt=Ue.loadLevel,yt=Ue.config;if(1===Ke.length)return 0;var on,nn=Ke[se],qt=!(null==nn||null==(C=nn.details)||!C.live),Dt=-1===pt||-1===J,an="SDR",Sn=nn?.frameRate||0,Rn=yt.audioPreference,Qn=yt.videoPreference,or=this.audioTracksByGroup||(this.audioTracksByGroup=function iu(g){return g.reduce(function(d,c){var i=d.groups[c.groupId];i||(i=d.groups[c.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(c);var o=c.channels||"2";return i.channels[o]=(i.channels[o]||0)+1,i.hasDefault=i.hasDefault||c.default,i.hasAutoSelect=i.hasAutoSelect||c.autoselect,i.hasDefault&&(d.hasDefaultAudio=!0),i.hasAutoSelect&&(d.hasAutoSelectAudio=!0),d},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}(Xe));if(Dt){if(-1!==this.firstSelection)return this.firstSelection;var Pr=function Vu(g,d,c,i,o){for(var u=Object.keys(g),h=i?.channels,p=i?.audioCodec,v=h&&2===parseInt(h),y=!0,C=!1,R=1/0,U=1/0,J=1/0,se=0,ye=[],Ae=Rs(d,o),Ue=Ae.preferHDR,Ke=Ae.allowedVideoRanges,Xe=function(){var on=g[u[pt]];y=on.channels[2]>0,R=Math.min(R,on.minHeight),U=Math.min(U,on.minFramerate),J=Math.min(J,on.minBitrate);var an=Ke.filter(function(Sn){return on.videoRanges[Sn]>0});an.length>0&&(C=!0,ye=an)},pt=u.length;pt--;)Xe();R=Q(R)?R:0,U=Q(U)?U:0;var yt=Math.max(1080,R),nn=Math.max(30,U);return J=Q(J)?J:c,c=Math.max(J,c),C||(d=void 0,ye=[]),{codecSet:u.reduce(function(Dt,on){var an=g[on];if(on===Dt)return Dt;if(an.minBitrate>c)return Yo(on,"min bitrate of "+an.minBitrate+" > current estimate of "+c),Dt;if(!an.hasDefaultAudio)return Yo(on,"no renditions with default or auto-select sound found"),Dt;if(p&&on.indexOf(p.substring(0,4))%5!=0)return Yo(on,'audio codec preference "'+p+'" not found'),Dt;if(h&&!v){if(!an.channels[h])return Yo(on,"no renditions with "+h+" channel sound found (channels options: "+Object.keys(an.channels)+")"),Dt}else if((!p||v)&&y&&0===an.channels[2])return Yo(on,"no renditions with stereo sound found"),Dt;return an.minHeight>yt?(Yo(on,"min resolution of "+an.minHeight+" > maximum of "+yt),Dt):an.minFramerate>nn?(Yo(on,"min framerate of "+an.minFramerate+" > maximum of "+nn),Dt):ye.some(function(Sn){return an.videoRanges[Sn]>0})?an.maxScore<se?(Yo(on,"max score of "+an.maxScore+" < selected max of "+se),Dt):Dt&&(Io(on)>=Io(Dt)||an.fragmentError>g[Dt].fragmentError)?Dt:(se=an.maxScore,on):(Yo(on,"no variants with VIDEO-RANGE of "+JSON.stringify(ye)+" found"),Dt)},void 0),videoRanges:ye,preferHDR:Ue,minFramerate:U,minBitrate:J}}(this.codecTiers||(this.codecTiers=function Wa(g,d,c,i){return g.slice(c,i+1).reduce(function(o,u){if(!u.codecSet)return o;var h=u.audioGroups,p=o[u.codecSet];p||(o[u.codecSet]=p={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!h,fragmentError:0}),p.minBitrate=Math.min(p.minBitrate,u.bitrate);var v=Math.min(u.height,u.width);return p.minHeight=Math.min(p.minHeight,v),p.minFramerate=Math.min(p.minFramerate,u.frameRate),p.maxScore=Math.max(p.maxScore,u.score),p.fragmentError+=u.fragmentError,p.videoRanges[u.videoRange]=(p.videoRanges[u.videoRange]||0)+1,h&&h.forEach(function(y){if(y){var C=d.groups[y];C&&(p.hasDefaultAudio=p.hasDefaultAudio||d.hasDefaultAudio?C.hasDefault:C.hasAutoSelect||!d.hasDefaultAudio&&!d.hasAutoSelectAudio,Object.keys(C.channels).forEach(function(R){p.channels[R]=(p.channels[R]||0)+C.channels[R]}))}}),o},{})}(Ke,or,o,u)),an,i,Rn,Qn),Xr=Pr.videoRanges;on=Pr.codecSet,an=Pr.preferHDR?Xr[Xr.length-1]:Xr[0],Sn=Pr.minFramerate,i=Math.max(i,Pr.minBitrate),Pe.log("[abr] picked start tier "+JSON.stringify(Pr))}else on=nn?.codecSet,an=nn?.videoRange;for(var Ai,bi=Ae?Ae.duration:ye?ye.duration:0,so=this.bwEstimator.getEstimateTTFB()/1e3,lo=[],So=function(){var Ca,vi=Ke[Wi],Qo=Wi>se;if(!vi)return 0;if(yt.useMediaCapabilities&&!vi.supportedResult&&!vi.supportedPromise){var Jo=navigator.mediaCapabilities;"function"==typeof Jo?.decodingInfo&&function el(g,d,c,i,o,u){var h=g.audioCodec?g.audioGroups:null,p=u?.audioCodec,v=u?.channels,y=v?parseInt(v):p?1/0:2,C=null;if(null!=h&&h.length)try{C=1===h.length&&h[0]?d.groups[h[0]].channels:h.reduce(function(R,U){if(U){var J=d.groups[U];if(!J)throw new Error("Audio track group "+U+" not found");Object.keys(J.channels).forEach(function(se){R[se]=(R[se]||0)+J.channels[se]})}return R},{2:0})}catch{return!0}return void 0!==g.videoCodec&&(g.width>1920&&g.height>1088||g.height>1920&&g.width>1088||g.frameRate>Math.max(i,30)||"SDR"!==g.videoRange&&g.videoRange!==c||g.bitrate>Math.max(o,8e6))||!!C&&Q(y)&&Object.keys(C).some(function(R){return parseInt(R)>y})}(vi,or,an,Sn,i,Rn)?(vi.supportedPromise=Yr(vi,or,Jo),vi.supportedPromise.then(function(ll){if(R.hls){vi.supportedResult=ll;var gc=R.hls.levels,ns=gc.indexOf(vi);ll.error?Pe.warn('[abr] MediaCapabilities decodingInfo error: "'+ll.error+'" for level '+ns+" "+JSON.stringify(ll)):ll.supported||(Pe.warn("[abr] Unsupported MediaCapabilities decodingInfo result for level "+ns+" "+JSON.stringify(ll)),ns>-1&&gc.length>1&&(Pe.log("[abr] Removing unsupported level "+ns),R.hls.removeLevel(ns)))}})):vi.supportedResult=jc}if(on&&vi.codecSet!==on||an&&vi.videoRange!==an||Qo&&Sn>vi.frameRate||!Qo&&Sn>0&&Sn<vi.frameRate||vi.supportedResult&&(null==(Ca=vi.supportedResult.decodingInfoResults)||!Ca[0].smooth))return lo.push(Wi),0;var bo,ki=vi.details,$i=(Ae?ki?.partTarget:ki?.averagetargetduration)||bi,sa=bi&&h>=2*bi&&0===p?Ke[Wi].averageBitrate:Ke[Wi].maxBitrate,Ji=R.getTimeToLoadFrag(so,bo=Qo?y*i:v*i,sa*$i,void 0===ki);if(bo>=sa&&(Wi===J||0===vi.loadError&&0===vi.fragmentError)&&(Ji<=so||!Q(Ji)||qt&&!R.bitrateTestDelay||Ji<U)){var Vs=R.forcedAutoLevel;return Wi!==pt&&(-1===Vs||Vs!==pt)&&(lo.length&&Pe.trace("[abr] Skipped level(s) "+lo.join(",")+" of "+u+' max with CODECS and VIDEO-RANGE:"'+Ke[lo[0]].codecs+'" '+Ke[lo[0]].videoRange+'; not compatible with "'+nn.codecs+'" '+an),Pe.info("[abr] switch candidate:"+se+"->"+Wi+" adjustedbw("+Math.round(bo)+")-bitrate="+Math.round(bo-sa)+" ttfb:"+so.toFixed(1)+" avgDuration:"+$i.toFixed(1)+" maxFetchDuration:"+U.toFixed(1)+" fetchDuration:"+Ji.toFixed(1)+" firstSelection:"+Dt+" codecSet:"+on+" videoRange:"+an+" hls.loadLevel:"+pt)),Dt&&(R.firstSelection=Wi),{v:Wi}}},Wi=u;Wi>=o;Wi--)if(0!==(Ai=So())&&Ai)return Ai.v;return-1},Ce(g,[{key:"firstAutoLevel",get:function(){var i=this.hls,o=i.maxAutoLevel,u=i.minAutoLevel,h=this.getBwEstimate(),v=this.findBestLevel(h,u,o,0,this.hls.config.maxStarvationDelay,1,1);if(v>-1)return v;var y=this.hls.firstLevel,C=Math.min(Math.max(y,u),o);return Pe.warn("[abr] Could not find best starting auto level. Defaulting to first in playlist "+y+" clamped to "+C),C}},{key:"forcedAutoLevel",get:function(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}},{key:"nextAutoLevel",get:function(){var i=this.forcedAutoLevel,u=this.bwEstimator.canEstimate(),h=this.lastLoadedFragLevel>-1;if(!(-1===i||u&&h&&this.nextAutoLevelKey!==this.getAutoLevelKey()))return i;var p=u&&h?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==i){var v=this.hls.levels;if(v.length>Math.max(i,p)&&v[i].loadError<=v[p].loadError)return i}return this._nextAutoLevel=p,this.nextAutoLevelKey=this.getAutoLevelKey(),p},set:function(i){var o=this.hls,u=o.maxAutoLevel,p=Math.min(Math.max(i,o.minAutoLevel),u);this._nextAutoLevel!==p&&(this.nextAutoLevelKey="",this._nextAutoLevel=p)}}]),g}(),Gu=function(){function g(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var d=g.prototype;return d.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},d.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},d.onHandlerDestroyed=function(){},d.hasInterval=function(){return!!this._tickInterval},d.hasNextTick=function(){return!!this._tickTimer},d.setInterval=function(i){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,i),!0)},d.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},d.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},d.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},d.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},d.doTick=function(){},g}(),ro_NOT_LOADED="NOT_LOADED",ro_APPENDING="APPENDING",ro_PARTIAL="PARTIAL",ro_OK="OK",Zu=function(){function g(c){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=c,this._registerListeners()}var d=g.prototype;return d._registerListeners=function(){var i=this.hls;i.on(x.BUFFER_APPENDED,this.onBufferAppended,this),i.on(x.FRAG_BUFFERED,this.onFragBuffered,this),i.on(x.FRAG_LOADED,this.onFragLoaded,this)},d._unregisterListeners=function(){var i=this.hls;i.off(x.BUFFER_APPENDED,this.onBufferAppended,this),i.off(x.FRAG_BUFFERED,this.onFragBuffered,this),i.off(x.FRAG_LOADED,this.onFragLoaded,this)},d.destroy=function(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null},d.getAppendedFrag=function(i,o){var u=this.activePartLists[o];if(u)for(var h=u.length;h--;){var p=u[h];if(!p)break;var v=p.end;if(p.start<=i&&null!==v&&i<=v)return p}return this.getBufferedFrag(i,o)},d.getBufferedFrag=function(i,o){for(var u=this.fragments,h=Object.keys(u),p=h.length;p--;){var v=u[h[p]];if(v?.body.type===o&&v.buffered){var y=v.body;if(y.start<=i&&i<=y.end)return y}}return null},d.detectEvictedFragments=function(i,o,u,h){var p=this;this.timeRanges&&(this.timeRanges[i]=o);var v=h?.fragment.sn||-1;Object.keys(this.fragments).forEach(function(y){var C=p.fragments[y];if(C&&!(v>=C.body.sn)){if(!C.buffered&&!C.loaded)return void(C.body.type===u&&p.removeFragment(C.body));var R=C.range[i];R&&R.time.some(function(U){var J=!p.isTimeBuffered(U.startPTS,U.endPTS,o);return J&&p.removeFragment(C.body),J})}})},d.detectPartialFragments=function(i){var o=this,u=this.timeRanges,h=i.frag,p=i.part;if(u&&"initSegment"!==h.sn){var v=tl(h),y=this.fragments[v];if(!(!y||y.buffered&&h.gap)){var C=!h.relurl;Object.keys(u).forEach(function(U){var J=h.elementaryStreams[U];J&&(y.range[U]=o.getBufferedTimes(h,p,C||!0===J.partial,u[U]))}),y.loaded=null,Object.keys(y.range).length?(y.buffered=!0,(y.body.endList=h.endList||y.body.endList)&&(this.endListFragments[y.body.type]=y),Ms(y)||this.removeParts(h.sn-1,h.type)):this.removeFragment(y.body)}}},d.removeParts=function(i,o){var u=this.activePartLists[o];u&&(this.activePartLists[o]=u.filter(function(h){return h.fragment.sn>=i}))},d.fragBuffered=function(i,o){var u=tl(i),h=this.fragments[u];!h&&o&&(h=this.fragments[u]={body:i,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},i.gap&&(this.hasGaps=!0)),h&&(h.loaded=null,h.buffered=!0)},d.getBufferedTimes=function(i,o,u,h){for(var p={time:[],partial:u},v=i.start,y=i.end,C=i.minEndPTS||y,R=i.maxStartPTS||v,U=0;U<h.length;U++){var J=h.start(U)-this.bufferPadding,se=h.end(U)+this.bufferPadding;if(R>=J&&C<=se){p.time.push({startPTS:Math.max(v,h.start(U)),endPTS:Math.min(y,h.end(U))});break}if(v<se&&y>J){var ye=Math.max(v,h.start(U)),Ae=Math.min(y,h.end(U));Ae>ye&&(p.partial=!0,p.time.push({startPTS:ye,endPTS:Ae}))}else if(y<=J)break}return p},d.getPartialFragment=function(i){var u,h,p,o=null,v=0,y=this.bufferPadding,C=this.fragments;return Object.keys(C).forEach(function(R){var U=C[R];U&&Ms(U)&&(p=U.body.end+y,i>=(h=U.body.start-y)&&i<=p&&(u=Math.min(i-h,p-i),v<=u&&(o=U.body,v=u)))}),o},d.isEndListAppended=function(i){var o=this.endListFragments[i];return void 0!==o&&(o.buffered||Ms(o))},d.getState=function(i){var o=tl(i),u=this.fragments[o];return u?u.buffered?Ms(u)?ro_PARTIAL:ro_OK:ro_APPENDING:ro_NOT_LOADED},d.isTimeBuffered=function(i,o,u){for(var h,p,v=0;v<u.length;v++){if(h=u.start(v)-this.bufferPadding,p=u.end(v)+this.bufferPadding,i>=h&&o<=p)return!0;if(o<=h)return!1}return!1},d.onFragLoaded=function(i,o){var u=o.frag;if("initSegment"!==u.sn&&!u.bitrateTest){var p=o.part?null:o,v=tl(u);this.fragments[v]={body:u,appendedPTS:null,loaded:p,buffered:!1,range:Object.create(null)}}},d.onBufferAppended=function(i,o){var u=this,h=o.frag,p=o.part,v=o.timeRanges;if("initSegment"!==h.sn){var y=h.type;if(p){var C=this.activePartLists[y];C||(this.activePartLists[y]=C=[]),C.push(p)}this.timeRanges=v,Object.keys(v).forEach(function(R){u.detectEvictedFragments(R,v[R],y,p)})}},d.onFragBuffered=function(i,o){this.detectPartialFragments(o)},d.hasFragment=function(i){var o=tl(i);return!!this.fragments[o]},d.hasParts=function(i){var o;return!(null==(o=this.activePartLists[i])||!o.length)},d.removeFragmentsInRange=function(i,o,u,h,p){var v=this;h&&!this.hasGaps||Object.keys(this.fragments).forEach(function(y){var C=v.fragments[y];if(C){var R=C.body;R.type!==u||h&&!R.gap||R.start<o&&R.end>i&&(C.buffered||p)&&v.removeFragment(R)}})},d.removeFragment=function(i){var o=tl(i);i.stats.loaded=0,i.clearElementaryStreamInfo();var u=this.activePartLists[i.type];if(u){var h=i.sn;this.activePartLists[i.type]=u.filter(function(p){return p.fragment.sn!==h})}delete this.fragments[o],i.endList&&delete this.endListFragments[i.type]},d.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1},g}();function Ms(g){var d,c,i;return g.buffered&&(g.body.gap||(null==(d=g.range.video)?void 0:d.partial)||(null==(c=g.range.audio)?void 0:c.partial)||(null==(i=g.range.audiovideo)?void 0:i.partial))}function tl(g){return g.type+"_"+g.level+"_"+g.sn}var au={length:0,start:function(){return 0},end:function(){return 0}},ui=function(){function g(){}return g.isBuffered=function(c,i){try{if(c)for(var o=g.getBuffered(c),u=0;u<o.length;u++)if(i>=o.start(u)&&i<=o.end(u))return!0}catch{}return!1},g.bufferInfo=function(c,i,o){try{if(c){var p,u=g.getBuffered(c),h=[];for(p=0;p<u.length;p++)h.push({start:u.start(p),end:u.end(p)});return this.bufferedInfo(h,i,o)}}catch{}return{len:0,start:i,end:i,nextStart:void 0}},g.bufferedInfo=function(c,i,o){i=Math.max(0,i),c.sort(function(Ae,Ue){return Ae.start-Ue.start||Ue.end-Ae.end});var u=[];if(o)for(var h=0;h<c.length;h++){var p=u.length;if(p){var v=u[p-1].end;c[h].start-v<o?c[h].end>v&&(u[p-1].end=c[h].end):u.push(c[h])}else u.push(c[h])}else u=c;for(var C,y=0,R=i,U=i,J=0;J<u.length;J++){var se=u[J].start,ye=u[J].end;if(i+o>=se&&i<ye)R=se,y=(U=ye)-i;else if(i+o<se){C=se;break}}return{len:y,start:R||0,end:U||0,nextStart:C}},g.getBuffered=function(c){try{return c.buffered}catch(i){return Pe.log("failed to get media.buffered",i),au}},g}(),ju=function(d,c,i,o,u,h){void 0===o&&(o=0),void 0===u&&(u=-1),void 0===h&&(h=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=d,this.sn=c,this.id=i,this.size=o,this.part=u,this.partial=h};function cs(g,d){for(var c=0,i=g.length;c<i;c++){var o;if((null==(o=g[c])?void 0:o.cc)===d)return g[c]}return null}function Cl(g,d){if(g){var c=g.start+d;g.start=g.startPTS=c,g.endPTS=c+g.duration}}function Ku(g,d){for(var c=d.fragments,i=0,o=c.length;i<o;i++)Cl(c[i],g);d.fragmentHint&&Cl(d.fragmentHint,g),d.alignedSliding=!0}function Xf(g,d,c){d&&(function Qf(g,d,c){if(function qu(g,d,c){return!(!d||!(c.endCC>c.startCC||g&&g.cc<c.startCC))}(g,c,d)){var i=function $f(g,d){var c=g.fragments,i=d.fragments;if(i.length&&c.length){var o=cs(c,i[0].cc);if(o&&(!o||o.startPTS))return o;Pe.log("No frag in previous level to align on")}else Pe.log("No fragments to align")}(c,d);i&&Q(i.start)&&(Pe.log("Adjusting PTS using last level due to CC increase within current level "+d.url),Ku(i.start,d))}}(g,c,d),!c.alignedSliding&&d&&su(c,d),!c.alignedSliding&&d&&!c.skippedSegments&&Jl(d,c))}function su(g,d){if(g.hasProgramDateTime&&d.hasProgramDateTime){var c=g.fragments,i=d.fragments;if(c.length&&i.length){var o,u,h=Math.min(d.endCC,g.endCC);d.startCC<h&&g.startCC<h&&(o=cs(i,h),u=cs(c,h)),(!o||!u)&&(u=cs(c,(o=i[Math.floor(i.length/2)]).cc)||c[Math.floor(c.length/2)]);var p=o.programDateTime,v=u.programDateTime;p&&v&&Ku((v-p)/1e3-(u.start-o.start),g)}}}var zo=Math.pow(2,17),Yu=function(){function g(c){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=c}var d=g.prototype;return d.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},d.abort=function(){this.loader&&this.loader.abort()},d.load=function(i,o){var u=this,h=i.url;if(!h)return Promise.reject(new Qi({type:Ee.NETWORK_ERROR,details:ge.FRAG_LOAD_ERROR,fatal:!1,frag:i,error:new Error("Fragment does not have a "+(h?"part list":"url")),networkDetails:null}));this.abort();var p=this.config,v=p.fLoader,y=p.loader;return new Promise(function(C,R){if(u.loader&&u.loader.destroy(),i.gap){if(i.tagList.some(function(Ae){return"GAP"===Ae[0]}))return void R(Kc(i));i.gap=!1}var U=u.loader=i.loader=v?new v(p):new y(p),J=lu(i),se=Zc(p.fragLoadPolicy.default),ye={loadPolicy:se,timeout:se.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===i.sn?1/0:zo};i.stats=U.stats,U.load(J,ye,{onSuccess:function(Ue,Ke,Xe,pt){u.resetLoader(i,U);var yt=Ue.data;Xe.resetIV&&i.decryptdata&&(i.decryptdata.iv=new Uint8Array(yt.slice(0,16)),yt=yt.slice(16)),C({frag:i,part:null,payload:yt,networkDetails:pt})},onError:function(Ue,Ke,Xe,pt){u.resetLoader(i,U),R(new Qi({type:Ee.NETWORK_ERROR,details:ge.FRAG_LOAD_ERROR,fatal:!1,frag:i,response:hr({url:h,data:void 0},Ue),error:new Error("HTTP Error "+Ue.code+" "+Ue.text),networkDetails:Xe,stats:pt}))},onAbort:function(Ue,Ke,Xe){u.resetLoader(i,U),R(new Qi({type:Ee.NETWORK_ERROR,details:ge.INTERNAL_ABORTED,fatal:!1,frag:i,error:new Error("Aborted"),networkDetails:Xe,stats:Ue}))},onTimeout:function(Ue,Ke,Xe){u.resetLoader(i,U),R(new Qi({type:Ee.NETWORK_ERROR,details:ge.FRAG_LOAD_TIMEOUT,fatal:!1,frag:i,error:new Error("Timeout after "+ye.timeout+"ms"),networkDetails:Xe,stats:Ue}))},onProgress:function(Ue,Ke,Xe,pt){o&&o({frag:i,part:null,payload:Xe,networkDetails:pt})}})})},d.loadPart=function(i,o,u){var h=this;this.abort();var p=this.config,v=p.fLoader,y=p.loader;return new Promise(function(C,R){if(h.loader&&h.loader.destroy(),i.gap||o.gap)R(Kc(i,o));else{var U=h.loader=i.loader=v?new v(p):new y(p),J=lu(i,o),se=Zc(p.fragLoadPolicy.default),ye={loadPolicy:se,timeout:se.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:zo};o.stats=U.stats,U.load(J,ye,{onSuccess:function(Ue,Ke,Xe,pt){h.resetLoader(i,U),h.updateStatsFromPart(i,o);var yt={frag:i,part:o,payload:Ue.data,networkDetails:pt};u(yt),C(yt)},onError:function(Ue,Ke,Xe,pt){h.resetLoader(i,U),R(new Qi({type:Ee.NETWORK_ERROR,details:ge.FRAG_LOAD_ERROR,fatal:!1,frag:i,part:o,response:hr({url:J.url,data:void 0},Ue),error:new Error("HTTP Error "+Ue.code+" "+Ue.text),networkDetails:Xe,stats:pt}))},onAbort:function(Ue,Ke,Xe){i.stats.aborted=o.stats.aborted,h.resetLoader(i,U),R(new Qi({type:Ee.NETWORK_ERROR,details:ge.INTERNAL_ABORTED,fatal:!1,frag:i,part:o,error:new Error("Aborted"),networkDetails:Xe,stats:Ue}))},onTimeout:function(Ue,Ke,Xe){h.resetLoader(i,U),R(new Qi({type:Ee.NETWORK_ERROR,details:ge.FRAG_LOAD_TIMEOUT,fatal:!1,frag:i,part:o,error:new Error("Timeout after "+ye.timeout+"ms"),networkDetails:Xe,stats:Ue}))}})}})},d.updateStatsFromPart=function(i,o){var u=i.stats,h=o.stats,p=h.total;if(u.loaded+=h.loaded,p){var v=Math.round(i.duration/o.duration),y=Math.min(Math.round(u.loaded/p),v),R=(v-y)*Math.round(u.loaded/y);u.total=u.loaded+R}else u.total=Math.max(u.loaded,u.total);var U=u.loading,J=h.loading;U.start?U.first+=J.first-J.start:(U.start=J.start,U.first=J.first),U.end=J.end},d.resetLoader=function(i,o){i.loader=null,this.loader===o&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),o.destroy()},g}();function lu(g,d){void 0===d&&(d=null);var c=d||g,i={frag:g,part:d,responseType:"arraybuffer",url:c.url,headers:{},rangeStart:0,rangeEnd:0},o=c.byteRangeStartOffset,u=c.byteRangeEndOffset;if(Q(o)&&Q(u)){var h,p=o,v=u;if("initSegment"===g.sn&&"AES-128"===(null==(h=g.decryptdata)?void 0:h.method)){var y=u-o;y%16&&(v=u+(16-y%16)),0!==o&&(i.resetIV=!0,p=o-16)}i.rangeStart=p,i.rangeEnd=v}return i}function Kc(g,d){var c=new Error("GAP "+(g.gap?"tag":"attribute")+" found"),i={type:Ee.MEDIA_ERROR,details:ge.FRAG_GAP,fatal:!1,frag:g,error:c,networkDetails:null};return d&&(i.part=d),(d||g).stats.aborted=!0,new Qi(i)}var Qi=function(g){function d(c){var i;return(i=g.call(this,c.error.message)||this).data=void 0,i.data=c,i}return _(d,g),d}(T(Error)),Jf=function(){function g(c,i){this.subtle=void 0,this.aesIV=void 0,this.subtle=c,this.aesIV=i}return g.prototype.decrypt=function(i,o){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},o,i)},g}(),uu=function(){function g(c,i){this.subtle=void 0,this.key=void 0,this.subtle=c,this.key=i}return g.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},g}();var Vo=function(){function g(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var d=g.prototype;return d.uint8ArrayToUint32Array_=function(i){for(var o=new DataView(i),u=new Uint32Array(4),h=0;h<4;h++)u[h]=o.getUint32(4*h);return u},d.initTable=function(){var i=this.sBox,o=this.invSBox,u=this.subMix,h=u[0],p=u[1],v=u[2],y=u[3],C=this.invSubMix,R=C[0],U=C[1],J=C[2],se=C[3],ye=new Uint32Array(256),Ae=0,Ue=0,Ke=0;for(Ke=0;Ke<256;Ke++)ye[Ke]=Ke<128?Ke<<1:Ke<<1^283;for(Ke=0;Ke<256;Ke++){var Xe=Ue^Ue<<1^Ue<<2^Ue<<3^Ue<<4;i[Ae]=Xe=Xe>>>8^255&Xe^99,o[Xe]=Ae;var pt=ye[Ae],yt=ye[pt],nn=ye[yt],qt=257*ye[Xe]^16843008*Xe;h[Ae]=qt<<24|qt>>>8,p[Ae]=qt<<16|qt>>>16,v[Ae]=qt<<8|qt>>>24,y[Ae]=qt,R[Xe]=(qt=16843009*nn^65537*yt^257*pt^16843008*Ae)<<24|qt>>>8,U[Xe]=qt<<16|qt>>>16,J[Xe]=qt<<8|qt>>>24,se[Xe]=qt,Ae?(Ae=pt^ye[ye[ye[nn^pt]]],Ue^=ye[ye[Ue]]):Ae=Ue=1}},d.expandKey=function(i){for(var o=this.uint8ArrayToUint32Array_(i),u=!0,h=0;h<o.length&&u;)u=o[h]===this.key[h],h++;if(!u){this.key=o;var p=this.keySize=o.length;if(4!==p&&6!==p&&8!==p)throw new Error("Invalid aes key size="+p);var y,C,pt,yt,v=this.ksRows=4*(p+6+1),R=this.keySchedule=new Uint32Array(v),U=this.invKeySchedule=new Uint32Array(v),J=this.sBox,se=this.rcon,ye=this.invSubMix,Ae=ye[0],Ue=ye[1],Ke=ye[2],Xe=ye[3];for(y=0;y<v;y++)y<p?pt=R[y]=o[y]:(yt=pt,y%p==0?(yt=J[(yt=yt<<8|yt>>>24)>>>24]<<24|J[yt>>>16&255]<<16|J[yt>>>8&255]<<8|J[255&yt],yt^=se[y/p|0]<<24):p>6&&y%p==4&&(yt=J[yt>>>24]<<24|J[yt>>>16&255]<<16|J[yt>>>8&255]<<8|J[255&yt]),R[y]=pt=(R[y-p]^yt)>>>0);for(C=0;C<v;C++)y=v-C,yt=3&C?R[y]:R[y-4],U[C]=C<4||y<=4?yt:Ae[J[yt>>>24]]^Ue[J[yt>>>16&255]]^Ke[J[yt>>>8&255]]^Xe[J[255&yt]],U[C]=U[C]>>>0}},d.networkToHostOrderSwap=function(i){return i<<24|(65280&i)<<8|(16711680&i)>>8|i>>>24},d.decrypt=function(i,o,u){for(var nn,qt,Dt,on,an,Sn,Rn,Qn,or,mr,Pr,Hr,Xr,h=this.keySize+6,p=this.invKeySchedule,v=this.invSBox,y=this.invSubMix,C=y[0],R=y[1],U=y[2],J=y[3],se=this.uint8ArrayToUint32Array_(u),ye=se[0],Ae=se[1],Ue=se[2],Ke=se[3],Xe=new Int32Array(i),pt=new Int32Array(Xe.length),oi=this.networkToHostOrderSwap;o<Xe.length;){for(Qn=oi(Xe[o]),or=oi(Xe[o+1]),mr=oi(Xe[o+2]),Pr=oi(Xe[o+3]),on=Qn^p[0],an=Pr^p[1],Sn=mr^p[2],Rn=or^p[3],Hr=4,Xr=1;Xr<h;Xr++)nn=C[an>>>24]^R[Sn>>16&255]^U[Rn>>8&255]^J[255&on]^p[Hr+1],qt=C[Sn>>>24]^R[Rn>>16&255]^U[on>>8&255]^J[255&an]^p[Hr+2],Dt=C[Rn>>>24]^R[on>>16&255]^U[an>>8&255]^J[255&Sn]^p[Hr+3],on=C[on>>>24]^R[an>>16&255]^U[Sn>>8&255]^J[255&Rn]^p[Hr],an=nn,Sn=qt,Rn=Dt,Hr+=4;nn=v[an>>>24]<<24^v[Sn>>16&255]<<16^v[Rn>>8&255]<<8^v[255&on]^p[Hr+1],qt=v[Sn>>>24]<<24^v[Rn>>16&255]<<16^v[on>>8&255]<<8^v[255&an]^p[Hr+2],Dt=v[Rn>>>24]<<24^v[on>>16&255]<<16^v[an>>8&255]<<8^v[255&Sn]^p[Hr+3],pt[o]=oi(v[on>>>24]<<24^v[an>>16&255]<<16^v[Sn>>8&255]<<8^v[255&Rn]^p[Hr]^ye),pt[o+1]=oi(Dt^Ae),pt[o+2]=oi(qt^Ue),pt[o+3]=oi(nn^Ke),ye=Qn,Ae=or,Ue=mr,Ke=Pr,o+=4}return pt.buffer},g}(),io=function(){function g(c,i){var u=(void 0===i?{}:i).removePKCS7Padding,h=void 0===u||u;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=c.enableSoftwareAES,this.removePKCS7Padding=h,h)try{var p=self.crypto;p&&(this.subtle=p.subtle||p.webkitSubtle)}catch{}null===this.subtle&&(this.useSoftware=!0)}var d=g.prototype;return d.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},d.isSync=function(){return this.useSoftware},d.flush=function(){var i=this.currentResult;if(!i||this.remainderData)return this.reset(),null;var u=new Uint8Array(i);return this.reset(),this.removePKCS7Padding?function Mr(g){var d=g.byteLength,c=d&&new DataView(g.buffer).getUint8(d-1);return c?Tn(g,0,d-c):g}(u):u},d.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},d.decrypt=function(i,o,u){var h=this;return this.useSoftware?new Promise(function(p,v){h.softwareDecrypt(new Uint8Array(i),o,u);var y=h.flush();y?p(y.buffer):v(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(i),o,u)},d.softwareDecrypt=function(i,o,u){var h=this.currentIV,p=this.currentResult,v=this.remainderData;this.logOnce("JS AES decrypt"),v&&(i=pi(v,i),this.remainderData=null);var y=this.getValidChunk(i);if(!y.length)return null;h&&(u=h);var C=this.softwareDecrypter;C||(C=this.softwareDecrypter=new Vo),C.expandKey(o);var R=p;return this.currentResult=C.decrypt(y.buffer,0,u),this.currentIV=Tn(y,-16).buffer,R||null},d.webCryptoDecrypt=function(i,o,u){var h=this,p=this.subtle;return(this.key!==o||!this.fastAesKey)&&(this.key=o,this.fastAesKey=new uu(p,o)),this.fastAesKey.expandKey().then(function(v){return p?(h.logOnce("WebCrypto AES decrypt"),new Jf(p,new Uint8Array(u)).decrypt(i.buffer,v)):Promise.reject(new Error("web crypto not initialized"))}).catch(function(v){return Pe.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+v.name+": "+v.message),h.onWebCryptoError(i,o,u)})},d.onWebCryptoError=function(i,o,u){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(i,o,u);var h=this.flush();if(h)return h.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},d.getValidChunk=function(i){var o=i,u=i.length-i.length%16;return u!==i.length&&(o=Tn(i,0,u),this.remainderData=Tn(i,u)),o},d.logOnce=function(i){this.logEnabled&&(Pe.log("[decrypter]: "+i),this.logEnabled=!1)},g}(),wo_toString=function(d){for(var c="",i=d.length,o=0;o<i;o++)c+="["+d.start(o).toFixed(3)+"-"+d.end(o).toFixed(3)+"]";return c},Nn_STOPPED="STOPPED",Nn_IDLE="IDLE",Nn_KEY_LOADING="KEY_LOADING",Nn_FRAG_LOADING="FRAG_LOADING",Nn_FRAG_LOADING_WAITING_RETRY="FRAG_LOADING_WAITING_RETRY",Nn_WAITING_TRACK="WAITING_TRACK",Nn_PARSING="PARSING",Nn_PARSED="PARSED",Nn_ENDED="ENDED",Nn_ERROR="ERROR",Nn_WAITING_INIT_PTS="WAITING_INIT_PTS",Nn_WAITING_LEVEL="WAITING_LEVEL",Ro=function(g){function d(i,o,u,h,p){var v;return(v=g.call(this)||this).hls=void 0,v.fragPrevious=null,v.fragCurrent=null,v.fragmentTracker=void 0,v.transmuxer=null,v._state=Nn_STOPPED,v.playlistType=void 0,v.media=null,v.mediaBuffer=null,v.config=void 0,v.bitrateTest=!1,v.lastCurrentTime=0,v.nextLoadPosition=0,v.startPosition=0,v.startTimeOffset=null,v.loadedmetadata=!1,v.retryDate=0,v.levels=null,v.fragmentLoader=void 0,v.keyLoader=void 0,v.levelLastLoaded=null,v.startFragRequested=!1,v.decrypter=void 0,v.initPTS=[],v.onvseeking=null,v.onvended=null,v.logPrefix="",v.log=void 0,v.warn=void 0,v.playlistType=p,v.logPrefix=h,v.log=Pe.log.bind(Pe,h+":"),v.warn=Pe.warn.bind(Pe,h+":"),v.hls=i,v.fragmentLoader=new Yu(i.config),v.keyLoader=u,v.fragmentTracker=o,v.config=i.config,v.decrypter=new io(i.config),i.on(x.MANIFEST_LOADED,v.onManifestLoaded,function M(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(v)),v}_(d,g);var c=d.prototype;return c.doTick=function(){this.onTickEnd()},c.onTickEnd=function(){},c.startLoad=function(o){},c.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);var o=this.fragCurrent;null!=o&&o.loader&&(o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Nn_STOPPED},c._streamEnded=function(o,u){if(u.live||o.nextStart||!o.end||!this.media)return!1;var h=u.partList;if(null!=h&&h.length){var p=h[h.length-1];return ui.isBuffered(this.media,p.start+p.duration/2)}return this.fragmentTracker.isEndListAppended(u.fragments[u.fragments.length-1].type)},c.getLevelDetails=function(){var o;if(this.levels&&null!==this.levelLastLoaded)return null==(o=this.levelLastLoaded)?void 0:o.details},c.onMediaAttached=function(o,u){var h=this.media=this.mediaBuffer=u.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),h.addEventListener("seeking",this.onvseeking),h.addEventListener("ended",this.onvended);var p=this.config;this.levels&&p.autoStartLoad&&this.state===Nn_STOPPED&&this.startLoad(p.startPosition)},c.onMediaDetaching=function(){var o=this.media;null!=o&&o.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),o&&this.onvseeking&&this.onvended&&(o.removeEventListener("seeking",this.onvseeking),o.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},c.onMediaSeeking=function(){var o=this.config,u=this.fragCurrent,h=this.media,v=this.state,y=h?h.currentTime:0,C=ui.bufferInfo(this.mediaBuffer||h,y,o.maxBufferHole);if(this.log("media seeking to "+(Q(y)?y.toFixed(3):y)+", state: "+v),this.state===Nn_ENDED)this.resetLoadingState();else if(u){var R=o.maxFragLookUpTolerance,U=u.start-R,J=u.start+u.duration+R;if(!C.len||J<C.start||U>C.end){var se=y>J;(y<U||se)&&(se&&u.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),u.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}h&&(this.fragmentTracker.removeFragmentsInRange(y,1/0,this.playlistType,!0),this.lastCurrentTime=y),!this.loadedmetadata&&!C.len&&(this.nextLoadPosition=this.startPosition=y),this.tickImmediate()},c.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},c.onManifestLoaded=function(o,u){this.startTimeOffset=u.startTimeOffset,this.initPTS=[]},c.onHandlerDestroying=function(){this.hls.off(x.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),g.prototype.onHandlerDestroying.call(this),this.hls=null},c.onHandlerDestroyed=function(){this.state=Nn_STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,g.prototype.onHandlerDestroyed.call(this)},c.loadFragment=function(o,u,h){this._loadFragForPlayback(o,u,h)},c._loadFragForPlayback=function(o,u,h){var p=this;this._doFragLoad(o,u,h,function(C){if(p.fragContextChanged(o))return p.warn("Fragment "+o.sn+(C.part?" p: "+C.part.index:"")+" of level "+o.level+" was dropped during download."),void p.fragmentTracker.removeFragment(o);o.stats.chunkCount++,p._handleFragmentLoadProgress(C)}).then(function(y){if(y){var C=p.state;if(p.fragContextChanged(o))return void((C===Nn_FRAG_LOADING||!p.fragCurrent&&C===Nn_PARSING)&&(p.fragmentTracker.removeFragment(o),p.state=Nn_IDLE));"payload"in y&&(p.log("Loaded fragment "+o.sn+" of level "+o.level),p.hls.trigger(x.FRAG_LOADED,y)),p._handleFragmentLoadComplete(y)}}).catch(function(y){p.state===Nn_STOPPED||p.state===Nn_ERROR||(p.warn(y),p.resetFragmentLoading(o))})},c.clearTrackerIfNeeded=function(o){var u,h=this.fragmentTracker;if(h.getState(o)===ro_APPENDING){var y=this.getFwdBufferInfo(this.mediaBuffer,o.type),C=Math.max(o.duration,y?y.len:this.config.maxBufferLength);this.reduceMaxBufferLength(C)&&h.removeFragment(o)}else 0===(null==(u=this.mediaBuffer)?void 0:u.buffered.length)?h.removeAllFragments():h.hasParts(o.type)&&(h.detectPartialFragments({frag:o,part:null,stats:o.stats,id:o.type}),h.getState(o)===ro_PARTIAL&&h.removeFragment(o))},c.checkLiveUpdate=function(o){if(o.updated&&!o.live){var u=o.fragments[o.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:u,part:null,stats:u.stats,id:u.type})}o.fragments[0]||(o.deltaUpdateFailed=!0)},c.flushMainBuffer=function(o,u,h){void 0===h&&(h=null),o-u&&this.hls.trigger(x.BUFFER_FLUSHING,{startOffset:o,endOffset:u,type:h})},c._loadInitSegment=function(o,u){var h=this;this._doFragLoad(o,u).then(function(p){if(!p||h.fragContextChanged(o)||!h.levels)throw new Error("init load aborted");return p}).then(function(p){var v=h.hls,y=p.payload,C=o.decryptdata;if(y&&y.byteLength>0&&null!=C&&C.key&&C.iv&&"AES-128"===C.method){var R=self.performance.now();return h.decrypter.decrypt(new Uint8Array(y),C.key.buffer,C.iv.buffer).catch(function(U){throw v.trigger(x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.FRAG_DECRYPT_ERROR,fatal:!1,error:U,reason:U.message,frag:o}),U}).then(function(U){var J=self.performance.now();return v.trigger(x.FRAG_DECRYPTED,{frag:o,payload:U,stats:{tstart:R,tdecrypt:J}}),p.payload=U,h.completeInitSegmentLoad(p)})}return h.completeInitSegmentLoad(p)}).catch(function(p){h.state===Nn_STOPPED||h.state===Nn_ERROR||(h.warn(p),h.resetFragmentLoading(o))})},c.completeInitSegmentLoad=function(o){if(!this.levels)throw new Error("init load aborted, missing levels");var h=o.frag.stats;this.state=Nn_IDLE,o.frag.data=new Uint8Array(o.payload),h.parsing.start=h.buffering.start=self.performance.now(),h.parsing.end=h.buffering.end=self.performance.now(),this.tick()},c.fragContextChanged=function(o){var u=this.fragCurrent;return!o||!u||o.sn!==u.sn||o.level!==u.level},c.fragBufferedComplete=function(o,u){var h,p,v,y,C=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log("Buffered "+o.type+" sn: "+o.sn+(u?" part: "+u.index:"")+" of "+(this.playlistType===Tr_MAIN?"level":"track")+" "+o.level+" (frag:["+(null!=(h=o.startPTS)?h:NaN).toFixed(3)+"-"+(null!=(p=o.endPTS)?p:NaN).toFixed(3)+"] > buffer:"+(C?wo_toString(ui.getBuffered(C)):"(detached)")+")"),"initSegment"!==o.sn){var R;if(o.type!==Tr_SUBTITLE){var U=o.elementaryStreams;if(!Object.keys(U).some(function(se){return!!U[se]}))return void(this.state=Nn_IDLE)}var J=null==(R=this.levels)?void 0:R[o.level];null!=J&&J.fragmentError&&(this.log("Resetting level fragment error count of "+J.fragmentError+" on frag buffered"),J.fragmentError=0)}this.state=Nn_IDLE,C&&(!this.loadedmetadata&&o.type==Tr_MAIN&&C.buffered.length&&(null==(v=this.fragCurrent)?void 0:v.sn)===(null==(y=this.fragPrevious)?void 0:y.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},c.seekToStartPos=function(){},c._handleFragmentLoadComplete=function(o){var u=this.transmuxer;if(u){var h=o.frag,p=o.part,v=o.partsLoaded,y=!v||0===v.length||v.some(function(R){return!R}),C=new ju(h.level,h.sn,h.stats.chunkCount+1,0,p?p.index:-1,!y);u.flush(C)}},c._handleFragmentLoadProgress=function(o){},c._doFragLoad=function(o,u,h,p){var v,y=this;void 0===h&&(h=null);var C=u?.details;if(!this.levels||!C)throw new Error("frag load aborted, missing level"+(C?"":" detail")+"s");var R=null;if(!o.encrypted||null!=(v=o.decryptdata)&&v.key?!o.encrypted&&C.encryptedFragments.length&&this.keyLoader.loadClear(o,C.encryptedFragments):(this.log("Loading key for "+o.sn+" of ["+C.startSN+"-"+C.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+o.level),this.state=Nn_KEY_LOADING,this.fragCurrent=o,R=this.keyLoader.load(o).then(function(Ke){if(!y.fragContextChanged(Ke.frag))return y.hls.trigger(x.KEY_LOADED,Ke),y.state===Nn_KEY_LOADING&&(y.state=Nn_IDLE),Ke}),this.hls.trigger(x.KEY_LOADING,{frag:o}),null===this.fragCurrent&&(R=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),h=Math.max(o.start,h||0),this.config.lowLatencyMode&&"initSegment"!==o.sn){var U=C.partList;if(U&&p){h>o.end&&C.fragmentHint&&(o=C.fragmentHint);var J=this.getNextPart(U,o,h);if(J>-1){var ye,se=U[J];return this.log("Loading part sn: "+o.sn+" p: "+se.index+" cc: "+o.cc+" of playlist ["+C.startSN+"-"+C.endSN+"] parts [0-"+J+"-"+(U.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+o.level+", target: "+parseFloat(h.toFixed(3))),this.nextLoadPosition=se.start+se.duration,this.state=Nn_FRAG_LOADING,ye=R?R.then(function(Ke){return!Ke||y.fragContextChanged(Ke.frag)?null:y.doFragPartsLoad(o,se,u,p)}).catch(function(Ke){return y.handleFragLoadError(Ke)}):this.doFragPartsLoad(o,se,u,p).catch(function(Ke){return y.handleFragLoadError(Ke)}),this.hls.trigger(x.FRAG_LOADING,{frag:o,part:se,targetBufferTime:h}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):ye}if(!o.url||this.loadedEndOfParts(U,h))return Promise.resolve(null)}}this.log("Loading fragment "+o.sn+" cc: "+o.cc+" "+(C?"of ["+C.startSN+"-"+C.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+o.level+", target: "+parseFloat(h.toFixed(3))),Q(o.sn)&&!this.bitrateTest&&(this.nextLoadPosition=o.start+o.duration),this.state=Nn_FRAG_LOADING;var Ue,Ae=this.config.progressive;return Ue=Ae&&R?R.then(function(Ke){return!Ke||y.fragContextChanged(Ke?.frag)?null:y.fragmentLoader.load(o,p)}).catch(function(Ke){return y.handleFragLoadError(Ke)}):Promise.all([this.fragmentLoader.load(o,Ae?p:void 0),R]).then(function(Ke){var Xe=Ke[0];return!Ae&&Xe&&p&&p(Xe),Xe}).catch(function(Ke){return y.handleFragLoadError(Ke)}),this.hls.trigger(x.FRAG_LOADING,{frag:o,targetBufferTime:h}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):Ue},c.doFragPartsLoad=function(o,u,h,p){var v=this;return new Promise(function(y,C){var R,U=[],J=null==(R=h.details)?void 0:R.partList;!function ye(Ae){v.fragmentLoader.loadPart(o,Ae,p).then(function(Ue){U[Ae.index]=Ue;var Ke=Ue.part;v.hls.trigger(x.FRAG_LOADED,Ue);var Xe=zf(h,o.sn,Ae.index+1)||Gc(J,o.sn,Ae.index+1);if(!Xe)return y({frag:o,part:Ke,partsLoaded:U});ye(Xe)}).catch(C)}(u)})},c.handleFragLoadError=function(o){if("data"in o){var u=o.data;o.data&&u.details===ge.INTERNAL_ABORTED?this.handleFragLoadAborted(u.frag,u.part):this.hls.trigger(x.ERROR,u)}else this.hls.trigger(x.ERROR,{type:Ee.OTHER_ERROR,details:ge.INTERNAL_EXCEPTION,err:o,error:o,fatal:!0});return null},c._handleTransmuxerFlush=function(o){var u=this.getCurrentContext(o);if(u&&this.state===Nn_PARSING){var h=u.frag,p=u.part,v=u.level,y=self.performance.now();h.stats.parsing.end=y,p&&(p.stats.parsing.end=y),this.updateLevelTiming(h,p,v,o.partial)}else!this.fragCurrent&&this.state!==Nn_STOPPED&&this.state!==Nn_ERROR&&(this.state=Nn_IDLE)},c.getCurrentContext=function(o){var u=this.levels,h=this.fragCurrent,p=o.level,v=o.sn,y=o.part;if(null==u||!u[p])return this.warn("Levels object was unset while buffering fragment "+v+" of level "+p+". The current chunk will not be buffered."),null;var C=u[p],R=y>-1?zf(C,v,y):null,U=R?R.fragment:function Yf(g,d,c){if(null==g||!g.details)return null;var i=g.details,o=i.fragments[d-i.startSN];return o||(o=i.fragmentHint)&&o.sn===d?o:d<i.startSN&&c&&c.sn===d?c:null}(C,v,h);return U?(h&&h!==U&&(U.stats=h.stats),{frag:U,part:R,level:C}):null},c.bufferFragmentData=function(o,u,h,p,v){var y;if(o&&this.state===Nn_PARSING){var C=o.data1,R=o.data2,U=C;if(C&&R&&(U=pi(C,R)),null!=(y=U)&&y.length&&(this.hls.trigger(x.BUFFER_APPENDING,{type:o.type,frag:u,part:h,chunkMeta:p,parent:u.type,data:U}),o.dropped&&o.independent&&!h)){if(v)return;this.flushBufferGap(u)}}},c.flushBufferGap=function(o){var u=this.media;if(u){if(!ui.isBuffered(u,u.currentTime))return void this.flushMainBuffer(0,o.start);var h=u.currentTime,p=ui.bufferInfo(u,h,0),y=Math.min(2*this.config.maxFragLookUpTolerance,.25*o.duration),C=Math.max(Math.min(o.start-y,p.end-y),h+y);o.start-C>y&&this.flushMainBuffer(C,o.start)}},c.getFwdBufferInfo=function(o,u){var h=this.getLoadPosition();return Q(h)?this.getFwdBufferInfoAtPos(o,h,u):null},c.getFwdBufferInfoAtPos=function(o,u,h){var p=this.config.maxBufferHole,v=ui.bufferInfo(o,u,p);if(0===v.len&&void 0!==v.nextStart){var y=this.fragmentTracker.getBufferedFrag(u,h);if(y&&v.nextStart<y.end)return ui.bufferInfo(o,u,Math.max(v.nextStart,p))}return v},c.getMaxBufferLength=function(o){var h,u=this.config;return h=o?Math.max(8*u.maxBufferSize/o,u.maxBufferLength):u.maxBufferLength,Math.min(h,u.maxMaxBufferLength)},c.reduceMaxBufferLength=function(o){var u=this.config;return u.maxMaxBufferLength>=(o||u.maxBufferLength)&&(u.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+u.maxMaxBufferLength+"s"),!0)},c.getAppendedFrag=function(o,u){var h=this.fragmentTracker.getAppendedFrag(o,Tr_MAIN);return h&&"fragment"in h?h.fragment:h},c.getNextFragment=function(o,u){var h=u.fragments,p=h.length;if(!p)return null;var C,v=this.config,y=h[0].start;if(u.live){var R=v.initialLiveManifestSize;if(p<R)return this.warn("Not enough fragments to start playback (have: "+p+", need: "+R+")"),null;(!u.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||o<y)&&(C=this.getInitialLiveFragment(u,h),this.startPosition=this.nextLoadPosition=C?this.hls.liveSyncPosition||C.start:o)}else o<=y&&(C=h[0]);return C||(C=this.getFragmentAtPosition(o,v.lowLatencyMode?u.partEnd:u.fragmentEnd,u)),this.mapToInitFragWhenRequired(C)},c.isLoopLoading=function(o,u){var h=this.fragmentTracker.getState(o);return(h===ro_OK||h===ro_PARTIAL&&!!o.gap)&&this.nextLoadPosition>u},c.getNextFragmentLoopLoading=function(o,u,h,p,v){var y=o.gap,C=this.getNextFragment(this.nextLoadPosition,u);if(null===C)return C;if(o=C,y&&o&&!o.gap&&h.nextStart){var R=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,h.nextStart,p);if(null!==R&&h.len+R.len>=v)return this.log('buffer full after gaps in "'+p+'" playlist starting at sn: '+o.sn),null}return o},c.mapToInitFragWhenRequired=function(o){return null==o||!o.initSegment||null!=o&&o.initSegment.data||this.bitrateTest?o:o.initSegment},c.getNextPart=function(o,u,h){for(var p=-1,v=!1,y=!0,C=0,R=o.length;C<R;C++){var U=o[C];if(y=y&&!U.independent,p>-1&&h<U.start)break;var J=U.loaded;J?p=-1:(v||U.independent||y)&&U.fragment===u&&(p=C),v=J}return p},c.loadedEndOfParts=function(o,u){var h=o[o.length-1];return h&&u>h.start&&h.loaded},c.getInitialLiveFragment=function(o,u){var h=this.fragPrevious,p=null;if(h){if(o.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+h.programDateTime),p=function nu(g,d,c){if(null===d||!Array.isArray(g)||!g.length||!Q(d))return null;if(d<(g[0].programDateTime||0))return null;if(d>=(g[g.length-1].endProgramDateTime||0))return null;c=c||0;for(var u=0;u<g.length;++u){var h=g[u];if(Br(d,c,h))return h}return null}(u,h.endProgramDateTime,this.config.maxFragLookUpTolerance)),!p){var v=h.sn+1;if(v>=o.startSN&&v<=o.endSN){var y=u[v-o.startSN];h.cc===y.cc&&this.log("Live playlist, switching playlist, load frag with next SN: "+(p=y).sn)}p||(p=function Uu(g,d){return Ds_search(g,function(c){return c.cc<d?1:c.cc>d?-1:0})}(u,h.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+p.sn)}}else{var C=this.hls.liveSyncPosition;null!==C&&(p=this.getFragmentAtPosition(C,this.bitrateTest?o.fragmentEnd:o.edge,o))}return p},c.getFragmentAtPosition=function(o,u,h){var ye,p=this.config,v=this.fragPrevious,y=h.fragments,C=h.endSN,R=h.fragmentHint,U=p.maxFragLookUpTolerance,J=h.partList,se=!!(p.lowLatencyMode&&null!=J&&J.length&&R);if(se&&R&&!this.bitrateTest&&(y=y.concat(R),C=R.sn),ye=o<u?na(v,y,o,o>u-U?0:U):y[y.length-1]){var Ue=ye.sn-h.startSN,Ke=this.fragmentTracker.getState(ye);if((Ke===ro_OK||Ke===ro_PARTIAL&&ye.gap)&&(v=ye),v&&ye.sn===v.sn&&(!se||J[0].fragment.sn>ye.sn)&&v&&ye.level===v.level){var pt=y[Ue+1];ye=ye.sn<C&&this.fragmentTracker.getState(pt)!==ro_OK?pt:null}}return ye},c.synchronizeToLiveEdge=function(o){var u=this.config,h=this.media;if(h){var p=this.hls.liveSyncPosition,v=h.currentTime,C=o.edge,R=v>=o.fragments[0].start-u.maxFragLookUpTolerance&&v<=C;null!==p&&h.duration>p&&(v<p||!R)&&(!R&&h.readyState<4||v<C-(void 0!==u.liveMaxLatencyDuration?u.liveMaxLatencyDuration:u.liveMaxLatencyDurationCount*o.targetduration))&&(this.loadedmetadata||(this.nextLoadPosition=p),h.readyState&&(this.warn("Playback: "+v.toFixed(3)+" is located too far from the end of live sliding playlist: "+C+", reset currentTime to : "+p.toFixed(3)),h.currentTime=p))}},c.alignPlaylists=function(o,u,h){var p=o.fragments.length;if(!p)return this.warn("No fragments in live playlist"),0;var v=o.fragments[0].start,y=!u,C=o.alignedSliding&&Q(v);if(y||!C&&!v){var R=this.fragPrevious;Xf(R,h,o);var U=o.fragments[0].start;return this.log("Live playlist sliding: "+U.toFixed(2)+" start-sn: "+(u?u.startSN:"na")+"->"+o.startSN+" prev-sn: "+(R?R.sn:"na")+" fragments: "+p),U}return v},c.waitForCdnTuneIn=function(o){return o.live&&o.canBlockReload&&o.partTarget&&o.tuneInGoal>Math.max(o.partHoldBack,3*o.partTarget)},c.setStartPosition=function(o,u){var h=this.startPosition;if(h<u&&(h=-1),-1===h||-1===this.lastCurrentTime){var p=null!==this.startTimeOffset,v=p?this.startTimeOffset:o.startTimeOffset;null!==v&&Q(v)?(h=u+v,v<0&&(h+=o.totalduration),h=Math.min(Math.max(u,h),u+o.totalduration),this.log("Start time offset "+v+" found in "+(p?"multivariant":"media")+" playlist, adjust startPosition to "+h),this.startPosition=h):o.live?h=this.hls.liveSyncPosition||u:this.startPosition=h=0,this.lastCurrentTime=h}this.nextLoadPosition=h},c.getLoadPosition=function(){var o=this.media,u=0;return this.loadedmetadata&&o?u=o.currentTime:this.nextLoadPosition&&(u=this.nextLoadPosition),u},c.handleFragLoadAborted=function(o,u){this.transmuxer&&"initSegment"!==o.sn&&o.stats.aborted&&(this.warn("Fragment "+o.sn+(u?" part "+u.index:"")+" of level "+o.level+" was aborted"),this.resetFragmentLoading(o))},c.resetFragmentLoading=function(o){(!this.fragCurrent||!this.fragContextChanged(o)&&this.state!==Nn_FRAG_LOADING_WAITING_RETRY)&&(this.state=Nn_IDLE)},c.onFragmentOrKeyLoadError=function(o,u){if(u.chunkMeta&&!u.frag){var h=this.getCurrentContext(u.chunkMeta);h&&(u.frag=h.frag)}var p=u.frag;if(p&&p.type===o&&this.levels){var v;if(this.fragContextChanged(p))return void this.warn("Frag load error must match current frag to retry "+p.url+" > "+(null==(v=this.fragCurrent)?void 0:v.url));var y=u.details===ge.FRAG_GAP;y&&this.fragmentTracker.fragBuffered(p,!0);var C=u.errorAction,R=C||{},U=R.action,J=R.retryCount,se=void 0===J?0:J,ye=R.retryConfig;if(C&&U===Er_RetryRequest&&ye){this.resetStartWhenNotLoaded(this.levelLastLoaded);var Ae=eu(ye,se);this.warn("Fragment "+p.sn+" of "+o+" "+p.level+" errored with "+u.details+", retrying loading "+(se+1)+"/"+ye.maxNumRetry+" in "+Ae+"ms"),C.resolved=!0,this.retryDate=self.performance.now()+Ae,this.state=Nn_FRAG_LOADING_WAITING_RETRY}else if(ye&&C){if(this.resetFragmentErrors(o),!(se<ye.maxNumRetry))return void Pe.warn(u.details+" reached or exceeded max retry ("+se+")");!y&&U!==Er_RemoveAlternatePermanently&&(C.resolved=!0)}else this.state=C?.action===Er_SendAlternateToPenaltyBox?Nn_WAITING_LEVEL:Nn_ERROR;this.tickImmediate()}},c.reduceLengthAndFlushBuffer=function(o){if(this.state===Nn_PARSING||this.state===Nn_PARSED){var u=o.parent,h=this.getFwdBufferInfo(this.mediaBuffer,u),p=h&&h.len>.5;p&&this.reduceMaxBufferLength(h.len);var v=!p;return v&&this.warn("Buffer full error while media.currentTime is not buffered, flush "+u+" buffer"),o.frag&&(this.fragmentTracker.removeFragment(o.frag),this.nextLoadPosition=o.frag.start),this.resetLoadingState(),v}return!1},c.resetFragmentErrors=function(o){o===Tr_AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==Nn_STOPPED&&(this.state=Nn_IDLE)},c.afterBufferFlushed=function(o,u,h){if(o){var p=ui.getBuffered(o);this.fragmentTracker.detectEvictedFragments(u,p,h),this.state===Nn_ENDED&&this.resetLoadingState()}},c.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=Nn_IDLE},c.resetStartWhenNotLoaded=function(o){if(!this.loadedmetadata){this.startFragRequested=!1;var u=o?o.details:null;null!=u&&u.live?(this.startPosition=-1,this.setStartPosition(u,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},c.resetWhenMissingContext=function(o){this.warn("The loading context changed while buffering fragment "+o.sn+" of level "+o.level+". This chunk will not be buffered."),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()},c.removeUnbufferedFrags=function(o){void 0===o&&(o=0),this.fragmentTracker.removeFragmentsInRange(o,1/0,this.playlistType,!1,!0)},c.updateLevelTiming=function(o,u,h,p){var y,v=this,C=h.details;if(C){if(!Object.keys(o.elementaryStreams).reduce(function(J,se){var ye=o.elementaryStreams[se];if(ye){var Ae=ye.endPTS-ye.startPTS;if(Ae<=0)return v.warn("Could not parse fragment "+o.sn+" "+se+" duration reliably ("+Ae+")"),J||!1;var Ue=p?0:Sl(C,o,ye.startPTS,ye.endPTS,ye.startDTS,ye.endDTS);return v.hls.trigger(x.LEVEL_PTS_UPDATED,{details:C,level:h,drift:Ue,type:se,frag:o,start:ye.startPTS,end:ye.endPTS}),!0}return J},!1)&&null===(null==(y=this.transmuxer)?void 0:y.error)){var U=new Error("Found no media in fragment "+o.sn+" of level "+o.level+" resetting transmuxer to fallback to playlist timing");if(0===h.fragmentError&&(h.fragmentError++,o.gap=!0,this.fragmentTracker.removeFragment(o),this.fragmentTracker.fragBuffered(o,!0)),this.warn(U.message),this.hls.trigger(x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.FRAG_PARSING_ERROR,fatal:!1,error:U,frag:o,reason:"Found no media in msn "+o.sn+' of level "'+h.url+'"'}),!this.hls)return;this.resetTransmuxer()}this.state=Nn_PARSED,this.hls.trigger(x.FRAG_PARSED,{frag:o,part:u})}else this.warn("level.details undefined")},c.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},c.recoverWorkerError=function(o){"demuxerWorker"===o.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())},Ce(d,[{key:"state",get:function(){return this._state},set:function(o){var u=this._state;u!==o&&(this._state=o,this.log(u+"->"+o))}}]),d}(Gu),zu=function(){function g(){this.chunks=[],this.dataLength=0}var d=g.prototype;return d.push=function(i){this.chunks.push(i),this.dataLength+=i.length},d.flush=function(){var u,i=this.chunks;return i.length?(u=1===i.length?i[0]:function Wu(g,d){for(var c=new Uint8Array(d),i=0,o=0;o<g.length;o++){var u=g[o];c.set(u,i),i+=u.length}return c}(i,this.dataLength),this.reset(),u):new Uint8Array(0)},d.reset=function(){this.chunks.length=0,this.dataLength=0},g}();function Wo(g,d){return void 0===g&&(g=""),void 0===d&&(d=9e4),{type:g,id:-1,pid:-1,inputTimeScale:d,sequenceNumber:-1,samples:[],dropped:0}}var cu=function(){function g(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var d=g.prototype;return d.resetInitSegment=function(i,o,u,h){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},d.resetTimeStamp=function(i){this.initPTS=i,this.resetContiguity()},d.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},d.canParse=function(i,o){return!1},d.appendFrame=function(i,o,u){},d.demux=function(i,o){this.cachedData&&(i=pi(this.cachedData,i),this.cachedData=null);var p,u=ei(i,0),h=u?u.length:0,v=this._audioTrack,y=this._id3Track,C=u?zi(u):void 0,R=i.length;for((null===this.basePTS||0===this.frameIndex&&Q(C))&&(this.basePTS=Yc(C,o,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),u&&u.length>0&&y.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:u,type:Lo_audioId3,duration:Number.POSITIVE_INFINITY});h<R;){if(this.canParse(i,h)){var U=this.appendFrame(v,i,h);U?(this.frameIndex++,this.lastPTS=U.sample.pts,p=h+=U.length):h=R}else yi(i,h)?(u=ei(i,h),y.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:u,type:Lo_audioId3,duration:Number.POSITIVE_INFINITY}),p=h+=u.length):h++;if(h===R&&p!==R){var J=Tn(i,p);this.cachedData=this.cachedData?pi(this.cachedData,J):J}}return{audioTrack:v,videoTrack:Wo(),id3Track:y,textTrack:Wo()}},d.demuxSampleAes=function(i,o,u){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},d.flush=function(i){var o=this.cachedData;return o&&(this.cachedData=null,this.demux(o,0)),{audioTrack:this._audioTrack,videoTrack:Wo(),id3Track:this._id3Track,textTrack:Wo()}},d.destroy=function(){},g}(),Yc=function(d,c,i){return Q(d)?90*d:9e4*c+(i?9e4*i.baseTime/i.timescale:0)};function tr(g,d){return 255===g[d]&&240==(246&g[d+1])}function xr(g,d){return 1&g[d+1]?7:9}function xi(g,d){return(3&g[d+3])<<11|g[d+4]<<3|(224&g[d+5])>>>5}function fs(g,d){return d+1<g.length&&tr(g,d)}function xs(g,d){if(fs(g,d)){var c=xr(g,d);if(d+c>=g.length)return!1;var i=xi(g,d);if(i<=c)return!1;var o=d+i;return o===g.length||fs(g,o)}return!1}function ji(g,d,c,i,o){if(!g.samplerate){var u=function Zi(g,d,c,i){var o,u,h,p,v=navigator.userAgent.toLowerCase(),y=i,C=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];o=1+((192&d[c+2])>>>6);var R=(60&d[c+2])>>>2;if(!(R>C.length-1))return h=(1&d[c+2])<<2,h|=(192&d[c+3])>>>6,Pe.log("manifest codec:"+i+", ADTS type:"+o+", samplingIndex:"+R),/firefox/i.test(v)?R>=6?(o=5,p=new Array(4),u=R-3):(o=2,p=new Array(2),u=R):-1!==v.indexOf("android")?(o=2,p=new Array(2),u=R):(o=5,p=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&R>=6?u=R-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(R>=6&&1===h||/vivaldi/i.test(v))||!i&&1===h)&&(o=2,p=new Array(2)),u=R)),p[0]=o<<3,p[0]|=(14&R)>>1,p[1]|=(1&R)<<7,p[1]|=h<<3,5===o&&(p[1]|=(14&u)>>1,p[2]=(1&u)<<7,p[2]|=8,p[3]=0),{config:p,samplerate:C[R],channelCount:h,codec:"mp4a.40."+o,manifestCodec:y};var U=new Error("invalid ADTS sampling index:"+R);g.emit(x.ERROR,x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.FRAG_PARSING_ERROR,fatal:!0,error:U,reason:U.message})}(d,c,i,o);if(!u)return;g.config=u.config,g.samplerate=u.samplerate,g.channelCount=u.channelCount,g.codec=u.codec,g.manifestCodec=u.manifestCodec,Pe.log("parsed codec:"+g.codec+", rate:"+u.samplerate+", channels:"+u.channelCount)}}function $a(g){return 9216e4/g}function Rr(g,d,c,i,o){var v,h=i+o*$a(g.samplerate),p=function Ls(g,d){var c=xr(g,d);if(d+c<=g.length){var i=xi(g,d)-c;if(i>0)return{headerLength:c,frameLength:i}}}(d,c);if(p){var C=p.headerLength,R=C+p.frameLength,U=Math.max(0,c+R-d.length);U?(v=new Uint8Array(R-C)).set(d.subarray(c+C,d.length),0):v=d.subarray(c+C,c+R);var J={unit:v,pts:h};return U||g.samples.push(J),{sample:J,length:R,missing:U}}var se=d.length-c;return(v=new Uint8Array(se)).set(d.subarray(c,d.length),0),{sample:{unit:v,pts:h},length:se,missing:-1}}var ma=null,$u=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],nl=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],qi=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Il=[0,1,1,4];function ds(g,d,c,i,o){if(!(c+24>d.length)){var u=va(d,c);if(u&&c+u.frameLength<=d.length){var p=i+o*(9e4*u.samplesPerFrame/u.sampleRate),v={unit:d.subarray(c,c+u.frameLength),pts:p,dts:p};return g.config=[],g.channelCount=u.channelCount,g.samplerate=u.sampleRate,g.samples.push(v),{sample:v,length:u.frameLength,missing:0}}}}function va(g,d){var c=g[d+1]>>3&3,i=g[d+1]>>1&3,o=g[d+2]>>4&15,u=g[d+2]>>2&3;if(1!==c&&0!==o&&15!==o&&3!==u){var p=g[d+3]>>6,y=1e3*$u[14*(3===c?3-i:3===i?3:4)+o-1],R=nl[3*(3===c?0:2===c?1:2)+u],U=3===p?1:2,J=qi[c][i],se=Il[i],ye=8*J*se,Ae=Math.floor(J*y/R+(g[d+2]>>1&1))*se;if(null===ma){var Ke=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);ma=Ke?parseInt(Ke[1]):0}return!!ma&&ma<=87&&2===i&&y>=224e3&&0===p&&(g[d+3]=128|g[d+3]),{sampleRate:R,channelCount:U,frameLength:Ae,samplesPerFrame:ye}}}function Xa(g,d){return 255===g[d]&&224==(224&g[d+1])&&0!=(6&g[d+1])}function Dl(g,d){return d+1<g.length&&Xa(g,d)}function Pa(g,d){if(d+1<g.length&&Xa(g,d)){var i=va(g,d),o=4;null!=i&&i.frameLength&&(o=i.frameLength);var u=d+o;return u===g.length||Dl(g,u)}return!1}var rl=function(g){function d(i,o){var u;return(u=g.call(this)||this).observer=void 0,u.config=void 0,u.observer=i,u.config=o,u}_(d,g);var c=d.prototype;return c.resetInitSegment=function(o,u,h,p){g.prototype.resetInitSegment.call(this,o,u,h,p),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:u,duration:p,inputTimeScale:9e4,dropped:0}},d.probe=function(o){if(!o)return!1;var u=ei(o,0),h=u?.length||0;if(Pa(o,h))return!1;for(var p=o.length;h<p;h++)if(xs(o,h))return Pe.log("ADTS sync word found !"),!0;return!1},c.canParse=function(o,u){return function co(g,d){return function ia(g,d){return d+5<g.length}(g,d)&&tr(g,d)&&xi(g,d)<=g.length-d}(o,u)},c.appendFrame=function(o,u,h){ji(o,this.observer,u,h,o.manifestCodec);var p=Rr(o,u,h,this.basePTS,this.frameIndex);if(p&&0===p.missing)return p},d}(cu),wl=/\/emsg[-/]ID3/i,$r=function(){function g(c,i){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=i}var d=g.prototype;return d.resetTimeStamp=function(){},d.resetInitSegment=function(i,o,u,h){var p=this.videoTrack=Wo("video",1),v=this.audioTrack=Wo("audio",1),y=this.txtTrack=Wo("text",1);if(this.id3Track=Wo("id3",1),this.timeOffset=0,null!=i&&i.byteLength){var C=fr(i);if(C.video){var R=C.video,J=R.timescale,se=R.codec;p.id=R.id,p.timescale=y.timescale=J,p.codec=se}if(C.audio){var ye=C.audio,Ue=ye.timescale,Ke=ye.codec;v.id=ye.id,v.timescale=Ue,v.codec=Ke}y.id=wt.text,p.sampleDuration=0,p.duration=v.duration=h}},d.resetContiguity=function(){this.remainderData=null},g.probe=function(i){return function cn(g){for(var d=g.byteLength,c=0;c<d;){var i=Qt(g,c);if(i>8&&109===g[c+4]&&111===g[c+5]&&111===g[c+6]&&102===g[c+7])return!0;c=i>1?c+i:d}return!1}(i)},d.demux=function(i,o){this.timeOffset=o;var u=i,h=this.videoTrack,p=this.txtTrack;if(this.config.progressive){this.remainderData&&(u=pi(this.remainderData,i));var v=function uo(g){var d={valid:null,remainder:null},c=En(g,["moof"]);if(c.length<2)return d.remainder=g,d;var i=c[c.length-1];return d.valid=Tn(g,0,i.byteOffset-8),d.remainder=Tn(g,i.byteOffset-8),d}(u);this.remainderData=v.remainder,h.samples=v.valid||new Uint8Array}else h.samples=u;var y=this.extractID3Track(h,o);return p.samples=Ei(o,h),{videoTrack:h,audioTrack:this.audioTrack,id3Track:y,textTrack:this.txtTrack}},d.flush=function(){var i=this.timeOffset,o=this.videoTrack,u=this.txtTrack;o.samples=this.remainderData||new Uint8Array,this.remainderData=null;var h=this.extractID3Track(o,this.timeOffset);return u.samples=Ei(i,o),{videoTrack:o,audioTrack:Wo(),id3Track:h,textTrack:Wo()}},d.extractID3Track=function(i,o){var u=this.id3Track;if(i.samples.length){var h=En(i.samples,["emsg"]);h&&h.forEach(function(p){var v=function ta(g){var d=g[0],c="",i="",o=0,u=0,h=0,p=0,v=0,y=0;if(0===d){for(;"\0"!==Pt(g.subarray(y,y+1));)c+=Pt(g.subarray(y,y+1)),y+=1;for(c+=Pt(g.subarray(y,y+1)),y+=1;"\0"!==Pt(g.subarray(y,y+1));)i+=Pt(g.subarray(y,y+1)),y+=1;i+=Pt(g.subarray(y,y+1)),y+=1,o=Qt(g,12),u=Qt(g,16),p=Qt(g,20),v=Qt(g,24),y=28}else if(1===d){o=Qt(g,y+=4);var C=Qt(g,y+=4),R=Qt(g,y+=4);for(y+=4,h=Math.pow(2,32)*C+R,Se(h)||(h=Number.MAX_SAFE_INTEGER,Pe.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),p=Qt(g,y),v=Qt(g,y+=4),y+=4;"\0"!==Pt(g.subarray(y,y+1));)c+=Pt(g.subarray(y,y+1)),y+=1;for(c+=Pt(g.subarray(y,y+1)),y+=1;"\0"!==Pt(g.subarray(y,y+1));)i+=Pt(g.subarray(y,y+1)),y+=1;i+=Pt(g.subarray(y,y+1)),y+=1}return{schemeIdUri:c,value:i,timeScale:o,presentationTime:h,presentationTimeDelta:u,eventDuration:p,id:v,payload:g.subarray(y,g.byteLength)}}(p);if(wl.test(v.schemeIdUri)){var y=Q(v.presentationTime)?v.presentationTime/v.timeScale:o+v.presentationTimeDelta/v.timeScale,C=4294967295===v.eventDuration?Number.POSITIVE_INFINITY:v.eventDuration/v.timeScale;C<=.001&&(C=Number.POSITIVE_INFINITY);var R=v.payload;u.samples.push({data:R,len:R.byteLength,dts:y,pts:y,type:Lo_emsg,duration:C})}})}return u},d.demuxSampleAes=function(i,o,u){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},d.destroy=function(){},g}(),zc=function(d,c){var i=0,o=5;c+=o;for(var u=new Uint32Array(1),h=new Uint32Array(1),p=new Uint8Array(1);o>0;){p[0]=d[c];var v=Math.min(o,8),y=8-v;h[0]=4278190080>>>24+y<<y,u[0]=(p[0]&h[0])>>y,i=i?i<<v|u[0]:u[0],c+=1,o-=v}return i},fu=function(g){function d(i){var o;return(o=g.call(this)||this).observer=void 0,o.observer=i,o}_(d,g);var c=d.prototype;return c.resetInitSegment=function(o,u,h,p){g.prototype.resetInitSegment.call(this,o,u,h,p),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:u,duration:p,inputTimeScale:9e4,dropped:0}},c.canParse=function(o,u){return u+64<o.length},c.appendFrame=function(o,u,h){var p=gs(o,u,h,this.basePTS,this.frameIndex);if(-1!==p)return{sample:o.samples[o.samples.length-1],length:p,missing:0}},d.probe=function(o){if(!o)return!1;var u=ei(o,0);if(!u)return!1;var h=u.length;return 11===o[h]&&119===o[h+1]&&void 0!==zi(u)&&zc(o,h)<16},d}(cu);function gs(g,d,c,i,o){if(c+8>d.length||11!==d[c]||119!==d[c+1])return-1;var u=d[c+4]>>6;if(u>=3)return-1;var p=[48e3,44100,32e3][u],v=63&d[c+4],C=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*v+u];if(c+C>d.length)return-1;var R=d[c+6]>>5,U=0;2===R?U+=2:(1&R&&1!==R&&(U+=2),4&R&&(U+=2));var J=(d[c+6]<<8|d[c+7])>>12-U&1,ye=[2,1,2,3,3,4,4,5][R]+J,Ue=7&d[c+5],Ke=new Uint8Array([u<<6|d[c+5]>>3<<1|Ue>>2,(3&Ue)<<6|R<<3|J<<2|v>>4,v<<4&224]),pt=i+o*(1536/p*9e4),yt=d.subarray(c,c+C);return g.config=Ke,g.channelCount=ye,g.samplerate=p,g.samples.push({unit:yt,pts:pt}),C}var ya=function(){function g(){this.VideoSample=null}var d=g.prototype;return d.createVideoSample=function(i,o,u,h){return{key:i,frame:!1,pts:o,dts:u,units:[],debug:h,length:0}},d.getLastNalUnit=function(i){var o,h,u=this.VideoSample;if((!u||0===u.units.length)&&(u=i[i.length-1]),null!=(o=u)&&o.units){var p=u.units;h=p[p.length-1]}return h},d.pushAccessUnit=function(i,o){if(i.units.length&&i.frame){if(void 0===i.pts){var u=o.samples,h=u.length;if(!h)return void o.dropped++;var p=u[h-1];i.pts=p.pts,i.dts=p.dts}o.samples.push(i)}i.debug.length&&Pe.log(i.pts+"/"+i.dts+":"+i.debug)},g}(),il=function(){function g(c){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=c,this.bytesAvailable=c.byteLength,this.word=0,this.bitsAvailable=0}var d=g.prototype;return d.loadWord=function(){var i=this.data,o=this.bytesAvailable,u=i.byteLength-o,h=new Uint8Array(4),p=Math.min(4,o);if(0===p)throw new Error("no bytes available");h.set(i.subarray(u,u+p)),this.word=new DataView(h.buffer).getUint32(0),this.bitsAvailable=8*p,this.bytesAvailable-=p},d.skipBits=function(i){var o;i=Math.min(i,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>i?(this.word<<=i,this.bitsAvailable-=i):(i-=this.bitsAvailable,i-=(o=i>>3)<<3,this.bytesAvailable-=o,this.loadWord(),this.word<<=i,this.bitsAvailable-=i)},d.readBits=function(i){var o=Math.min(this.bitsAvailable,i),u=this.word>>>32-o;if(i>32&&Pe.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=o,this.bitsAvailable>0)this.word<<=o;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return(o=i-o)>0&&this.bitsAvailable?u<<o|this.readBits(o):u},d.skipLZ=function(){var i;for(i=0;i<this.bitsAvailable;++i)if(this.word&2147483648>>>i)return this.word<<=i,this.bitsAvailable-=i,i;return this.loadWord(),i+this.skipLZ()},d.skipUEG=function(){this.skipBits(1+this.skipLZ())},d.skipEG=function(){this.skipBits(1+this.skipLZ())},d.readUEG=function(){var i=this.skipLZ();return this.readBits(i+1)-1},d.readEG=function(){var i=this.readUEG();return 1&i?1+i>>>1:-1*(i>>>1)},d.readBoolean=function(){return 1===this.readBits(1)},d.readUByte=function(){return this.readBits(8)},d.readUShort=function(){return this.readBits(16)},d.readUInt=function(){return this.readBits(32)},d.skipScalingList=function(i){for(var o=8,u=8,p=0;p<i;p++)0!==u&&(u=(o+this.readEG()+256)%256),o=0===u?o:u},d.readSPS=function(){var p,v,y,i=0,o=0,u=0,h=0,C=this.readUByte.bind(this),R=this.readBits.bind(this),U=this.readUEG.bind(this),J=this.readBoolean.bind(this),se=this.skipBits.bind(this),ye=this.skipEG.bind(this),Ae=this.skipUEG.bind(this),Ue=this.skipScalingList.bind(this);C();var Ke=C();if(R(5),se(3),C(),Ae(),100===Ke||110===Ke||122===Ke||244===Ke||44===Ke||83===Ke||86===Ke||118===Ke||128===Ke){var Xe=U();if(3===Xe&&se(1),Ae(),Ae(),se(1),J())for(v=3!==Xe?8:12,y=0;y<v;y++)J()&&Ue(y<6?16:64)}Ae();var pt=U();if(0===pt)U();else if(1===pt)for(se(1),ye(),ye(),p=U(),y=0;y<p;y++)ye();Ae(),se(1);var yt=U(),nn=U(),qt=R(1);0===qt&&se(1),se(1),J()&&(i=U(),o=U(),u=U(),h=U());var Dt=[1,1];if(J()&&J())switch(C()){case 1:Dt=[1,1];break;case 2:Dt=[12,11];break;case 3:Dt=[10,11];break;case 4:Dt=[16,11];break;case 5:Dt=[40,33];break;case 6:Dt=[24,11];break;case 7:Dt=[20,11];break;case 8:Dt=[32,11];break;case 9:Dt=[80,33];break;case 10:Dt=[18,11];break;case 11:Dt=[15,11];break;case 12:Dt=[64,33];break;case 13:Dt=[160,99];break;case 14:Dt=[4,3];break;case 15:Dt=[3,2];break;case 16:Dt=[2,1];break;case 255:Dt=[C()<<8|C(),C()<<8|C()]}return{width:Math.ceil(16*(yt+1)-2*i-2*o),height:(2-qt)*(nn+1)*16-(qt?2:4)*(u+h),pixelRatio:Dt}},d.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},g}(),Os=function(g){function d(){return g.apply(this,arguments)||this}_(d,g);var c=d.prototype;return c.parseAVCPES=function(o,u,h,p,v){var U,y=this,C=this.parseAVCNALu(o,h.data),R=this.VideoSample,J=!1;h.data=null,R&&C.length&&!o.audFound&&(this.pushAccessUnit(R,o),R=this.VideoSample=this.createVideoSample(!1,h.pts,h.dts,"")),C.forEach(function(se){var ye;switch(se.type){case 1:var Ae=!1;U=!0;var Xe,Ue=se.data;if(J&&Ue.length>4){var Ke=new il(Ue).readSliceType();(2===Ke||4===Ke||7===Ke||9===Ke)&&(Ae=!0)}Ae&&null!=(Xe=R)&&Xe.frame&&!R.key&&(y.pushAccessUnit(R,o),R=y.VideoSample=null),R||(R=y.VideoSample=y.createVideoSample(!0,h.pts,h.dts,"")),R.frame=!0,R.key=Ae;break;case 5:U=!0,null!=(ye=R)&&ye.frame&&!R.key&&(y.pushAccessUnit(R,o),R=y.VideoSample=null),R||(R=y.VideoSample=y.createVideoSample(!0,h.pts,h.dts,"")),R.key=!0,R.frame=!0;break;case 6:U=!0,to(se.data,1,h.pts,u.samples);break;case 7:var pt,yt;U=!0,J=!0;var nn=se.data,Dt=new il(nn).readSPS();if(!o.sps||o.width!==Dt.width||o.height!==Dt.height||(null==(pt=o.pixelRatio)?void 0:pt[0])!==Dt.pixelRatio[0]||(null==(yt=o.pixelRatio)?void 0:yt[1])!==Dt.pixelRatio[1]){o.width=Dt.width,o.height=Dt.height,o.pixelRatio=Dt.pixelRatio,o.sps=[nn],o.duration=v;for(var on=nn.subarray(1,4),an="avc1.",Sn=0;Sn<3;Sn++){var Rn=on[Sn].toString(16);Rn.length<2&&(Rn="0"+Rn),an+=Rn}o.codec=an}break;case 8:U=!0,o.pps=[se.data];break;case 9:U=!0,o.audFound=!0,R&&y.pushAccessUnit(R,o),R=y.VideoSample=y.createVideoSample(!1,h.pts,h.dts,"");break;case 12:U=!0;break;default:U=!1,R&&(R.debug+="unknown NAL "+se.type+" ")}R&&U&&R.units.push(se)}),p&&R&&(this.pushAccessUnit(R,o),this.VideoSample=null)},c.parseAVCNALu=function(o,u){var R,U,h=u.byteLength,p=o.naluState||0,v=p,y=[],C=0,se=-1,ye=0;for(-1===p&&(se=0,ye=31&u[0],p=0,C=1);C<h;)if(R=u[C++],p)if(1!==p)if(R)if(1===R){if(U=C-p-1,se>=0){var Ae={data:u.subarray(se,U),type:ye};y.push(Ae)}else{var Ue=this.getLastNalUnit(o.samples);Ue&&(v&&C<=4-v&&Ue.state&&(Ue.data=Ue.data.subarray(0,Ue.data.byteLength-v)),U>0&&(Ue.data=pi(Ue.data,u.subarray(0,U)),Ue.state=0))}C<h?(se=C,ye=31&u[C],p=0):p=-1}else p=0;else p=3;else p=R?0:2;else p=R?0:1;if(se>=0&&p>=0){var Ke={data:u.subarray(se,h),type:ye,state:p};y.push(Ke)}if(0===y.length){var Xe=this.getLastNalUnit(o.samples);Xe&&(Xe.data=pi(Xe.data,u))}return o.naluState=p,y},d}(ya),Rl=function(){function g(c,i,o){this.keyData=void 0,this.decrypter=void 0,this.keyData=o,this.decrypter=new io(i,{removePKCS7Padding:!1})}var d=g.prototype;return d.decryptBuffer=function(i){return this.decrypter.decrypt(i,this.keyData.key.buffer,this.keyData.iv.buffer)},d.decryptAacSample=function(i,o,u){var h=this,p=i[o].unit;if(!(p.length<=16)){var v=p.subarray(16,p.length-p.length%16),y=v.buffer.slice(v.byteOffset,v.byteOffset+v.length);this.decryptBuffer(y).then(function(C){var R=new Uint8Array(C);p.set(R,16),h.decrypter.isSync()||h.decryptAacSamples(i,o+1,u)})}},d.decryptAacSamples=function(i,o,u){for(;;o++){if(o>=i.length)return void u();if(!(i[o].unit.length<32||(this.decryptAacSample(i,o,u),this.decrypter.isSync())))return}},d.getAvcEncryptedData=function(i){for(var o=16*Math.floor((i.length-48)/160)+16,u=new Int8Array(o),h=0,p=32;p<i.length-16;p+=160,h+=16)u.set(i.subarray(p,p+16),h);return u},d.getAvcDecryptedUnit=function(i,o){for(var u=new Uint8Array(o),h=0,p=32;p<i.length-16;p+=160,h+=16)i.set(u.subarray(h,h+16),p);return i},d.decryptAvcSample=function(i,o,u,h,p){var v=this,y=Za(p.data),C=this.getAvcEncryptedData(y);this.decryptBuffer(C.buffer).then(function(R){p.data=v.getAvcDecryptedUnit(y,R),v.decrypter.isSync()||v.decryptAvcSamples(i,o,u+1,h)})},d.decryptAvcSamples=function(i,o,u,h){if(i instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;o++,u=0){if(o>=i.length)return void h();for(var p=i[o].units;!(u>=p.length);u++){var v=p[u];if(!(v.data.length<=48||1!==v.type&&5!==v.type||(this.decryptAvcSample(i,o,u,h,v),this.decrypter.isSync())))return}}},g}(),li=188,ed=function(){function g(c,i,o){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=c,this.config=i,this.typeSupported=o,this.videoParser=new Os}g.probe=function(i){var o=g.syncOffset(i);return o>0&&Pe.warn("MPEG2-TS detected but first sync word found @ offset "+o),-1!==o},g.syncOffset=function(i){for(var o=i.length,u=Math.min(940,o-li)+1,h=0;h<u;){for(var p=!1,v=-1,y=0,C=h;C<o;C+=li){if(71!==i[C]||o-C!==li&&71!==i[C+li]){if(y)return-1;break}if(y++,-1===v&&0!==(v=C)&&(u=Math.min(v+18612,i.length-li)+1),p||(p=0===_o(i,C)),p&&y>1&&(0===v&&y>2||C+li>u))return v}h++}return-1},g.createTrack=function(i,o){return{container:"video"===i||"audio"===i?"video/mp2t":void 0,type:i,id:wt[i],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===i?o:void 0}};var d=g.prototype;return d.resetInitSegment=function(i,o,u,h){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=g.createTrack("video"),this._audioTrack=g.createTrack("audio",h),this._id3Track=g.createTrack("id3"),this._txtTrack=g.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=o,this.videoCodec=u,this._duration=h},d.resetTimeStamp=function(){},d.resetContiguity=function(){var i=this._audioTrack,o=this._videoTrack,u=this._id3Track;i&&(i.pesData=null),o&&(o.pesData=null),u&&(u.pesData=null),this.aacOverFlow=null,this.remainderData=null},d.demux=function(i,o,u,h){void 0===u&&(u=!1),void 0===h&&(h=!1),u||(this.sampleAes=null);var p,v=this._videoTrack,y=this._audioTrack,C=this._id3Track,R=this._txtTrack,U=v.pid,J=v.pesData,se=y.pid,ye=C.pid,Ae=y.pesData,Ue=C.pesData,Ke=null,Xe=this.pmtParsed,pt=this._pmtId,yt=i.length;if(this.remainderData&&(yt=(i=pi(this.remainderData,i)).length,this.remainderData=null),yt<li&&!h)return this.remainderData=i,{audioTrack:y,videoTrack:v,id3Track:C,textTrack:R};var nn=Math.max(0,g.syncOffset(i));(yt-=(yt-nn)%li)<i.byteLength&&!h&&(this.remainderData=new Uint8Array(i.buffer,yt,i.buffer.byteLength-yt));for(var qt=0,Dt=nn;Dt<yt;Dt+=li)if(71===i[Dt]){var on=!!(64&i[Dt+1]),an=_o(i,Dt),Rn=void 0;if((48&i[Dt+3])>>4>1){if((Rn=Dt+5+i[Dt+4])===Dt+li)continue}else Rn=Dt+4;switch(an){case U:on&&(J&&(p=ka(J))&&this.videoParser.parseAVCPES(v,R,p,!1,this._duration),J={data:[],size:0}),J&&(J.data.push(i.subarray(Rn,Dt+li)),J.size+=Dt+li-Rn);break;case se:if(on){if(Ae&&(p=ka(Ae)))switch(y.segmentCodec){case"aac":this.parseAACPES(y,p);break;case"mp3":this.parseMPEGPES(y,p);break;case"ac3":this.parseAC3PES(y,p)}Ae={data:[],size:0}}Ae&&(Ae.data.push(i.subarray(Rn,Dt+li)),Ae.size+=Dt+li-Rn);break;case ye:on&&(Ue&&(p=ka(Ue))&&this.parseID3PES(C,p),Ue={data:[],size:0}),Ue&&(Ue.data.push(i.subarray(Rn,Dt+li)),Ue.size+=Dt+li-Rn);break;case 0:on&&(Rn+=i[Rn]+1),pt=this._pmtId=Fo(i,Rn);break;case pt:on&&(Rn+=i[Rn]+1);var Qn=du(i,Rn,this.typeSupported,u);(U=Qn.videoPid)>0&&(v.pid=U,v.segmentCodec=Qn.segmentVideoCodec),(se=Qn.audioPid)>0&&(y.pid=se,y.segmentCodec=Qn.segmentAudioCodec),(ye=Qn.id3Pid)>0&&(C.pid=ye),null!==Ke&&!Xe&&(Pe.warn("MPEG-TS PMT found at "+Dt+" after unknown PID '"+Ke+"'. Backtracking to sync byte @"+nn+" to parse all TS packets."),Ke=null,Dt=nn-188),Xe=this.pmtParsed=!0;break;case 17:case 8191:break;default:Ke=an}}else qt++;if(qt>0){var or=new Error("Found "+qt+" TS packet/s that do not start with 0x47");this.observer.emit(x.ERROR,x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.FRAG_PARSING_ERROR,fatal:!1,error:or,reason:or.message})}v.pesData=J,y.pesData=Ae,C.pesData=Ue;var mr={audioTrack:y,videoTrack:v,id3Track:C,textTrack:R};return h&&this.extractRemainingSamples(mr),mr},d.flush=function(){var o,i=this.remainderData;return this.remainderData=null,o=i?this.demux(i,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(o),this.sampleAes?this.decrypt(o,this.sampleAes):o},d.extractRemainingSamples=function(i){var R,o=i.audioTrack,u=i.videoTrack,h=i.id3Track,p=i.textTrack,v=u.pesData,y=o.pesData,C=h.pesData;if(v&&(R=ka(v))?(this.videoParser.parseAVCPES(u,p,R,!0,this._duration),u.pesData=null):u.pesData=v,y&&(R=ka(y))){switch(o.segmentCodec){case"aac":this.parseAACPES(o,R);break;case"mp3":this.parseMPEGPES(o,R);break;case"ac3":this.parseAC3PES(o,R)}o.pesData=null}else null!=y&&y.size&&Pe.log("last AAC PES packet truncated,might overlap between fragments"),o.pesData=y;C&&(R=ka(C))?(this.parseID3PES(h,R),h.pesData=null):h.pesData=C},d.demuxSampleAes=function(i,o,u){var h=this.demux(i,u,!0,!this.config.progressive),p=this.sampleAes=new Rl(this.observer,this.config,o);return this.decrypt(h,p)},d.decrypt=function(i,o){return new Promise(function(u){var h=i.audioTrack,p=i.videoTrack;h.samples&&"aac"===h.segmentCodec?o.decryptAacSamples(h.samples,0,function(){p.samples?o.decryptAvcSamples(p.samples,0,0,function(){u(i)}):u(i)}):p.samples&&o.decryptAvcSamples(p.samples,0,0,function(){u(i)})})},d.destroy=function(){this._duration=0},d.parseAACPES=function(i,o){var R,U,Ae,u=0,h=this.aacOverFlow,p=o.data;if(h){this.aacOverFlow=null;var v=h.missing,y=h.sample.unit.byteLength;if(-1===v)p=pi(h.sample.unit,p);else{var C=y-v;h.sample.unit.set(p.subarray(0,v),C),i.samples.push(h.sample),u=h.missing}}for(R=u,U=p.length;R<U-1&&!fs(p,R);R++);if(R!==u){var J,se=R<U-1;J=se?"AAC PES did not start with ADTS header,offset:"+R:"No ADTS header found in AAC PES";var ye=new Error(J);if(Pe.warn("parsing error: "+J),this.observer.emit(x.ERROR,x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.FRAG_PARSING_ERROR,fatal:!1,levelRetry:se,error:ye,reason:J}),!se)return}if(ji(i,this.observer,p,R,this.audioCodec),void 0!==o.pts)Ae=o.pts;else{if(!h)return void Pe.warn("[tsdemuxer]: AAC PES unknown PTS");var Ue=$a(i.samplerate);Ae=h.sample.pts+Ue}for(var Xe,Ke=0;R<U;){if(R+=(Xe=Rr(i,p,R,Ae,Ke)).length,Xe.missing){this.aacOverFlow=Xe;break}for(Ke++;R<U-1&&!fs(p,R);R++);}},d.parseMPEGPES=function(i,o){var u=o.data,h=u.length,p=0,v=0,y=o.pts;if(void 0!==y)for(;v<h;)if(Dl(u,v)){var C=ds(i,u,v,y,p);if(!C)break;v+=C.length,p++}else v++;else Pe.warn("[tsdemuxer]: MPEG PES unknown PTS")},d.parseAC3PES=function(i,o){var u=o.data,h=o.pts;if(void 0!==h)for(var C,p=u.length,v=0,y=0;y<p&&(C=gs(i,u,y,h,v++))>0;)y+=C;else Pe.warn("[tsdemuxer]: AC3 PES unknown PTS")},d.parseID3PES=function(i,o){if(void 0!==o.pts){var u=E({},o,{type:this._videoTrack?Lo_emsg:Lo_audioId3,duration:Number.POSITIVE_INFINITY});i.samples.push(u)}else Pe.warn("[tsdemuxer]: ID3 PES unknown PTS")},g}();function _o(g,d){return((31&g[d+1])<<8)+g[d+2]}function Fo(g,d){return(31&g[d+10])<<8|g[d+11]}function du(g,d,c,i){var o={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},h=d+3+((15&g[d+1])<<8|g[d+2])-4;for(d+=12+((15&g[d+10])<<8|g[d+11]);d<h;){var v=_o(g,d),y=(15&g[d+3])<<8|g[d+4];switch(g[d]){case 207:if(!i){Fa("ADTS AAC");break}case 15:-1===o.audioPid&&(o.audioPid=v);break;case 21:-1===o.id3Pid&&(o.id3Pid=v);break;case 219:if(!i){Fa("H.264");break}case 27:-1===o.videoPid&&(o.videoPid=v,o.segmentVideoCodec="avc");break;case 3:case 4:c.mpeg||c.mp3?-1===o.audioPid&&(o.audioPid=v,o.segmentAudioCodec="mp3"):Pe.log("MPEG audio found, not supported in this browser");break;case 193:if(!i){Fa("AC-3");break}case 129:c.ac3?-1===o.audioPid&&(o.audioPid=v,o.segmentAudioCodec="ac3"):Pe.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===o.audioPid&&y>0)for(var C=d+5,R=y;R>2;){106===g[C]&&(!0!==c.ac3?Pe.log("AC-3 audio found, not supported in this browser for now"):(o.audioPid=v,o.segmentAudioCodec="ac3"));var J=g[C+1]+2;C+=J,R-=J}break;case 194:case 135:Pe.warn("Unsupported EC-3 in M2TS found");break;case 36:Pe.warn("Unsupported HEVC in M2TS found")}d+=y+5}return o}function Fa(g){Pe.log(g+" with AES-128-CBC encryption found in unencrypted stream")}function ka(g){var c,i,o,u,h,d=0,p=g.data;if(!g||0===g.size)return null;for(;p[0].length<19&&p.length>1;)p[0]=pi(p[0],p[1]),p.splice(1,1);if(1===((c=p[0])[0]<<16)+(c[1]<<8)+c[2]){if((i=(c[4]<<8)+c[5])&&i>g.size-6)return null;var y=c[7];192&y&&(u=536870912*(14&c[9])+4194304*(255&c[10])+16384*(254&c[11])+128*(255&c[12])+(254&c[13])/2,64&y?u-(h=536870912*(14&c[14])+4194304*(255&c[15])+16384*(254&c[16])+128*(255&c[17])+(254&c[18])/2)>54e5&&(Pe.warn(Math.round((u-h)/9e4)+"s delta between PTS and DTS, align them"),u=h):h=u);var C=(o=c[8])+9;if(g.size<=C)return null;g.size-=C;for(var R=new Uint8Array(g.size),U=0,J=p.length;U<J;U++){var se=(c=p[U]).byteLength;if(C){if(C>se){C-=se;continue}c=c.subarray(C),se-=C,C=0}R.set(c,d),d+=se}return i&&(i-=o+3),{data:R,pts:u,dts:h,len:i}}return null}var Ea=function(g){function d(){return g.apply(this,arguments)||this}_(d,g);var c=d.prototype;return c.resetInitSegment=function(o,u,h,p){g.prototype.resetInitSegment.call(this,o,u,h,p),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:u,duration:p,inputTimeScale:9e4,dropped:0}},d.probe=function(o){if(!o)return!1;var u=ei(o,0),h=u?.length||0;if(u&&11===o[h]&&119===o[h+1]&&void 0!==zi(u)&&zc(o,h)<=16)return!1;for(var p=o.length;h<p;h++)if(Pa(o,h))return Pe.log("MPEG Audio sync word found !"),!0;return!1},c.canParse=function(o,u){return function hs(g,d){return Xa(g,d)&&4<=g.length-d}(o,u)},c.appendFrame=function(o,u,h){if(null!==this.basePTS)return ds(o,u,h,this.basePTS,this.frameIndex)},d}(cu),Ml=function(){function g(){}return g.getSilentFrame=function(c,i){if("mp4a.40.2"===c){if(1===i)return new Uint8Array([0,200,0,128,35,128]);if(2===i)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===i)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===i)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===i)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},g}(),ps=Math.pow(2,32)-1,fo=function(){function g(){}return g.init=function(){var c;for(c in g.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})g.types.hasOwnProperty(c)&&(g.types[c]=[c.charCodeAt(0),c.charCodeAt(1),c.charCodeAt(2),c.charCodeAt(3)]);var i=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),o=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);g.HDLR_TYPES={video:i,audio:o};var u=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),h=new Uint8Array([0,0,0,0,0,0,0,0]);g.STTS=g.STSC=g.STCO=h,g.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),g.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),g.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),g.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var p=new Uint8Array([105,115,111,109]),v=new Uint8Array([97,118,99,49]),y=new Uint8Array([0,0,0,1]);g.FTYP=g.box(g.types.ftyp,p,y,p,v),g.DINF=g.box(g.types.dinf,g.box(g.types.dref,u))},g.box=function(c){for(var i=8,o=arguments.length,u=new Array(o>1?o-1:0),h=1;h<o;h++)u[h-1]=arguments[h];for(var p=u.length,v=p;p--;)i+=u[p].byteLength;var y=new Uint8Array(i);for(y[0]=i>>24&255,y[1]=i>>16&255,y[2]=i>>8&255,y[3]=255&i,y.set(c,4),p=0,i=8;p<v;p++)y.set(u[p],i),i+=u[p].byteLength;return y},g.hdlr=function(c){return g.box(g.types.hdlr,g.HDLR_TYPES[c])},g.mdat=function(c){return g.box(g.types.mdat,c)},g.mdhd=function(c,i){i*=c;var o=Math.floor(i/(ps+1)),u=Math.floor(i%(ps+1));return g.box(g.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,c>>24&255,c>>16&255,c>>8&255,255&c,o>>24,o>>16&255,o>>8&255,255&o,u>>24,u>>16&255,u>>8&255,255&u,85,196,0,0]))},g.mdia=function(c){return g.box(g.types.mdia,g.mdhd(c.timescale,c.duration),g.hdlr(c.type),g.minf(c))},g.mfhd=function(c){return g.box(g.types.mfhd,new Uint8Array([0,0,0,0,c>>24,c>>16&255,c>>8&255,255&c]))},g.minf=function(c){return g.box(g.types.minf,"audio"===c.type?g.box(g.types.smhd,g.SMHD):g.box(g.types.vmhd,g.VMHD),g.DINF,g.stbl(c))},g.moof=function(c,i,o){return g.box(g.types.moof,g.mfhd(c),g.traf(o,i))},g.moov=function(c){for(var i=c.length,o=[];i--;)o[i]=g.trak(c[i]);return g.box.apply(null,[g.types.moov,g.mvhd(c[0].timescale,c[0].duration)].concat(o).concat(g.mvex(c)))},g.mvex=function(c){for(var i=c.length,o=[];i--;)o[i]=g.trex(c[i]);return g.box.apply(null,[g.types.mvex].concat(o))},g.mvhd=function(c,i){i*=c;var o=Math.floor(i/(ps+1)),u=Math.floor(i%(ps+1)),h=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,c>>24&255,c>>16&255,c>>8&255,255&c,o>>24,o>>16&255,o>>8&255,255&o,u>>24,u>>16&255,u>>8&255,255&u,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return g.box(g.types.mvhd,h)},g.sdtp=function(c){var u,h,i=c.samples||[],o=new Uint8Array(4+i.length);for(u=0;u<i.length;u++)o[u+4]=(h=i[u].flags).dependsOn<<4|h.isDependedOn<<2|h.hasRedundancy;return g.box(g.types.sdtp,o)},g.stbl=function(c){return g.box(g.types.stbl,g.stsd(c),g.box(g.types.stts,g.STTS),g.box(g.types.stsc,g.STSC),g.box(g.types.stsz,g.STSZ),g.box(g.types.stco,g.STCO))},g.avc1=function(c){var u,h,p,i=[],o=[];for(u=0;u<c.sps.length;u++)i.push((p=(h=c.sps[u]).byteLength)>>>8&255),i.push(255&p),i=i.concat(Array.prototype.slice.call(h));for(u=0;u<c.pps.length;u++)o.push((p=(h=c.pps[u]).byteLength)>>>8&255),o.push(255&p),o=o.concat(Array.prototype.slice.call(h));var v=g.box(g.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|c.sps.length].concat(i).concat([c.pps.length]).concat(o))),y=c.width,C=c.height,R=c.pixelRatio[0],U=c.pixelRatio[1];return g.box(g.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,y>>8&255,255&y,C>>8&255,255&C,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),v,g.box(g.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),g.box(g.types.pasp,new Uint8Array([R>>24,R>>16&255,R>>8&255,255&R,U>>24,U>>16&255,U>>8&255,255&U])))},g.esds=function(c){var i=c.config.length;return new Uint8Array([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([i]).concat(c.config).concat([6,1,2]))},g.audioStsd=function(c){var i=c.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,c.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0])},g.mp4a=function(c){return g.box(g.types.mp4a,g.audioStsd(c),g.box(g.types.esds,g.esds(c)))},g.mp3=function(c){return g.box(g.types[".mp3"],g.audioStsd(c))},g.ac3=function(c){return g.box(g.types["ac-3"],g.audioStsd(c),g.box(g.types.dac3,c.config))},g.stsd=function(c){return g.box(g.types.stsd,g.STSD,"audio"===c.type?"mp3"===c.segmentCodec&&"mp3"===c.codec?g.mp3(c):"ac3"===c.segmentCodec?g.ac3(c):g.mp4a(c):g.avc1(c))},g.tkhd=function(c){var i=c.id,o=c.duration*c.timescale,u=c.width,h=c.height,p=Math.floor(o/(ps+1)),v=Math.floor(o%(ps+1));return g.box(g.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,0,p>>24,p>>16&255,p>>8&255,255&p,v>>24,v>>16&255,v>>8&255,255&v,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,u>>8&255,255&u,0,0,h>>8&255,255&h,0,0]))},g.traf=function(c,i){var o=g.sdtp(c),u=c.id,h=Math.floor(i/(ps+1)),p=Math.floor(i%(ps+1));return g.box(g.types.traf,g.box(g.types.tfhd,new Uint8Array([0,0,0,0,u>>24,u>>16&255,u>>8&255,255&u])),g.box(g.types.tfdt,new Uint8Array([1,0,0,0,h>>24,h>>16&255,h>>8&255,255&h,p>>24,p>>16&255,p>>8&255,255&p])),g.trun(c,o.length+16+20+8+16+8+8),o)},g.trak=function(c){return c.duration=c.duration||4294967295,g.box(g.types.trak,g.tkhd(c),g.mdia(c))},g.trex=function(c){var i=c.id;return g.box(g.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},g.trun=function(c,i){var v,y,C,R,U,J,o=c.samples||[],u=o.length,h=12+16*u,p=new Uint8Array(h);for(p.set(["video"===c.type?1:0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,(i+=8+h)>>>24&255,i>>>16&255,i>>>8&255,255&i],0),v=0;v<u;v++)p.set([(C=(y=o[v]).duration)>>>24&255,C>>>16&255,C>>>8&255,255&C,(R=y.size)>>>24&255,R>>>16&255,R>>>8&255,255&R,(U=y.flags).isLeading<<2|U.dependsOn,U.isDependedOn<<6|U.hasRedundancy<<4|U.paddingValue<<1|U.isNonSync,61440&U.degradPrio,15&U.degradPrio,(J=y.cts)>>>24&255,J>>>16&255,J>>>8&255,255&J],12+16*v);return g.box(g.types.trun,p)},g.initSegment=function(c){g.types||g.init();var i=g.moov(c);return pi(g.FTYP,i)},g}();fo.types=void 0,fo.HDLR_TYPES=void 0,fo.STTS=void 0,fo.STSC=void 0,fo.STCO=void 0,fo.STSZ=void 0,fo.VMHD=void 0,fo.SMHD=void 0,fo.STSD=void 0,fo.FTYP=void 0,fo.DINF=void 0;var Xu=9e4;function hu(g,d,c,i){void 0===c&&(c=1),void 0===i&&(i=!1);var o=g*d*c;return i?Math.round(o):o}function gu(g,d){return void 0===d&&(d=!1),hu(g,1e3,1/Xu,d)}var ol=null,Wc=null,Qu=function(){function g(c,i,o,u){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=c,this.config=i,this.typeSupported=o,this.ISGenerated=!1,null===ol){var p=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);ol=p?parseInt(p[1]):0}if(null===Wc){var v=navigator.userAgent.match(/Safari\/(\d+)/i);Wc=v?parseInt(v[1]):0}}var d=g.prototype;return d.destroy=function(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null},d.resetTimeStamp=function(i){Pe.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=i},d.resetNextTimestamp=function(){Pe.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},d.resetInitSegment=function(){Pe.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0},d.getVideoStartPts=function(i){var o=!1,u=i.reduce(function(h,p){var v=p.pts-h;return v<-4294967296?(o=!0,_a(h,p.pts)):v>0?h:p.pts},i[0].pts);return o&&Pe.debug("PTS rollover detected"),u},d.remux=function(i,o,u,h,p,v,y,C){var R,U,J,se,ye,Ae,Ue=p,Ke=p,pt=o.pid>-1,yt=o.samples.length,nn=i.samples.length>0,qt=y&&yt>0||yt>1;if((!(i.pid>-1)||nn)&&(!pt||qt)||this.ISGenerated||y){if(this.ISGenerated){var on,an,Sn,Rn,Qn=this.videoTrackConfig;Qn&&(o.width!==Qn.width||o.height!==Qn.height||(null==(on=o.pixelRatio)?void 0:on[0])!==(null==(an=Qn.pixelRatio)?void 0:an[0])||(null==(Sn=o.pixelRatio)?void 0:Sn[1])!==(null==(Rn=Qn.pixelRatio)?void 0:Rn[1]))&&this.resetInitSegment()}else J=this.generateIS(i,o,p,v);var Pr,or=this.isVideoContiguous,mr=-1;if(qt&&(mr=function vh(g){for(var d=0;d<g.length;d++)if(g[d].key)return d;return-1}(o.samples),!or&&this.config.forceKeyFrameOnDiscontinuity))if(Ae=!0,mr>0){Pe.warn("[mp4-remuxer]: Dropped "+mr+" out of "+yt+" video samples due to a missing keyframe");var Hr=this.getVideoStartPts(o.samples);o.samples=o.samples.slice(mr),o.dropped+=mr,Pr=Ke+=(o.samples[0].pts-Hr)/o.inputTimeScale}else-1===mr&&(Pe.warn("[mp4-remuxer]: No keyframe found out of "+yt+" video samples"),Ae=!1);if(this.ISGenerated){if(nn&&qt){var Xr=this.getVideoStartPts(o.samples),kr=(_a(i.samples[0].pts,Xr)-Xr)/o.inputTimeScale;Ue+=Math.max(0,kr),Ke+=Math.max(0,-kr)}if(nn){if(i.samplerate||(Pe.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),J=this.generateIS(i,o,p,v)),U=this.remuxAudio(i,Ue,this.isAudioContiguous,v,pt||qt||C===Tr_AUDIO?Ke:void 0),qt){var Fi=U?U.endPTS-U.startPTS:0;o.inputTimeScale||(Pe.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),J=this.generateIS(i,o,p,v)),R=this.remuxVideo(o,Ke,or,Fi)}}else qt&&(R=this.remuxVideo(o,Ke,or,0));R&&(R.firstKeyFrame=mr,R.independent=-1!==mr,R.firstKeyFramePTS=Pr)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(u.samples.length&&(ye=id(u,p,this._initPTS,this._initDTS)),h.samples.length&&(se=Ju(h,p,this._initPTS))),{audio:U,video:R,initSegment:J,independent:Ae,text:se,id3:ye}},d.generateIS=function(i,o,u,h){var se,ye,Ae,p=i.samples,v=o.samples,y=this.typeSupported,C={},R=this._initPTS,U=!R||h,J="audio/mp4";if(U&&(se=ye=1/0),i.config&&p.length){switch(i.timescale=i.samplerate,i.segmentCodec){case"mp3":y.mpeg?(J="audio/mpeg",i.codec=""):y.mp3&&(i.codec="mp3");break;case"ac3":i.codec="ac-3"}C.audio={id:"audio",container:J,codec:i.codec,initSegment:"mp3"===i.segmentCodec&&y.mpeg?new Uint8Array(0):fo.initSegment([i]),metadata:{channelCount:i.channelCount}},U&&(Ae=i.inputTimeScale,R&&Ae===R.timescale?U=!1:se=ye=p[0].pts-Math.round(Ae*u))}if(o.sps&&o.pps&&v.length){if(o.timescale=o.inputTimeScale,C.video={id:"main",container:"video/mp4",codec:o.codec,initSegment:fo.initSegment([o]),metadata:{width:o.width,height:o.height}},U)if(Ae=o.inputTimeScale,R&&Ae===R.timescale)U=!1;else{var Ue=this.getVideoStartPts(v),Ke=Math.round(Ae*u);ye=Math.min(ye,_a(v[0].dts,Ue)-Ke),se=Math.min(se,Ue-Ke)}this.videoTrackConfig={width:o.width,height:o.height,pixelRatio:o.pixelRatio}}if(Object.keys(C).length)return this.ISGenerated=!0,U?(this._initPTS={baseTime:se,timescale:Ae},this._initDTS={baseTime:ye,timescale:Ae}):se=Ae=void 0,{tracks:C,initPTS:se,timescale:Ae}},d.remuxVideo=function(i,o,u,h){var ye,Ae,p=i.inputTimeScale,v=i.samples,y=[],C=v.length,R=this._initPTS,U=this.nextAvcDts,J=8,se=this.videoSampleDuration,Ue=Number.POSITIVE_INFINITY,Ke=Number.NEGATIVE_INFINITY,Xe=!1;if(!u||null===U){var pt=o*p,yt=v[0].pts-_a(v[0].dts,v[0].pts);ol&&null!==U&&Math.abs(pt-yt-U)<15e3?u=!0:U=pt-yt}for(var nn=R.baseTime*p/R.timescale,qt=0;qt<C;qt++){var Dt=v[qt];Dt.pts=_a(Dt.pts-nn,U),Dt.dts=_a(Dt.dts-nn,U),Dt.dts<v[qt>0?qt-1:qt].dts&&(Xe=!0)}Xe&&v.sort(function(_d,Ap){return _d.dts-Ap.dts||_d.pts-Ap.pts});var on=v[v.length-1].dts-(ye=v[0].dts),an=on?Math.round(on/(C-1)):se||i.inputTimeScale/30;if(u){var Sn=ye-U,Rn=Sn>an,Qn=Sn<-1;if((Rn||Qn)&&(Pe.warn(Rn?"AVC: "+gu(Sn,!0)+" ms ("+Sn+"dts) hole between fragments detected at "+o.toFixed(3):"AVC: "+gu(-Sn,!0)+" ms ("+Sn+"dts) overlapping between fragments detected at "+o.toFixed(3)),!Qn||U>=v[0].pts||ol)){ye=U;var or=v[0].pts-Sn;if(Rn)v[0].dts=ye,v[0].pts=or;else for(var mr=0;mr<v.length&&!(v[mr].dts>or);mr++)v[mr].dts-=Sn,v[mr].pts-=Sn;Pe.log("Video: Initial PTS/DTS adjusted: "+gu(or,!0)+"/"+gu(ye,!0)+", delta: "+gu(Sn,!0)+" ms")}}for(var Pr=0,Hr=0,Xr=ye=Math.max(0,ye),oi=0;oi<C;oi++){for(var kr=v[oi],Fi=kr.units,bi=Fi.length,so=0,lo=0;lo<bi;lo++)so+=Fi[lo].data.length;Hr+=so,Pr+=bi,kr.length=so,kr.dts<Xr?(kr.dts=Xr,Xr+=an/4|0||1):Xr=kr.dts,Ue=Math.min(kr.pts,Ue),Ke=Math.max(kr.pts,Ke)}Ae=v[C-1].dts;var Ai,So=Hr+4*Pr+8;try{Ai=new Uint8Array(So)}catch(_d){return void this.observer.emit(x.ERROR,x.ERROR,{type:Ee.MUX_ERROR,details:ge.REMUX_ALLOC_ERROR,fatal:!1,error:_d,bytes:So,reason:"fail allocating video mdat "+So})}var Wi=new DataView(Ai.buffer);Wi.setUint32(0,So),Ai.set(fo.types.mdat,4);for(var Xo=!1,Ca=Number.POSITIVE_INFINITY,vi=Number.POSITIVE_INFINITY,Qo=Number.NEGATIVE_INFINITY,Jo=Number.NEGATIVE_INFINITY,ki=0;ki<C;ki++){for(var $i=v[ki],bo=$i.units,sa=0,Ji=0,la=bo.length;Ji<la;Ji++){var Vs=bo[Ji],ll=Vs.data,gc=Vs.data.byteLength;Wi.setUint32(J,gc),Ai.set(ll,J+=4),J+=gc,sa+=4+gc}var ns=void 0;if(ki<C-1)se=v[ki+1].dts-$i.dts,ns=v[ki+1].pts-$i.pts;else{var Nh=this.config,md=ki>0?$i.dts-v[ki-1].dts:an;if(ns=ki>0?$i.pts-v[ki-1].pts:an,Nh.stretchShortVideoTrack&&null!==this.nextAudioPts){var Ep=Math.floor(Nh.maxBufferHole*p),vd=(h?Ue+h*p:this.nextAudioPts)-$i.pts;vd>Ep?((se=vd-md)<0?se=md:Xo=!0,Pe.log("[mp4-remuxer]: It is approximately "+vd/90+" ms to the next segment; using duration "+se/90+" ms for the last video frame.")):se=md}else se=md}var _p=Math.round($i.pts-$i.dts);Ca=Math.min(Ca,se),Qo=Math.max(Qo,se),vi=Math.min(vi,ns),Jo=Math.max(Jo,ns),y.push(new ec($i.key,se,sa,_p))}if(y.length)if(ol){if(ol<70){var pc=y[0].flags;pc.dependsOn=2,pc.isNonSync=0}}else if(Wc&&Jo-vi<Qo-Ca&&an/Qo<.025&&0===y[0].cts){Pe.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var df=ye,rs=0,yd=y.length;rs<yd;rs++){var Tp=df+y[rs].duration;y[rs].duration=rs<yd-1?Tp+y[rs+1].cts-(df+y[rs].cts):rs?y[rs-1].duration:an,y[rs].cts=0,df=Tp}}this.nextAvcDts=U=Ae+(se=Xo||!se?an:se),this.videoSampleDuration=se,this.isVideoContiguous=!0;var Ed={data1:fo.moof(i.sequenceNumber++,ye,E({},i,{samples:y})),data2:Ai,startPTS:Ue/p,endPTS:(Ke+se)/p,startDTS:ye/p,endDTS:U/p,type:"video",hasAudio:!1,hasVideo:!0,nb:y.length,dropped:i.dropped};return i.samples=[],i.dropped=0,Ed},d.getSamplesPerFrame=function(i){switch(i.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}},d.remuxAudio=function(i,o,u,h,p){var v=i.inputTimeScale,C=v/(i.samplerate?i.samplerate:v),R=this.getSamplesPerFrame(i),U=R*C,J=this._initPTS,se="mp3"===i.segmentCodec&&this.typeSupported.mpeg,ye=[],Ae=void 0!==p,Ue=i.samples,Ke=se?0:8,Xe=this.nextAudioPts||-1,pt=o*v,yt=J.baseTime*v/J.timescale;if(this.isAudioContiguous=u=u||Ue.length&&Xe>0&&(h&&Math.abs(pt-Xe)<9e3||Math.abs(_a(Ue[0].pts-yt,pt)-Xe)<20*U),Ue.forEach(function(Ji){Ji.pts=_a(Ji.pts-yt,pt)}),!u||Xe<0){if(!(Ue=Ue.filter(function(Ji){return Ji.pts>=0})).length)return;Xe=0===p?0:h&&!Ae?Math.max(0,pt):Ue[0].pts}if("aac"===i.segmentCodec)for(var nn=this.config.maxAudioFramesDrift,qt=0,Dt=Xe;qt<Ue.length;qt++){var on=Ue[qt],an=on.pts,Sn=an-Dt,Rn=Math.abs(1e3*Sn/v);if(Sn<=-nn*U&&Ae)0===qt&&(Pe.warn("Audio frame @ "+(an/v).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*Sn/v)+" ms."),this.nextAudioPts=Xe=Dt=an);else if(Sn>=nn*U&&Rn<1e4&&Ae){var Qn=Math.round(Sn/U);(Dt=an-Qn*U)<0&&(Qn--,Dt+=U),0===qt&&(this.nextAudioPts=Xe=Dt),Pe.warn("[mp4-remuxer]: Injecting "+Qn+" audio frame @ "+(Dt/v).toFixed(3)+"s due to "+Math.round(1e3*Sn/v)+" ms gap.");for(var or=0;or<Qn;or++){var mr=Math.max(Dt,0),Pr=Ml.getSilentFrame(i.manifestCodec||i.codec,i.channelCount);Pr||(Pe.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),Pr=on.unit.subarray()),Ue.splice(qt,0,{unit:Pr,pts:mr}),Dt+=U,qt++}}on.pts=Dt,Dt+=U}for(var oi,Hr=null,Xr=null,kr=0,Fi=Ue.length;Fi--;)kr+=Ue[Fi].unit.byteLength;for(var bi=0,so=Ue.length;bi<so;bi++){var lo=Ue[bi],So=lo.unit,Ai=lo.pts;if(null!==Xr)ye[bi-1].duration=Math.round((Ai-Xr)/C);else{if(u&&"aac"===i.segmentCodec&&(Ai=Xe),Hr=Ai,!(kr>0))return;kr+=Ke;try{oi=new Uint8Array(kr)}catch(Ji){return void this.observer.emit(x.ERROR,x.ERROR,{type:Ee.MUX_ERROR,details:ge.REMUX_ALLOC_ERROR,fatal:!1,error:Ji,bytes:kr,reason:"fail allocating audio mdat "+kr})}se||(new DataView(oi.buffer).setUint32(0,kr),oi.set(fo.types.mdat,4))}oi.set(So,Ke);var Ca=So.byteLength;Ke+=Ca,ye.push(new ec(!0,R,Ca,0)),Xr=Ai}var vi=ye.length;if(vi){this.nextAudioPts=Xe=Xr+C*ye[ye.length-1].duration;var Jo=se?new Uint8Array(0):fo.moof(i.sequenceNumber++,Hr/C,E({},i,{samples:ye}));i.samples=[];var ki=Hr/v,$i=Xe/v,sa={data1:Jo,data2:oi,startPTS:ki,endPTS:$i,startDTS:ki,endDTS:$i,type:"audio",hasAudio:!0,hasVideo:!1,nb:vi};return this.isAudioContiguous=!0,sa}},d.remuxEmptyAudio=function(i,o,u,h){var p=i.inputTimeScale,C=this.nextAudioPts,R=this._initDTS,U=9e4*R.baseTime/R.timescale,J=(null!==C?C:h.startDTS*p)+U,ye=p/(i.samplerate?i.samplerate:p)*1024,Ae=Math.ceil((h.endDTS*p+U-J)/ye),Ue=Ml.getSilentFrame(i.manifestCodec||i.codec,i.channelCount);if(Pe.warn("[mp4-remuxer]: remux empty Audio"),Ue){for(var Ke=[],Xe=0;Xe<Ae;Xe++){var pt=J+Xe*ye;Ke.push({unit:Ue,pts:pt,dts:pt})}return i.samples=Ke,this.remuxAudio(i,o,u,!1)}Pe.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},g}();function _a(g,d){var c;if(null===d)return g;for(c=d<g?-8589934592:8589934592;Math.abs(g-d)>4294967296;)g+=c;return g}function id(g,d,c,i){var o=g.samples.length;if(o){for(var u=g.inputTimeScale,h=0;h<o;h++){var p=g.samples[h];p.pts=_a(p.pts-c.baseTime*u/c.timescale,d*u)/u,p.dts=_a(p.dts-i.baseTime*u/i.timescale,d*u)/u}var v=g.samples;return g.samples=[],{samples:v}}}function Ju(g,d,c){var i=g.samples.length;if(i){for(var o=g.inputTimeScale,u=0;u<i;u++){var h=g.samples[u];h.pts=_a(h.pts-c.baseTime*o/c.timescale,d*o)/o}g.samples.sort(function(v,y){return v.pts-y.pts});var p=g.samples;return g.samples=[],{samples:p}}}var ko,ec=function(d,c,i,o){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=c,this.size=i,this.cts=o,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:d?2:1,isNonSync:d?0:1}},yh=function(){function g(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}var d=g.prototype;return d.destroy=function(){},d.resetTimeStamp=function(i){this.initPTS=i,this.lastEndTime=null},d.resetNextTimestamp=function(){this.lastEndTime=null},d.resetInitSegment=function(i,o,u,h){this.audioCodec=o,this.videoCodec=u,this.generateInitSegment(function pn(g,d){if(!g||!d)return g;var c=d.keyId;return c&&d.isCommonEncryption&&En(g,["moov","trak"]).forEach(function(o){var h=En(o,["mdia","minf","stbl","stsd"])[0].subarray(8),p=En(h,["enca"]),v=p.length>0;v||(p=En(h,["encv"])),p.forEach(function(y){En(y.subarray(v?28:78),["sinf"]).forEach(function(U){var J=On(U);if(J){var se=J.subarray(8,24);se.some(function(ye){return 0!==ye})||(Pe.log("[eme] Patching keyId in 'enc"+(v?"a":"v")+">sinf>>tenc' box: "+sn_hexDump(se)+" -> "+sn_hexDump(c)),J.set(c,8))}})})}),g}(i,h)),this.emitInitSegment=!0},d.generateInitSegment=function(i){var o=this.audioCodec,u=this.videoCodec;if(null==i||!i.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var h=this.initData=fr(i);h.audio&&(o=tc(h.audio,It_AUDIO)),h.video&&(u=tc(h.video,It_VIDEO));var p={};h.audio&&h.video?p.audiovideo={container:"video/mp4",codec:o+","+u,initSegment:i,id:"main"}:h.audio?p.audio={container:"audio/mp4",codec:o,initSegment:i,id:"audio"}:h.video?p.video={container:"video/mp4",codec:u,initSegment:i,id:"main"}:Pe.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=p},d.remux=function(i,o,u,h,p,v){var y,C,R=this.initPTS,U=this.lastEndTime,J={audio:void 0,video:void 0,text:h,id3:u,initSegment:void 0};Q(U)||(U=this.lastEndTime=p||0);var se=o.samples;if(null==se||!se.length)return J;var ye={initPTS:void 0,timescale:1},Ae=this.initData;if(null!=(y=Ae)&&y.length||(this.generateInitSegment(se),Ae=this.initData),null==(C=Ae)||!C.length)return Pe.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),J;this.emitInitSegment&&(ye.tracks=this.initTracks,this.emitInitSegment=!1);var Ue=function vr(g,d){for(var c=0,i=0,o=0,u=En(g,["moof","traf"]),h=0;h<u.length;h++){var p=u[h],v=En(p,["tfhd"])[0],C=d[Qt(v,4)];if(C){var R=C.default,U=Qt(v,0)|R?.flags,J=R?.duration;8&U&&(J=Qt(v,2&U?12:8));for(var se=C.timescale||9e4,ye=En(p,["trun"]),Ae=0;Ae<ye.length;Ae++)!(c=qr(ye[Ae]))&&J&&(c=J*Qt(ye[Ae],4)),C.type===It_VIDEO?i+=c/se:C.type===It_AUDIO&&(o+=c/se)}}if(0===i&&0===o){for(var Ke=1/0,Xe=0,pt=0,yt=En(g,["sidx"]),nn=0;nn<yt.length;nn++){var qt=qn(yt[nn]);if(null!=qt&&qt.references){Ke=Math.min(Ke,qt.earliestPresentationTime/qt.timescale);var Dt=qt.references.reduce(function(on,an){return on+an.info.duration||0},0);pt=(Xe=Math.max(Xe,Dt+qt.earliestPresentationTime/qt.timescale))-Ke}}if(pt&&Q(pt))return pt}return i||o}(se,Ae),Ke=function gr(g,d){return En(d,["moof","traf"]).reduce(function(c,i){var o=En(i,["tfdt"])[0],u=o[0],h=En(i,["tfhd"]).reduce(function(p,v){var y=Qt(v,4),C=g[y];if(C){var R=Qt(o,4);if(1===u){if(R===Tt)return Pe.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),p;R*=Tt+1,R+=Qt(o,8)}var J=R/(C.timescale||9e4);if(Q(J)&&(null===p||J<p))return J}return p},null);return null!==h&&Q(h)&&(null===c||h<c)?h:c},null)}(Ae,se),Xe=null===Ke?p:Ke;(function Eh(g,d,c,i){if(null===g)return!0;var o=Math.max(i,1);return Math.abs(d-g.baseTime/g.timescale-c)>o}(R,Xe,p,Ue)||ye.timescale!==R.timescale&&v)&&(ye.initPTS=Xe-p,R&&1===R.timescale&&Pe.warn("Adjusting initPTS by "+(ye.initPTS-R.baseTime)),this.initPTS=R={baseTime:ye.initPTS,timescale:1});var pt=i?Xe-R.baseTime/R.timescale:U,yt=pt+Ue;(function Qr(g,d,c){En(d,["moof","traf"]).forEach(function(i){En(i,["tfhd"]).forEach(function(o){var u=Qt(o,4),h=g[u];if(h){var p=h.timescale||9e4;En(i,["tfdt"]).forEach(function(v){var y=v[0],C=c*p;if(C){var R=Qt(v,4);if(0===y)R-=C,Pn(v,4,R=Math.max(R,0));else{R*=Math.pow(2,32),R+=Qt(v,8),R-=C,R=Math.max(R,0);var U=Math.floor(R/(Tt+1)),J=Math.floor(R%(Tt+1));Pn(v,4,U),Pn(v,8,J)}}})}})})})(Ae,se,R.baseTime/R.timescale),Ue>0?this.lastEndTime=yt:(Pe.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var nn=!!Ae.audio,qt=!!Ae.video,Dt="";nn&&(Dt+="audio"),qt&&(Dt+="video");var on={data1:se,startPTS:pt,startDTS:pt,endPTS:yt,endDTS:yt,type:Dt,hasAudio:nn,hasVideo:qt,nb:1,dropped:0};return J.audio="audio"===on.type?on:void 0,J.video="audio"!==on.type?on:void 0,J.initSegment=ye,J.id3=id(u,p,R,R),h.samples.length&&(J.text=Ju(h,p,R)),J},g}();function tc(g,d){var c=g?.codec;if(c&&c.length>4)return c;if(d===It_AUDIO){if("ec-3"===c||"ac-3"===c||"alac"===c)return c;if("fLaC"===c||"Opus"===c)return Yn(c,!1);var o="mp4a.40.5";return Pe.info('Parsed audio codec "'+c+'" or audio object type not handled. Using "'+o+'"'),o}return Pe.warn('Unhandled video codec "'+c+'"'),"hvc1"===c||"hev1"===c?"hvc1.1.6.L120.90":"av01"===c?"av01.0.04M.08":"avc1.42e01e"}try{ko=self.performance.now.bind(self.performance)}catch{Pe.debug("Unable to use Performance API on this environment"),ko=xt?.Date.now}var Ta=[{demux:$r,remux:yh},{demux:ed,remux:Qu},{demux:rl,remux:Qu},{demux:Ea,remux:Qu}];Ta.splice(2,0,{demux:fu,remux:Qu});var $c=function(){function g(c,i,o,u,h){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=c,this.typeSupported=i,this.config=o,this.vendor=u,this.id=h}var d=g.prototype;return d.configure=function(i){this.transmuxConfig=i,this.decrypter&&this.decrypter.reset()},d.push=function(i,o,u,h){var p=this,v=u.transmuxing;v.executeStart=ko();var y=new Uint8Array(i),C=this.currentTransmuxState,R=this.transmuxConfig;h&&(this.currentTransmuxState=h);var U=h||C,J=U.contiguous,se=U.discontinuity,ye=U.trackSwitch,Ae=U.accurateTimeOffset,Ue=U.timeOffset,Ke=U.initSegmentChange,Xe=R.audioCodec,pt=R.videoCodec,yt=R.defaultInitPts,nn=R.duration,qt=R.initSegmentData,Dt=function _h(g,d){var c=null;return g.byteLength>0&&null!=d?.key&&null!==d.iv&&null!=d.method&&(c=d),c}(y,o);if(Dt&&"AES-128"===Dt.method){var on=this.getDecrypter();if(!on.isSync())return this.decryptionPromise=on.webCryptoDecrypt(y,Dt.key.buffer,Dt.iv.buffer).then(function(Pr){var Hr=p.push(Pr,null,u);return p.decryptionPromise=null,Hr}),this.decryptionPromise;var an=on.softwareDecrypt(y,Dt.key.buffer,Dt.iv.buffer);if(u.part>-1&&(an=on.flush()),!an)return v.executeEnd=ko(),oo(u);y=new Uint8Array(an)}var Rn=this.needsProbing(se,ye);if(Rn){var Qn=this.configureTransmuxer(y);if(Qn)return Pe.warn("[transmuxer] "+Qn.message),this.observer.emit(x.ERROR,x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.FRAG_PARSING_ERROR,fatal:!1,error:Qn,reason:Qn.message}),v.executeEnd=ko(),oo(u)}(se||ye||Ke||Rn)&&this.resetInitSegment(qt,Xe,pt,nn,o),(se||Ke||Rn)&&this.resetInitialTimestamp(yt),J||this.resetContiguity();var or=this.transmux(y,Dt,Ue,Ae,u),mr=this.currentTransmuxState;return mr.contiguous=!0,mr.discontinuity=!1,mr.trackSwitch=!1,v.executeEnd=ko(),or},d.flush=function(i){var o=this,u=i.transmuxing;u.executeStart=ko();var h=this.decrypter,p=this.currentTransmuxState,v=this.decryptionPromise;if(v)return v.then(function(){return o.flush(i)});var y=[],C=p.timeOffset;if(h){var R=h.flush();R&&y.push(this.push(R,null,i))}var U=this.demuxer;if(!U||!this.remuxer)return u.executeEnd=ko(),[oo(i)];var se=U.flush(C);return Sa(se)?se.then(function(ye){return o.flushRemux(y,ye,i),y}):(this.flushRemux(y,se,i),y)},d.flushRemux=function(i,o,u){var h=o.audioTrack,p=o.videoTrack,v=o.id3Track,y=o.textTrack,C=this.currentTransmuxState,R=C.accurateTimeOffset,U=C.timeOffset;Pe.log("[transmuxer.ts]: Flushed fragment "+u.sn+(u.part>-1?" p: "+u.part:"")+" of level "+u.level);var J=this.remuxer.remux(h,p,v,y,U,R,!0,this.id);i.push({remuxResult:J,chunkMeta:u}),u.transmuxing.executeEnd=ko()},d.resetInitialTimestamp=function(i){var o=this.demuxer,u=this.remuxer;!o||!u||(o.resetTimeStamp(i),u.resetTimeStamp(i))},d.resetContiguity=function(){var i=this.demuxer,o=this.remuxer;!i||!o||(i.resetContiguity(),o.resetNextTimestamp())},d.resetInitSegment=function(i,o,u,h,p){var v=this.demuxer,y=this.remuxer;!v||!y||(v.resetInitSegment(i,o,u,h),y.resetInitSegment(i,o,u,p))},d.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},d.transmux=function(i,o,u,h,p){return o&&"SAMPLE-AES"===o.method?this.transmuxSampleAes(i,o,u,h,p):this.transmuxUnencrypted(i,u,h,p)},d.transmuxUnencrypted=function(i,o,u,h){var p=this.demuxer.demux(i,o,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(p.audioTrack,p.videoTrack,p.id3Track,p.textTrack,o,u,!1,this.id),chunkMeta:h}},d.transmuxSampleAes=function(i,o,u,h,p){var v=this;return this.demuxer.demuxSampleAes(i,o,u).then(function(y){return{remuxResult:v.remuxer.remux(y.audioTrack,y.videoTrack,y.id3Track,y.textTrack,u,h,!1,v.id),chunkMeta:p}})},d.configureTransmuxer=function(i){for(var v,o=this.config,u=this.observer,h=this.typeSupported,p=this.vendor,y=0,C=Ta.length;y<C;y++){var R;if(null!=(R=Ta[y].demux)&&R.probe(i)){v=Ta[y];break}}if(!v)return new Error("Failed to find demuxer by probing fragment data");var U=this.demuxer,J=this.remuxer,se=v.remux,ye=v.demux;(!J||!(J instanceof se))&&(this.remuxer=new se(u,o,h,p)),(!U||!(U instanceof ye))&&(this.demuxer=new ye(u,o,h),this.probe=ye.probe)},d.needsProbing=function(i,o){return!this.demuxer||!this.remuxer||i||o},d.getDecrypter=function(){var i=this.decrypter;return i||(i=this.decrypter=new io(this.config)),i},g}();var oo=function(d){return{remuxResult:{},chunkMeta:d}};function Sa(g){return"then"in g&&g.then instanceof Function}var oa=function(d,c,i,o,u){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=d,this.videoCodec=c,this.initSegmentData=i,this.duration=o,this.defaultInitPts=u||null},nc=function(d,c,i,o,u,h){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=d,this.contiguous=c,this.accurateTimeOffset=i,this.trackSwitch=o,this.timeOffset=u,this.initSegmentChange=h},rc={exports:{}};!function(g){var d=Object.prototype.hasOwnProperty,c="~";function i(){}function o(v,y,C){this.fn=v,this.context=y,this.once=C||!1}function u(v,y,C,R,U){if("function"!=typeof C)throw new TypeError("The listener must be a function");var J=new o(C,R||v,U),se=c?c+y:y;return v._events[se]?v._events[se].fn?v._events[se]=[v._events[se],J]:v._events[se].push(J):(v._events[se]=J,v._eventsCount++),v}function h(v,y){0==--v._eventsCount?v._events=new i:delete v._events[y]}function p(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(c=!1)),p.prototype.eventNames=function(){var C,R,y=[];if(0===this._eventsCount)return y;for(R in C=this._events)d.call(C,R)&&y.push(c?R.slice(1):R);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(C)):y},p.prototype.listeners=function(y){var R=this._events[c?c+y:y];if(!R)return[];if(R.fn)return[R.fn];for(var U=0,J=R.length,se=new Array(J);U<J;U++)se[U]=R[U].fn;return se},p.prototype.listenerCount=function(y){var R=this._events[c?c+y:y];return R?R.fn?1:R.length:0},p.prototype.emit=function(y,C,R,U,J,se){var ye=c?c+y:y;if(!this._events[ye])return!1;var Ke,Xe,Ae=this._events[ye],Ue=arguments.length;if(Ae.fn){switch(Ae.once&&this.removeListener(y,Ae.fn,void 0,!0),Ue){case 1:return Ae.fn.call(Ae.context),!0;case 2:return Ae.fn.call(Ae.context,C),!0;case 3:return Ae.fn.call(Ae.context,C,R),!0;case 4:return Ae.fn.call(Ae.context,C,R,U),!0;case 5:return Ae.fn.call(Ae.context,C,R,U,J),!0;case 6:return Ae.fn.call(Ae.context,C,R,U,J,se),!0}for(Xe=1,Ke=new Array(Ue-1);Xe<Ue;Xe++)Ke[Xe-1]=arguments[Xe];Ae.fn.apply(Ae.context,Ke)}else{var yt,pt=Ae.length;for(Xe=0;Xe<pt;Xe++)switch(Ae[Xe].once&&this.removeListener(y,Ae[Xe].fn,void 0,!0),Ue){case 1:Ae[Xe].fn.call(Ae[Xe].context);break;case 2:Ae[Xe].fn.call(Ae[Xe].context,C);break;case 3:Ae[Xe].fn.call(Ae[Xe].context,C,R);break;case 4:Ae[Xe].fn.call(Ae[Xe].context,C,R,U);break;default:if(!Ke)for(yt=1,Ke=new Array(Ue-1);yt<Ue;yt++)Ke[yt-1]=arguments[yt];Ae[Xe].fn.apply(Ae[Xe].context,Ke)}}return!0},p.prototype.on=function(y,C,R){return u(this,y,C,R,!1)},p.prototype.once=function(y,C,R){return u(this,y,C,R,!0)},p.prototype.removeListener=function(y,C,R,U){var J=c?c+y:y;if(!this._events[J])return this;if(!C)return h(this,J),this;var se=this._events[J];if(se.fn)se.fn===C&&(!U||se.once)&&(!R||se.context===R)&&h(this,J);else{for(var ye=0,Ae=[],Ue=se.length;ye<Ue;ye++)(se[ye].fn!==C||U&&!se[ye].once||R&&se[ye].context!==R)&&Ae.push(se[ye]);Ae.length?this._events[J]=1===Ae.length?Ae[0]:Ae:h(this,J)}return this},p.prototype.removeAllListeners=function(y){var C;return y?this._events[C=c?c+y:y]&&h(this,C):(this._events=new i,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prefixed=c,p.EventEmitter=p,g.exports=p}(rc);var Nl=pe(rc.exports);function Ps(g,d){if(function Xc(g){return!(g.audio||g.video||g.text||g.id3||g.initSegment)}(d.remuxResult))return!1;var c=[],i=d.remuxResult,o=i.audio,u=i.video;return o&&al(c,o),u&&al(c,u),g.postMessage({event:"transmuxComplete",data:d},c),!0}function al(g,d){d.data1&&g.push(d.data1.buffer),d.data2&&g.push(d.data2.buffer)}function sl(g,d,c){var i=d.reduce(function(o,u){return Ps(g,u)||o},!1);i||g.postMessage({event:"transmuxComplete",data:d[0]}),g.postMessage({event:"flush",data:c})}typeof Ci<"u"&&Ci&&function xl(g){var d=new Nl,c=function(u,h){g.postMessage({event:u,data:h})};d.on(x.FRAG_DECRYPTED,c),d.on(x.ERROR,c),g.addEventListener("message",function(o){var u=o.data;switch(u.cmd){case"init":var h=JSON.parse(u.config);g.transmuxer=new $c(d,u.typeSupported,h,u.vendor,u.id),Je(h.debug,u.id),function(){var u=function(v){Pe[v]=function(R){c("workerLog",{logType:v,message:R})}};for(var h in Pe)u(h)}(),c("init",null);break;case"configure":g.transmuxer.configure(u.config);break;case"demux":var p=g.transmuxer.push(u.data,u.decryptdata,u.chunkMeta,u.state);Sa(p)?(g.transmuxer.async=!0,p.then(function(R){Ps(g,R)}).catch(function(R){c(x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.FRAG_PARSING_ERROR,chunkMeta:u.chunkMeta,fatal:!1,error:R,err:R,reason:"transmuxer-worker push error"})})):(g.transmuxer.async=!1,Ps(g,p));break;case"flush":var v=u.chunkMeta,y=g.transmuxer.flush(v);Sa(y)||g.transmuxer.async?(Sa(y)||(y=Promise.resolve(y)),y.then(function(R){sl(g,R,v)}).catch(function(R){c(x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.FRAG_PARSING_ERROR,chunkMeta:u.chunkMeta,fatal:!1,error:R,err:R,reason:"transmuxer-worker flush error"})})):sl(g,y,v)}})}(self);var Fs=function(){function g(c,i,o,u){var h=this;this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var p=c.config;this.hls=c,this.id=i,this.useWorker=!!p.enableWorker,this.onTransmuxComplete=o,this.onFlush=u;var v=function(ye,Ae){(Ae=Ae||{}).frag=h.frag,Ae.id=h.id,ye===x.ERROR&&(h.error=Ae.error),h.hls.trigger(ye,Ae)};this.observer=new Nl,this.observer.on(x.FRAG_DECRYPTED,v),this.observer.on(x.ERROR,v);var y=Kr(p.preferManagedMediaSource)||{isTypeSupported:function(){return!1}},C={mpeg:y.isTypeSupported("audio/mpeg"),mp3:y.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:y.isTypeSupported('audio/mp4; codecs="ac-3"')},R=navigator.vendor;if(this.useWorker&&typeof Worker<"u")try{p.workerPath?(Pe.log("loading Web Worker "+p.workerPath+' for "'+i+'"'),this.workerContext=function pu(g){var d=new self.URL(g,self.location.href).href;return{worker:new self.Worker(d),scriptURL:d}}(p.workerPath)):(Pe.log('injecting Web Worker for "'+i+'"'),this.workerContext=function Qc(){var g=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;("+Jr.toString()+")(true);"],{type:"text/javascript"}),d=self.URL.createObjectURL(g);return{worker:new self.Worker(d),objectURL:d}}()),this.onwmsg=function(se){return h.onWorkerMessage(se)};var J=this.workerContext.worker;J.addEventListener("message",this.onwmsg),J.onerror=function(se){var ye=new Error(se.message+"  ("+se.filename+":"+se.lineno+")");p.enableWorker=!1,Pe.warn('Error in "'+i+'" Web Worker, fallback to inline'),h.hls.trigger(x.ERROR,{type:Ee.OTHER_ERROR,details:ge.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:ye})},J.postMessage({cmd:"init",typeSupported:C,vendor:R,id:i,config:JSON.stringify(p)})}catch(se){Pe.warn('Error setting up "'+i+'" Web Worker, fallback to inline',se),this.resetWorker(),this.error=null,this.transmuxer=new $c(this.observer,C,p,R,i)}else this.transmuxer=new $c(this.observer,C,p,R,i)}var d=g.prototype;return d.resetWorker=function(){if(this.workerContext){var i=this.workerContext,o=i.worker,u=i.objectURL;u&&self.URL.revokeObjectURL(u),o.removeEventListener("message",this.onwmsg),o.onerror=null,o.terminate(),this.workerContext=null}},d.destroy=function(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{var i=this.transmuxer;i&&(i.destroy(),this.transmuxer=null)}var o=this.observer;o&&o.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},d.push=function(i,o,u,h,p,v,y,C,R,U){var J,se,ye=this;R.transmuxing.start=self.performance.now();var Ae=this.transmuxer,Ue=v?v.start:p.start,Ke=p.decryptdata,Xe=this.frag,pt=!(Xe&&p.cc===Xe.cc),yt=!(Xe&&R.level===Xe.level),nn=Xe?R.sn-Xe.sn:-1,qt=this.part?R.part-this.part.index:-1,on=!yt&&(1===nn||0===nn&&(1===qt||0===nn&&R.id>1&&R.id===Xe?.stats.chunkCount&&qt<=0)),an=self.performance.now();(yt||nn||0===p.stats.parsing.start)&&(p.stats.parsing.start=an),v&&(qt||!on)&&(v.stats.parsing.start=an);var Sn=!(Xe&&(null==(J=p.initSegment)?void 0:J.url)===(null==(se=Xe.initSegment)?void 0:se.url)),Rn=new nc(pt,on,C,yt,Ue,Sn);if(!on||pt||Sn){Pe.log("[transmuxer-interface, "+p.type+"]: Starting new transmux session for sn: "+R.sn+" p: "+R.part+" level: "+R.level+" id: "+R.id+"\n        discontinuity: "+pt+"\n        trackSwitch: "+yt+"\n        contiguous: "+on+"\n        accurateTimeOffset: "+C+"\n        timeOffset: "+Ue+"\n        initSegmentChange: "+Sn);var Qn=new oa(u,h,o,y,U);this.configureTransmuxer(Qn)}if(this.frag=p,this.part=v,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:i,decryptdata:Ke,chunkMeta:R,state:Rn},i instanceof ArrayBuffer?[i]:[]);else if(Ae){var or=Ae.push(i,Ke,R,Rn);Sa(or)?(Ae.async=!0,or.then(function(mr){ye.handleTransmuxComplete(mr)}).catch(function(mr){ye.transmuxerError(mr,R,"transmuxer-interface push error")})):(Ae.async=!1,this.handleTransmuxComplete(or))}},d.flush=function(i){var o=this;i.transmuxing.start=self.performance.now();var u=this.transmuxer;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:i});else if(u){var h=u.flush(i);Sa(h)||u.async?(Sa(h)||(h=Promise.resolve(h)),h.then(function(v){o.handleFlushResult(v,i)}).catch(function(v){o.transmuxerError(v,i,"transmuxer-interface flush error")})):this.handleFlushResult(h,i)}},d.transmuxerError=function(i,o,u){this.hls&&(this.error=i,this.hls.trigger(x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.FRAG_PARSING_ERROR,chunkMeta:o,fatal:!1,error:i,err:i,reason:u}))},d.handleFlushResult=function(i,o){var u=this;i.forEach(function(h){u.handleTransmuxComplete(h)}),this.onFlush(o)},d.onWorkerMessage=function(i){var o=i.data,u=this.hls;switch(o.event){case"init":var h,p=null==(h=this.workerContext)?void 0:h.objectURL;p&&self.URL.revokeObjectURL(p);break;case"transmuxComplete":this.handleTransmuxComplete(o.data);break;case"flush":this.onFlush(o.data);break;case"workerLog":Pe[o.data.logType]&&Pe[o.data.logType](o.data.message);break;default:o.data=o.data||{},o.data.frag=this.frag,o.data.id=this.id,u.trigger(o.event,o.data)}},d.configureTransmuxer=function(i){var o=this.transmuxer;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:i}):o&&o.configure(i)},d.handleTransmuxComplete=function(i){i.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(i)},g}();function ks(g,d){if(g.length!==d.length)return!1;for(var c=0;c<g.length;c++)if(!ms(g[c].attrs,d[c].attrs))return!1;return!0}function ms(g,d,c){var i=g["STABLE-RENDITION-ID"];return i&&!c?i===d["STABLE-RENDITION-ID"]:!(c||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(function(o){return g[o]!==d[o]})}function Jc(g,d){return d.label.toLowerCase()===g.name.toLowerCase()&&(!d.language||d.language.toLowerCase()===(g.lang||"").toLowerCase())}var od=function(g){function d(i,o,u){var h;return(h=g.call(this,i,o,u,"[audio-stream-controller]",Tr_AUDIO)||this).videoBuffer=null,h.videoTrackCC=-1,h.waitingVideoCC=-1,h.bufferedTrack=null,h.switchingTrack=null,h.trackId=-1,h.waitingData=null,h.mainDetails=null,h.flushing=!1,h.bufferFlushed=!1,h.cachedTrackLoadedData=null,h._registerListeners(),h}_(d,g);var c=d.prototype;return c.onHandlerDestroying=function(){this._unregisterListeners(),g.prototype.onHandlerDestroying.call(this),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null},c._registerListeners=function(){var o=this.hls;o.on(x.MEDIA_ATTACHED,this.onMediaAttached,this),o.on(x.MEDIA_DETACHING,this.onMediaDetaching,this),o.on(x.MANIFEST_LOADING,this.onManifestLoading,this),o.on(x.LEVEL_LOADED,this.onLevelLoaded,this),o.on(x.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),o.on(x.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),o.on(x.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),o.on(x.ERROR,this.onError,this),o.on(x.BUFFER_RESET,this.onBufferReset,this),o.on(x.BUFFER_CREATED,this.onBufferCreated,this),o.on(x.BUFFER_FLUSHING,this.onBufferFlushing,this),o.on(x.BUFFER_FLUSHED,this.onBufferFlushed,this),o.on(x.INIT_PTS_FOUND,this.onInitPtsFound,this),o.on(x.FRAG_BUFFERED,this.onFragBuffered,this)},c._unregisterListeners=function(){var o=this.hls;o.off(x.MEDIA_ATTACHED,this.onMediaAttached,this),o.off(x.MEDIA_DETACHING,this.onMediaDetaching,this),o.off(x.MANIFEST_LOADING,this.onManifestLoading,this),o.off(x.LEVEL_LOADED,this.onLevelLoaded,this),o.off(x.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),o.off(x.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),o.off(x.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),o.off(x.ERROR,this.onError,this),o.off(x.BUFFER_RESET,this.onBufferReset,this),o.off(x.BUFFER_CREATED,this.onBufferCreated,this),o.off(x.BUFFER_FLUSHING,this.onBufferFlushing,this),o.off(x.BUFFER_FLUSHED,this.onBufferFlushed,this),o.off(x.INIT_PTS_FOUND,this.onInitPtsFound,this),o.off(x.FRAG_BUFFERED,this.onFragBuffered,this)},c.onInitPtsFound=function(o,u){var h=u.frag,v=u.initPTS;if("main"===u.id){var C=h.cc;this.initPTS[h.cc]={baseTime:v,timescale:u.timescale},this.log("InitPTS for cc: "+C+" found from main: "+v),this.videoTrackCC=C,this.state===Nn_WAITING_INIT_PTS&&this.tick()}},c.startLoad=function(o){if(!this.levels)return this.startPosition=o,void(this.state=Nn_STOPPED);var u=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),u>0&&-1===o?(this.log("Override startPosition with lastCurrentTime @"+u.toFixed(3)),o=u,this.state=Nn_IDLE):(this.loadedmetadata=!1,this.state=Nn_WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=o,this.tick()},c.doTick=function(){switch(this.state){case Nn_IDLE:this.doTickIdle();break;case Nn_WAITING_TRACK:var o,u=this.levels,p=null==u||null==(o=u[this.trackId])?void 0:o.details;if(p){if(this.waitForCdnTuneIn(p))break;this.state=Nn_WAITING_INIT_PTS}break;case Nn_FRAG_LOADING_WAITING_RETRY:var v,y=performance.now(),C=this.retryDate;if(!C||y>=C||null!=(v=this.media)&&v.seeking){var R=this.levels,U=this.trackId;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(R?.[U]||null),this.state=Nn_IDLE}break;case Nn_WAITING_INIT_PTS:var J=this.waitingData;if(J){var se=J.frag,ye=J.part,Ae=J.cache,Ue=J.complete;if(void 0!==this.initPTS[se.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=Nn_FRAG_LOADING;var Xe={frag:se,part:ye,payload:Ae.flush(),networkDetails:null};this._handleFragmentLoadProgress(Xe),Ue&&g.prototype._handleFragmentLoadComplete.call(this,Xe)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+se.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var pt=this.getLoadPosition(),yt=ui.bufferInfo(this.mediaBuffer,pt,this.config.maxBufferHole);ru(yt.end,this.config.maxFragLookUpTolerance,se)<0&&(this.log("Waiting fragment cc ("+se.cc+") @ "+se.start+" cancelled because another fragment at "+yt.end+" is needed"),this.clearWaitingFragment())}}else this.state=Nn_IDLE}this.onTickEnd()},c.clearWaitingFragment=function(){var o=this.waitingData;o&&(this.fragmentTracker.removeFragment(o.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Nn_IDLE)},c.resetLoadingState=function(){this.clearWaitingFragment(),g.prototype.resetLoadingState.call(this)},c.onTickEnd=function(){var o=this.media;null!=o&&o.readyState&&(this.lastCurrentTime=o.currentTime)},c.doTickIdle=function(){var o=this.hls,u=this.levels,h=this.media,p=this.trackId;if((h||!this.startFragRequested&&o.config.startFragPrefetch)&&null!=u&&u[p]){var y=u[p],C=y.details;if(!C||C.live&&this.levelLastLoaded!==y||this.waitForCdnTuneIn(C))return void(this.state=Nn_WAITING_TRACK);var R=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&R&&(this.bufferFlushed=!1,this.afterBufferFlushed(R,It_AUDIO,Tr_AUDIO));var U=this.getFwdBufferInfo(R,Tr_AUDIO);if(null!==U){var J=this.bufferedTrack,se=this.switchingTrack;if(!se&&this._streamEnded(U,C))return o.trigger(x.BUFFER_EOS,{type:"audio"}),void(this.state=Nn_ENDED);var ye=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,Tr_MAIN),Ae=U.len,Ue=this.getMaxBufferLength(ye?.len),Ke=C.fragments,Xe=Ke[0].start,pt=this.flushing?this.getLoadPosition():U.end;if(se&&h){var yt=this.getLoadPosition();J&&!ms(se.attrs,J.attrs)&&(pt=yt),C.PTSKnown&&yt<Xe&&(U.end>Xe||U.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),h.currentTime=Xe+.05)}if(!(Ae>=Ue&&!se&&pt<Ke[Ke.length-1].start)){var nn=this.getNextFragment(pt,C),qt=!1;if(nn&&this.isLoopLoading(nn,pt)&&(qt=!!nn.gap,nn=this.getNextFragmentLoopLoading(nn,C,U,Tr_MAIN,Ue)),!nn)return void(this.bufferFlushed=!0);var Dt=ye&&nn.start>ye.end+C.targetduration;if(Dt||(null==ye||!ye.len)&&U.len){var on=this.getAppendedFrag(nn.start,Tr_MAIN);if(null===on||(qt||(qt=!!on.gap||!!Dt&&0===ye.len),Dt&&!qt||qt&&U.nextStart&&U.nextStart<on.end))return}this.loadFragment(nn,y,pt)}}}},c.getMaxBufferLength=function(o){var u=g.prototype.getMaxBufferLength.call(this);return o?Math.min(Math.max(u,o),this.config.maxMaxBufferLength):u},c.onMediaDetaching=function(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,g.prototype.onMediaDetaching.call(this)},c.onAudioTracksUpdated=function(o,u){var h=u.audioTracks;this.resetTransmuxer(),this.levels=h.map(function(p){return new ss(p)})},c.onAudioTrackSwitching=function(o,u){var h=!!u.url;this.trackId=u.id;var p=this.fragCurrent;p&&(p.abortRequests(),this.removeUnbufferedFrags(p.start)),this.resetLoadingState(),h?this.setInterval(100):this.resetTransmuxer(),h?(this.switchingTrack=u,this.state=Nn_IDLE,this.flushAudioIfNeeded(u)):(this.switchingTrack=null,this.bufferedTrack=u,this.state=Nn_STOPPED),this.tick()},c.onManifestLoading=function(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1},c.onLevelLoaded=function(o,u){this.mainDetails=u.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(x.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},c.onAudioTrackLoaded=function(o,u){var h;if(null!=this.mainDetails){var p=this.levels,v=u.details,y=u.id;if(p){this.log("Audio track "+y+" loaded ["+v.startSN+","+v.endSN+"]"+(v.lastPartSn?"[part-"+v.lastPartSn+"-"+v.lastPartIndex+"]":"")+",duration:"+v.totalduration);var C=p[y],R=0;if(v.live||null!=(h=C.details)&&h.live){this.checkLiveUpdate(v);var J,U=this.mainDetails;if(v.deltaUpdateFailed||!U)return;!C.details&&v.hasProgramDateTime&&U.hasProgramDateTime?(su(v,U),R=v.fragments[0].start):R=this.alignPlaylists(v,C.details,null==(J=this.levelLastLoaded)?void 0:J.details)}C.details=v,this.levelLastLoaded=C,!this.startFragRequested&&(this.mainDetails||!v.live)&&this.setStartPosition(this.mainDetails||v,R),this.state===Nn_WAITING_TRACK&&!this.waitForCdnTuneIn(v)&&(this.state=Nn_IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+y)}else this.cachedTrackLoadedData=u},c._handleFragmentLoadProgress=function(o){var u,h=o.frag,p=o.part,v=o.payload,y=this.config,C=this.trackId,R=this.levels;if(R){var U=R[C];if(U){var J=U.details;if(!J)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(h.start);var se=y.defaultAudioCodec||U.audioCodec||"mp4a.40.2",ye=this.transmuxer;ye||(ye=this.transmuxer=new Fs(this.hls,Tr_AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var Ae=this.initPTS[h.cc],Ue=null==(u=h.initSegment)?void 0:u.data;if(void 0!==Ae){var Xe=p?p.index:-1,yt=new ju(h.level,h.sn,h.stats.chunkCount,v.byteLength,Xe,-1!==Xe);ye.push(v,Ue,se,"",h,p,J.totalduration,!1,yt,Ae)}else this.log("Unknown video PTS for cc "+h.cc+", waiting for video PTS before demuxing audio frag "+h.sn+" of ["+J.startSN+" ,"+J.endSN+"],track "+C),(this.waitingData=this.waitingData||{frag:h,part:p,cache:new zu,complete:!1}).cache.push(new Uint8Array(v)),this.waitingVideoCC=this.videoTrackCC,this.state=Nn_WAITING_INIT_PTS}else this.warn("Audio track is undefined on fragment load progress")}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+h.sn+" of level "+h.level+" will not be buffered")},c._handleFragmentLoadComplete=function(o){this.waitingData?this.waitingData.complete=!0:g.prototype._handleFragmentLoadComplete.call(this,o)},c.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},c.onBufferCreated=function(o,u){var h=u.tracks.audio;h&&(this.mediaBuffer=h.buffer||null),u.tracks.video&&(this.videoBuffer=u.tracks.video.buffer||null)},c.onFragBuffered=function(o,u){var h=u.frag,p=u.part;if(h.type===Tr_AUDIO)if(this.fragContextChanged(h))this.warn("Fragment "+h.sn+(p?" p: "+p.index:"")+" of level "+h.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+(this.switchingTrack?this.switchingTrack.name:"false"));else{if("initSegment"!==h.sn){this.fragPrevious=h;var C=this.switchingTrack;C&&(this.bufferedTrack=C,this.switchingTrack=null,this.hls.trigger(x.AUDIO_TRACK_SWITCHED,hr({},C)))}this.fragBufferedComplete(h,p)}else if(!this.loadedmetadata&&h.type===Tr_MAIN){var v=this.videoBuffer||this.media;v&&ui.getBuffered(v).length&&(this.loadedmetadata=!0)}},c.onError=function(o,u){var h;if(u.fatal)this.state=Nn_ERROR;else switch(u.details){case ge.FRAG_GAP:case ge.FRAG_PARSING_ERROR:case ge.FRAG_DECRYPT_ERROR:case ge.FRAG_LOAD_ERROR:case ge.FRAG_LOAD_TIMEOUT:case ge.KEY_LOAD_ERROR:case ge.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Tr_AUDIO,u);break;case ge.AUDIO_TRACK_LOAD_ERROR:case ge.AUDIO_TRACK_LOAD_TIMEOUT:case ge.LEVEL_PARSING_ERROR:!u.levelRetry&&this.state===Nn_WAITING_TRACK&&(null==(h=u.context)?void 0:h.type)===Gr_AUDIO_TRACK&&(this.state=Nn_IDLE);break;case ge.BUFFER_APPEND_ERROR:case ge.BUFFER_FULL_ERROR:if(!u.parent||"audio"!==u.parent)return;if(u.details===ge.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(u)&&(this.bufferedTrack=null,g.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"));break;case ge.INTERNAL_EXCEPTION:this.recoverWorkerError(u)}},c.onBufferFlushing=function(o,u){u.type!==It_VIDEO&&(this.flushing=!0)},c.onBufferFlushed=function(o,u){var h=u.type;if(h!==It_VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===Nn_ENDED&&(this.state=Nn_IDLE);var p=this.mediaBuffer||this.media;p&&(this.afterBufferFlushed(p,h,Tr_AUDIO),this.tick())}},c._handleTransmuxComplete=function(o){var u,h="audio",p=this.hls,v=o.remuxResult,y=o.chunkMeta,C=this.getCurrentContext(y);if(C){var R=C.frag,U=C.part,J=C.level,se=J.details,ye=v.audio,Ae=v.text,Ue=v.id3,Ke=v.initSegment;if(!this.fragContextChanged(R)&&se){if(this.state=Nn_PARSING,this.switchingTrack&&ye&&this.completeAudioSwitch(this.switchingTrack),null!=Ke&&Ke.tracks){var Xe=R.initSegment||R;this._bufferInitSegment(J,Ke.tracks,Xe,y),p.trigger(x.FRAG_PARSING_INIT_SEGMENT,{frag:Xe,id:h,tracks:Ke.tracks})}if(ye){var pt=ye.startPTS,yt=ye.endPTS,nn=ye.startDTS,qt=ye.endDTS;U&&(U.elementaryStreams[It_AUDIO]={startPTS:pt,endPTS:yt,startDTS:nn,endDTS:qt}),R.setElementaryStreamInfo(It_AUDIO,pt,yt,nn,qt),this.bufferFragmentData(ye,R,U,y)}if(null!=Ue&&null!=(u=Ue.samples)&&u.length){var Dt=E({id:h,frag:R,details:se},Ue);p.trigger(x.FRAG_PARSING_METADATA,Dt)}if(Ae){var on=E({id:h,frag:R,details:se},Ae);p.trigger(x.FRAG_PARSING_USERDATA,on)}}else this.fragmentTracker.removeFragment(R)}else this.resetWhenMissingContext(y)},c._bufferInitSegment=function(o,u,h,p){if(this.state===Nn_PARSING){u.video&&delete u.video;var v=u.audio;if(v){v.id="audio";var y=o.audioCodec;this.log("Init audio buffer, container:"+v.container+", codecs[level/parsed]=["+y+"/"+v.codec+"]"),y&&1===y.split(",").length&&(v.levelCodec=y),this.hls.trigger(x.BUFFER_CODECS,u);var C=v.initSegment;null!=C&&C.byteLength&&this.hls.trigger(x.BUFFER_APPENDING,{type:"audio",frag:h,part:null,chunkMeta:p,parent:h.type,data:C}),this.tickImmediate()}}},c.loadFragment=function(o,u,h){var v,p=this.fragmentTracker.getState(o);if(this.fragCurrent=o,this.switchingTrack||p===ro_NOT_LOADED||p===ro_PARTIAL)if("initSegment"===o.sn)this._loadInitSegment(o,u);else if(null!=(v=u.details)&&v.live&&!this.initPTS[o.cc]){this.log("Waiting for video PTS in continuity counter "+o.cc+" of live stream before loading audio fragment "+o.sn+" of level "+this.trackId),this.state=Nn_WAITING_INIT_PTS;var y=this.mainDetails;y&&y.fragments[0].start!==u.details.fragments[0].start&&su(u.details,y)}else this.startFragRequested=!0,g.prototype.loadFragment.call(this,o,u,h);else this.clearTrackerIfNeeded(o)},c.flushAudioIfNeeded=function(o){var u=this.media,h=this.bufferedTrack,p=h?.attrs;u&&p&&(p.CHANNELS!==o.attrs.CHANNELS||h.name!==o.name||h.lang!==o.lang)&&(this.log("Switching audio track : flushing all audio"),g.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)},c.completeAudioSwitch=function(o){var u=this.hls;this.flushAudioIfNeeded(o),this.bufferedTrack=o,this.switchingTrack=null,u.trigger(x.AUDIO_TRACK_SWITCHED,hr({},o))},d}(Ro),ad=function(g){function d(i){var o;return(o=g.call(this,i,"[audio-track-controller]")||this).tracks=[],o.groupIds=null,o.tracksInGroup=[],o.trackId=-1,o.currentTrack=null,o.selectDefaultTrack=!0,o.registerListeners(),o}_(d,g);var c=d.prototype;return c.registerListeners=function(){var o=this.hls;o.on(x.MANIFEST_LOADING,this.onManifestLoading,this),o.on(x.MANIFEST_PARSED,this.onManifestParsed,this),o.on(x.LEVEL_LOADING,this.onLevelLoading,this),o.on(x.LEVEL_SWITCHING,this.onLevelSwitching,this),o.on(x.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),o.on(x.ERROR,this.onError,this)},c.unregisterListeners=function(){var o=this.hls;o.off(x.MANIFEST_LOADING,this.onManifestLoading,this),o.off(x.MANIFEST_PARSED,this.onManifestParsed,this),o.off(x.LEVEL_LOADING,this.onLevelLoading,this),o.off(x.LEVEL_SWITCHING,this.onLevelSwitching,this),o.off(x.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),o.off(x.ERROR,this.onError,this)},c.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,g.prototype.destroy.call(this)},c.onManifestLoading=function(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0},c.onManifestParsed=function(o,u){this.tracks=u.audioTracks||[]},c.onAudioTrackLoaded=function(o,u){var h=u.id,p=u.groupId,v=u.details,y=this.tracksInGroup[h];if(y&&y.groupId===p){var C=y.details;y.details=u.details,this.log("Audio track "+h+' "'+y.name+'" lang:'+y.lang+" group:"+p+" loaded ["+v.startSN+"-"+v.endSN+"]"),h===this.trackId&&this.playlistLoaded(h,u,C)}else this.warn("Audio track with id:"+h+" and group:"+p+" not found in active group "+y?.groupId)},c.onLevelLoading=function(o,u){this.switchLevel(u.level)},c.onLevelSwitching=function(o,u){this.switchLevel(u.level)},c.switchLevel=function(o){var u=this.hls.levels[o];if(u){var h=u.audioGroups||null,p=this.groupIds,v=this.currentTrack;if(!h||p?.length!==h?.length||null!=h&&h.some(function(Ke){return-1===p?.indexOf(Ke)})){this.groupIds=h,this.trackId=-1,this.currentTrack=null;var y=this.tracks.filter(function(Ke){return!h||-1!==h.indexOf(Ke.groupId)});if(y.length)this.selectDefaultTrack&&!y.some(function(Ke){return Ke.default})&&(this.selectDefaultTrack=!1),y.forEach(function(Ke,Xe){Ke.id=Xe});else if(!v&&!this.tracksInGroup.length)return;this.tracksInGroup=y;var C=this.hls.config.audioPreference;if(!v&&C){var R=Eo(C,y,Oa);if(R>-1)v=y[R];else{var U=Eo(C,this.tracks);v=this.tracks[U]}}var J=this.findTrackId(v);-1===J&&v&&(J=this.findTrackId(null));var se={audioTracks:y};this.log("Updating audio tracks, "+y.length+" track(s) found in group(s): "+h?.join(",")),this.hls.trigger(x.AUDIO_TRACKS_UPDATED,se);var ye=this.trackId;if(-1!==J&&-1===ye)this.setAudioTrack(J);else if(y.length&&-1===ye){var Ae,Ue=new Error("No audio track selected for current audio group-ID(s): "+(null==(Ae=this.groupIds)?void 0:Ae.join(","))+" track count: "+y.length);this.warn(Ue.message),this.hls.trigger(x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:Ue})}}else this.shouldReloadPlaylist(v)&&this.setAudioTrack(this.trackId)}},c.onError=function(o,u){u.fatal||!u.context||u.context.type===Gr_AUDIO_TRACK&&u.context.id===this.trackId&&(!this.groupIds||-1!==this.groupIds.indexOf(u.context.groupId))&&(this.requestScheduled=-1,this.checkRetry(u))},c.setAudioOption=function(o){var u=this.hls;if(u.config.audioPreference=o,o){var h=this.allAudioTracks;if(this.selectDefaultTrack=!1,h.length){var p=this.currentTrack;if(p&&ls(o,p,Oa))return p;var v=Eo(o,this.tracksInGroup,Oa);if(v>-1){var y=this.tracksInGroup[v];return this.setAudioTrack(v),y}if(p){var C=u.loadLevel;-1===C&&(C=u.firstAutoLevel);var R=function ou(g,d,c,i,o){var u=d[i],p=d.reduce(function(U,J,se){var ye=J.uri;return(U[ye]||(U[ye]=[])).push(se),U},{})[u.uri];p.length>1&&(i=Math.max.apply(Math,p));var v=u.videoRange,y=u.frameRate,C=u.codecSet.substring(0,4),R=Hu(d,i,function(U){if(U.videoRange!==v||U.frameRate!==y||U.codecSet.substring(0,4)!==C)return!1;var J=U.audioGroups,se=c.filter(function(ye){return!J||-1!==J.indexOf(ye.groupId)});return Eo(g,se,o)>-1});return R>-1?R:Hu(d,i,function(U){var J=U.audioGroups,se=c.filter(function(ye){return!J||-1!==J.indexOf(ye.groupId)});return Eo(g,se,o)>-1})}(o,u.levels,h,C,Oa);if(-1===R)return null;u.nextLoadLevel=R}if(o.channels||o.audioCodec){var U=Eo(o,h);if(U>-1)return h[U]}}}return null},c.setAudioTrack=function(o){var u=this.tracksInGroup;if(o<0||o>=u.length)this.warn("Invalid audio track id: "+o);else{this.clearTimer(),this.selectDefaultTrack=!1;var h=this.currentTrack,p=u[o],v=p.details&&!p.details.live;if(!(o===this.trackId&&p===h&&v||(this.log("Switching to audio-track "+o+' "'+p.name+'" lang:'+p.lang+" group:"+p.groupId+" channels:"+p.channels),this.trackId=o,this.currentTrack=p,this.hls.trigger(x.AUDIO_TRACK_SWITCHING,hr({},p)),v))){var y=this.switchParams(p.url,h?.details,p.details);this.loadPlaylist(y)}}},c.findTrackId=function(o){for(var u=this.tracksInGroup,h=0;h<u.length;h++){var p=u[h];if((!this.selectDefaultTrack||p.default)&&(!o||ls(o,p,Oa)))return h}if(o){for(var v=o.name,y=o.lang,C=o.assocLang,R=o.characteristics,U=o.audioCodec,J=o.channels,se=0;se<u.length;se++)if(ls({name:v,lang:y,assocLang:C,characteristics:R,audioCodec:U,channels:J},u[se],Oa))return se;for(var Ae=0;Ae<u.length;Ae++)if(ms(o.attrs,u[Ae].attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return Ae;for(var Ke=0;Ke<u.length;Ke++)if(ms(o.attrs,u[Ke].attrs,["LANGUAGE"]))return Ke}return-1},c.loadPlaylist=function(o){var u=this.currentTrack;if(this.shouldLoadPlaylist(u)&&u){g.prototype.loadPlaylist.call(this);var h=u.id,p=u.groupId,v=u.url;if(o)try{v=o.addDirectives(v)}catch(y){this.warn("Could not construct new URL with HLS Delivery Directives: "+y)}this.log("loading audio-track playlist "+h+' "'+u.name+'" lang:'+u.lang+" group:"+p),this.clearTimer(),this.hls.trigger(x.AUDIO_TRACK_LOADING,{url:v,id:h,groupId:p,deliveryDirectives:o||null})}},Ce(d,[{key:"allAudioTracks",get:function(){return this.tracks}},{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(o){this.selectDefaultTrack=!1,this.setAudioTrack(o)}}]),d}(pa),Th=function(g){function d(i,o,u){var h;return(h=g.call(this,i,o,u,"[subtitle-stream-controller]",Tr_SUBTITLE)||this).currentTrackId=-1,h.tracksBuffered=[],h.mainDetails=null,h._registerListeners(),h}_(d,g);var c=d.prototype;return c.onHandlerDestroying=function(){this._unregisterListeners(),g.prototype.onHandlerDestroying.call(this),this.mainDetails=null},c._registerListeners=function(){var o=this.hls;o.on(x.MEDIA_ATTACHED,this.onMediaAttached,this),o.on(x.MEDIA_DETACHING,this.onMediaDetaching,this),o.on(x.MANIFEST_LOADING,this.onManifestLoading,this),o.on(x.LEVEL_LOADED,this.onLevelLoaded,this),o.on(x.ERROR,this.onError,this),o.on(x.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),o.on(x.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),o.on(x.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),o.on(x.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),o.on(x.BUFFER_FLUSHING,this.onBufferFlushing,this),o.on(x.FRAG_BUFFERED,this.onFragBuffered,this)},c._unregisterListeners=function(){var o=this.hls;o.off(x.MEDIA_ATTACHED,this.onMediaAttached,this),o.off(x.MEDIA_DETACHING,this.onMediaDetaching,this),o.off(x.MANIFEST_LOADING,this.onManifestLoading,this),o.off(x.LEVEL_LOADED,this.onLevelLoaded,this),o.off(x.ERROR,this.onError,this),o.off(x.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),o.off(x.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),o.off(x.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),o.off(x.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),o.off(x.BUFFER_FLUSHING,this.onBufferFlushing,this),o.off(x.FRAG_BUFFERED,this.onFragBuffered,this)},c.startLoad=function(o){this.stopLoad(),this.state=Nn_IDLE,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=o,this.tick()},c.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},c.onMediaDetaching=function(){this.tracksBuffered=[],g.prototype.onMediaDetaching.call(this)},c.onLevelLoaded=function(o,u){this.mainDetails=u.details},c.onSubtitleFragProcessed=function(o,u){var h=u.frag,p=u.success;if(this.fragPrevious=h,this.state=Nn_IDLE,p){var v=this.tracksBuffered[this.currentTrackId];if(v){for(var y,C=h.start,R=0;R<v.length;R++)if(C>=v[R].start&&C<=v[R].end){y=v[R];break}var U=h.start+h.duration;y?y.end=U:v.push(y={start:C,end:U}),this.fragmentTracker.fragBuffered(h),this.fragBufferedComplete(h,null)}}},c.onBufferFlushing=function(o,u){var h=u.startOffset,p=u.endOffset;if(0===h&&p!==Number.POSITIVE_INFINITY){var v=p-1;if(v<=0)return;u.endOffsetSubtitles=Math.max(0,v),this.tracksBuffered.forEach(function(y){for(var C=0;C<y.length;)if(y[C].end<=v)y.shift();else{if(!(y[C].start<v))break;y[C].start=v,C++}}),this.fragmentTracker.removeFragmentsInRange(h,v,Tr_SUBTITLE)}},c.onFragBuffered=function(o,u){var h;this.loadedmetadata||u.frag.type!==Tr_MAIN||null!=(h=this.media)&&h.buffered.length&&(this.loadedmetadata=!0)},c.onError=function(o,u){var h=u.frag;h?.type===Tr_SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Nn_STOPPED&&(this.state=Nn_IDLE))},c.onSubtitleTracksUpdated=function(o,u){var h=this,p=u.subtitleTracks;this.levels&&ks(this.levels,p)?this.levels=p.map(function(v){return new ss(v)}):(this.tracksBuffered=[],this.levels=p.map(function(v){var y=new ss(v);return h.tracksBuffered[y.id]=[],y}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Tr_SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null)},c.onSubtitleTrackSwitch=function(o,u){var h;if(this.currentTrackId=u.id,null!=(h=this.levels)&&h.length&&-1!==this.currentTrackId){var p=this.levels[this.currentTrackId];this.mediaBuffer=null!=p&&p.details?this.mediaBufferTimeRanges:null,p&&this.setInterval(500)}else this.clearInterval()},c.onSubtitleTrackLoaded=function(o,u){var h,p=this.currentTrackId,v=this.levels,y=u.details,C=u.id;if(v){var R=v[p];if(!(C>=v.length||C!==p)&&R){this.log("Subtitle track "+C+" loaded ["+y.startSN+","+y.endSN+"]"+(y.lastPartSn?"[part-"+y.lastPartSn+"-"+y.lastPartIndex+"]":"")+",duration:"+y.totalduration),this.mediaBuffer=this.mediaBufferTimeRanges;var U=0;if(y.live||null!=(h=R.details)&&h.live){var J=this.mainDetails;if(y.deltaUpdateFailed||!J)return;var ye,se=J.fragments[0];R.details?0===(U=this.alignPlaylists(y,R.details,null==(ye=this.levelLastLoaded)?void 0:ye.details))&&se&&ku(y,U=se.start):y.hasProgramDateTime&&J.hasProgramDateTime?(su(y,J),U=y.fragments[0].start):se&&ku(y,U=se.start)}R.details=y,this.levelLastLoaded=R,!this.startFragRequested&&(this.mainDetails||!y.live)&&this.setStartPosition(this.mainDetails||y,U),this.tick(),y.live&&!this.fragCurrent&&this.media&&this.state===Nn_IDLE&&(na(null,y.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),R.details=void 0))}}else this.warn("Subtitle tracks were reset while loading level "+C)},c._handleFragmentLoadComplete=function(o){var u=this,h=o.frag,p=o.payload,v=h.decryptdata,y=this.hls;if(!this.fragContextChanged(h)&&p&&p.byteLength>0&&null!=v&&v.key&&v.iv&&"AES-128"===v.method){var C=performance.now();this.decrypter.decrypt(new Uint8Array(p),v.key.buffer,v.iv.buffer).catch(function(R){throw y.trigger(x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.FRAG_DECRYPT_ERROR,fatal:!1,error:R,reason:R.message,frag:h}),R}).then(function(R){var U=performance.now();y.trigger(x.FRAG_DECRYPTED,{frag:h,payload:R,stats:{tstart:C,tdecrypt:U}})}).catch(function(R){u.warn(R.name+": "+R.message),u.state=Nn_IDLE})}},c.doTick=function(){if(this.media){if(this.state===Nn_IDLE){var o=this.currentTrackId,u=this.levels,h=u?.[o];if(!h||!u.length||!h.details)return;var p=this.config,v=this.getLoadPosition(),y=ui.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],v,p.maxBufferHole),C=y.end,R=y.len,U=this.getFwdBufferInfo(this.media,Tr_MAIN),J=h.details;if(R>this.getMaxBufferLength(U?.len)+J.levelTargetDuration)return;var ye=J.fragments,Ae=ye.length,Ue=J.edge,Ke=null,Xe=this.fragPrevious;if(C<Ue){var pt=p.maxFragLookUpTolerance,yt=C>Ue-pt?0:pt;!(Ke=na(Xe,ye,Math.max(ye[0].start,C),yt))&&Xe&&Xe.start<ye[0].start&&(Ke=ye[0])}else Ke=ye[Ae-1];if(!Ke)return;if("initSegment"!==(Ke=this.mapToInitFragWhenRequired(Ke)).sn){var qt=ye[Ke.sn-J.startSN-1];qt&&qt.cc===Ke.cc&&this.fragmentTracker.getState(qt)===ro_NOT_LOADED&&(Ke=qt)}this.fragmentTracker.getState(Ke)===ro_NOT_LOADED&&this.loadFragment(Ke,h,C)}}else this.state=Nn_IDLE},c.getMaxBufferLength=function(o){var u=g.prototype.getMaxBufferLength.call(this);return o?Math.max(u,o):u},c.loadFragment=function(o,u,h){this.fragCurrent=o,"initSegment"===o.sn?this._loadInitSegment(o,u):(this.startFragRequested=!0,g.prototype.loadFragment.call(this,o,u,h))},Ce(d,[{key:"mediaBufferTimeRanges",get:function(){return new sc(this.tracksBuffered[this.currentTrackId]||[])}}]),d}(Ro),sc=function(d){this.buffered=void 0;var c=function(o,u,h){if((u>>>=0)>h-1)throw new DOMException("Failed to execute '"+o+"' on 'TimeRanges': The index provided ("+u+") is greater than the maximum bound ("+h+")");return d[u][o]};this.buffered={get length(){return d.length},end:function(o){return c("end",o,d.length)},start:function(o){return c("start",o,d.length)}}},lc=function(g){function d(i){var o;return(o=g.call(this,i,"[subtitle-track-controller]")||this).media=null,o.tracks=[],o.groupIds=null,o.tracksInGroup=[],o.trackId=-1,o.currentTrack=null,o.selectDefaultTrack=!0,o.queuedDefaultTrack=-1,o.asyncPollTrackChange=function(){return o.pollTrackChange(0)},o.useTextTrackPolling=!1,o.subtitlePollingInterval=-1,o._subtitleDisplay=!0,o.onTextTracksChanged=function(){if(o.useTextTrackPolling||self.clearInterval(o.subtitlePollingInterval),o.media&&o.hls.config.renderTextTracksNatively){for(var u=null,h=Ko(o.media.textTracks),p=0;p<h.length;p++)if("hidden"===h[p].mode)u=h[p];else if("showing"===h[p].mode){u=h[p];break}var v=o.findTrackForTextTrack(u);o.subtitleTrack!==v&&o.setSubtitleTrack(v)}},o.registerListeners(),o}_(d,g);var c=d.prototype;return c.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,g.prototype.destroy.call(this)},c.registerListeners=function(){var o=this.hls;o.on(x.MEDIA_ATTACHED,this.onMediaAttached,this),o.on(x.MEDIA_DETACHING,this.onMediaDetaching,this),o.on(x.MANIFEST_LOADING,this.onManifestLoading,this),o.on(x.MANIFEST_PARSED,this.onManifestParsed,this),o.on(x.LEVEL_LOADING,this.onLevelLoading,this),o.on(x.LEVEL_SWITCHING,this.onLevelSwitching,this),o.on(x.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),o.on(x.ERROR,this.onError,this)},c.unregisterListeners=function(){var o=this.hls;o.off(x.MEDIA_ATTACHED,this.onMediaAttached,this),o.off(x.MEDIA_DETACHING,this.onMediaDetaching,this),o.off(x.MANIFEST_LOADING,this.onManifestLoading,this),o.off(x.MANIFEST_PARSED,this.onManifestParsed,this),o.off(x.LEVEL_LOADING,this.onLevelLoading,this),o.off(x.LEVEL_SWITCHING,this.onLevelSwitching,this),o.off(x.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),o.off(x.ERROR,this.onError,this)},c.onMediaAttached=function(o,u){this.media=u.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},c.pollTrackChange=function(o){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,o)},c.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),Ko(this.media.textTracks).forEach(function(u){As(u)}),this.subtitleTrack=-1,this.media=null)},c.onManifestLoading=function(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0},c.onManifestParsed=function(o,u){this.tracks=u.subtitleTracks},c.onSubtitleTrackLoaded=function(o,u){var h=u.id,p=u.groupId,v=u.details,y=this.tracksInGroup[h];if(y&&y.groupId===p){var C=y.details;y.details=u.details,this.log("Subtitle track "+h+' "'+y.name+'" lang:'+y.lang+" group:"+p+" loaded ["+v.startSN+"-"+v.endSN+"]"),h===this.trackId&&this.playlistLoaded(h,u,C)}else this.warn("Subtitle track with id:"+h+" and group:"+p+" not found in active group "+y?.groupId)},c.onLevelLoading=function(o,u){this.switchLevel(u.level)},c.onLevelSwitching=function(o,u){this.switchLevel(u.level)},c.switchLevel=function(o){var u=this.hls.levels[o];if(u){var h=u.subtitleGroups||null,p=this.groupIds,v=this.currentTrack;if(!h||p?.length!==h?.length||null!=h&&h.some(function(ye){return-1===p?.indexOf(ye)})){this.groupIds=h,this.trackId=-1,this.currentTrack=null;var y=this.tracks.filter(function(ye){return!h||-1!==h.indexOf(ye.groupId)});if(y.length)this.selectDefaultTrack&&!y.some(function(ye){return ye.default})&&(this.selectDefaultTrack=!1),y.forEach(function(ye,Ae){ye.id=Ae});else if(!v&&!this.tracksInGroup.length)return;this.tracksInGroup=y;var C=this.hls.config.subtitlePreference;if(!v&&C){this.selectDefaultTrack=!1;var R=Eo(C,y);if(R>-1)v=y[R];else{var U=Eo(C,this.tracks);v=this.tracks[U]}}var J=this.findTrackId(v);-1===J&&v&&(J=this.findTrackId(null));var se={subtitleTracks:y};this.log("Updating subtitle tracks, "+y.length+' track(s) found in "'+h?.join(",")+'" group-id'),this.hls.trigger(x.SUBTITLE_TRACKS_UPDATED,se),-1!==J&&-1===this.trackId&&this.setSubtitleTrack(J)}else this.shouldReloadPlaylist(v)&&this.setSubtitleTrack(this.trackId)}},c.findTrackId=function(o){for(var u=this.tracksInGroup,h=this.selectDefaultTrack,p=0;p<u.length;p++){var v=u[p];if((!h||v.default)&&(h||o)&&(!o||ls(v,o)))return p}if(o){for(var y=0;y<u.length;y++)if(ms(o.attrs,u[y].attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return y;for(var R=0;R<u.length;R++)if(ms(o.attrs,u[R].attrs,["LANGUAGE"]))return R}return-1},c.findTrackForTextTrack=function(o){if(o)for(var u=this.tracksInGroup,h=0;h<u.length;h++)if(Jc(u[h],o))return h;return-1},c.onError=function(o,u){u.fatal||!u.context||u.context.type===Gr_SUBTITLE_TRACK&&u.context.id===this.trackId&&(!this.groupIds||-1!==this.groupIds.indexOf(u.context.groupId))&&this.checkRetry(u)},c.setSubtitleOption=function(o){if(this.hls.config.subtitlePreference=o,o){var u=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,u.length){var h=this.currentTrack;if(h&&ls(o,h))return h;var p=Eo(o,this.tracksInGroup);if(p>-1){var v=this.tracksInGroup[p];return this.setSubtitleTrack(p),v}if(h)return null;var y=Eo(o,u);if(y>-1)return u[y]}}return null},c.loadPlaylist=function(o){g.prototype.loadPlaylist.call(this);var u=this.currentTrack;if(this.shouldLoadPlaylist(u)&&u){var h=u.id,p=u.groupId,v=u.url;if(o)try{v=o.addDirectives(v)}catch(y){this.warn("Could not construct new URL with HLS Delivery Directives: "+y)}this.log("Loading subtitle playlist for id "+h),this.hls.trigger(x.SUBTITLE_TRACK_LOADING,{url:v,id:h,groupId:p,deliveryDirectives:o||null})}},c.toggleTrackModes=function(){var o=this.media;if(o){var p,u=Ko(o.textTracks),h=this.currentTrack;if(h&&((p=u.filter(function(y){return Jc(h,y)})[0])||this.warn('Unable to find subtitle TextTrack with name "'+h.name+'" and language "'+h.lang+'"')),[].slice.call(u).forEach(function(y){"disabled"!==y.mode&&y!==p&&(y.mode="disabled")}),p){var v=this.subtitleDisplay?"showing":"hidden";p.mode!==v&&(p.mode=v)}}},c.setSubtitleTrack=function(o){var u=this.tracksInGroup;if(this.media)if(o<-1||o>=u.length||!Q(o))this.warn("Invalid subtitle track id: "+o);else{this.clearTimer(),this.selectDefaultTrack=!1;var h=this.currentTrack,p=u[o]||null;if(this.trackId=o,this.currentTrack=p,this.toggleTrackModes(),p){if(o!==this.trackId||p!==h||!p.details||p.details.live){this.log("Switching to subtitle-track "+o+(p?' "'+p.name+'" lang:'+p.lang+" group:"+p.groupId:""));var C=p.groupId;this.hls.trigger(x.SUBTITLE_TRACK_SWITCH,{id:p.id,groupId:void 0===C?"":C,name:p.name,type:p.type,url:p.url});var ye=this.switchParams(p.url,h?.details,p.details);this.loadPlaylist(ye)}}else this.hls.trigger(x.SUBTITLE_TRACK_SWITCH,{id:o})}else this.queuedDefaultTrack=o},Ce(d,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(o){this._subtitleDisplay=o,this.trackId>-1&&this.toggleTrackModes()}},{key:"allSubtitleTracks",get:function(){return this.tracks}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(o){this.selectDefaultTrack=!1,this.setSubtitleTrack(o)}}]),d}(pa),ef=function(){function g(c){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=c}var d=g.prototype;return d.append=function(i,o,u){var h=this.queues[o];h.push(i),1===h.length&&!u&&this.executeNext(o)},d.insertAbort=function(i,o){this.queues[o].unshift(i),this.executeNext(o)},d.appendBlocker=function(i){var o,u=new Promise(function(p){o=p});return this.append({execute:o,onStart:function(){},onComplete:function(){},onError:function(){}},i),u},d.executeNext=function(i){var o=this.queues[i];if(o.length){var u=o[0];try{u.execute()}catch(p){Pe.warn('[buffer-operation-queue]: Exception executing "'+i+'" SourceBuffer operation: '+p),u.onError(p);var h=this.buffers[i];null!=h&&h.updating||this.shiftAndExecuteNext(i)}}},d.shiftAndExecuteNext=function(i){this.queues[i].shift(),this.executeNext(i)},d.current=function(i){return this.queues[i][0]},g}(),mu=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,sd=function(){function g(c){var i=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=function(u){i.hls&&i.hls.pauseBuffering()},this._onStartStreaming=function(u){i.hls&&i.hls.resumeBuffering()},this._onMediaSourceOpen=function(){var u=i.media,h=i.mediaSource;i.log("Media source opened"),u&&(u.removeEventListener("emptied",i._onMediaEmptied),i.updateMediaElementDuration(),i.hls.trigger(x.MEDIA_ATTACHED,{media:u,mediaSource:h})),h&&h.removeEventListener("sourceopen",i._onMediaSourceOpen),i.checkPendingTracks()},this._onMediaSourceClose=function(){i.log("Media source closed")},this._onMediaSourceEnded=function(){i.log("Media source ended")},this._onMediaEmptied=function(){var u=i.mediaSrc,h=i._objectUrl;u!==h&&Pe.error("Media element src was set while attaching MediaSource ("+h+" > "+u+")")},this.hls=c;var o="[buffer-controller]";this.appendSource=function Dr(g){return typeof self<"u"&&g===self.ManagedMediaSource}(Kr(c.config.preferManagedMediaSource)),this.log=Pe.log.bind(Pe,o),this.warn=Pe.warn.bind(Pe,o),this.error=Pe.error.bind(Pe,o),this._initSourceBuffer(),this.registerListeners()}var d=g.prototype;return d.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},d.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null},d.registerListeners=function(){var i=this.hls;i.on(x.MEDIA_ATTACHING,this.onMediaAttaching,this),i.on(x.MEDIA_DETACHING,this.onMediaDetaching,this),i.on(x.MANIFEST_LOADING,this.onManifestLoading,this),i.on(x.MANIFEST_PARSED,this.onManifestParsed,this),i.on(x.BUFFER_RESET,this.onBufferReset,this),i.on(x.BUFFER_APPENDING,this.onBufferAppending,this),i.on(x.BUFFER_CODECS,this.onBufferCodecs,this),i.on(x.BUFFER_EOS,this.onBufferEos,this),i.on(x.BUFFER_FLUSHING,this.onBufferFlushing,this),i.on(x.LEVEL_UPDATED,this.onLevelUpdated,this),i.on(x.FRAG_PARSED,this.onFragParsed,this),i.on(x.FRAG_CHANGED,this.onFragChanged,this)},d.unregisterListeners=function(){var i=this.hls;i.off(x.MEDIA_ATTACHING,this.onMediaAttaching,this),i.off(x.MEDIA_DETACHING,this.onMediaDetaching,this),i.off(x.MANIFEST_LOADING,this.onManifestLoading,this),i.off(x.MANIFEST_PARSED,this.onManifestParsed,this),i.off(x.BUFFER_RESET,this.onBufferReset,this),i.off(x.BUFFER_APPENDING,this.onBufferAppending,this),i.off(x.BUFFER_CODECS,this.onBufferCodecs,this),i.off(x.BUFFER_EOS,this.onBufferEos,this),i.off(x.BUFFER_FLUSHING,this.onBufferFlushing,this),i.off(x.LEVEL_UPDATED,this.onLevelUpdated,this),i.off(x.FRAG_PARSED,this.onFragParsed,this),i.off(x.FRAG_CHANGED,this.onFragChanged,this)},d._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new ef(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null},d.onManifestLoading=function(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null},d.onManifestParsed=function(i,o){var u=2;(o.audio&&!o.video||!o.altAudio)&&(u=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=u,this.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},d.onMediaAttaching=function(i,o){var u=this.media=o.media,h=Kr(this.appendSource);if(u&&h){var p,v=this.mediaSource=new h;this.log("created media source: "+(null==(p=v.constructor)?void 0:p.name)),v.addEventListener("sourceopen",this._onMediaSourceOpen),v.addEventListener("sourceended",this._onMediaSourceEnded),v.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(v.addEventListener("startstreaming",this._onStartStreaming),v.addEventListener("endstreaming",this._onEndStreaming));var y=this._objectUrl=self.URL.createObjectURL(v);if(this.appendSource)try{u.removeAttribute("src");var C=self.ManagedMediaSource;u.disableRemotePlayback=u.disableRemotePlayback||C&&v instanceof C,ld(u),function tf(g,d){var c=self.document.createElement("source");c.type="video/mp4",c.src=d,g.appendChild(c)}(u,y),u.load()}catch{u.src=y}else u.src=y;u.addEventListener("emptied",this._onMediaEmptied)}},d.onMediaDetaching=function(){var i=this.media,o=this.mediaSource,u=this._objectUrl;if(o){if(this.log("media source detaching"),"open"===o.readyState)try{o.endOfStream()}catch(h){this.warn("onMediaDetaching: "+h.message+" while calling endOfStream")}this.onBufferReset(),o.removeEventListener("sourceopen",this._onMediaSourceOpen),o.removeEventListener("sourceended",this._onMediaSourceEnded),o.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(o.removeEventListener("startstreaming",this._onStartStreaming),o.removeEventListener("endstreaming",this._onEndStreaming)),i&&(i.removeEventListener("emptied",this._onMediaEmptied),u&&self.URL.revokeObjectURL(u),this.mediaSrc===u?(i.removeAttribute("src"),this.appendSource&&ld(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(x.MEDIA_DETACHED,void 0)},d.onBufferReset=function(){var i=this;this.getSourceBufferTypes().forEach(function(o){i.resetBuffer(o)}),this._initSourceBuffer()},d.resetBuffer=function(i){var o=this.sourceBuffer[i];try{var u;o&&(this.removeBufferListeners(i),this.sourceBuffer[i]=void 0,null!=(u=this.mediaSource)&&u.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(o))}catch(h){this.warn("onBufferReset "+i,h)}},d.onBufferCodecs=function(i,o){var u=this,h=this.getSourceBufferTypes().length,p=Object.keys(o);if(p.forEach(function(y){if(h){var C=u.tracks[y];if(C&&"function"==typeof C.buffer.changeType){var R,U=o[y],J=U.id,se=U.codec,ye=U.levelCodec,Ae=U.container,Ue=U.metadata,Ke=La(C.codec,C.levelCodec),Xe=Ke?.replace(mu,"$1"),pt=La(se,ye),yt=null==(R=pt)?void 0:R.replace(mu,"$1");pt&&Xe!==yt&&("audio"===y.slice(0,5)&&(pt=Yn(pt,u.appendSource)),u.appendChangeType(y,Ae+";codecs="+pt),u.log("switching codec "+Ke+" to "+pt),u.tracks[y]={buffer:C.buffer,codec:se,container:Ae,levelCodec:ye,metadata:Ue,id:J})}}else u.pendingTracks[y]=o[y]}),!h){var v=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==v&&(this.log(v+" bufferCodec event(s) expected "+p.join(",")),this.bufferCodecEventsExpected=v),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks()}},d.appendChangeType=function(i,o){var u=this,h=this.operationQueue,p={execute:function(){var y=u.sourceBuffer[i];y&&(u.log("changing "+i+" sourceBuffer type to "+o),y.changeType(o)),h.shiftAndExecuteNext(i)},onStart:function(){},onComplete:function(){},onError:function(y){u.warn("Failed to change "+i+" SourceBuffer type",y)}};h.append(p,i,!!this.pendingTracks[i])},d.onBufferAppending=function(i,o){var u=this,h=this.hls,p=this.operationQueue,v=this.tracks,y=o.data,C=o.type,R=o.frag,U=o.part,J=o.chunkMeta,se=J.buffering[C],ye=self.performance.now();se.start=ye;var Ae=R.stats.buffering,Ue=U?U.stats.buffering:null;0===Ae.start&&(Ae.start=ye),Ue&&0===Ue.start&&(Ue.start=ye);var Ke=v.audio,Xe=!1;"audio"===C&&"audio/mpeg"===Ke?.container&&(Xe=!this.lastMpegAudioChunk||1===J.id||this.lastMpegAudioChunk.sn!==J.sn,this.lastMpegAudioChunk=J);var pt=R.start;p.append({execute:function(){if(se.executeStart=self.performance.now(),Xe){var qt=u.sourceBuffer[C];if(qt){var Dt=pt-qt.timestampOffset;Math.abs(Dt)>=.1&&(u.log("Updating audio SourceBuffer timestampOffset to "+pt+" (delta: "+Dt+") sn: "+R.sn+")"),qt.timestampOffset=pt)}}u.appendExecutor(y,C)},onStart:function(){},onComplete:function(){var qt=self.performance.now();se.executeEnd=se.end=qt,0===Ae.first&&(Ae.first=qt),Ue&&0===Ue.first&&(Ue.first=qt);var Dt=u.sourceBuffer,on={};for(var an in Dt)on[an]=ui.getBuffered(Dt[an]);u.appendErrors[C]=0,"audio"===C||"video"===C?u.appendErrors.audiovideo=0:(u.appendErrors.audio=0,u.appendErrors.video=0),u.hls.trigger(x.BUFFER_APPENDED,{type:C,frag:R,part:U,chunkMeta:J,parent:R.type,timeRanges:on})},onError:function(qt){var Dt={type:Ee.MEDIA_ERROR,parent:R.type,details:ge.BUFFER_APPEND_ERROR,sourceBufferName:C,frag:R,part:U,chunkMeta:J,error:qt,err:qt,fatal:!1};if(qt.code===DOMException.QUOTA_EXCEEDED_ERR)Dt.details=ge.BUFFER_FULL_ERROR;else{var on=++u.appendErrors[C];Dt.details=ge.BUFFER_APPEND_ERROR,u.warn("Failed "+on+"/"+h.config.appendErrorMaxRetry+' times to append segment in "'+C+'" sourceBuffer'),on>=h.config.appendErrorMaxRetry&&(Dt.fatal=!0)}h.trigger(x.ERROR,Dt)}},C,!!this.pendingTracks[C])},d.onBufferFlushing=function(i,o){var u=this,h=this.operationQueue,p=function(y){return{execute:u.removeExecutor.bind(u,y,o.startOffset,o.endOffset),onStart:function(){},onComplete:function(){u.hls.trigger(x.BUFFER_FLUSHED,{type:y})},onError:function(R){u.warn("Failed to remove from "+y+" SourceBuffer",R)}}};o.type?h.append(p(o.type),o.type):this.getSourceBufferTypes().forEach(function(v){h.append(p(v),v)})},d.onFragParsed=function(i,o){var u=this,h=o.frag,p=o.part,v=[],y=p?p.elementaryStreams:h.elementaryStreams;y[It_AUDIOVIDEO]?v.push("audiovideo"):(y[It_AUDIO]&&v.push("audio"),y[It_VIDEO]&&v.push("video"));0===v.length&&this.warn("Fragments must have at least one ElementaryStreamType set. type: "+h.type+" level: "+h.level+" sn: "+h.sn),this.blockBuffers(function(){var U=self.performance.now();h.stats.buffering.end=U,p&&(p.stats.buffering.end=U),u.hls.trigger(x.FRAG_BUFFERED,{frag:h,part:p,stats:p?p.stats:h.stats,id:h.type})},v)},d.onFragChanged=function(i,o){this.trimBuffers()},d.onBufferEos=function(i,o){var u=this,h=this.getSourceBufferTypes().reduce(function(p,v){var y=u.sourceBuffer[v];return y&&(!o.type||o.type===v)&&(y.ending=!0,y.ended||(y.ended=!0,u.log(v+" sourceBuffer now EOS"))),p&&!(y&&!y.ended)},!0);h&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(function(){u.getSourceBufferTypes().forEach(function(v){var y=u.sourceBuffer[v];y&&(y.ending=!1)});var p=u.mediaSource;p&&"open"===p.readyState?(u.log("Calling mediaSource.endOfStream()"),p.endOfStream()):p&&u.log("Could not call mediaSource.endOfStream(). mediaSource.readyState: "+p.readyState)}))},d.onLevelUpdated=function(i,o){var u=o.details;u.fragments.length&&(this.details=u,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},d.trimBuffers=function(){var i=this.hls,o=this.details,u=this.media;if(u&&null!==o&&this.getSourceBufferTypes().length){var p=i.config,v=u.currentTime,y=o.levelTargetDuration,C=o.live&&null!==p.liveBackBufferLength?p.liveBackBufferLength:p.backBufferLength;if(Q(C)&&C>0){var R=Math.max(C,y),U=Math.floor(v/y)*y-R;this.flushBackBuffer(v,y,U)}if(Q(p.frontBufferFlushThreshold)&&p.frontBufferFlushThreshold>0){var J=Math.max(p.maxBufferLength,p.frontBufferFlushThreshold),se=Math.max(J,y),ye=Math.floor(v/y)*y+se;this.flushFrontBuffer(v,y,ye)}}},d.flushBackBuffer=function(i,o,u){var h=this,p=this.details,v=this.sourceBuffer;this.getSourceBufferTypes().forEach(function(C){var R=v[C];if(R){var U=ui.getBuffered(R);if(U.length>0&&u>U.start(0)){if(h.hls.trigger(x.BACK_BUFFER_REACHED,{bufferEnd:u}),null!=p&&p.live)h.hls.trigger(x.LIVE_BACK_BUFFER_REACHED,{bufferEnd:u});else if(R.ended&&U.end(U.length-1)-i<2*o)return void h.log("Cannot flush "+C+" back buffer while SourceBuffer is in ended state");h.hls.trigger(x.BUFFER_FLUSHING,{startOffset:0,endOffset:u,type:C})}}})},d.flushFrontBuffer=function(i,o,u){var h=this,p=this.sourceBuffer;this.getSourceBufferTypes().forEach(function(y){var C=p[y];if(C){var R=ui.getBuffered(C),U=R.length;if(U<2)return;var J=R.start(U-1),se=R.end(U-1);if(u>J||i>=J&&i<=se)return;if(C.ended&&i-se<2*o)return void h.log("Cannot flush "+y+" front buffer while SourceBuffer is in ended state");h.hls.trigger(x.BUFFER_FLUSHING,{startOffset:J,endOffset:1/0,type:y})}})},d.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var i=this.details,o=this.hls,h=this.mediaSource,p=i.fragments[0].start+i.totalduration,v=this.media.duration,y=Q(h.duration)?h.duration:0;i.live&&o.config.liveDurationInfinity?(h.duration=1/0,this.updateSeekableRange(i)):(p>y&&p>v||!Q(v))&&(this.log("Updating Media Source duration to "+p.toFixed(3)),h.duration=p)}},d.updateSeekableRange=function(i){var o=this.mediaSource,u=i.fragments;if(u.length&&i.live&&null!=o&&o.setLiveSeekableRange){var p=Math.max(0,u[0].start),v=Math.max(p,p+i.totalduration);this.log("Media Source duration is set to "+o.duration+". Setting seekable range to "+p+"-"+v+"."),o.setLiveSeekableRange(p,v)}},d.checkPendingTracks=function(){var i=this.bufferCodecEventsExpected,o=this.operationQueue,u=this.pendingTracks,h=Object.keys(u).length;if(h&&(!i||2===h||"audiovideo"in u)){this.createSourceBuffers(u),this.pendingTracks={};var p=this.getSourceBufferTypes();if(p.length)this.hls.trigger(x.BUFFER_CREATED,{tracks:this.tracks}),p.forEach(function(y){o.executeNext(y)});else{var v=new Error("could not create source buffer for media codec(s)");this.hls.trigger(x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:v,reason:v.message})}}},d.createSourceBuffers=function(i){var o=this,u=this.sourceBuffer,h=this.mediaSource;if(!h)throw Error("createSourceBuffers called when mediaSource was null");var p=function(C){if(!u[C]){var R,U=i[C];if(!U)throw Error("source buffer exists for track "+C+", however track does not");var J=-1===(null==(R=U.levelCodec)?void 0:R.indexOf(","))?U.levelCodec:U.codec;J&&"audio"===C.slice(0,5)&&(J=Yn(J,o.appendSource));var se=U.container+";codecs="+J;o.log("creating sourceBuffer("+se+")");try{var ye=u[C]=h.addSourceBuffer(se),Ae=C;o.addBufferListener(Ae,"updatestart",o._onSBUpdateStart),o.addBufferListener(Ae,"updateend",o._onSBUpdateEnd),o.addBufferListener(Ae,"error",o._onSBUpdateError),o.appendSource&&o.addBufferListener(Ae,"bufferedchange",function(Ue,Ke){var Xe=Ke.removedRanges;null!=Xe&&Xe.length&&o.hls.trigger(x.BUFFER_FLUSHED,{type:C})}),o.tracks[C]={buffer:ye,codec:J,container:U.container,levelCodec:U.levelCodec,metadata:U.metadata,id:U.id}}catch(Ue){o.error("error while trying to add sourceBuffer: "+Ue.message),o.hls.trigger(x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:Ue,sourceBufferName:C,mimeType:se})}}};for(var v in i)p(v)},d._onSBUpdateStart=function(i){this.operationQueue.current(i).onStart()},d._onSBUpdateEnd=function(i){var o;if("closed"!==(null==(o=this.mediaSource)?void 0:o.readyState)){var u=this.operationQueue;u.current(i).onComplete(),u.shiftAndExecuteNext(i)}else this.resetBuffer(i)},d._onSBUpdateError=function(i,o){var u,h=new Error(i+" SourceBuffer error. MediaSource readyState: "+(null==(u=this.mediaSource)?void 0:u.readyState));this.error(""+h,o),this.hls.trigger(x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.BUFFER_APPENDING_ERROR,sourceBufferName:i,error:h,fatal:!1});var p=this.operationQueue.current(i);p&&p.onError(h)},d.removeExecutor=function(i,o,u){var h=this.media,p=this.mediaSource,v=this.operationQueue,C=this.sourceBuffer[i];if(!h||!p||!C)return this.warn("Attempting to remove from the "+i+" SourceBuffer, but it does not exist"),void v.shiftAndExecuteNext(i);var R=Q(h.duration)?h.duration:1/0,U=Q(p.duration)?p.duration:1/0,J=Math.max(0,o),se=Math.min(u,R,U);se>J&&(!C.ending||C.ended)?(C.ended=!1,this.log("Removing ["+J+","+se+"] from the "+i+" SourceBuffer"),C.remove(J,se)):v.shiftAndExecuteNext(i)},d.appendExecutor=function(i,o){var u=this.sourceBuffer[o];if(u)u.ended=!1,u.appendBuffer(i);else if(!this.pendingTracks[o])throw new Error("Attempting to append to the "+o+" SourceBuffer, but it does not exist")},d.blockBuffers=function(i,o){var u=this;if(void 0===o&&(o=this.getSourceBufferTypes()),!o.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(i);var h=this.operationQueue,p=o.map(function(v){return h.appendBlocker(v)});Promise.all(p).then(function(){i(),o.forEach(function(v){var y=u.sourceBuffer[v];null!=y&&y.updating||h.shiftAndExecuteNext(v)})})},d.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},d.addBufferListener=function(i,o,u){var h=this.sourceBuffer[i];if(h){var p=u.bind(this,i);this.listeners[i].push({event:o,listener:p}),h.addEventListener(o,p)}},d.removeBufferListeners=function(i){var o=this.sourceBuffer[i];o&&this.listeners[i].forEach(function(u){o.removeEventListener(u.event,u.listener)})},Ce(g,[{key:"mediaSrc",get:function(){var i,o=(null==(i=this.media)?void 0:i.firstChild)||this.media;return o?.src}}]),g}();function ld(g){var d=g.querySelectorAll("source");[].slice.call(d).forEach(function(c){g.removeChild(c)})}var vu={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},uc=function(d){var c=d;return vu.hasOwnProperty(d)&&(c=vu[d]),String.fromCharCode(c)},Ua=100,ud={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},cc={17:2,18:4,21:6,22:8,23:10,19:13,20:15},cd={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},yu={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Eu=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Sh=function(){function g(){this.time=null,this.verboseLevel=0}return g.prototype.log=function(i,o){if(this.verboseLevel>=i){var u="function"==typeof o?o():o;Pe.log(this.time+" ["+i+"] "+u)}},g}(),A=function(d){for(var c=[],i=0;i<d.length;i++)c.push(d[i].toString(16));return c},S=function(){function g(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}var d=g.prototype;return d.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},d.setStyles=function(i){for(var o=["foreground","underline","italics","background","flash"],u=0;u<o.length;u++){var h=o[u];i.hasOwnProperty(h)&&(this[h]=i[h])}},d.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},d.equals=function(i){return this.foreground===i.foreground&&this.underline===i.underline&&this.italics===i.italics&&this.background===i.background&&this.flash===i.flash},d.copy=function(i){this.foreground=i.foreground,this.underline=i.underline,this.italics=i.italics,this.background=i.background,this.flash=i.flash},d.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},g}(),w=function(){function g(){this.uchar=" ",this.penState=new S}var d=g.prototype;return d.reset=function(){this.uchar=" ",this.penState.reset()},d.setChar=function(i,o){this.uchar=i,this.penState.copy(o)},d.setPenState=function(i){this.penState.copy(i)},d.equals=function(i){return this.uchar===i.uchar&&this.penState.equals(i.penState)},d.copy=function(i){this.uchar=i.uchar,this.penState.copy(i.penState)},d.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},g}(),H=function(){function g(c){this.chars=[],this.pos=0,this.currPenState=new S,this.cueStartTime=null,this.logger=void 0;for(var i=0;i<Ua;i++)this.chars.push(new w);this.logger=c}var d=g.prototype;return d.equals=function(i){for(var o=0;o<Ua;o++)if(!this.chars[o].equals(i.chars[o]))return!1;return!0},d.copy=function(i){for(var o=0;o<Ua;o++)this.chars[o].copy(i.chars[o])},d.isEmpty=function(){for(var i=!0,o=0;o<Ua;o++)if(!this.chars[o].isEmpty()){i=!1;break}return i},d.setCursor=function(i){this.pos!==i&&(this.pos=i),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Ua&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Ua)},d.moveCursor=function(i){var o=this.pos+i;if(i>1)for(var u=this.pos+1;u<o+1;u++)this.chars[u].setPenState(this.currPenState);this.setCursor(o)},d.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},d.insertChar=function(i){var o=this;i>=144&&this.backSpace();var u=uc(i);this.pos>=Ua?this.logger.log(0,function(){return"Cannot insert "+i.toString(16)+" ("+u+") at position "+o.pos+". Skipping it!"}):(this.chars[this.pos].setChar(u,this.currPenState),this.moveCursor(1))},d.clearFromPos=function(i){var o;for(o=i;o<Ua;o++)this.chars[o].reset()},d.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},d.clearToEndOfRow=function(){this.clearFromPos(this.pos)},d.getTextString=function(){for(var i=[],o=!0,u=0;u<Ua;u++){var h=this.chars[u].uchar;" "!==h&&(o=!1),i.push(h)}return o?"":i.join("")},d.setPenStyles=function(i){this.currPenState.setStyles(i),this.chars[this.pos].setPenState(this.currPenState)},g}(),W=function(){function g(c){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(var i=0;i<15;i++)this.rows.push(new H(c));this.logger=c}var d=g.prototype;return d.reset=function(){for(var i=0;i<15;i++)this.rows[i].clear();this.currRow=14},d.equals=function(i){for(var o=!0,u=0;u<15;u++)if(!this.rows[u].equals(i.rows[u])){o=!1;break}return o},d.copy=function(i){for(var o=0;o<15;o++)this.rows[o].copy(i.rows[o])},d.isEmpty=function(){for(var i=!0,o=0;o<15;o++)if(!this.rows[o].isEmpty()){i=!1;break}return i},d.backSpace=function(){this.rows[this.currRow].backSpace()},d.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},d.insertChar=function(i){this.rows[this.currRow].insertChar(i)},d.setPen=function(i){this.rows[this.currRow].setPenStyles(i)},d.moveCursor=function(i){this.rows[this.currRow].moveCursor(i)},d.setCursor=function(i){this.logger.log(2,"setCursor: "+i),this.rows[this.currRow].setCursor(i)},d.setPAC=function(i){this.logger.log(2,function(){return"pacData = "+JSON.stringify(i)});var o=i.row-1;if(this.nrRollUpRows&&o<this.nrRollUpRows-1&&(o=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==o){for(var u=0;u<15;u++)this.rows[u].clear();var h=this.currRow+1-this.nrRollUpRows,p=this.lastOutputScreen;if(p){var v=p.rows[h].cueStartTime,y=this.logger.time;if(null!==v&&null!==y&&v<y)for(var C=0;C<this.nrRollUpRows;C++)this.rows[o-this.nrRollUpRows+C+1].copy(p.rows[h+C])}}this.currRow=o;var R=this.rows[this.currRow];if(null!==i.indent){var J=Math.max(i.indent-1,0);R.setCursor(i.indent),i.color=R.chars[J].penState.foreground}this.setPen({foreground:i.color,underline:i.underline,italics:i.italics,background:"black",flash:!1})},d.setBkgData=function(i){this.logger.log(2,function(){return"bkgData = "+JSON.stringify(i)}),this.backSpace(),this.setPen(i),this.insertChar(32)},d.setRollUpRows=function(i){this.nrRollUpRows=i},d.rollUp=function(){var i=this;if(null!==this.nrRollUpRows){this.logger.log(1,function(){return i.getDisplayText()});var u=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];u.clear(),this.rows.splice(this.currRow,0,u),this.logger.log(2,"Rolling up")}else this.logger.log(3,"roll_up but nrRollUpRows not set yet")},d.getDisplayText=function(i){i=i||!1;for(var o=[],u="",p=0;p<15;p++){var v=this.rows[p].getTextString();v&&o.push(i?"Row "+(p+1)+": '"+v+"'":v.trim())}return o.length>0&&(u=i?"["+o.join(" | ")+"]":o.join("\n")),u},d.getTextAndFormat=function(){return this.rows},g}(),Y=function(){function g(c,i,o){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=c,this.outputFilter=i,this.mode=null,this.verbose=0,this.displayedMemory=new W(o),this.nonDisplayedMemory=new W(o),this.lastOutputScreen=new W(o),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=o}var d=g.prototype;return d.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},d.getHandler=function(){return this.outputFilter},d.setHandler=function(i){this.outputFilter=i},d.setPAC=function(i){this.writeScreen.setPAC(i)},d.setBkgData=function(i){this.writeScreen.setBkgData(i)},d.setMode=function(i){i!==this.mode&&(this.mode=i,this.logger.log(2,function(){return"MODE="+i}),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=i)},d.insertChars=function(i){for(var o=this,u=0;u<i.length;u++)this.writeScreen.insertChar(i[u]);var h=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,function(){return h+": "+o.writeScreen.getDisplayText(!0)}),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(this.logger.log(1,function(){return"DISPLAYED: "+o.displayedMemory.getDisplayText(!0)}),this.outputDataUpdate())},d.ccRCL=function(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},d.ccBS=function(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},d.ccAOF=function(){},d.ccAON=function(){},d.ccDER=function(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},d.ccRU=function(i){this.logger.log(2,"RU("+i+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(i)},d.ccFON=function(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},d.ccRDC=function(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},d.ccTR=function(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")},d.ccRTD=function(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")},d.ccEDM=function(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},d.ccCR=function(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},d.ccENM=function(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},d.ccEOC=function(){var i=this;if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var o=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=o,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,function(){return"DISP: "+i.displayedMemory.getDisplayText()})}this.outputDataUpdate(!0)},d.ccTO=function(i){this.logger.log(2,"TO("+i+") - Tab Offset"),this.writeScreen.moveCursor(i)},d.ccMIDROW=function(i){var o={flash:!1};if(o.underline=i%2==1,o.italics=i>=46,o.italics)o.foreground="white";else{var u=Math.floor(i/2)-16;o.foreground=["white","green","blue","cyan","red","yellow","magenta"][u]}this.logger.log(2,"MIDROW: "+JSON.stringify(o)),this.writeScreen.setPen(o)},d.outputDataUpdate=function(i){void 0===i&&(i=!1);var o=this.logger.time;null!==o&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,o,this.lastOutputScreen),i&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:o):this.cueStartTime=o,this.lastOutputScreen.copy(this.displayedMemory))},d.cueSplitAtTime=function(i){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,i,this.displayedMemory),this.cueStartTime=i))},g}(),k=function(){function g(c,i,o){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;var u=this.logger=new Sh;this.channels=[null,new Y(c,i,u),new Y(c+1,o,u)]}var d=g.prototype;return d.getHandler=function(i){return this.channels[i].getHandler()},d.setHandler=function(i,o){this.channels[i].setHandler(o)},d.addData=function(i,o){var u,h,p,v=!1;this.logger.time=i;for(var y=0;y<o.length;y+=2)if(p=127&o[y+1],0!=(h=127&o[y])||0!==p){if(this.logger.log(3,"["+A([o[y],o[y+1]])+"] -> ("+A([h,p])+")"),(u=this.parseCmd(h,p))||(u=this.parseMidrow(h,p)),u||(u=this.parsePAC(h,p)),u||(u=this.parseBackgroundAttributes(h,p)),!u&&(v=this.parseChars(h,p))){var C=this.currentChannel;C&&C>0?this.channels[C].insertChars(v):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!u&&!v&&this.logger.log(2,"Couldn't parse cleaned data "+A([h,p])+" orig: "+A([o[y],o[y+1]]))}},d.parseCmd=function(i,o){var u=this.cmdHistory;if(!((20===i||28===i||21===i||29===i)&&o>=32&&o<=47||(23===i||31===i)&&o>=33&&o<=35))return!1;if(le(i,o,u))return X(null,null,u),this.logger.log(3,"Repeated command ("+A([i,o])+") is dropped"),!0;var v=20===i||21===i||23===i?1:2,y=this.channels[v];return 20===i||21===i||28===i||29===i?32===o?y.ccRCL():33===o?y.ccBS():34===o?y.ccAOF():35===o?y.ccAON():36===o?y.ccDER():37===o?y.ccRU(2):38===o?y.ccRU(3):39===o?y.ccRU(4):40===o?y.ccFON():41===o?y.ccRDC():42===o?y.ccTR():43===o?y.ccRTD():44===o?y.ccEDM():45===o?y.ccCR():46===o?y.ccENM():47===o&&y.ccEOC():y.ccTO(o-32),X(i,o,u),this.currentChannel=v,!0},d.parseMidrow=function(i,o){var u=0;if((17===i||25===i)&&o>=32&&o<=47){if((u=17===i?1:2)!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;var h=this.channels[u];return!!h&&(h.ccMIDROW(o),this.logger.log(3,"MIDROW ("+A([i,o])+")"),!0)}return!1},d.parsePAC=function(i,o){var h=this.cmdHistory;if(!((i>=17&&i<=23||i>=25&&i<=31)&&o>=64&&o<=127||(16===i||24===i)&&o>=64&&o<=95))return!1;if(le(i,o,h))return X(null,null,h),!0;var y=i<=23?1:2,C=this.channels[y];return!!C&&(C.setPAC(this.interpretPAC(o>=64&&o<=95?1===y?ud[i]:cd[i]:1===y?cc[i]:yu[i],o)),X(i,o,h),this.currentChannel=y,!0)},d.interpretPAC=function(i,o){var u,h={color:null,italics:!1,indent:null,underline:!1,row:i};return h.underline=1==(1&(u=o>95?o-96:o-64)),u<=13?h.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(u/2)]:u<=15?(h.italics=!0,h.color="white"):h.indent=4*Math.floor((u-16)/2),h},d.parseChars=function(i,o){var u,v,h=null,p=null;if(i>=25?(u=2,p=i-8):(u=1,p=i),p>=17&&p<=19?(this.logger.log(2,"Special char '"+uc(v=17===p?o+80:18===p?o+112:o+144)+"' in channel "+u),h=[v]):i>=32&&i<=127&&(h=0===o?[i]:[i,o]),h){var y=A(h);this.logger.log(3,"Char codes =  "+y.join(",")),X(i,o,this.cmdHistory)}return h},d.parseBackgroundAttributes=function(i,o){if(!((16===i||24===i)&&o>=32&&o<=47||(23===i||31===i)&&o>=45&&o<=47))return!1;var p,v={};return 16===i||24===i?(p=Math.floor((o-32)/2),v.background=Eu[p],o%2==1&&(v.background=v.background+"_semi")):45===o?v.background="transparent":(v.foreground="black",47===o&&(v.underline=!0)),this.channels[i<=23?1:2].setBkgData(v),X(i,o,this.cmdHistory),!0},d.reset=function(){for(var i=0;i<Object.keys(this.channels).length;i++){var o=this.channels[i];o&&o.reset()}this.cmdHistory={a:null,b:null}},d.cueSplitAtTime=function(i){for(var o=0;o<this.channels.length;o++){var u=this.channels[o];u&&u.cueSplitAtTime(i)}},g}();function X(g,d,c){c.a=g,c.b=d}function le(g,d,c){return c.a===g&&c.b===d}var fe=function(){function g(c,i){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=c,this.trackName=i}var d=g.prototype;return d.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},d.newCue=function(i,o,u){(null===this.startTime||this.startTime>i)&&(this.startTime=i),this.endTime=o,this.screen=u,this.timelineController.createCaptionsTrack(this.trackName)},d.reset=function(){this.cueRanges=[],this.startTime=null},g}(),ee=function(){if(null!=xt&&xt.VTTCue)return self.VTTCue;var g=["","lr","rl"],d=["start","middle","end","left","right"];function c(p,v){if("string"!=typeof v||!Array.isArray(p))return!1;var y=v.toLowerCase();return!!~p.indexOf(y)&&y}function o(p){return c(d,p)}function u(p){for(var v=arguments.length,y=new Array(v>1?v-1:0),C=1;C<v;C++)y[C-1]=arguments[C];for(var R=1;R<arguments.length;R++){var U=arguments[R];for(var J in U)p[J]=U[J]}return p}function h(p,v,y){var C=this,R={enumerable:!0};C.hasBeenReset=!1;var U="",J=!1,se=p,ye=v,Ae=y,Ue=null,Ke="",Xe=!0,pt="auto",yt="start",nn=50,qt="middle",Dt=50,on="middle";Object.defineProperty(C,"id",u({},R,{get:function(){return U},set:function(Sn){U=""+Sn}})),Object.defineProperty(C,"pauseOnExit",u({},R,{get:function(){return J},set:function(Sn){J=!!Sn}})),Object.defineProperty(C,"startTime",u({},R,{get:function(){return se},set:function(Sn){if("number"!=typeof Sn)throw new TypeError("Start time must be set to a number.");se=Sn,this.hasBeenReset=!0}})),Object.defineProperty(C,"endTime",u({},R,{get:function(){return ye},set:function(Sn){if("number"!=typeof Sn)throw new TypeError("End time must be set to a number.");ye=Sn,this.hasBeenReset=!0}})),Object.defineProperty(C,"text",u({},R,{get:function(){return Ae},set:function(Sn){Ae=""+Sn,this.hasBeenReset=!0}})),Object.defineProperty(C,"region",u({},R,{get:function(){return Ue},set:function(Sn){Ue=Sn,this.hasBeenReset=!0}})),Object.defineProperty(C,"vertical",u({},R,{get:function(){return Ke},set:function(Sn){var Rn=function i(p){return c(g,p)}(Sn);if(!1===Rn)throw new SyntaxError("An invalid or illegal string was specified.");Ke=Rn,this.hasBeenReset=!0}})),Object.defineProperty(C,"snapToLines",u({},R,{get:function(){return Xe},set:function(Sn){Xe=!!Sn,this.hasBeenReset=!0}})),Object.defineProperty(C,"line",u({},R,{get:function(){return pt},set:function(Sn){if("number"!=typeof Sn&&"auto"!==Sn)throw new SyntaxError("An invalid number or illegal string was specified.");pt=Sn,this.hasBeenReset=!0}})),Object.defineProperty(C,"lineAlign",u({},R,{get:function(){return yt},set:function(Sn){var Rn=o(Sn);if(!Rn)throw new SyntaxError("An invalid or illegal string was specified.");yt=Rn,this.hasBeenReset=!0}})),Object.defineProperty(C,"position",u({},R,{get:function(){return nn},set:function(Sn){if(Sn<0||Sn>100)throw new Error("Position must be between 0 and 100.");nn=Sn,this.hasBeenReset=!0}})),Object.defineProperty(C,"positionAlign",u({},R,{get:function(){return qt},set:function(Sn){var Rn=o(Sn);if(!Rn)throw new SyntaxError("An invalid or illegal string was specified.");qt=Rn,this.hasBeenReset=!0}})),Object.defineProperty(C,"size",u({},R,{get:function(){return Dt},set:function(Sn){if(Sn<0||Sn>100)throw new Error("Size must be between 0 and 100.");Dt=Sn,this.hasBeenReset=!0}})),Object.defineProperty(C,"align",u({},R,{get:function(){return on},set:function(Sn){var Rn=o(Sn);if(!Rn)throw new SyntaxError("An invalid or illegal string was specified.");on=Rn,this.hasBeenReset=!0}})),C.displayState=void 0}return h.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},h}(),de=function(){function g(){}return g.prototype.decode=function(i,o){if(!i)return"";if("string"!=typeof i)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(i))},g}();function ae(g){function d(i,o,u,h){return 3600*(0|i)+60*(0|o)+(0|u)+parseFloat(h||0)}var c=g.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return c?parseFloat(c[2])>59?d(c[2],c[3],0,c[4]):d(c[1],c[2],c[3],c[4]):null}var He=function(){function g(){this.values=Object.create(null)}var d=g.prototype;return d.set=function(i,o){!this.get(i)&&""!==o&&(this.values[i]=o)},d.get=function(i,o,u){return u?this.has(i)?this.values[i]:o[u]:this.has(i)?this.values[i]:o},d.has=function(i){return i in this.values},d.alt=function(i,o,u){for(var h=0;h<u.length;++h)if(o===u[h]){this.set(i,o);break}},d.integer=function(i,o){/^-?\d+$/.test(o)&&this.set(i,parseInt(o,10))},d.percent=function(i,o){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(o)){var u=parseFloat(o);if(u>=0&&u<=100)return this.set(i,u),!0}return!1},g}();function Ne(g,d,c,i){var o=i?g.split(i):[g];for(var u in o)if("string"==typeof o[u]){var h=o[u].split(c);2===h.length&&d(h[0],h[1])}}var Fe=new ee(0,0,""),Ze="middle"===Fe.align?"middle":"center";function he(g,d,c){var i=g;function o(){var p=ae(g);if(null===p)throw new Error("Malformed timestamp: "+i);return g=g.replace(/^[^\sa-zA-Z-]+/,""),p}function h(){g=g.replace(/^\s+/,"")}if(h(),d.startTime=o(),h(),"--\x3e"!==g.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);g=g.slice(3),h(),d.endTime=o(),h(),function u(p,v){var y=new He;Ne(p,function(U,J){var se;switch(U){case"region":for(var ye=c.length-1;ye>=0;ye--)if(c[ye].id===J){y.set(U,c[ye].region);break}break;case"vertical":y.alt(U,J,["rl","lr"]);break;case"line":se=J.split(","),y.integer(U,se[0]),y.percent(U,se[0])&&y.set("snapToLines",!1),y.alt(U,se[0],["auto"]),2===se.length&&y.alt("lineAlign",se[1],["start",Ze,"end"]);break;case"position":se=J.split(","),y.percent(U,se[0]),2===se.length&&y.alt("positionAlign",se[1],["start",Ze,"end","line-left","line-right","auto"]);break;case"size":y.percent(U,J);break;case"align":y.alt(U,J,["start",Ze,"end","left","right"])}},/:/,/\s/),v.region=y.get("region",null),v.vertical=y.get("vertical","");var C=y.get("line","auto");"auto"===C&&-1===Fe.line&&(C=-1),v.line=C,v.lineAlign=y.get("lineAlign","start"),v.snapToLines=y.get("snapToLines",!0),v.size=y.get("size",100),v.align=y.get("align",Ze);var R=y.get("position","auto");"auto"===R&&50===Fe.position&&(R="start"===v.align||"left"===v.align?0:"end"===v.align||"right"===v.align?100:50),v.position=R}(g,d)}function Oe(g){return g.replace(/<br(?: \/)?>/gi,"\n")}var me=function(){function g(){this.state="INITIAL",this.buffer="",this.decoder=new de,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var d=g.prototype;return d.parse=function(i){var o=this;function u(){var R=o.buffer,U=0;for(R=Oe(R);U<R.length&&"\r"!==R[U]&&"\n"!==R[U];)++U;var J=R.slice(0,U);return"\r"===R[U]&&++U,"\n"===R[U]&&++U,o.buffer=R.slice(U),J}i&&(o.buffer+=o.decoder.decode(i,{stream:!0}));try{var p="";if("INITIAL"===o.state){if(!/\r\n|\n/.test(o.buffer))return this;var v=(p=u()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(null==v||!v[0])throw new Error("Malformed WebVTT signature.");o.state="HEADER"}for(var y=!1;o.buffer;){if(!/\r\n|\n/.test(o.buffer))return this;switch(y?y=!1:p=u(),o.state){case"HEADER":/:/.test(p)?Ne(p,function(U,J){},/:/):p||(o.state="ID");continue;case"NOTE":p||(o.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(p)){o.state="NOTE";break}if(!p)continue;if(o.cue=new ee(0,0,""),o.state="CUE",-1===p.indexOf("--\x3e")){o.cue.id=p;continue}case"CUE":if(!o.cue){o.state="BADCUE";continue}try{he(p,o.cue,o.regionList)}catch{o.cue=null,o.state="BADCUE";continue}o.state="CUETEXT";continue;case"CUETEXT":var C=-1!==p.indexOf("--\x3e");if(!p||C&&(y=!0)){o.oncue&&o.cue&&o.oncue(o.cue),o.cue=null,o.state="ID";continue}if(null===o.cue)continue;o.cue.text&&(o.cue.text+="\n"),o.cue.text+=p;continue;case"BADCUE":p||(o.state="ID")}}}catch{"CUETEXT"===o.state&&o.cue&&o.oncue&&o.oncue(o.cue),o.cue=null,o.state="INITIAL"===o.state?"BADWEBVTT":"BADCUE"}return this},d.flush=function(){var i=this;try{if((i.cue||"HEADER"===i.state)&&(i.buffer+="\n\n",i.parse()),"INITIAL"===i.state||"BADWEBVTT"===i.state)throw new Error("Malformed WebVTT signature.")}catch(o){i.onparsingerror&&i.onparsingerror(o)}return i.onflush&&i.onflush(),this},g}(),Ve=/\r\n|\n\r|\n|\r/g,P=function(d,c,i){return void 0===i&&(i=0),d.slice(i,i+c.length)===c},te=function(d){for(var c=5381,i=d.length;i;)c=33*c^d.charCodeAt(--i);return(c>>>0).toString()};function re(g,d,c){return te(g.toString())+te(d.toString())+te(c)}function xe(g,d,c,i,o,u,h){var se,p=new me,v=Co(new Uint8Array(g)).trim().replace(Ve,"\n").split("\n"),y=[],C=d?function gh(g,d){return void 0===d&&(d=1),hu(g,Xu,1/d)}(d.baseTime,d.timescale):0,R="00:00.000",U=0,J=0,ye=!0;p.oncue=function(Ae){var Ue=c[i],Ke=c.ccOffset,Xe=(U-C)/9e4;if(null!=Ue&&Ue.new&&(void 0!==J?Ke=c.ccOffset=Ue.start:function(d,c,i){var o=d[c],u=d[o.prevCC];if(!u||!u.new&&o.new)return d.ccOffset=d.presentationOffset=o.start,void(o.new=!1);for(;null!=(h=u)&&h.new;){var h;d.ccOffset+=o.start-u.start,o.new=!1,u=d[(o=u).prevCC]}d.presentationOffset=i}(c,i,Xe)),Xe){if(!d)return void(se=new Error("Missing initPTS for VTT MPEGTS"));Ke=Xe-c.presentationOffset}var pt=Ae.endTime-Ae.startTime,yt=_a(9e4*(Ae.startTime+Ke-J),9e4*o)/9e4;Ae.startTime=Math.max(yt,0),Ae.endTime=Math.max(yt+pt,0);var nn=Ae.text.trim();Ae.text=decodeURIComponent(encodeURIComponent(nn)),Ae.id||(Ae.id=re(Ae.startTime,Ae.endTime,nn)),Ae.endTime>0&&y.push(Ae)},p.onparsingerror=function(Ae){se=Ae},p.onflush=function(){se?h(se):u(y)},v.forEach(function(Ae){if(ye){if(P(Ae,"X-TIMESTAMP-MAP=")){ye=!1,Ae.slice(16).split(",").forEach(function(Ue){P(Ue,"LOCAL:")?R=Ue.slice(6):P(Ue,"MPEGTS:")&&(U=parseInt(Ue.slice(7)))});try{J=function(d){var c=parseInt(d.slice(-3)),i=parseInt(d.slice(-6,-4)),o=parseInt(d.slice(-9,-7)),u=d.length>9?parseInt(d.substring(0,d.indexOf(":"))):0;if(!(Q(c)&&Q(i)&&Q(o)&&Q(u)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+d);return c+=1e3*i,(c+=6e4*o)+36e5*u}(R)/1e3}catch(Ue){se=Ue}return}""===Ae&&(ye=!1)}p.parse(Ae+"\n")}),p.flush()}var be="stpp.ttml.im1t",ke=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,we=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,ie={left:"start",center:"center",right:"end",start:"start",end:"end"};function Re(g,d,c,i){var o=En(new Uint8Array(g),["mdat"]);if(0!==o.length){var u=o.map(function(p){return Co(p)}),h=function td(g,d,c,i){return void 0===c&&(c=1),void 0===i&&(i=!1),hu(g,d,1/c,i)}(d.baseTime,1,d.timescale);try{u.forEach(function(p){return c(function qe(g,d){var o=(new DOMParser).parseFromString(g,"text/xml").getElementsByTagName("tt")[0];if(!o)throw new Error("Invalid ttml");var u={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},h=Object.keys(u).reduce(function(R,U){return R[U]=o.getAttribute("ttp:"+U)||u[U],R},{}),p="preserve"!==o.getAttribute("xml:space"),v=nt(ft(o,"styling","style")),y=nt(ft(o,"layout","region")),C=ft(o,"body","[begin]");return[].map.call(C,function(R){var U=dt(R,p);if(!U||!R.hasAttribute("begin"))return null;var J=Ot(R.getAttribute("begin"),h),se=Ot(R.getAttribute("dur"),h),ye=Ot(R.getAttribute("end"),h);if(null===J)throw Gt(R);if(null===ye){if(null===se)throw Gt(R);ye=J+se}var Ae=new ee(J-d,ye-d,U);Ae.id=re(Ae.startTime,Ae.endTime,Ae.text);var Xe=function st(g,d,c){var i="http://www.w3.org/ns/ttml#styling",o=null,u=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],h=null!=g&&g.hasAttribute("style")?g.getAttribute("style"):null;return h&&c.hasOwnProperty(h)&&(o=c[h]),u.reduce(function(p,v){var y=Ft(d,i,v)||Ft(g,i,v)||Ft(o,i,v);return y&&(p[v]=y),p},{})}(y[R.getAttribute("region")],v[R.getAttribute("style")],v),pt=Xe.textAlign;if(pt){var yt=ie[pt];yt&&(Ae.lineAlign=yt),Ae.align=pt}return E(Ae,Xe),Ae}).filter(function(R){return null!==R})}(p,h))})}catch(p){i(p)}}else i(new Error("Could not parse IMSC1 mdat"))}function ft(g,d,c){var i=g.getElementsByTagName(d)[0];return i?[].slice.call(i.querySelectorAll(c)):[]}function nt(g){return g.reduce(function(d,c){var i=c.getAttribute("xml:id");return i&&(d[i]=c),d},{})}function dt(g,d){return[].slice.call(g.childNodes).reduce(function(c,i,o){var u;return"br"===i.nodeName&&o?c+"\n":null!=(u=i.childNodes)&&u.length?dt(i,d):d?c+i.textContent.trim().replace(/\s+/g," "):c+i.textContent},"")}function Ft(g,d,c){return g&&g.hasAttributeNS(d,c)?g.getAttributeNS(d,c):null}function Gt(g){return new Error("Could not parse ttml timestamp "+g)}function Ot(g,d){if(!g)return null;var c=ae(g);return null===c&&(ke.test(g)?c=function kt(g,d){var c=ke.exec(g);return 3600*(0|c[1])+60*(0|c[2])+(0|c[3])+((0|c[4])+(0|c[5])/d.subFrameRate)/d.frameRate}(g,d):we.test(g)&&(c=function wn(g,d){var c=we.exec(g),i=Number(c[1]);switch(c[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/d.frameRate;case"t":return i/d.tickRate}return i}(g,d))),c}var tt=function(){function g(c){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=c,this.config=c.config,this.Cues=c.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},c.on(x.MEDIA_ATTACHING,this.onMediaAttaching,this),c.on(x.MEDIA_DETACHING,this.onMediaDetaching,this),c.on(x.MANIFEST_LOADING,this.onManifestLoading,this),c.on(x.MANIFEST_LOADED,this.onManifestLoaded,this),c.on(x.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),c.on(x.FRAG_LOADING,this.onFragLoading,this),c.on(x.FRAG_LOADED,this.onFragLoaded,this),c.on(x.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),c.on(x.FRAG_DECRYPTED,this.onFragDecrypted,this),c.on(x.INIT_PTS_FOUND,this.onInitPtsFound,this),c.on(x.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),c.on(x.BUFFER_FLUSHING,this.onBufferFlushing,this)}var d=g.prototype;return d.destroy=function(){var i=this.hls;i.off(x.MEDIA_ATTACHING,this.onMediaAttaching,this),i.off(x.MEDIA_DETACHING,this.onMediaDetaching,this),i.off(x.MANIFEST_LOADING,this.onManifestLoading,this),i.off(x.MANIFEST_LOADED,this.onManifestLoaded,this),i.off(x.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),i.off(x.FRAG_LOADING,this.onFragLoading,this),i.off(x.FRAG_LOADED,this.onFragLoaded,this),i.off(x.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),i.off(x.FRAG_DECRYPTED,this.onFragDecrypted,this),i.off(x.INIT_PTS_FOUND,this.onInitPtsFound,this),i.off(x.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),i.off(x.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0},d.initCea608Parsers=function(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){var i=new fe(this,"textTrack1"),o=new fe(this,"textTrack2"),u=new fe(this,"textTrack3"),h=new fe(this,"textTrack4");this.cea608Parser1=new k(1,i,o),this.cea608Parser2=new k(3,u,h)}},d.addCues=function(i,o,u,h,p){for(var v=!1,y=p.length;y--;){var C=p[y],R=_t(C[0],C[1],o,u);if(R>=0&&(C[0]=Math.min(C[0],o),C[1]=Math.max(C[1],u),v=!0,R/(u-o)>.5))return}if(v||p.push([o,u]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[i],o,u,h);else{var J=this.Cues.newCue(null,o,u,h);this.hls.trigger(x.CUES_PARSED,{type:"captions",cues:J,track:i})}},d.onInitPtsFound=function(i,o){var u=this,C=this.unparsedVttFrags;"main"===o.id&&(this.initPTS[o.frag.cc]={baseTime:o.initPTS,timescale:o.timescale}),C.length&&(this.unparsedVttFrags=[],C.forEach(function(R){u.onFragLoaded(x.FRAG_LOADED,R)}))},d.getExistingTrack=function(i,o){var u=this.media;if(u)for(var h=0;h<u.textTracks.length;h++){var p=u.textTracks[h];if(Lt(p,{name:i,lang:o,attrs:{}}))return p}return null},d.createCaptionsTrack=function(i){this.config.renderTextTracksNatively?this.createNativeTrack(i):this.createNonNativeTrack(i)},d.createNativeTrack=function(i){if(!this.captionsTracks[i]){var u=this.captionsTracks,h=this.media,p=this.captionsProperties[i],v=p.label,y=p.languageCode,C=this.getExistingTrack(v,y);if(C)u[i]=C,As(u[i]),Sr(u[i],h);else{var R=this.createTextTrack("captions",v,y);R&&(R[i]=!0,u[i]=R)}}},d.createNonNativeTrack=function(i){if(!this.nonNativeCaptionsTracks[i]){var o=this.captionsProperties[i];if(o){var h={_id:i,label:o.label,kind:"captions",default:!!o.media&&!!o.media.default,closedCaptions:o.media};this.nonNativeCaptionsTracks[i]=h,this.hls.trigger(x.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[h]})}}},d.createTextTrack=function(i,o,u){var h=this.media;if(h)return h.addTextTrack(i,o,u)},d.onMediaAttaching=function(i,o){this.media=o.media,this._cleanTracks()},d.onMediaDetaching=function(){var i=this.captionsTracks;Object.keys(i).forEach(function(o){As(i[o]),delete i[o]}),this.nonNativeCaptionsTracks={}},d.onManifestLoading=function(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},d._cleanTracks=function(){var i=this.media;if(i){var o=i.textTracks;if(o)for(var u=0;u<o.length;u++)As(o[u])}},d.onSubtitleTracksUpdated=function(i,o){var u=this,h=o.subtitleTracks||[],p=h.some(function(J){return J.textCodec===be});if(this.config.enableWebVTT||p&&this.config.enableIMSC1){if(ks(this.tracks,h))return void(this.tracks=h);if(this.textTracks=[],this.tracks=h,this.config.renderTextTracksNatively){var y=this.media,C=y?Ko(y.textTracks):null;if(this.tracks.forEach(function(J,se){var ye;if(C){for(var Ae=null,Ue=0;Ue<C.length;Ue++)if(C[Ue]&&Lt(C[Ue],J)){Ae=C[Ue],C[Ue]=null;break}Ae&&(ye=Ae)}if(ye)As(ye);else{var Ke=Ye(J);(ye=u.createTextTrack(Ke,J.name,J.lang))&&(ye.mode="disabled")}ye&&u.textTracks.push(ye)}),null!=C&&C.length){var R=C.filter(function(J){return null!==J}).map(function(J){return J.label});R.length&&Pe.warn("Media element contains unused subtitle tracks: "+R.join(", ")+". Replace media element for each source to clear TextTracks and captions menu.")}}else if(this.tracks.length){var U=this.tracks.map(function(J){return{label:J.name,kind:J.type.toLowerCase(),default:J.default,subtitleTrack:J}});this.hls.trigger(x.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:U})}}},d.onManifestLoaded=function(i,o){var u=this;this.config.enableCEA708Captions&&o.captions&&o.captions.forEach(function(h){var p=/(?:CC|SERVICE)([1-4])/.exec(h.instreamId);if(p){var y=u.captionsProperties["textTrack"+p[1]];y&&(y.label=h.name,h.lang&&(y.languageCode=h.lang),y.media=h)}})},d.closedCaptionsForLevel=function(i){var o=this.hls.levels[i.level];return o?.attrs["CLOSED-CAPTIONS"]},d.onFragLoading=function(i,o){this.initCea608Parsers();var u=this.cea608Parser1,h=this.cea608Parser2,v=this.lastSn;if(this.enabled&&u&&h&&o.frag.type===Tr_MAIN){var C,R,U=o.frag,J=U.cc,se=U.sn,ye=null!=(C=null==o||null==(R=o.part)?void 0:R.index)?C:-1;se===v+1||se===v&&ye===this.lastPartIndex+1||J===this.lastCc||(u.reset(),h.reset()),this.lastCc=J,this.lastSn=se,this.lastPartIndex=ye}},d.onFragLoaded=function(i,o){var u=o.frag,h=o.payload;if(u.type===Tr_SUBTITLE)if(h.byteLength){var p=u.decryptdata;if(null==p||!p.encrypted||"stats"in o){var y=this.tracks[u.level],C=this.vttCCs;C[u.cc]||(C[u.cc]={start:u.start,prevCC:this.prevCC,new:!0},this.prevCC=u.cc),y&&y.textCodec===be?this._parseIMSC1(u,h):this._parseVTTs(o)}}else this.hls.trigger(x.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:u,error:new Error("Empty subtitle payload")})},d._parseIMSC1=function(i,o){var u=this,h=this.hls;Re(o,this.initPTS[i.cc],function(p){u._appendCues(p,i.level),h.trigger(x.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})},function(p){Pe.log("Failed to parse IMSC1: "+p),h.trigger(x.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:p})})},d._parseVTTs=function(i){var o,u=this,h=i.frag,p=i.payload,v=this.initPTS,y=this.unparsedVttFrags,C=v.length-1;if(v[h.cc]||-1!==C){var R=this.hls;xe(null!=(o=h.initSegment)&&o.data?pi(h.initSegment.data,new Uint8Array(p)):p,this.initPTS[h.cc],this.vttCCs,h.cc,h.start,function(J){u._appendCues(J,h.level),R.trigger(x.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:h})},function(J){var se="Missing initPTS for VTT MPEGTS"===J.message;se?y.push(i):u._fallbackToIMSC1(h,p),Pe.log("Failed to parse VTT cue: "+J),!(se&&C>h.cc)&&R.trigger(x.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:h,error:J})})}else y.push(i)},d._fallbackToIMSC1=function(i,o){var u=this,h=this.tracks[i.level];h.textCodec||Re(o,this.initPTS[i.cc],function(){h.textCodec=be,u._parseIMSC1(i,o)},function(){h.textCodec="wvtt"})},d._appendCues=function(i,o){var u=this.hls;if(this.config.renderTextTracksNatively){var h=this.textTracks[o];if(!h||"disabled"===h.mode)return;i.forEach(function(y){return kc(h,y)})}else{var p=this.tracks[o];if(!p)return;u.trigger(x.CUES_PARSED,{type:"subtitles",cues:i,track:p.default?"default":"subtitles"+o})}},d.onFragDecrypted=function(i,o){o.frag.type===Tr_SUBTITLE&&this.onFragLoaded(x.FRAG_LOADED,o)},d.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},d.onFragParsingUserdata=function(i,o){this.initCea608Parsers();var u=this.cea608Parser1,h=this.cea608Parser2;if(this.enabled&&u&&h){var p=o.frag,v=o.samples;if(p.type!==Tr_MAIN||"NONE"!==this.closedCaptionsForLevel(p))for(var y=0;y<v.length;y++){var C=v[y].bytes;if(C){var R=this.extractCea608Data(C);u.addData(v[y].pts,R[0]),h.addData(v[y].pts,R[1])}}}},d.onBufferFlushing=function(i,o){var u=o.startOffset,h=o.endOffset,p=o.endOffsetSubtitles,v=o.type,y=this.media;if(y&&!(y.currentTime<h)){if(!v||"video"===v){var C=this.captionsTracks;Object.keys(C).forEach(function(U){return Wl(C[U],u,h)})}if(this.config.renderTextTracksNatively&&0===u&&void 0!==p){var R=this.textTracks;Object.keys(R).forEach(function(U){return Wl(R[U],u,p)})}}},d.extractCea608Data=function(i){for(var o=[[],[]],u=31&i[0],h=2,p=0;p<u;p++){var v=i[h++],y=127&i[h++],C=127&i[h++];if((0!==y||0!==C)&&0!=(4&v)){var U=3&v;(0===U||1===U)&&(o[U].push(y),o[U].push(C))}}return o},g}();function Ye(g){return g.characteristics&&/transcribes-spoken-dialog/gi.test(g.characteristics)&&/describes-music-and-sound/gi.test(g.characteristics)?"captions":"subtitles"}function Lt(g,d){return!!g&&g.kind===Ye(d)&&Jc(d,g)}function _t(g,d,c,i){return Math.min(d,i)-Math.max(g,c)}var Kt=function(){function g(c){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=c,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var d=g.prototype;return d.setStreamController=function(i){this.streamController=i},d.destroy=function(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},d.registerListeners=function(){var i=this.hls;i.on(x.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),i.on(x.MEDIA_ATTACHING,this.onMediaAttaching,this),i.on(x.MANIFEST_PARSED,this.onManifestParsed,this),i.on(x.LEVELS_UPDATED,this.onLevelsUpdated,this),i.on(x.BUFFER_CODECS,this.onBufferCodecs,this),i.on(x.MEDIA_DETACHING,this.onMediaDetaching,this)},d.unregisterListener=function(){var i=this.hls;i.off(x.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),i.off(x.MEDIA_ATTACHING,this.onMediaAttaching,this),i.off(x.MANIFEST_PARSED,this.onManifestParsed,this),i.off(x.LEVELS_UPDATED,this.onLevelsUpdated,this),i.off(x.BUFFER_CODECS,this.onBufferCodecs,this),i.off(x.MEDIA_DETACHING,this.onMediaDetaching,this)},d.onFpsDropLevelCapping=function(i,o){var u=this.hls.levels[o.droppedLevel];this.isLevelAllowed(u)&&this.restrictedLevels.push({bitrate:u.bitrate,height:u.height,width:u.width})},d.onMediaAttaching=function(i,o){this.media=o.media instanceof HTMLVideoElement?o.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()},d.onManifestParsed=function(i,o){var u=this.hls;this.restrictedLevels=[],this.firstLevel=o.firstLevel,u.config.capLevelToPlayerSize&&o.video&&this.startCapping()},d.onLevelsUpdated=function(i,o){this.timer&&Q(this.autoLevelCapping)&&this.detectPlayerSize()},d.onBufferCodecs=function(i,o){this.hls.config.capLevelToPlayerSize&&o.video&&this.startCapping()},d.onMediaDetaching=function(){this.stopCapping()},d.detectPlayerSize=function(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);var i=this.hls.levels;if(i.length){var o=this.hls,u=this.getMaxLevel(i.length-1);u!==this.autoLevelCapping&&Pe.log("Setting autoLevelCapping to "+u+": "+i[u].height+"p@"+i[u].bitrate+" for media "+this.mediaWidth+"x"+this.mediaHeight),o.autoLevelCapping=u,o.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=o.autoLevelCapping}}},d.getMaxLevel=function(i){var o=this,u=this.hls.levels;if(!u.length)return-1;var h=u.filter(function(p,v){return o.isLevelAllowed(p)&&v<=i});return this.clientRect=null,g.getMaxLevelByMediaSize(h,this.mediaWidth,this.mediaHeight)},d.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},d.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},d.getDimensions=function(){if(this.clientRect)return this.clientRect;var i=this.media,o={width:0,height:0};if(i){var u=i.getBoundingClientRect();o.width=u.width,o.height=u.height,!o.width&&!o.height&&(o.width=u.right-u.left||i.width||0,o.height=u.bottom-u.top||i.height||0)}return this.clientRect=o,o},d.isLevelAllowed=function(i){return!this.restrictedLevels.some(function(u){return i.bitrate===u.bitrate&&i.width===u.width&&i.height===u.height})},g.getMaxLevelByMediaSize=function(i,o,u){if(null==i||!i.length)return-1;for(var p=i.length-1,v=Math.max(o,u),y=0;y<i.length;y+=1){var C=i[y];if((C.width>=v||C.height>=v)&&(U=C,!(J=i[y+1])||U.width!==J.width||U.height!==J.height)){p=y;break}}var U,J;return p},Ce(g,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var i=1;if(!this.hls.config.ignoreDevicePixelRatio)try{i=self.devicePixelRatio}catch{}return i}}]),g}(),Wt=function(){function g(c){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=c,this.registerListeners()}var d=g.prototype;return d.setStreamController=function(i){this.streamController=i},d.registerListeners=function(){this.hls.on(x.MEDIA_ATTACHING,this.onMediaAttaching,this)},d.unregisterListeners=function(){this.hls.off(x.MEDIA_ATTACHING,this.onMediaAttaching,this)},d.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},d.onMediaAttaching=function(i,o){var u=this.hls.config;if(u.capLevelOnFPSDrop){var h=o.media instanceof self.HTMLVideoElement?o.media:null;this.media=h,h&&"function"==typeof h.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),u.fpsDroppedMonitoringPeriod)}},d.checkFPS=function(i,o,u){var h=performance.now();if(o){if(this.lastTime){var v=u-this.lastDroppedFrames,y=o-this.lastDecodedFrames,C=1e3*v/(h-this.lastTime),R=this.hls;if(R.trigger(x.FPS_DROP,{currentDropped:v,currentDecoded:y,totalDroppedFrames:u}),C>0&&v>R.config.fpsDroppedMonitoringThreshold*y){var U=R.currentLevel;Pe.warn("drop FPS ratio greater than max allowed value for currentLevel: "+U),U>0&&(-1===R.autoLevelCapping||R.autoLevelCapping>=U)&&(R.trigger(x.FPS_DROP_LEVEL_CAPPING,{level:U-=1,droppedLevel:R.currentLevel}),R.autoLevelCapping=U,this.streamController.nextLevelSwitch())}}this.lastTime=h,this.lastDroppedFrames=u,this.lastDecodedFrames=o}},d.checkFPSInterval=function(){var i=this.media;if(i)if(this.isVideoPlaybackQualityAvailable){var o=i.getVideoPlaybackQuality();this.checkFPS(i,o.totalVideoFrames,o.droppedVideoFrames)}else this.checkFPS(i,i.webkitDecodedFrameCount,i.webkitDroppedFrameCount)},g}(),Un="[eme]",Mn=function(){function g(c){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=g.CDMCleanupPromise?[g.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=Pe.debug.bind(Pe,Un),this.log=Pe.log.bind(Pe,Un),this.warn=Pe.warn.bind(Pe,Un),this.error=Pe.error.bind(Pe,Un),this.hls=c,this.config=c.config,this.registerListeners()}var d=g.prototype;return d.destroy=function(){this.unregisterListeners(),this.onMediaDetached();var i=this.config;i.requestMediaKeySystemAccessFunc=null,i.licenseXhrSetup=i.licenseResponseCallback=void 0,i.drmSystems=i.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null},d.registerListeners=function(){this.hls.on(x.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(x.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(x.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(x.MANIFEST_LOADED,this.onManifestLoaded,this)},d.unregisterListeners=function(){this.hls.off(x.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(x.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(x.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(x.MANIFEST_LOADED,this.onManifestLoaded,this)},d.getLicenseServerUrl=function(i){var o=this.config,h=o.widevineLicenseUrl,p=o.drmSystems[i];if(p)return p.licenseUrl;if(i===at.WIDEVINE&&h)return h;throw new Error('no license server URL configured for key-system "'+i+'"')},d.getServerCertificateUrl=function(i){var u=this.config.drmSystems[i];if(u)return u.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+i+'"]')},d.attemptKeySystemAccess=function(i){var o=this,u=this.hls.levels,h=function(C,R,U){return!!C&&U.indexOf(C)===R},p=u.map(function(y){return y.audioCodec}).filter(h),v=u.map(function(y){return y.videoCodec}).filter(h);return p.length+v.length===0&&v.push("avc1.42e01e"),new Promise(function(y,C){!function U(J){var se=J.shift();o.getMediaKeysPromise(se,p,v).then(function(ye){return y({keySystem:se,mediaKeys:ye})}).catch(function(ye){J.length?U(J):C(ye instanceof er?ye:new er({type:Ee.KEY_SYSTEM_ERROR,details:ge.KEY_SYSTEM_NO_ACCESS,error:ye,fatal:!0},ye.message))})}(i)})},d.requestMediaKeySystemAccess=function(i,o){var u=this.config.requestMediaKeySystemAccessFunc;if("function"!=typeof u){var h="Configured requestMediaKeySystemAccess is not a function "+u;return null===kn&&"http:"===self.location.protocol&&(h="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(h))}return u(i,o)},d.getMediaKeysPromise=function(i,o,u){var h=this,p=function vn(g,d,c,i){var o;switch(g){case at.FAIRPLAY:o=["cenc","sinf"];break;case at.WIDEVINE:case at.PLAYREADY:o=["cenc"];break;case at.CLEARKEY:o=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+g)}return function xn(g,d,c,i){var o={initDataTypes:g,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:d.map(function(u){return{contentType:'audio/mp4; codecs="'+u+'"',robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null}}),videoCapabilities:c.map(function(u){return{contentType:'video/mp4; codecs="'+u+'"',robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}})};return[o]}(o,d,c,i)}(i,o,u,this.config.drmSystemOptions),v=this.keySystemAccessPromises[i],y=v?.keySystemAccess;if(!y){this.log('Requesting encrypted media "'+i+'" key-system access with config: '+JSON.stringify(p)),y=this.requestMediaKeySystemAccess(i,p);var C=this.keySystemAccessPromises[i]={keySystemAccess:y};return y.catch(function(R){h.log('Failed to obtain access to key-system "'+i+'": '+R)}),y.then(function(R){h.log('Access for key-system "'+R.keySystem+'" obtained');var U=h.fetchServerCertificate(i);return h.log('Create media-keys for "'+i+'"'),C.mediaKeys=R.createMediaKeys().then(function(J){return h.log('Media-keys created for "'+i+'"'),U.then(function(se){return se?h.setMediaKeysServerCertificate(J,i,se):J})}),C.mediaKeys.catch(function(J){h.error('Failed to create media-keys for "'+i+'"}: '+J)}),C.mediaKeys})}return y.then(function(){return v.mediaKeys})},d.createMediaKeySessionContext=function(i){var o=i.decryptdata,u=i.keySystem,h=i.mediaKeys;this.log('Creating key-system session "'+u+'" keyId: '+sn_hexDump(o.keyId||[]));var p=h.createSession(),v={decryptdata:o,keySystem:u,mediaKeys:h,mediaKeysSession:p,keyStatus:"status-pending"};return this.mediaKeySessions.push(v),v},d.renewKeySession=function(i){var o=i.decryptdata;if(o.pssh){var u=this.createMediaKeySessionContext(i),h=this.getKeyIdString(o);this.keyIdToKeySessionPromise[h]=this.generateRequestWithPreferredKeySession(u,"cenc",o.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(i)},d.getKeyIdString=function(i){if(!i)throw new Error("Could not read keyId of undefined decryptdata");if(null===i.keyId)throw new Error("keyId is null");return sn_hexDump(i.keyId)},d.updateKeySession=function(i,o){var u,h=i.mediaKeysSession;return this.log('Updating key-session "'+h.sessionId+'" for keyID '+sn_hexDump((null==(u=i.decryptdata)?void 0:u.keyId)||[])+"\n      } (data length: "+(o&&o.byteLength)+")"),h.update(o)},d.selectKeySystemFormat=function(i){var o=Object.keys(i.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+i.sn+" "+i.type+": "+i.level+") key formats "+o.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(o)),this.keyFormatPromise},d.getKeyFormatPromise=function(i){var o=this;return new Promise(function(u,h){var p=Zt(o.config),v=i.map(it).filter(function(y){return!!y&&-1!==p.indexOf(y)});return o.getKeySystemSelectionPromise(v).then(function(y){var C=y.keySystem,R=un(C);R?u(R):h(new Error('Unable to find format for key-system "'+C+'"'))}).catch(h)})},d.loadKey=function(i){var o=this,u=i.keyInfo.decryptdata,h=this.getKeyIdString(u),p="(keyId: "+h+' format: "'+u.keyFormat+'" method: '+u.method+" uri: "+u.uri+")";this.log("Starting session for key "+p);var v=this.keyIdToKeySessionPromise[h];return v||(v=this.keyIdToKeySessionPromise[h]=this.getKeySystemForKeyPromise(u).then(function(y){var C=y.keySystem,R=y.mediaKeys;return o.throwIfDestroyed(),o.log("Handle encrypted media sn: "+i.frag.sn+" "+i.frag.type+": "+i.frag.level+" using key "+p),o.attemptSetMediaKeys(C,R).then(function(){o.throwIfDestroyed();var U=o.createMediaKeySessionContext({keySystem:C,mediaKeys:R,decryptdata:u});return o.generateRequestWithPreferredKeySession(U,"cenc",u.pssh,"playlist-key")})})).catch(function(y){return o.handleError(y)}),v},d.throwIfDestroyed=function(i){if(!this.hls)throw new Error("invalid state")},d.handleError=function(i){this.hls&&(this.error(i.message),this.hls.trigger(x.ERROR,i instanceof er?i.data:{type:Ee.KEY_SYSTEM_ERROR,details:ge.KEY_SYSTEM_NO_KEYS,error:i,fatal:!0}))},d.getKeySystemForKeyPromise=function(i){var o=this.getKeyIdString(i),u=this.keyIdToKeySessionPromise[o];if(!u){var h=it(i.keyFormat),p=h?[h]:Zt(this.config);return this.attemptKeySystemAccess(p)}return u},d.getKeySystemSelectionPromise=function(i){if(i.length||(i=Zt(this.config)),0===i.length)throw new er({type:Ee.KEY_SYSTEM_ERROR,details:ge.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(i)},d._onMediaEncrypted=function(i){var o=this,u=i.initDataType,h=i.initData;if(this.debug('"'+i.type+'" event: init data type: "'+u+'"'),null!==h){var p,v;if("sinf"===u&&this.config.drmSystems[at.FAIRPLAY]){var y=Pt(new Uint8Array(h));try{var C=Z(JSON.parse(y).sinf),R=On(new Uint8Array(C));if(!R)return;p=R.subarray(8,24),v=at.FAIRPLAY}catch{return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var U=function Kl(g){if(!(g instanceof ArrayBuffer)||g.byteLength<32)return null;var d={version:0,systemId:"",kids:null,data:null},c=new DataView(g),i=c.getUint32(0);if(g.byteLength!==i&&i>44)return null;if(1886614376!==c.getUint32(4)||(d.version=c.getUint32(8)>>>24,d.version>1))return null;d.systemId=sn_hexDump(new Uint8Array(g,12,16));var u=c.getUint32(28);if(0===d.version){if(i-32<u)return null;d.data=new Uint8Array(g,32,u)}else if(1===d.version){d.kids=[];for(var h=0;h<u;h++)d.kids.push(new Uint8Array(g,32+16*h,16))}return d}(h);if(null===U)return;0===U.version&&U.systemId===vt_WIDEVINE&&U.data&&(p=U.data.subarray(8,24)),v=function Bt(g){if(g===vt_WIDEVINE)return at.WIDEVINE}(U.systemId)}if(v&&p){for(var Ke,J=sn_hexDump(p),se=this.keyIdToKeySessionPromise,ye=this.mediaKeySessions,Ae=se[J],Ue=function(){var yt=ye[Xe],nn=yt.decryptdata;if(nn.pssh||!nn.keyId)return 0;var qt=sn_hexDump(nn.keyId);return J===qt||-1!==nn.uri.replace(/-/g,"").indexOf(J)?(Ae=se[qt],delete se[qt],nn.pssh=new Uint8Array(h),nn.keyId=p,Ae=se[J]=Ae.then(function(){return o.generateRequestWithPreferredKeySession(yt,u,h,"encrypted-event-key-match")}),1):void 0},Xe=0;Xe<ye.length&&(0===(Ke=Ue())||1!==Ke);Xe++);Ae||(Ae=se[J]=this.getKeySystemSelectionPromise([v]).then(function(pt){var yt,nn=pt.keySystem,qt=pt.mediaKeys;o.throwIfDestroyed();var Dt=new qa("ISO-23001-7",J,null!=(yt=un(nn))?yt:"");return Dt.pssh=new Uint8Array(h),Dt.keyId=p,o.attemptSetMediaKeys(nn,qt).then(function(){o.throwIfDestroyed();var on=o.createMediaKeySessionContext({decryptdata:Dt,keySystem:nn,mediaKeys:qt});return o.generateRequestWithPreferredKeySession(on,u,h,"encrypted-event-no-match")})})),Ae.catch(function(pt){return o.handleError(pt)})}}},d._onWaitingForKey=function(i){this.log('"'+i.type+'" event')},d.attemptSetMediaKeys=function(i,o){var u=this,h=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+i+'"');var p=Promise.all(h).then(function(){if(!u.media)throw new Error("Attempted to set mediaKeys without media element attached");return u.media.setMediaKeys(o)});return this.setMediaKeysQueue.push(p),p.then(function(){u.log('Media-keys set for "'+i+'"'),h.push(p),u.setMediaKeysQueue=u.setMediaKeysQueue.filter(function(v){return-1===h.indexOf(v)})})},d.generateRequestWithPreferredKeySession=function(i,o,u,h){var p,v,y=this,C=null==(p=this.config.drmSystems)||null==(v=p[i.keySystem])?void 0:v.generateRequest;if(C)try{var R=C.call(this.hls,o,u,i);if(!R)throw new Error("Invalid response from configured generateRequest filter");o=R.initDataType,u=i.decryptdata.pssh=R.initData?new Uint8Array(R.initData):null}catch(Ke){var U;if(this.warn(Ke.message),null!=(U=this.hls)&&U.config.debug)throw Ke}if(null===u)return this.log('Skipping key-session request for "'+h+'" (no initData)'),Promise.resolve(i);var J=this.getKeyIdString(i.decryptdata);this.log('Generating key-session request for "'+h+'": '+J+" (init data type: "+o+" length: "+(u?u.byteLength:null)+")");var se=new Nl,ye=i._onmessage=function(Ke){var Xe=i.mediaKeysSession;if(Xe){var pt=Ke.messageType,yt=Ke.message;y.log('"'+pt+'" message event for session "'+Xe.sessionId+'" message size: '+yt.byteLength),"license-request"===pt||"license-renewal"===pt?y.renewLicense(i,yt).catch(function(nn){y.handleError(nn),se.emit("error",nn)}):"license-release"===pt?i.keySystem===at.FAIRPLAY&&(y.updateKeySession(i,rt("acknowledged")),y.removeSession(i)):y.warn('unhandled media key message type "'+pt+'"')}else se.emit("error",new Error("invalid state"))},Ae=i._onkeystatuseschange=function(Ke){if(i.mediaKeysSession){y.onKeyStatusChange(i);var pt=i.keyStatus;se.emit("keyStatus",pt),"expired"===pt&&(y.warn(i.keySystem+" expired for key "+J),y.renewKeySession(i))}else se.emit("error",new Error("invalid state"))};i.mediaKeysSession.addEventListener("message",ye),i.mediaKeysSession.addEventListener("keystatuseschange",Ae);var Ue=new Promise(function(Ke,Xe){se.on("error",Xe),se.on("keyStatus",function(pt){pt.startsWith("usable")?Ke():"output-restricted"===pt?Xe(new er({type:Ee.KEY_SYSTEM_ERROR,details:ge.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===pt?Xe(new er({type:Ee.KEY_SYSTEM_ERROR,details:ge.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+pt+'"')):"expired"===pt?Xe(new Error("key expired while generating request")):y.warn('unhandled key status change "'+pt+'"')})});return i.mediaKeysSession.generateRequest(o,u).then(function(){var Ke;y.log('Request generated for key-session "'+(null==(Ke=i.mediaKeysSession)?void 0:Ke.sessionId)+'" keyId: '+J)}).catch(function(Ke){throw new er({type:Ee.KEY_SYSTEM_ERROR,details:ge.KEY_SYSTEM_NO_SESSION,error:Ke,fatal:!1},"Error generating key-session request: "+Ke)}).then(function(){return Ue}).catch(function(Ke){throw se.removeAllListeners(),y.removeSession(i),Ke}).then(function(){return se.removeAllListeners(),i})},d.onKeyStatusChange=function(i){var o=this;i.mediaKeysSession.keyStatuses.forEach(function(u,h){o.log('key status change "'+u+'" for keyStatuses keyId: '+sn_hexDump("buffer"in h?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):new Uint8Array(h))+" session keyId: "+sn_hexDump(new Uint8Array(i.decryptdata.keyId||[]))+" uri: "+i.decryptdata.uri),i.keyStatus=u})},d.fetchServerCertificate=function(i){var o=this.config,h=new(0,o.loader)(o),p=this.getServerCertificateUrl(i);return p?(this.log('Fetching server certificate for "'+i+'"'),new Promise(function(v,y){var C={responseType:"arraybuffer",url:p},R=o.certLoadPolicy.default;h.load(C,{loadPolicy:R,timeout:R.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},{onSuccess:function(ye,Ae,Ue,Ke){v(ye.data)},onError:function(ye,Ae,Ue,Ke){y(new er({type:Ee.KEY_SYSTEM_ERROR,details:ge.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:Ue,response:hr({url:C.url,data:void 0},ye)},'"'+i+'" certificate request failed ('+p+"). Status: "+ye.code+" ("+ye.text+")"))},onTimeout:function(ye,Ae,Ue){y(new er({type:Ee.KEY_SYSTEM_ERROR,details:ge.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:Ue,response:{url:C.url,data:void 0}},'"'+i+'" certificate request timed out ('+p+")"))},onAbort:function(ye,Ae,Ue){y(new Error("aborted"))}})})):Promise.resolve()},d.setMediaKeysServerCertificate=function(i,o,u){var h=this;return new Promise(function(p,v){i.setServerCertificate(u).then(function(y){h.log("setServerCertificate "+(y?"success":"not supported by CDM")+" ("+u?.byteLength+') on "'+o+'"'),p(i)}).catch(function(y){v(new er({type:Ee.KEY_SYSTEM_ERROR,details:ge.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:y,fatal:!0},y.message))})})},d.renewLicense=function(i,o){var u=this;return this.requestLicense(i,new Uint8Array(o)).then(function(h){return u.updateKeySession(i,new Uint8Array(h)).catch(function(p){throw new er({type:Ee.KEY_SYSTEM_ERROR,details:ge.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:p,fatal:!0},p.message)})})},d.unpackPlayReadyKeyMessage=function(i,o){var u=String.fromCharCode.apply(null,new Uint16Array(o.buffer));if(!u.includes("PlayReadyKeyMessage"))return i.setRequestHeader("Content-Type","text/xml; charset=utf-8"),o;var h=(new DOMParser).parseFromString(u,"application/xml"),p=h.querySelectorAll("HttpHeader");if(p.length>0)for(var v,y=0,C=p.length;y<C;y++){var R,U,J=null==(R=(v=p[y]).querySelector("name"))?void 0:R.textContent,se=null==(U=v.querySelector("value"))?void 0:U.textContent;J&&se&&i.setRequestHeader(J,se)}var ye=h.querySelector("Challenge"),Ae=ye?.textContent;if(!Ae)throw new Error("Cannot find <Challenge> in key message");return rt(atob(Ae))},d.setupLicenseXHR=function(i,o,u,h){var p=this,v=this.config.licenseXhrSetup;return v?Promise.resolve().then(function(){if(!u.decryptdata)throw new Error("Key removed");return v.call(p.hls,i,o,u,h)}).catch(function(y){if(!u.decryptdata)throw y;return i.open("POST",o,!0),v.call(p.hls,i,o,u,h)}).then(function(y){return i.readyState||i.open("POST",o,!0),{xhr:i,licenseChallenge:y||h}}):(i.open("POST",o,!0),Promise.resolve({xhr:i,licenseChallenge:h}))},d.requestLicense=function(i,o){var u=this,h=this.config.keyLoadPolicy.default;return new Promise(function(p,v){var y=u.getLicenseServerUrl(i.keySystem);u.log("Sending license request to URL: "+y);var C=new XMLHttpRequest;C.responseType="arraybuffer",C.onreadystatechange=function(){if(!u.hls||!i.mediaKeysSession)return v(new Error("invalid state"));if(4===C.readyState)if(200===C.status){u._requestLicenseFailureCount=0;var R=C.response;u.log("License received "+(R instanceof ArrayBuffer?R.byteLength:R));var U=u.config.licenseResponseCallback;if(U)try{R=U.call(u.hls,C,y,i)}catch(Ae){u.error(Ae)}p(R)}else{var J=h.errorRetry,se=J?J.maxNumRetry:0;u._requestLicenseFailureCount++,u._requestLicenseFailureCount>se||C.status>=400&&C.status<500?v(new er({type:Ee.KEY_SYSTEM_ERROR,details:ge.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:C,response:{url:y,data:void 0,code:C.status,text:C.statusText}},"License Request XHR failed ("+y+"). Status: "+C.status+" ("+C.statusText+")")):(u.warn("Retrying license request, "+(se-u._requestLicenseFailureCount+1)+" attempts left"),u.requestLicense(i,o).then(p,v))}},i.licenseXhr&&i.licenseXhr.readyState!==XMLHttpRequest.DONE&&i.licenseXhr.abort(),i.licenseXhr=C,u.setupLicenseXHR(C,y,i,o).then(function(R){var U=R.xhr,J=R.licenseChallenge;i.keySystem==at.PLAYREADY&&(J=u.unpackPlayReadyKeyMessage(U,J)),U.send(J)})})},d.onMediaAttached=function(i,o){if(this.config.emeEnabled){var u=o.media;this.media=u,u.addEventListener("encrypted",this.onMediaEncrypted),u.addEventListener("waitingforkey",this.onWaitingForKey)}},d.onMediaDetached=function(){var i=this,o=this.media,u=this.mediaKeySessions;o&&(o.removeEventListener("encrypted",this.onMediaEncrypted),o.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},qa.clearKeyUriToKeyIdMap();var h=u.length;g.CDMCleanupPromise=Promise.all(u.map(function(p){return i.removeSession(p)}).concat(o?.setMediaKeys(null).catch(function(p){i.log("Could not clear media keys: "+p)}))).then(function(){h&&(i.log("finished closing key sessions and clearing media keys"),u.length=0)}).catch(function(p){i.log("Could not close sessions and clear media keys: "+p)})},d.onManifestLoading=function(){this.keyFormatPromise=null},d.onManifestLoaded=function(i,o){var u=o.sessionKeys;if(u&&this.config.emeEnabled&&!this.keyFormatPromise){var h=u.reduce(function(p,v){return-1===p.indexOf(v.keyFormat)&&p.push(v.keyFormat),p},[]);this.log("Selecting key-system from session-keys "+h.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(h)}},d.removeSession=function(i){var o=this,u=i.mediaKeysSession,h=i.licenseXhr;if(u){this.log("Remove licenses and keys and close session "+u.sessionId),i._onmessage&&(u.removeEventListener("message",i._onmessage),i._onmessage=void 0),i._onkeystatuseschange&&(u.removeEventListener("keystatuseschange",i._onkeystatuseschange),i._onkeystatuseschange=void 0),h&&h.readyState!==XMLHttpRequest.DONE&&h.abort(),i.mediaKeysSession=i.decryptdata=i.licenseXhr=void 0;var p=this.mediaKeySessions.indexOf(i);return p>-1&&this.mediaKeySessions.splice(p,1),u.remove().catch(function(v){o.log("Could not remove session: "+v)}).then(function(){return u.close()}).catch(function(v){o.log("Could not close session: "+v)})}},g}();Mn.CDMCleanupPromise=void 0;var Ut,er=function(g){function d(c,i){var o;return(o=g.call(this,i)||this).data=void 0,c.error||(c.error=new Error(i)),o.data=c,c.err=c.error,o}return _(d,g),d}(T(Error)),Jn=function(g){return g.MANIFEST="m",g.AUDIO="a",g.VIDEO="v",g.MUXED="av",g.INIT="i",g.CAPTION="c",g.TIMED_TEXT="tt",g.KEY="k",g.OTHER="o",g}(Jn||{}),At=function(g){return g.DASH="d",g.HLS="h",g.SMOOTH="s",g.OTHER="o",g}(At||{}),$t=function(g){return g.OBJECT="CMCD-Object",g.REQUEST="CMCD-Request",g.SESSION="CMCD-Session",g.STATUS="CMCD-Status",g}($t||{}),rn=((Ut={})[$t.OBJECT]=["br","d","ot","tb"],Ut[$t.REQUEST]=["bl","dl","mtp","nor","nrr","su"],Ut[$t.SESSION]=["cid","pr","sf","sid","st","v"],Ut[$t.STATUS]=["bs","rtp"],Ut),mn=function g(d,c){this.value=void 0,this.params=void 0,Array.isArray(d)&&(d=d.map(function(i){return i instanceof g?i:new g(i)})),this.value=d,this.params=c},Zn=function(d){this.description=void 0,this.description=d},Bn="Dict";function nr(g,d,c,i){return new Error("failed to "+g+' "'+function Hn(g){return Array.isArray(g)?JSON.stringify(g):g instanceof Map?"Map{}":g instanceof Set?"Set{}":"object"==typeof g?JSON.stringify(g):String(g)}(d)+'" as '+c,{cause:i})}var Xt="Bare Item",Dn="Boolean",Fn="Byte Sequence",Ln="Decimal",Gn="Integer";var ct=/[\x00-\x1f\x7f]+/,jt="Token",Ge="Key";function We(g,d,c){return nr("serialize",g,d,c)}function An(g){if(!1===ArrayBuffer.isView(g))throw We(g,Fn);return":"+function gn(g){return btoa(String.fromCharCode.apply(String,g))}(g)+":"}function pr(g){if(function Ct(g){return g<-999999999999999||999999999999999<g}(g))throw We(g,Gn);return g.toString()}function Bi(g,d){if(g<0)return-Bi(-g,d);var c=Math.pow(10,d);if(Math.abs(g*c%1-.5)<Number.EPSILON){var o=Math.floor(g*c);return(o%2==0?o:o+1)/c}return Math.round(g*c)/c}function di(g){var d=Bi(g,3);if(Math.floor(Math.abs(d)).toString().length>12)throw We(g,Ln);var c=d.toString();return c.includes(".")?c:c+".0"}var Si="String";function vs(g){var d=function mi(g){return g.description||g.toString().slice(7,-1)}(g);if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(d))throw We(d,jt);return d}function Qa(g){switch(typeof g){case"number":if(!Q(g))throw We(g,Xt);return Number.isInteger(g)?pr(g):di(g);case"string":return function Li(g){if(ct.test(g))throw We(g,Si);return'"'+g.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}(g);case"symbol":return vs(g);case"boolean":return function Mt(g){if("boolean"!=typeof g)throw We(g,Dn);return g?"?1":"?0"}(g);case"object":if(g instanceof Date)return function ci(g){return"@"+pr(g.getTime()/1e3)}(g);if(g instanceof Uint8Array)return An(g);if(g instanceof Zn)return vs(g);default:throw We(g,Xt)}}function $o(g){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(g))throw We(g,Ge);return g}function ba(g){return null==g?"":Object.entries(g).map(function(d){var c=d[0],i=d[1];return!0===i?";"+$o(c):";"+$o(c)+"="+Qa(i)}).join("")}function To(g){return g instanceof mn?""+Qa(g.value)+ba(g.params):Qa(g)}function Ba(g,d){var c;if(void 0===d&&(d={whitespace:!0}),"object"!=typeof g)throw We(g,Bn);var i=g instanceof Map?g.entries():Object.entries(g),o=null!=(c=d)&&c.whitespace?" ":"";return Array.from(i).map(function(u){var h=u[0],p=u[1];p instanceof mn||(p=new mn(p));var v=$o(h);return!0===p.value?v+=ba(p.params):(v+="=",Array.isArray(p.value)?v+=function Ja(g){return"("+g.value.map(To).join(" ")+")"+ba(g.params)}(p):v+=To(p)),v}).join(","+o)}var Ol=function(d){return"ot"===d||"sf"===d||"st"===d},Us=function(d){return"number"==typeof d?Q(d):null!=d&&""!==d&&!1!==d};var es=function(d){return Math.round(d)},Rt=function(d){return 100*es(d/100)},bn={br:es,d:es,bl:Rt,dl:Rt,mtp:Rt,nor:function(d,c){return null!=c&&c.baseUrl&&(d=function Bs(g,d){var c=new URL(g),i=new URL(d);if(c.origin!==i.origin)return g;for(var o=c.pathname.split("/").slice(1),u=i.pathname.split("/").slice(1,-1);o[0]===u[0];)o.shift(),u.shift();for(;u.length;)u.shift(),o.unshift("..");return o.join("/")}(d,c.baseUrl)),encodeURIComponent(d)},rtp:Rt,tb:es};function lr(g,d){return void 0===d&&(d={}),g?function ao(g,d){return Ba(g,d)}(function $n(g,d){var c={};if(null==g||"object"!=typeof g)return c;var i=Object.keys(g).sort(),o=E({},bn,d?.formatters),u=d?.filter;return i.forEach(function(h){if(null==u||!u(h)){var p=g[h],v=o[h];v&&(p=v(p,d)),("v"!==h||1!==p)&&("pr"==h&&1===p||Us(p)&&(Ol(h)&&"string"==typeof p&&(p=new Zn(p)),c[h]=p))}}),c}(g,d),E({whitespace:!1},d)):""}function jr(g,d,c){return E(g,function Vr(g,d){var c;if(void 0===d&&(d={}),!g)return{};var i=Object.entries(g),o=Object.entries(rn).concat(Object.entries((null==(c=d)?void 0:c.customHeaderMap)||{})),u=i.reduce(function(h,p){var v,C=p[0],R=p[1],U=(null==(v=o.find(function(J){return J[1].includes(C)}))?void 0:v[0])||$t.REQUEST;return null!=h[U]||(h[U]={}),h[U][C]=R,h},{});return Object.entries(u).reduce(function(h,p){return h[p[0]]=lr(p[1],d),h},{})}(d,c))}var yr="CMCD";var gi=/CMCD=[^&#]+/;function ts(g,d,c){var i=function Di(g,d){if(void 0===d&&(d={}),!g)return"";var c=lr(g,d);return yr+"="+encodeURIComponent(c)}(d,c);if(!i)return g;if(gi.test(g))return g.replace(gi,i);var o=g.includes("?")?"&":"?";return""+g+o+i}var Pl=function(){function g(c){var i=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){i.initialized&&(i.starved=!0),i.buffering=!0},this.onPlaying=function(){i.initialized||(i.initialized=!0),i.buffering=!1},this.applyPlaylistData=function(h){try{i.apply(h,{ot:Jn.MANIFEST,su:!i.initialized})}catch(p){Pe.warn("Could not generate manifest CMCD data.",p)}},this.applyFragmentData=function(h){try{var p=h.frag,v=i.hls.levels[p.level],y=i.getObjectType(p),C={d:1e3*p.duration,ot:y};(y===Jn.VIDEO||y===Jn.AUDIO||y==Jn.MUXED)&&(C.br=v.bitrate/1e3,C.tb=i.getTopBandwidth(y)/1e3,C.bl=i.getBufferLength(y)),i.apply(h,C)}catch(R){Pe.warn("Could not generate segment CMCD data.",R)}},this.hls=c;var o=this.config=c.config,u=o.cmcd;null!=u&&(o.pLoader=this.createPlaylistLoader(),o.fLoader=this.createFragmentLoader(),this.sid=u.sessionId||function Aa(){try{return crypto.randomUUID()}catch{try{var g=URL.createObjectURL(new Blob),d=g.toString();return URL.revokeObjectURL(g),d.slice(d.lastIndexOf("/")+1)}catch{var c=(new Date).getTime(),i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){var p=(c+16*Math.random())%16|0;return c=Math.floor(c/16),("x"==h?p:3&p|8).toString(16)});return i}}}(),this.cid=u.contentId,this.useHeaders=!0===u.useHeaders,this.includeKeys=u.includeKeys,this.registerListeners())}var d=g.prototype;return d.registerListeners=function(){var i=this.hls;i.on(x.MEDIA_ATTACHED,this.onMediaAttached,this),i.on(x.MEDIA_DETACHED,this.onMediaDetached,this),i.on(x.BUFFER_CREATED,this.onBufferCreated,this)},d.unregisterListeners=function(){var i=this.hls;i.off(x.MEDIA_ATTACHED,this.onMediaAttached,this),i.off(x.MEDIA_DETACHED,this.onMediaDetached,this),i.off(x.BUFFER_CREATED,this.onBufferCreated,this)},d.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null},d.onMediaAttached=function(i,o){this.media=o.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},d.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},d.onBufferCreated=function(i,o){var u,h;this.audioBuffer=null==(u=o.tracks.audio)?void 0:u.buffer,this.videoBuffer=null==(h=o.tracks.video)?void 0:h.buffer},d.createData=function(){var i;return{v:1,sf:At.HLS,sid:this.sid,cid:this.cid,pr:null==(i=this.media)?void 0:i.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},d.apply=function(i,o){void 0===o&&(o={}),E(o,this.createData()),this.starved&&(o.ot===Jn.INIT||o.ot===Jn.VIDEO||o.ot===Jn.MUXED)&&(o.bs=!0,o.su=!0,this.starved=!1),null==o.su&&(o.su=this.buffering);var h=this.includeKeys;h&&(o=Object.keys(o).reduce(function(p,v){return h.includes(v)&&(p[v]=o[v]),p},{})),this.useHeaders?(i.headers||(i.headers={}),jr(i.headers,o)):i.url=ts(i.url,o)},d.getObjectType=function(i){var o=i.type;return"subtitle"===o?Jn.TIMED_TEXT:"initSegment"===i.sn?Jn.INIT:"audio"===o?Jn.AUDIO:"main"===o?this.hls.audioTracks.length?Jn.VIDEO:Jn.MUXED:void 0},d.getTopBandwidth=function(i){var u,o=0,h=this.hls;if(i===Jn.AUDIO)u=h.audioTracks;else{var p=h.maxAutoLevel;u=h.levels.slice(0,p>-1?p+1:h.levels.length)}for(var C,y=ce(u);!(C=y()).done;){var R=C.value;R.bitrate>o&&(o=R.bitrate)}return o>0?o:NaN},d.getBufferLength=function(i){var o=this.hls.media,u=i===Jn.AUDIO?this.audioBuffer:this.videoBuffer;return u&&o?1e3*ui.bufferInfo(u,o.currentTime,this.config.maxBufferHole).len:NaN},d.createPlaylistLoader=function(){var o=this.applyPlaylistData,u=this.config.pLoader||this.config.loader;return function(){function h(v){this.loader=void 0,this.loader=new u(v)}var p=h.prototype;return p.destroy=function(){this.loader.destroy()},p.abort=function(){this.loader.abort()},p.load=function(y,C,R){o(y),this.loader.load(y,C,R)},Ce(h,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),h}()},d.createFragmentLoader=function(){var o=this.applyFragmentData,u=this.config.fLoader||this.config.loader;return function(){function h(v){this.loader=void 0,this.loader=new u(v)}var p=h.prototype;return p.destroy=function(){this.loader.destroy()},p.abort=function(){this.loader.abort()},p.load=function(y,C,R){o(y),this.loader.load(y,C,R)},Ce(h,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),h}()},g}(),fd=function(){function g(c){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=c,this.log=Pe.log.bind(Pe,"[content-steering]:"),this.registerListeners()}var d=g.prototype;return d.registerListeners=function(){var i=this.hls;i.on(x.MANIFEST_LOADING,this.onManifestLoading,this),i.on(x.MANIFEST_LOADED,this.onManifestLoaded,this),i.on(x.MANIFEST_PARSED,this.onManifestParsed,this),i.on(x.ERROR,this.onError,this)},d.unregisterListeners=function(){var i=this.hls;i&&(i.off(x.MANIFEST_LOADING,this.onManifestLoading,this),i.off(x.MANIFEST_LOADED,this.onManifestLoaded,this),i.off(x.MANIFEST_PARSED,this.onManifestParsed,this),i.off(x.ERROR,this.onError,this))},d.startLoad=function(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){var i=1e3*this.timeToLoad-(performance.now()-this.updated);if(i>0)return void this.scheduleRefresh(this.uri,i)}this.loadSteeringManifest(this.uri)}},d.stopLoad=function(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()},d.clearTimeout=function(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)},d.destroy=function(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null},d.removeLevel=function(i){var o=this.levels;o&&(this.levels=o.filter(function(u){return u!==i}))},d.onManifestLoading=function(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null},d.onManifestLoaded=function(i,o){var u=o.contentSteering;null!==u&&(this.pathwayId=u.pathwayId,this.uri=u.uri,this.started&&this.startLoad())},d.onManifestParsed=function(i,o){this.audioTracks=o.audioTracks,this.subtitleTracks=o.subtitleTracks},d.onError=function(i,o){var u=o.errorAction;if(u?.action===Er_SendAlternateToPenaltyBox&&u.flags===Po_MoveAllAlternatesMatchingHost){var h=this.levels,p=this.pathwayPriority,v=this.pathwayId;if(o.context){var y=o.context,C=y.groupId,R=y.pathwayId;C&&h?v=this.getPathwayForGroupId(C,y.type,v):R&&(v=R)}v in this.penalizedPathways||(this.penalizedPathways[v]=performance.now()),!p&&h&&(p=h.reduce(function(J,se){return-1===J.indexOf(se.pathwayId)&&J.push(se.pathwayId),J},[])),p&&p.length>1&&(this.updatePathwayPriority(p),u.resolved=this.pathwayId!==v),u.resolved||Pe.warn("Could not resolve "+o.details+' ("'+o.error.message+'") with content-steering for Pathway: '+v+" levels: "+(h&&h.length)+" priorities: "+JSON.stringify(p)+" penalized: "+JSON.stringify(this.penalizedPathways))}},d.filterParsedLevels=function(i){this.levels=i;var o=this.getLevelsForPathway(this.pathwayId);if(0===o.length){var u=i[0].pathwayId;this.log("No levels found in Pathway "+this.pathwayId+'. Setting initial Pathway to "'+u+'"'),o=this.getLevelsForPathway(u),this.pathwayId=u}return o.length!==i.length?(this.log("Found "+o.length+"/"+i.length+' levels in Pathway "'+this.pathwayId+'"'),o):i},d.getLevelsForPathway=function(i){return null===this.levels?[]:this.levels.filter(function(o){return i===o.pathwayId})},d.updatePathwayPriority=function(i){this.pathwayPriority=i;var o,u=this.penalizedPathways,h=performance.now();Object.keys(u).forEach(function(U){h-u[U]>3e5&&delete u[U]});for(var p=0;p<i.length;p++){var v=i[p];if(!(v in u)){if(v===this.pathwayId)return;var y=this.hls.nextLoadLevel,C=this.hls.levels[y];if((o=this.getLevelsForPathway(v)).length>0){this.log('Setting Pathway to "'+v+'"'),this.pathwayId=v,Qs(o),this.hls.trigger(x.LEVELS_UPDATED,{levels:o});var R=this.hls.levels[y];C&&R&&this.levels&&(R.attrs["STABLE-VARIANT-ID"]!==C.attrs["STABLE-VARIANT-ID"]&&R.bitrate!==C.bitrate&&this.log("Unstable Pathways change from bitrate "+C.bitrate+" to "+R.bitrate),this.hls.nextLoadLevel=y);break}}}},d.getPathwayForGroupId=function(i,o,u){for(var h=this.getLevelsForPathway(u).concat(this.levels||[]),p=0;p<h.length;p++)if(o===Gr_AUDIO_TRACK&&h[p].hasAudioGroup(i)||o===Gr_SUBTITLE_TRACK&&h[p].hasSubtitleGroup(i))return h[p].pathwayId;return u},d.clonePathways=function(i){var o=this,u=this.levels;if(u){var h={},p={};i.forEach(function(v){var y=v.ID,C=v["BASE-ID"],R=v["URI-REPLACEMENT"];if(!u.some(function(J){return J.pathwayId===y})){var U=o.getLevelsForPathway(C).map(function(J){var se=new $e(J.attrs);se["PATHWAY-ID"]=y;var ye=se.AUDIO&&se.AUDIO+"_clone_"+y,Ae=se.SUBTITLES&&se.SUBTITLES+"_clone_"+y;ye&&(h[se.AUDIO]=ye,se.AUDIO=ye),Ae&&(p[se.SUBTITLES]=Ae,se.SUBTITLES=Ae);var Ue=bh(J.uri,se["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",R),Ke=new ss({attrs:se,audioCodec:J.audioCodec,bitrate:J.bitrate,height:J.height,name:J.name,url:Ue,videoCodec:J.videoCodec,width:J.width});if(J.audioGroups)for(var Xe=1;Xe<J.audioGroups.length;Xe++)Ke.addGroupId("audio",J.audioGroups[Xe]+"_clone_"+y);if(J.subtitleGroups)for(var pt=1;pt<J.subtitleGroups.length;pt++)Ke.addGroupId("text",J.subtitleGroups[pt]+"_clone_"+y);return Ke});u.push.apply(u,U),_u(o.audioTracks,h,R,y),_u(o.subtitleTracks,p,R,y)}})}},d.loadSteeringManifest=function(i){var p,o=this,u=this.hls.config,h=u.loader;this.loader&&this.loader.destroy(),this.loader=new h(u);try{p=new self.URL(i)}catch{return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: "+i)}if("data:"!==p.protocol){var v=0|(this.hls.bandwidthEstimate||u.abrEwmaDefaultEstimate);p.searchParams.set("_HLS_pathway",this.pathwayId),p.searchParams.set("_HLS_throughput",""+v)}var y={responseType:"json",url:p.href},C=u.steeringManifestLoadPolicy.default,R=C.errorRetry||C.timeoutRetry||{},U={loadPolicy:C,timeout:C.maxLoadTimeMs,maxRetry:R.maxNumRetry||0,retryDelay:R.retryDelayMs||0,maxRetryDelay:R.maxRetryDelayMs||0},J={onSuccess:function(ye,Ae,Ue,Ke){o.log('Loaded steering manifest: "'+p+'"');var Xe=ye.data;if(1===Xe.VERSION){o.updated=performance.now(),o.timeToLoad=Xe.TTL;var pt=Xe["RELOAD-URI"],yt=Xe["PATHWAY-CLONES"],nn=Xe["PATHWAY-PRIORITY"];if(pt)try{o.uri=new self.URL(pt,p).href}catch{return o.enabled=!1,void o.log("Failed to parse Steering Manifest RELOAD-URI: "+pt)}o.scheduleRefresh(o.uri||Ue.url),yt&&o.clonePathways(yt);var qt={steeringManifest:Xe,url:p.toString()};o.hls.trigger(x.STEERING_MANIFEST_LOADED,qt),nn&&o.updatePathwayPriority(nn)}else o.log("Steering VERSION "+Xe.VERSION+" not supported!")},onError:function(ye,Ae,Ue,Ke){if(o.log("Error loading steering manifest: "+ye.code+" "+ye.text+" ("+Ae.url+")"),o.stopLoad(),410===ye.code)return o.enabled=!1,void o.log("Steering manifest "+Ae.url+" no longer available");var Xe=1e3*o.timeToLoad;if(429!==ye.code)o.scheduleRefresh(o.uri||Ae.url,Xe);else{var pt=o.loader;if("function"==typeof pt?.getResponseHeader){var yt=pt.getResponseHeader("Retry-After");yt&&(Xe=1e3*parseFloat(yt))}o.log("Steering manifest "+Ae.url+" rate limited")}},onTimeout:function(ye,Ae,Ue){o.log("Timeout loading steering manifest ("+Ae.url+")"),o.scheduleRefresh(o.uri||Ae.url)}};this.log("Requesting steering manifest: "+p),this.loader.load(y,U,J)},d.scheduleRefresh=function(i,o){var u=this;void 0===o&&(o=1e3*this.timeToLoad),this.clearTimeout(),this.reloadTimer=self.setTimeout(function(){var h,p=null==(h=u.hls)?void 0:h.media;!p||p.ended?u.scheduleRefresh(i,1e3*u.timeToLoad):u.loadSteeringManifest(i)},o)},g}();function _u(g,d,c,i){g&&Object.keys(d).forEach(function(o){var u=g.filter(function(h){return h.groupId===o}).map(function(h){var p=E({},h);return p.details=void 0,p.attrs=new $e(p.attrs),p.url=p.attrs.URI=bh(h.url,h.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",c),p.groupId=p.attrs["GROUP-ID"]=d[o],p.attrs["PATHWAY-ID"]=i,p});g.push.apply(g,u)})}function bh(g,d,c,i){var p,o=i.HOST,u=i.PARAMS,h=i[c];d&&(p=h?.[d],p&&(g=p));var v=new self.URL(g);return o&&!p&&(v.host=o),u&&Object.keys(u).sort().forEach(function(y){y&&v.searchParams.set(y,u[y])}),v.href}var fc=/^age:\s*[\d.]+\s*$/im,nf=function(){function g(c){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=c&&c.xhrSetup||null,this.stats=new mt,this.retryDelay=0}var d=g.prototype;return d.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null,this.stats=null},d.abortInternal=function(){var i=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),i&&(i.onreadystatechange=null,i.onprogress=null,4!==i.readyState&&(this.stats.aborted=!0,i.abort()))},d.abort=function(){var i;this.abortInternal(),null!=(i=this.callbacks)&&i.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},d.load=function(i,o,u){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=i,this.config=o,this.callbacks=u,this.loadInternal()},d.loadInternal=function(){var i=this,o=this.config,u=this.context;if(o&&u){var h=this.loader=new self.XMLHttpRequest,p=this.stats;p.loading.first=0,p.loaded=0,p.aborted=!1;var v=this.xhrSetup;v?Promise.resolve().then(function(){if(!i.stats.aborted)return v(h,u.url)}).catch(function(y){return h.open("GET",u.url,!0),v(h,u.url)}).then(function(){i.stats.aborted||i.openAndSendXhr(h,u,o)}).catch(function(y){i.callbacks.onError({code:h.status,text:y.message},u,h,p)}):this.openAndSendXhr(h,u,o)}},d.openAndSendXhr=function(i,o,u){i.readyState||i.open("GET",o.url,!0);var h=o.headers,p=u.loadPolicy,v=p.maxTimeToFirstByteMs,y=p.maxLoadTimeMs;if(h)for(var C in h)i.setRequestHeader(C,h[C]);o.rangeEnd&&i.setRequestHeader("Range","bytes="+o.rangeStart+"-"+(o.rangeEnd-1)),i.onreadystatechange=this.readystatechange.bind(this),i.onprogress=this.loadprogress.bind(this),i.responseType=o.responseType,self.clearTimeout(this.requestTimeout),u.timeout=v&&Q(v)?v:y,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),u.timeout),i.send()},d.readystatechange=function(){var i=this.context,o=this.loader,u=this.stats;if(i&&o){var h=o.readyState,p=this.config;if(!u.aborted&&h>=2&&(0===u.loading.first&&(u.loading.first=Math.max(self.performance.now(),u.loading.start),p.timeout!==p.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),p.timeout=p.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),p.loadPolicy.maxLoadTimeMs-(u.loading.first-u.loading.start)))),4===h)){self.clearTimeout(this.requestTimeout),o.onreadystatechange=null,o.onprogress=null;var v=o.status,y="text"!==o.responseType;if(v>=200&&v<300&&(y&&o.response||null!==o.responseText)){u.loading.end=Math.max(self.performance.now(),u.loading.first);var C=y?o.response:o.responseText;if(u.loaded=u.total="arraybuffer"===o.responseType?C.byteLength:C.length,u.bwEstimate=8e3*u.total/(u.loading.end-u.loading.first),!this.callbacks)return;var U=this.callbacks.onProgress;if(U&&U(u,i,C,o),!this.callbacks)return;this.callbacks.onSuccess({url:o.responseURL,data:C,code:v},u,i,o)}else{var se=p.loadPolicy.errorRetry;Js(se,u.retry,!1,{url:i.url,data:void 0,code:v})?this.retry(se):(Pe.error(v+" while loading "+i.url),this.callbacks.onError({code:v,text:o.statusText},i,o,u))}}}},d.loadtimeout=function(){var i,o=null==(i=this.config)?void 0:i.loadPolicy.timeoutRetry;if(Js(o,this.stats.retry,!0))this.retry(o);else{var h;Pe.warn("timeout while loading "+(null==(h=this.context)?void 0:h.url));var p=this.callbacks;p&&(this.abortInternal(),p.onTimeout(this.stats,this.context,this.loader))}},d.retry=function(i){var o=this.context,u=this.stats;this.retryDelay=eu(i,u.retry),u.retry++,Pe.warn((status?"HTTP Status "+status:"Timeout")+" while loading "+o?.url+", retrying "+u.retry+"/"+i.maxNumRetry+" in "+this.retryDelay+"ms"),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)},d.loadprogress=function(i){var o=this.stats;o.loaded=i.loaded,i.lengthComputable&&(o.total=i.total)},d.getCacheAge=function(){var i=null;if(this.loader&&fc.test(this.loader.getAllResponseHeaders())){var o=this.loader.getResponseHeader("age");i=o?parseFloat(o):null}return i},d.getResponseHeader=function(i){return this.loader&&new RegExp("^"+i+":\\s*[\\d.]+\\s*$","im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(i):null},g}();var Cy=/(\d+)-(\d+)\/(\d+)/,dd=function(){function g(c){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=c.fetchSetup||hp,this.controller=new self.AbortController,this.stats=new mt}var d=g.prototype;return d.destroy=function(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null},d.abortInternal=function(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())},d.abort=function(){var i;this.abortInternal(),null!=(i=this.callbacks)&&i.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},d.load=function(i,o,u){var h=this,p=this.stats;if(p.loading.start)throw new Error("Loader can only be used once.");p.loading.start=self.performance.now();var v=function Ah(g,d){var c={method:"GET",mode:"cors",credentials:"same-origin",signal:d,headers:new self.Headers(E({},g.headers))};return g.rangeEnd&&c.headers.set("Range","bytes="+g.rangeStart+"-"+String(g.rangeEnd-1)),c}(i,this.controller.signal),y=u.onProgress,C="arraybuffer"===i.responseType,R=C?"byteLength":"length",U=o.loadPolicy,J=U.maxTimeToFirstByteMs,se=U.maxLoadTimeMs;this.context=i,this.config=o,this.callbacks=u,this.request=this.fetchSetup(i,v),self.clearTimeout(this.requestTimeout),o.timeout=J&&Q(J)?J:se,this.requestTimeout=self.setTimeout(function(){h.abortInternal(),u.onTimeout(p,i,h.response)},o.timeout),self.fetch(this.request).then(function(ye){h.response=h.loader=ye;var Ae=Math.max(self.performance.now(),p.loading.start);if(self.clearTimeout(h.requestTimeout),o.timeout=se,h.requestTimeout=self.setTimeout(function(){h.abortInternal(),u.onTimeout(p,i,h.response)},se-(Ae-p.loading.start)),!ye.ok)throw new af(ye.statusText||"fetch, bad network response",ye.status,ye);return p.loading.first=Ae,p.total=function Es(g){var d=g.get("Content-Range");if(d){var c=function dp(g){var d=Cy.exec(g);if(d)return parseInt(d[2])-parseInt(d[1])+1}(d);if(Q(c))return c}var i=g.get("Content-Length");if(i)return parseInt(i)}(ye.headers)||p.total,y&&Q(o.highWaterMark)?h.loadProgressively(ye,p,i,o.highWaterMark,y):C?ye.arrayBuffer():"json"===i.responseType?ye.json():ye.text()}).then(function(ye){var Ae=h.response;if(!Ae)throw new Error("loader destroyed");self.clearTimeout(h.requestTimeout),p.loading.end=Math.max(self.performance.now(),p.loading.first);var Ue=ye[R];Ue&&(p.loaded=p.total=Ue);var Ke={url:Ae.url,data:ye,code:Ae.status};y&&!Q(o.highWaterMark)&&y(p,i,ye,Ae),u.onSuccess(Ke,p,i,Ae)}).catch(function(ye){self.clearTimeout(h.requestTimeout),p.aborted||u.onError({code:ye&&ye.code||0,text:ye?ye.message:null},i,ye?ye.details:null,p)})},d.getCacheAge=function(){var i=null;if(this.response){var o=this.response.headers.get("age");i=o?parseFloat(o):null}return i},d.getResponseHeader=function(i){return this.response?this.response.headers.get(i):null},d.loadProgressively=function(i,o,u,h,p){void 0===h&&(h=0);var v=new zu,y=i.body.getReader();return function R(){return y.read().then(function(U){if(U.done)return v.dataLength&&p(o,u,v.flush(),i),Promise.resolve(new ArrayBuffer(0));var J=U.value,se=J.length;return o.loaded+=se,se<h||v.dataLength?(v.push(J),v.dataLength>=h&&p(o,u,v.flush(),i)):p(o,u,J,i),R()}).catch(function(){return Promise.reject()})}()},g}();function hp(g,d){return new self.Request(g.url,d)}var af=function(g){function d(c,i,o){var u;return(u=g.call(this,c)||this).code=void 0,u.details=void 0,u.code=i,u.details=o,u}return _(d,g),d}(T(Error)),hd=/\s/,Ch={newCue:function(d,c,i,o){for(var h,p,v,y,C,u=[],R=self.VTTCue||self.TextTrackCue,U=0;U<o.rows.length;U++)if(v=!0,y=0,C="",!(h=o.rows[U]).isEmpty()){for(var J,se=0;se<h.chars.length;se++)hd.test(h.chars[se].uchar)&&v?y++:(C+=h.chars[se].uchar,v=!1);h.cueStartTime=c,c===i&&(i+=1e-4),y>=16?y--:y++;var ye=Oe(C.trim()),Ae=re(c,i,ye);null!=d&&null!=(J=d.cues)&&J.getCueById(Ae)||((p=new R(c,i,ye)).id=Ae,p.line=U+1,p.align="left",p.position=10+Math.min(80,10*Math.floor(8*y/32)),u.push(p))}return d&&u.length&&(u.sort(function(Ue,Ke){return"auto"===Ue.line||"auto"===Ke.line?0:Ue.line>8&&Ke.line>8?Ke.line-Ue.line:Ue.line-Ke.line}),u.forEach(function(Ue){return kc(d,Ue)})),u}},lf=hr(hr({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:nf,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:us,bufferController:sd,capLevelController:Kt,errorController:Bu,fpsController:Wt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:kn,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},function gp(){return{cueHandler:Ch,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}()),{},{subtitleStreamController:Th,subtitleTrackController:lc,timelineController:tt,audioStreamController:od,audioTrackController:ad,emeController:Mn,cmcdController:Pl,contentSteeringController:fd});function uf(g){return g&&"object"==typeof g?Array.isArray(g)?g.map(uf):Object.keys(g).reduce(function(d,c){return d[c]=uf(g[c]),d},{}):g}function Dh(g){var d=g.loader;d!==dd&&d!==nf?(Pe.log("[config]: Custom loader detected, cannot enable progressive streaming"),g.progressive=!1):function rf(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}()&&(g.loader=dd,g.progressive=!0,g.enableSoftwareAES=!0,Pe.log("[config]: Progressive streaming enabled, using FetchLoader"))}var cf,pp=function(g){function d(i,o){var u;return(u=g.call(this,i,"[level-controller]")||this)._levels=[],u._firstLevel=-1,u._maxAutoLevel=-1,u._startLevel=void 0,u.currentLevel=null,u.currentLevelIndex=-1,u.manualLevelIndex=-1,u.steering=void 0,u.onParsedComplete=void 0,u.steering=o,u._registerListeners(),u}_(d,g);var c=d.prototype;return c._registerListeners=function(){var o=this.hls;o.on(x.MANIFEST_LOADING,this.onManifestLoading,this),o.on(x.MANIFEST_LOADED,this.onManifestLoaded,this),o.on(x.LEVEL_LOADED,this.onLevelLoaded,this),o.on(x.LEVELS_UPDATED,this.onLevelsUpdated,this),o.on(x.FRAG_BUFFERED,this.onFragBuffered,this),o.on(x.ERROR,this.onError,this)},c._unregisterListeners=function(){var o=this.hls;o.off(x.MANIFEST_LOADING,this.onManifestLoading,this),o.off(x.MANIFEST_LOADED,this.onManifestLoaded,this),o.off(x.LEVEL_LOADED,this.onLevelLoaded,this),o.off(x.LEVELS_UPDATED,this.onLevelsUpdated,this),o.off(x.FRAG_BUFFERED,this.onFragBuffered,this),o.off(x.ERROR,this.onError,this)},c.destroy=function(){this._unregisterListeners(),this.steering=null,this.resetLevels(),g.prototype.destroy.call(this)},c.stopLoad=function(){this._levels.forEach(function(u){u.loadError=0,u.fragmentError=0}),g.prototype.stopLoad.call(this)},c.resetLevels=function(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1},c.onManifestLoading=function(o,u){this.resetLevels()},c.onManifestLoaded=function(o,u){var h=this.hls.config.preferManagedMediaSource,p=[],v={},y={},C=!1,R=!1,U=!1;u.levels.forEach(function(J){var se,ye,Ae=J.attrs,Ue=J.audioCodec,Ke=J.videoCodec;-1!==(null==(se=Ue)?void 0:se.indexOf("mp4a.40.34"))&&(cf||(cf=/chrome|firefox/i.test(navigator.userAgent)),cf&&(J.audioCodec=Ue=void 0)),Ue&&(J.audioCodec=Ue=Yn(Ue,h)),0===(null==(ye=Ke)?void 0:ye.indexOf("avc1"))&&(Ke=J.videoCodec=function Cr(g){var d=g.split(".");if(d.length>2){var c=d.shift()+".";return(c+=parseInt(d.shift()).toString(16))+("000"+parseInt(d.shift()).toString(16)).slice(-4)}return g}(Ke));var yt=J.unknownCodecs;if(C||(C=!(!J.width||!J.height)),R||(R=!!Ke),U||(U=!!Ue),!(null!=yt&&yt.length||Ue&&!Ni(Ue,"audio",h)||Ke&&!Ni(Ke,"video",h))){var Qn=(Ae["PATHWAY-ID"]||".")+"-"+J.bitrate+"-"+Ae.RESOLUTION+"-"+Ae["FRAME-RATE"]+"-"+Ae.CODECS+"-"+Ae["VIDEO-RANGE"]+"-"+Ae["HDCP-LEVEL"];if(v[Qn])if(v[Qn].uri===J.url||J.attrs["PATHWAY-ID"])v[Qn].addGroupId("audio",Ae.AUDIO),v[Qn].addGroupId("text",Ae.SUBTITLES);else{var mr=y[Qn]+=1;J.attrs["PATHWAY-ID"]=new Array(mr+1).join(".");var Pr=new ss(J);v[Qn]=Pr,p.push(Pr)}else{var or=new ss(J);v[Qn]=or,y[Qn]=1,p.push(or)}}}),this.filterAndSortMediaOptions(p,u,C,R,U)},c.filterAndSortMediaOptions=function(o,u,h,p,v){var y=this,C=[],R=[],U=o;if((h||p)&&v&&(U=U.filter(function(Dt){return(!!Dt.videoCodec||!(!Dt.width||!Dt.height))&&function Oo(g){return!!g&&$s.indexOf(g)>-1}(Dt.videoRange)})),0!==U.length){if(u.audioTracks){var J=this.hls.config.preferManagedMediaSource;dc(C=u.audioTracks.filter(function(Dt){return!Dt.audioCodec||Ni(Dt.audioCodec,"audio",J)}))}u.subtitles&&dc(R=u.subtitles);var se=U.slice(0);U.sort(function(Dt,on){if(Dt.attrs["HDCP-LEVEL"]!==on.attrs["HDCP-LEVEL"])return(Dt.attrs["HDCP-LEVEL"]||"")>(on.attrs["HDCP-LEVEL"]||"")?1:-1;if(h&&Dt.height!==on.height)return Dt.height-on.height;if(Dt.frameRate!==on.frameRate)return Dt.frameRate-on.frameRate;if(Dt.videoRange!==on.videoRange)return $s.indexOf(Dt.videoRange)-$s.indexOf(on.videoRange);if(Dt.videoCodec!==on.videoCodec){var an=dr(Dt.videoCodec),Sn=dr(on.videoCodec);if(an!==Sn)return Sn-an}if(Dt.uri===on.uri&&Dt.codecSet!==on.codecSet){var Rn=Io(Dt.codecSet),Qn=Io(on.codecSet);if(Rn!==Qn)return Qn-Rn}return Dt.averageBitrate!==on.averageBitrate?Dt.averageBitrate-on.averageBitrate:0});var ye=se[0];if(this.steering&&(U=this.steering.filterParsedLevels(U)).length!==se.length)for(var Ae=0;Ae<se.length;Ae++)if(se[Ae].pathwayId===U[0].pathwayId){ye=se[Ae];break}this._levels=U;for(var Ue=0;Ue<U.length;Ue++)if(U[Ue]===ye){var Ke;this._firstLevel=Ue;var Xe=ye.bitrate,pt=this.hls.bandwidthEstimate;if(this.log("manifest loaded, "+U.length+" level(s) found, first bitrate: "+Xe),void 0===(null==(Ke=this.hls.userConfig)?void 0:Ke.abrEwmaDefaultEstimate)){var yt=Math.min(Xe,this.hls.config.abrEwmaDefaultEstimateMax);yt>pt&&pt===lf.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=yt)}break}var qt={levels:U,audioTracks:C,subtitleTracks:R,sessionData:u.sessionData,sessionKeys:u.sessionKeys,firstLevel:this._firstLevel,stats:u.stats,audio:v,video:p,altAudio:!(v&&!p)&&C.some(function(Dt){return!!Dt.url})};this.hls.trigger(x.MANIFEST_PARSED,qt),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else Promise.resolve().then(function(){if(y.hls){u.levels.length&&y.warn("One or more CODECS in variant not supported: "+JSON.stringify(u.levels[0].attrs));var Dt=new Error("no level with compatible codecs found in manifest");y.hls.trigger(x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:u.url,error:Dt,reason:Dt.message})}})},c.onError=function(o,u){u.fatal||!u.context||u.context.type===Gr_LEVEL&&u.context.level===this.level&&this.checkRetry(u)},c.onFragBuffered=function(o,u){var h=u.frag;if(void 0!==h&&h.type===Tr_MAIN){var p=h.elementaryStreams;if(!Object.keys(p).some(function(y){return!!p[y]}))return;var v=this._levels[h.level];null!=v&&v.loadError&&(this.log("Resetting level error count of "+v.loadError+" on frag buffered"),v.loadError=0)}},c.onLevelLoaded=function(o,u){var h,C,p=u.level,v=u.details,y=this._levels[p];if(!y)return this.warn("Invalid level index "+p),void(null!=(C=u.deliveryDirectives)&&C.skip&&(v.deltaUpdateFailed=!0));p===this.currentLevelIndex?(0===y.fragmentError&&(y.loadError=0),this.playlistLoaded(p,u,y.details)):null!=(h=u.deliveryDirectives)&&h.skip&&(v.deltaUpdateFailed=!0)},c.loadPlaylist=function(o){g.prototype.loadPlaylist.call(this);var u=this.currentLevelIndex,h=this.currentLevel;if(h&&this.shouldLoadPlaylist(h)){var p=h.uri;if(o)try{p=o.addDirectives(p)}catch(y){this.warn("Could not construct new URL with HLS Delivery Directives: "+y)}var v=h.attrs["PATHWAY-ID"];this.log("Loading level index "+u+(void 0!==o?.msn?" at sn "+o.msn+" part "+o.part:"")+" with"+(v?" Pathway "+v:"")+" "+p),this.clearTimer(),this.hls.trigger(x.LEVEL_LOADING,{url:p,level:u,pathwayId:h.attrs["PATHWAY-ID"],id:0,deliveryDirectives:o||null})}},c.removeLevel=function(o){var h,u=this,p=this._levels.filter(function(v,y){return y!==o||(u.steering&&u.steering.removeLevel(v),v===u.currentLevel&&(u.currentLevel=null,u.currentLevelIndex=-1,v.details&&v.details.fragments.forEach(function(C){return C.level=-1})),!1)});Qs(p),this._levels=p,this.currentLevelIndex>-1&&null!=(h=this.currentLevel)&&h.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(x.LEVELS_UPDATED,{levels:p})},c.onLevelsUpdated=function(o,u){this._levels=u.levels},c.checkMaxAutoUpdated=function(){var o=this.hls,u=o.autoLevelCapping,h=o.maxAutoLevel,p=o.maxHdcpLevel;this._maxAutoLevel!==h&&(this._maxAutoLevel=h,this.hls.trigger(x.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:u,levels:this.levels,maxAutoLevel:h,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:p}))},Ce(d,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(o){var u=this._levels;if(0!==u.length){if(o<0||o>=u.length){var h=new Error("invalid level idx"),p=o<0;if(this.hls.trigger(x.ERROR,{type:Ee.OTHER_ERROR,details:ge.LEVEL_SWITCH_ERROR,level:o,fatal:p,error:h,reason:h.message}),p)return;o=Math.min(o,u.length-1)}var v=this.currentLevelIndex,y=this.currentLevel,C=y?y.attrs["PATHWAY-ID"]:void 0,R=u[o],U=R.attrs["PATHWAY-ID"];if(this.currentLevelIndex=o,this.currentLevel=R,v!==o||!R.details||!y||C!==U){this.log("Switching to level "+o+" ("+(R.height?R.height+"p ":"")+(R.videoRange?R.videoRange+" ":"")+(R.codecSet?R.codecSet+" ":"")+"@"+R.bitrate+")"+(U?" with Pathway "+U:"")+" from level "+v+(C?" with Pathway "+C:"")),this.hls.trigger(x.LEVEL_SWITCHING,{level:o,attrs:R.attrs,details:R.details,bitrate:R.bitrate,averageBitrate:R.averageBitrate,maxBitrate:R.maxBitrate,realBitrate:R.realBitrate,width:R.width,height:R.height,codecSet:R.codecSet,audioCodec:R.audioCodec,videoCodec:R.videoCodec,audioGroups:R.audioGroups,subtitleGroups:R.subtitleGroups,loaded:R.loaded,loadError:R.loadError,fragmentError:R.fragmentError,name:R.name,id:R.id,uri:R.uri,url:R.url,urlId:0,audioGroupIds:R.audioGroupIds,textGroupIds:R.textGroupIds});var se=R.details;if(!se||se.live){var ye=this.switchParams(R.uri,y?.details,se);this.loadPlaylist(ye)}}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(o){this.manualLevelIndex=o,void 0===this._startLevel&&(this._startLevel=o),-1!==o&&(this.level=o)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(o){this._firstLevel=o}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var o=this.hls.config.startLevel;return void 0!==o?o:this.hls.firstAutoLevel}return this._startLevel},set:function(o){this._startLevel=o}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(o){this.level=o,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=o)}}]),d}(pa);function dc(g){var d={};g.forEach(function(c){var i=c.groupId||"";c.id=d[i]=d[i]||0,d[i]++})}var Fl=function(){function g(c){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=c}var d=g.prototype;return d.abort=function(i){for(var o in this.keyUriToKeyInfo){var u=this.keyUriToKeyInfo[o].loader;if(u){var h;if(i&&i!==(null==(h=u.context)?void 0:h.frag.type))return;u.abort()}}},d.detach=function(){for(var i in this.keyUriToKeyInfo){var o=this.keyUriToKeyInfo[i];(o.mediaKeySessionContext||o.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[i]}},d.destroy=function(){for(var i in this.detach(),this.keyUriToKeyInfo){var o=this.keyUriToKeyInfo[i].loader;o&&o.destroy()}this.keyUriToKeyInfo={}},d.createKeyLoadError=function(i,o,u,h,p){return void 0===o&&(o=ge.KEY_LOAD_ERROR),new Qi({type:Ee.NETWORK_ERROR,details:o,fatal:!1,frag:i,response:p,error:u,networkDetails:h})},d.loadClear=function(i,o){var u=this;if(this.emeController&&this.config.emeEnabled)for(var h=i.sn,p=i.cc,v=function(){var R=o[y];if(p<=R.cc&&("initSegment"===h||"initSegment"===R.sn||h<R.sn))return u.emeController.selectKeySystemFormat(R).then(function(U){R.setKeyFormat(U)}),1},y=0;y<o.length&&!v();y++);},d.load=function(i){var o=this;return!i.decryptdata&&i.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(i).then(function(u){return o.loadInternal(i,u)}):this.loadInternal(i)},d.loadInternal=function(i,o){var u,h;o&&i.setKeyFormat(o);var p=i.decryptdata;if(!p){var v=new Error(o?"Expected frag.decryptdata to be defined after setting format "+o:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(i,ge.KEY_LOAD_ERROR,v))}var y=p.uri;if(!y)return Promise.reject(this.createKeyLoadError(i,ge.KEY_LOAD_ERROR,new Error('Invalid key URI: "'+y+'"')));var R,C=this.keyUriToKeyInfo[y];if(null!=(u=C)&&u.decryptdata.key)return p.key=C.decryptdata.key,Promise.resolve({frag:i,keyInfo:C});if(null!=(h=C)&&h.keyLoadPromise)switch(null==(R=C.mediaKeySessionContext)?void 0:R.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return C.keyLoadPromise.then(function(U){return p.key=U.keyInfo.decryptdata.key,{frag:i,keyInfo:C}})}switch(C=this.keyUriToKeyInfo[y]={decryptdata:p,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},p.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===p.keyFormat?this.loadKeyHTTP(C,i):this.loadKeyEME(C,i);case"AES-128":return this.loadKeyHTTP(C,i);default:return Promise.reject(this.createKeyLoadError(i,ge.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'+p.method+'"')))}},d.loadKeyEME=function(i,o){var u={frag:o,keyInfo:i};if(this.emeController&&this.config.emeEnabled){var h=this.emeController.loadKey(u);if(h)return(i.keyLoadPromise=h.then(function(p){return i.mediaKeySessionContext=p,u})).catch(function(p){throw i.keyLoadPromise=null,p})}return Promise.resolve(u)},d.loadKeyHTTP=function(i,o){var u=this,h=this.config,v=new(0,h.loader)(h);return o.keyLoader=i.loader=v,i.keyLoadPromise=new Promise(function(y,C){var R={keyInfo:i,frag:o,responseType:"arraybuffer",url:i.decryptdata.uri},U=h.keyLoadPolicy.default;v.load(R,{loadPolicy:U,timeout:U.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},{onSuccess:function(Ae,Ue,Ke,Xe){var pt=Ke.frag,yt=Ke.keyInfo;if(!pt.decryptdata||yt!==u.keyUriToKeyInfo[Ke.url])return C(u.createKeyLoadError(pt,ge.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),Xe));yt.decryptdata.key=pt.decryptdata.key=new Uint8Array(Ae.data),pt.keyLoader=null,yt.loader=null,y({frag:pt,keyInfo:yt})},onError:function(Ae,Ue,Ke,Xe){u.resetLoader(Ue),C(u.createKeyLoadError(o,ge.KEY_LOAD_ERROR,new Error("HTTP Error "+Ae.code+" loading key "+Ae.text),Ke,hr({url:R.url,data:void 0},Ae)))},onTimeout:function(Ae,Ue,Ke){u.resetLoader(Ue),C(u.createKeyLoadError(o,ge.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),Ke))},onAbort:function(Ae,Ue,Ke){u.resetLoader(Ue),C(u.createKeyLoadError(o,ge.INTERNAL_ABORTED,new Error("key loading aborted"),Ke))}})})},d.resetLoader=function(i){var o=i.frag,u=i.keyInfo,h=i.url,p=u.loader;o.keyLoader===p&&(o.keyLoader=null,u.loader=null),delete this.keyUriToKeyInfo[h],p&&p.destroy()},g}();function wh(){return self.SourceBuffer||self.WebKitSourceBuffer}function gd(){if(!Kr())return!1;var d=wh();return!d||d.prototype&&"function"==typeof d.prototype.appendBuffer&&"function"==typeof d.prototype.remove}var pd=function(){function g(c,i,o,u){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=c,this.media=i,this.fragmentTracker=o,this.hls=u}var d=g.prototype;return d.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},d.poll=function(i,o){var u=this.config,h=this.media,p=this.stalled;if(null!==h){var v=h.currentTime,y=h.seeking,C=this.seeking&&!y,R=!this.seeking&&y;if(this.seeking=y,v!==i){if(this.moved=!0,y||(this.nudgeRetry=0),null!==p){if(this.stallReported){var U=self.performance.now()-p;Pe.warn("playback not stuck anymore @"+v+", after "+Math.round(U)+"ms"),this.stallReported=!1}this.stalled=null}return}if(R||C)return void(this.stalled=null);if(h.paused&&!y||h.ended||0===h.playbackRate||!ui.getBuffered(h).length)return void(this.nudgeRetry=0);var J=ui.bufferInfo(h,v,0),se=J.nextStart||0;if(y){var ye=J.len>2,Ae=!se||o&&o.start<=v||se-v>2&&!this.fragmentTracker.getPartialFragment(v);if(ye||Ae)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var Ue;if(!(J.len>0||se))return;var Xe=Math.max(se,J.start||0)-v,pt=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,nn=(null==pt||null==(Ue=pt.details)?void 0:Ue.live)?2*pt.details.targetduration:2,qt=this.fragmentTracker.getPartialFragment(v);if(Xe>0&&(Xe<=nn||qt))return void(h.paused||this._trySkipBufferHole(qt))}var Dt=self.performance.now();if(null===p)return void(this.stalled=Dt);var on=Dt-p;if(y||!(on>=250)||(this._reportStall(J),this.media)){var an=ui.bufferInfo(h,v,u.maxBufferHole);this._tryFixBufferStall(an,on)}}},d._tryFixBufferStall=function(i,o){var u=this.config,p=this.media;if(null!==p){var v=p.currentTime,y=this.fragmentTracker.getPartialFragment(v);if(y&&(this._trySkipBufferHole(y)||!this.media))return;(i.len>u.maxBufferHole||i.nextStart&&i.nextStart-v<u.maxBufferHole)&&o>1e3*u.highBufferWatchdogPeriod&&(Pe.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},d._reportStall=function(i){var o=this.hls,u=this.media;if(!this.stallReported&&u){this.stallReported=!0;var p=new Error("Playback stalling at @"+u.currentTime+" due to low buffer ("+JSON.stringify(i)+")");Pe.warn(p.message),o.trigger(x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.BUFFER_STALLED_ERROR,fatal:!1,error:p,buffer:i.len})}},d._trySkipBufferHole=function(i){var o=this.config,u=this.hls,h=this.media;if(null===h)return 0;var p=h.currentTime,v=ui.bufferInfo(h,p,0),y=p<v.start?v.start:v.nextStart;if(y){var U=y-p;if(U>0&&(v.len<=o.maxBufferHole||v.len>0&&v.len<1&&h.readyState<3)){if(U>o.maxBufferHole){var J=this.fragmentTracker,se=!1;if(0===p){var ye=J.getAppendedFrag(0,Tr_MAIN);ye&&y<ye.end&&(se=!0)}if(!se){var Ae=i||J.getAppendedFrag(p,Tr_MAIN);if(Ae){for(var Ue=!1,Ke=Ae.end;Ke<y;){var Xe=J.getPartialFragment(Ke);if(!Xe){Ue=!0;break}Ke+=Xe.duration}if(Ue)return 0}}}var pt=Math.max(y+.05,p+.1);if(Pe.warn("skipping hole, adjusting currentTime from "+p+" to "+pt),this.moved=!0,this.stalled=null,h.currentTime=pt,i&&!i.gap){var yt=new Error("fragment loaded with buffer holes, seeking from "+p+" to "+pt);u.trigger(x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:yt,reason:yt.message,frag:i})}return pt}}return 0},d._tryNudgeBuffer=function(){var i=this.config,o=this.hls,u=this.media,h=this.nudgeRetry;if(null!==u){var p=u.currentTime;if(this.nudgeRetry++,h<i.nudgeMaxRetry){var v=p+(h+1)*i.nudgeOffset,y=new Error("Nudging 'currentTime' from "+p+" to "+v);Pe.warn(y.message),u.currentTime=v,o.trigger(x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.BUFFER_NUDGE_ON_STALL,error:y,fatal:!1})}else{var C=new Error("Playhead still not moving while enough data buffered @"+p+" after "+i.nudgeMaxRetry+" nudges");Pe.error(C.message),o.trigger(x.ERROR,{type:Ee.MEDIA_ERROR,details:ge.BUFFER_STALLED_ERROR,error:C,fatal:!0})}}},g}(),Mh=function(g){function d(i,o,u){var h;return(h=g.call(this,i,o,u,"[stream-controller]",Tr_MAIN)||this).audioCodecSwap=!1,h.gapController=null,h.level=-1,h._forceStartLoad=!1,h.altAudio=!1,h.audioOnly=!1,h.fragPlaying=null,h.onvplaying=null,h.onvseeked=null,h.fragLastKbps=0,h.couldBacktrack=!1,h.backtrackFragment=null,h.audioCodecSwitch=!1,h.videoBuffer=null,h._registerListeners(),h}_(d,g);var c=d.prototype;return c._registerListeners=function(){var o=this.hls;o.on(x.MEDIA_ATTACHED,this.onMediaAttached,this),o.on(x.MEDIA_DETACHING,this.onMediaDetaching,this),o.on(x.MANIFEST_LOADING,this.onManifestLoading,this),o.on(x.MANIFEST_PARSED,this.onManifestParsed,this),o.on(x.LEVEL_LOADING,this.onLevelLoading,this),o.on(x.LEVEL_LOADED,this.onLevelLoaded,this),o.on(x.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),o.on(x.ERROR,this.onError,this),o.on(x.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),o.on(x.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),o.on(x.BUFFER_CREATED,this.onBufferCreated,this),o.on(x.BUFFER_FLUSHED,this.onBufferFlushed,this),o.on(x.LEVELS_UPDATED,this.onLevelsUpdated,this),o.on(x.FRAG_BUFFERED,this.onFragBuffered,this)},c._unregisterListeners=function(){var o=this.hls;o.off(x.MEDIA_ATTACHED,this.onMediaAttached,this),o.off(x.MEDIA_DETACHING,this.onMediaDetaching,this),o.off(x.MANIFEST_LOADING,this.onManifestLoading,this),o.off(x.MANIFEST_PARSED,this.onManifestParsed,this),o.off(x.LEVEL_LOADED,this.onLevelLoaded,this),o.off(x.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),o.off(x.ERROR,this.onError,this),o.off(x.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),o.off(x.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),o.off(x.BUFFER_CREATED,this.onBufferCreated,this),o.off(x.BUFFER_FLUSHED,this.onBufferFlushed,this),o.off(x.LEVELS_UPDATED,this.onLevelsUpdated,this),o.off(x.FRAG_BUFFERED,this.onFragBuffered,this)},c.onHandlerDestroying=function(){this._unregisterListeners(),g.prototype.onHandlerDestroying.call(this)},c.startLoad=function(o){if(this.levels){var u=this.lastCurrentTime,h=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){var p=h.startLevel;-1===p&&(h.config.testBandwidth&&this.levels.length>1?(p=0,this.bitrateTest=!0):p=h.firstAutoLevel),h.nextLoadLevel=p,this.level=h.loadLevel,this.loadedmetadata=!1}u>0&&-1===o&&(this.log("Override startPosition with lastCurrentTime @"+u.toFixed(3)),o=u),this.state=Nn_IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=o,this.tick()}else this._forceStartLoad=!0,this.state=Nn_STOPPED},c.stopLoad=function(){this._forceStartLoad=!1,g.prototype.stopLoad.call(this)},c.doTick=function(){switch(this.state){case Nn_WAITING_LEVEL:var o=this.levels,u=this.level,h=o?.[u],p=h?.details;if(p&&(!p.live||this.levelLastLoaded===h)){if(this.waitForCdnTuneIn(p))break;this.state=Nn_IDLE;break}if(this.hls.nextLoadLevel!==this.level){this.state=Nn_IDLE;break}break;case Nn_FRAG_LOADING_WAITING_RETRY:var v,y=self.performance.now(),C=this.retryDate;if(!C||y>=C||null!=(v=this.media)&&v.seeking){var R=this.levels,U=this.level,J=R?.[U];this.resetStartWhenNotLoaded(J||null),this.state=Nn_IDLE}}this.state===Nn_IDLE&&this.doTickIdle(),this.onTickEnd()},c.onTickEnd=function(){g.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},c.doTickIdle=function(){var o=this.hls,h=this.levels;if(null!==this.levelLastLoaded&&(this.media||!this.startFragRequested&&o.config.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)){var v=o.nextLoadLevel;if(null!=h&&h[v]){var y=h[v],C=this.getMainFwdBufferInfo();if(null!==C){var R=this.getLevelDetails();if(R&&this._streamEnded(C,R)){var U={};return this.altAudio&&(U.type="video"),this.hls.trigger(x.BUFFER_EOS,U),void(this.state=Nn_ENDED)}o.loadLevel!==v&&-1===o.manualLevel&&this.log("Adapting to level "+v+" from level "+this.level),this.level=o.nextLoadLevel=v;var J=y.details;if(!J||this.state===Nn_WAITING_LEVEL||J.live&&this.levelLastLoaded!==y)return this.level=v,void(this.state=Nn_WAITING_LEVEL);var se=C.len,ye=this.getMaxBufferLength(y.maxBitrate);if(!(se>=ye)){this.backtrackFragment&&this.backtrackFragment.start>C.end&&(this.backtrackFragment=null);var Ae=this.backtrackFragment?this.backtrackFragment.start:C.end,Ue=this.getNextFragment(Ae,J);if(this.couldBacktrack&&!this.fragPrevious&&Ue&&"initSegment"!==Ue.sn&&this.fragmentTracker.getState(Ue)!==ro_OK){var Ke,Xe=(null!=(Ke=this.backtrackFragment)?Ke:Ue).sn,yt=J.fragments[Xe-J.startSN-1];yt&&Ue.cc===yt.cc&&(Ue=yt,this.fragmentTracker.removeFragment(yt))}else this.backtrackFragment&&C.len&&(this.backtrackFragment=null);if(Ue&&this.isLoopLoading(Ue,Ae)){if(!Ue.gap){var qt=this.audioOnly&&!this.altAudio?It_AUDIO:It_VIDEO,Dt=(qt===It_VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;Dt&&this.afterBufferFlushed(Dt,qt,Tr_MAIN)}Ue=this.getNextFragmentLoopLoading(Ue,J,C,Tr_MAIN,ye)}Ue&&(Ue.initSegment&&!Ue.initSegment.data&&!this.bitrateTest&&(Ue=Ue.initSegment),this.loadFragment(Ue,y,Ae))}}}}},c.loadFragment=function(o,u,h){var p=this.fragmentTracker.getState(o);this.fragCurrent=o,p===ro_NOT_LOADED||p===ro_PARTIAL?"initSegment"===o.sn?this._loadInitSegment(o,u):this.bitrateTest?(this.log("Fragment "+o.sn+" of level "+o.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(o,u)):(this.startFragRequested=!0,g.prototype.loadFragment.call(this,o,u,h)):this.clearTrackerIfNeeded(o)},c.getBufferedFrag=function(o){return this.fragmentTracker.getBufferedFrag(o,Tr_MAIN)},c.followingBufferedFrag=function(o){return o?this.getBufferedFrag(o.end+.5):null},c.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},c.nextLevelSwitch=function(){var o=this.levels,u=this.media;if(null!=u&&u.readyState){var h,p=this.getAppendedFrag(u.currentTime);p&&p.start>1&&this.flushMainBuffer(0,p.start-1);var v=this.getLevelDetails();if(null!=v&&v.live){var y=this.getMainFwdBufferInfo();if(!y||y.len<2*v.targetduration)return}if(!u.paused&&o){var U=this.fragLastKbps;h=U&&this.fragCurrent?this.fragCurrent.duration*o[this.hls.nextLoadLevel].maxBitrate/(1e3*U)+1:0}else h=0;var J=this.getBufferedFrag(u.currentTime+h);if(J){var se=this.followingBufferedFrag(J);if(se){this.abortCurrentFrag();var Ae=se.duration,Ue=Math.max(J.end,(se.maxStartPTS?se.maxStartPTS:se.start)+Math.min(Math.max(Ae-this.config.maxFragLookUpTolerance,Ae*(this.couldBacktrack?.5:.125)),Ae*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(Ue,Number.POSITIVE_INFINITY)}}}},c.abortCurrentFrag=function(){var o=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,o&&(o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.state){case Nn_KEY_LOADING:case Nn_FRAG_LOADING:case Nn_FRAG_LOADING_WAITING_RETRY:case Nn_PARSING:case Nn_PARSED:this.state=Nn_IDLE}this.nextLoadPosition=this.getLoadPosition()},c.flushMainBuffer=function(o,u){g.prototype.flushMainBuffer.call(this,o,u,this.altAudio?"video":null)},c.onMediaAttached=function(o,u){g.prototype.onMediaAttached.call(this,o,u);var h=u.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),h.addEventListener("playing",this.onvplaying),h.addEventListener("seeked",this.onvseeked),this.gapController=new pd(this.config,h,this.fragmentTracker,this.hls)},c.onMediaDetaching=function(){var o=this.media;o&&this.onvplaying&&this.onvseeked&&(o.removeEventListener("playing",this.onvplaying),o.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),g.prototype.onMediaDetaching.call(this)},c.onMediaPlaying=function(){this.tick()},c.onMediaSeeked=function(){var o=this.media,u=o?o.currentTime:null;Q(u)&&this.log("Media seeked to "+u.toFixed(3));var h=this.getMainFwdBufferInfo();null!==h&&0!==h.len?this.tick():this.warn('Main forward buffer length on "seeked" event '+(h?h.len:"empty")+")")},c.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(x.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1},c.onManifestParsed=function(o,u){var h=!1,p=!1;u.levels.forEach(function(v){var y=v.audioCodec;y&&(h=h||-1!==y.indexOf("mp4a.40.2"),p=p||-1!==y.indexOf("mp4a.40.5"))}),this.audioCodecSwitch=h&&p&&!function hc(){var g,d=wh();return"function"==typeof(null==d||null==(g=d.prototype)?void 0:g.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=u.levels,this.startFragRequested=!1},c.onLevelLoading=function(o,u){var h=this.levels;if(h&&this.state===Nn_IDLE){var p=h[u.level];(!p.details||p.details.live&&this.levelLastLoaded!==p||this.waitForCdnTuneIn(p.details))&&(this.state=Nn_WAITING_LEVEL)}},c.onLevelLoaded=function(o,u){var h,p=this.levels,v=u.level,y=u.details;if(p){this.log("Level "+v+" loaded ["+y.startSN+","+y.endSN+"]"+(y.lastPartSn?"[part-"+y.lastPartSn+"-"+y.lastPartIndex+"]":"")+", cc ["+y.startCC+", "+y.endCC+"] duration:"+y.totalduration);var R=p[v],U=this.fragCurrent;U&&(this.state===Nn_FRAG_LOADING||this.state===Nn_FRAG_LOADING_WAITING_RETRY)&&U.level!==u.level&&U.loader&&this.abortCurrentFrag();var J=0;if(y.live||null!=(h=R.details)&&h.live){var se;if(this.checkLiveUpdate(y),y.deltaUpdateFailed)return;J=this.alignPlaylists(y,R.details,null==(se=this.levelLastLoaded)?void 0:se.details)}if(R.details=y,this.levelLastLoaded=R,this.hls.trigger(x.LEVEL_UPDATED,{details:y,level:v}),this.state===Nn_WAITING_LEVEL){if(this.waitForCdnTuneIn(y))return;this.state=Nn_IDLE}this.startFragRequested?y.live&&this.synchronizeToLiveEdge(y):this.setStartPosition(y,J),this.tick()}else this.warn("Levels were reset while loading level "+v)},c._handleFragmentLoadProgress=function(o){var u,h=o.frag,p=o.part,v=o.payload,y=this.levels;if(y){var C=y[h.level],R=C.details;if(!R)return this.warn("Dropping fragment "+h.sn+" of level "+h.level+" after level details were reset"),void this.fragmentTracker.removeFragment(h);var U=C.videoCodec,J=R.PTSKnown||!R.live,se=null==(u=h.initSegment)?void 0:u.data,ye=this._getAudioCodec(C),Ae=this.transmuxer=this.transmuxer||new Fs(this.hls,Tr_MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),Ue=p?p.index:-1,Xe=new ju(h.level,h.sn,h.stats.chunkCount,v.byteLength,Ue,-1!==Ue);Ae.push(v,se,ye,U,h,p,R.totalduration,J,Xe,this.initPTS[h.cc])}else this.warn("Levels were reset while fragment load was in progress. Fragment "+h.sn+" of level "+h.level+" will not be buffered")},c.onAudioTrackSwitching=function(o,u){var h=this.altAudio;if(!u.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var v=this.fragCurrent;v&&(this.log("Switching to main audio track, cancel main fragment load"),v.abortRequests(),this.fragmentTracker.removeFragment(v)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var y=this.hls;h&&(y.trigger(x.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),y.trigger(x.AUDIO_TRACK_SWITCHED,u)}},c.onAudioTrackSwitched=function(o,u){var p=!!this.hls.audioTracks[u.id].url;if(p){var v=this.videoBuffer;v&&this.mediaBuffer!==v&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=v)}this.altAudio=p,this.tick()},c.onBufferCreated=function(o,u){var p,v,h=u.tracks,y=!1;for(var C in h){var R=h[C];if("main"===R.id){if(v=C,p=R,"video"===C){var U=h[C];U&&(this.videoBuffer=U.buffer)}}else y=!0}y&&p?(this.log("Alternate track found, use "+v+".buffered to schedule main fragment loading"),this.mediaBuffer=p.buffer):this.mediaBuffer=this.media},c.onFragBuffered=function(o,u){var h=u.frag,p=u.part;if(!h||h.type===Tr_MAIN){if(this.fragContextChanged(h))return this.warn("Fragment "+h.sn+(p?" p: "+p.index:"")+" of level "+h.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Nn_PARSED&&(this.state=Nn_IDLE));var v=p?p.stats:h.stats;this.fragLastKbps=Math.round(8*v.total/(v.buffering.end-v.loading.first)),"initSegment"!==h.sn&&(this.fragPrevious=h),this.fragBufferedComplete(h,p)}},c.onError=function(o,u){var h;if(u.fatal)this.state=Nn_ERROR;else switch(u.details){case ge.FRAG_GAP:case ge.FRAG_PARSING_ERROR:case ge.FRAG_DECRYPT_ERROR:case ge.FRAG_LOAD_ERROR:case ge.FRAG_LOAD_TIMEOUT:case ge.KEY_LOAD_ERROR:case ge.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Tr_MAIN,u);break;case ge.LEVEL_LOAD_ERROR:case ge.LEVEL_LOAD_TIMEOUT:case ge.LEVEL_PARSING_ERROR:!u.levelRetry&&this.state===Nn_WAITING_LEVEL&&(null==(h=u.context)?void 0:h.type)===Gr_LEVEL&&(this.state=Nn_IDLE);break;case ge.BUFFER_APPEND_ERROR:case ge.BUFFER_FULL_ERROR:if(!u.parent||"main"!==u.parent)return;if(u.details===ge.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(u)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case ge.INTERNAL_EXCEPTION:this.recoverWorkerError(u)}},c.checkBuffer=function(){var o=this.media,u=this.gapController;o&&u&&o.readyState&&(!this.loadedmetadata&&ui.getBuffered(o).length||u.poll(this.lastCurrentTime,this.state!==Nn_IDLE?this.fragCurrent:null),this.lastCurrentTime=o.currentTime)},c.onFragLoadEmergencyAborted=function(){this.state=Nn_IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},c.onBufferFlushed=function(o,u){var h=u.type;(h!==It_AUDIO||this.audioOnly&&!this.altAudio)&&(this.afterBufferFlushed((h===It_VIDEO?this.videoBuffer:this.mediaBuffer)||this.media,h,Tr_MAIN),this.tick())},c.onLevelsUpdated=function(o,u){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=u.levels},c.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},c.seekToStartPos=function(){var o=this.media;if(o){var u=o.currentTime,h=this.startPosition;if(h>=0&&u<h){if(o.seeking)return void this.log("could not seek to "+h+", already seeking at "+u);var p=ui.getBuffered(o),y=(p.length?p.start(0):0)-h;y>0&&(y<this.config.maxBufferHole||y<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+y+" to match buffer start"),this.startPosition=h+=y),this.log("seek to target start position "+h+" from current time "+u),o.currentTime=h}}},c._getAudioCodec=function(o){var u=this.config.defaultAudioCodec||o.audioCodec;return this.audioCodecSwap&&u&&(this.log("Swapping audio codec"),u=-1!==u.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),u},c._loadBitrateTestFrag=function(o,u){var h=this;o.bitrateTest=!0,this._doFragLoad(o,u).then(function(p){var v=h.hls;if(p&&!h.fragContextChanged(o)){u.fragmentError=0,h.state=Nn_IDLE,h.startFragRequested=!1,h.bitrateTest=!1;var y=o.stats;y.parsing.start=y.parsing.end=y.buffering.start=y.buffering.end=self.performance.now(),v.trigger(x.FRAG_LOADED,p),o.bitrateTest=!1}})},c._handleTransmuxComplete=function(o){var u,h="main",p=this.hls,v=o.remuxResult,y=o.chunkMeta,C=this.getCurrentContext(y);if(C){var R=C.frag,U=C.part,J=C.level,se=v.video,ye=v.text,Ae=v.id3,Ue=v.initSegment,Ke=J.details,Xe=this.altAudio?void 0:v.audio;if(this.fragContextChanged(R))this.fragmentTracker.removeFragment(R);else{if(this.state=Nn_PARSING,Ue){if(null!=Ue&&Ue.tracks){var pt=R.initSegment||R;this._bufferInitSegment(J,Ue.tracks,pt,y),p.trigger(x.FRAG_PARSING_INIT_SEGMENT,{frag:pt,id:h,tracks:Ue.tracks})}var yt=Ue.initPTS,nn=Ue.timescale;Q(yt)&&(this.initPTS[R.cc]={baseTime:yt,timescale:nn},p.trigger(x.INIT_PTS_FOUND,{frag:R,id:h,initPTS:yt,timescale:nn}))}if(se&&Ke&&"initSegment"!==R.sn){var qt=Ke.fragments[R.sn-1-Ke.startSN],Dt=R.sn===Ke.startSN,on=!qt||R.cc>qt.cc;if(!1!==v.independent){var an=se.startPTS,Sn=se.endPTS,Rn=se.startDTS,Qn=se.endDTS;if(U)U.elementaryStreams[se.type]={startPTS:an,endPTS:Sn,startDTS:Rn,endDTS:Qn};else if(se.firstKeyFrame&&se.independent&&1===y.id&&!on&&(this.couldBacktrack=!0),se.dropped&&se.independent){var or=this.getMainFwdBufferInfo(),mr=(or?or.end:this.getLoadPosition())+this.config.maxBufferHole;if(!Dt&&mr<(se.firstKeyFramePTS?se.firstKeyFramePTS:an)-this.config.maxBufferHole&&!on)return void this.backtrack(R);on&&(R.gap=!0),R.setElementaryStreamInfo(se.type,R.start,Sn,R.start,Qn,!0)}else Dt&&an>2&&(R.gap=!0);R.setElementaryStreamInfo(se.type,an,Sn,Rn,Qn),this.backtrackFragment&&(this.backtrackFragment=R),this.bufferFragmentData(se,R,U,y,Dt||on)}else{if(!Dt&&!on)return void this.backtrack(R);R.gap=!0}}if(Xe){var Hr=Xe.startPTS,Xr=Xe.endPTS,oi=Xe.startDTS,kr=Xe.endDTS;U&&(U.elementaryStreams[It_AUDIO]={startPTS:Hr,endPTS:Xr,startDTS:oi,endDTS:kr}),R.setElementaryStreamInfo(It_AUDIO,Hr,Xr,oi,kr),this.bufferFragmentData(Xe,R,U,y)}Ke&&null!=Ae&&null!=(u=Ae.samples)&&u.length&&p.trigger(x.FRAG_PARSING_METADATA,{id:h,frag:R,details:Ke,samples:Ae.samples}),Ke&&ye&&p.trigger(x.FRAG_PARSING_USERDATA,{id:h,frag:R,details:Ke,samples:ye.samples})}}else this.resetWhenMissingContext(y)},c._bufferInitSegment=function(o,u,h,p){var v=this;if(this.state===Nn_PARSING){this.audioOnly=!!u.audio&&!u.video,this.altAudio&&!this.audioOnly&&delete u.audio;var y=u.audio,C=u.video,R=u.audiovideo;if(y){var U=o.audioCodec,J=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(U&&(U=-1!==U.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==y.metadata.channelCount&&-1===J.indexOf("firefox")&&(U="mp4a.40.5")),U&&-1!==U.indexOf("mp4a.40.5")&&-1!==J.indexOf("android")&&"audio/mpeg"!==y.container&&this.log("Android: force audio codec to "+(U="mp4a.40.2")),o.audioCodec&&o.audioCodec!==U&&this.log('Swapping manifest audio codec "'+o.audioCodec+'" for "'+U+'"'),y.levelCodec=U,y.id="main",this.log("Init audio buffer, container:"+y.container+", codecs[selected/level/parsed]=["+(U||"")+"/"+(o.audioCodec||"")+"/"+y.codec+"]")}C&&(C.levelCodec=o.videoCodec,C.id="main",this.log("Init video buffer, container:"+C.container+", codecs[level/parsed]=["+(o.videoCodec||"")+"/"+C.codec+"]")),R&&this.log("Init audiovideo buffer, container:"+R.container+", codecs[level/parsed]=["+o.codecs+"/"+R.codec+"]"),this.hls.trigger(x.BUFFER_CODECS,u),Object.keys(u).forEach(function(se){var Ae=u[se].initSegment;null!=Ae&&Ae.byteLength&&v.hls.trigger(x.BUFFER_APPENDING,{type:se,data:Ae,frag:h,part:null,chunkMeta:p,parent:h.type})}),this.tickImmediate()}},c.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,Tr_MAIN)},c.backtrack=function(o){this.couldBacktrack=!0,this.backtrackFragment=o,this.resetTransmuxer(),this.flushBufferGap(o),this.fragmentTracker.removeFragment(o),this.fragPrevious=null,this.nextLoadPosition=o.start,this.state=Nn_IDLE},c.checkFragmentChanged=function(){var o=this.media,u=null;if(o&&o.readyState>1&&!1===o.seeking){var h=o.currentTime;if(ui.isBuffered(o,h)?u=this.getAppendedFrag(h):ui.isBuffered(o,h+.1)&&(u=this.getAppendedFrag(h+.1)),u){this.backtrackFragment=null;var p=this.fragPlaying,v=u.level;(!p||u.sn!==p.sn||p.level!==v)&&(this.fragPlaying=u,this.hls.trigger(x.FRAG_CHANGED,{frag:u}),(!p||p.level!==v)&&this.hls.trigger(x.LEVEL_SWITCHED,{level:v}))}}},Ce(d,[{key:"nextLevel",get:function(){var o=this.nextBufferedFrag;return o?o.level:-1}},{key:"currentFrag",get:function(){var o=this.media;return o?this.fragPlaying||this.getAppendedFrag(o.currentTime):null}},{key:"currentProgramDateTime",get:function(){var o=this.media;if(o){var u=o.currentTime,h=this.currentFrag;if(h&&Q(u)&&Q(h.programDateTime))return new Date(h.programDateTime+1e3*(u-h.start))}return null}},{key:"currentLevel",get:function(){var o=this.currentFrag;return o?o.level:-1}},{key:"nextBufferedFrag",get:function(){var o=this.currentFrag;return o?this.followingBufferedFrag(o):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),d}(Ro),ff=function(){function g(c){void 0===c&&(c={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new Nl,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,Je(c.debug||!1,"Hls instance");var i=this.config=function Ih(g,d){if((d.liveSyncDurationCount||d.liveMaxLatencyDurationCount)&&(d.liveSyncDuration||d.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==d.liveMaxLatencyDurationCount&&(void 0===d.liveSyncDurationCount||d.liveMaxLatencyDurationCount<=d.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==d.liveMaxLatencyDuration&&(void 0===d.liveSyncDuration||d.liveMaxLatencyDuration<=d.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');var c=uf(g),o=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach(function(u){var h=("level"===u?"playlist":u)+"LoadPolicy",p=void 0===d[h],v=[];o.forEach(function(y){var C=u+"Loading"+y,R=d[C];if(void 0!==R&&p){v.push(C);var U=c[h].default;switch(d[h]={default:U},y){case"TimeOut":U.maxLoadTimeMs=R,U.maxTimeToFirstByteMs=R;break;case"MaxRetry":U.errorRetry.maxNumRetry=R,U.timeoutRetry.maxNumRetry=R;break;case"RetryDelay":U.errorRetry.retryDelayMs=R,U.timeoutRetry.retryDelayMs=R;break;case"MaxRetryTimeout":U.errorRetry.maxRetryDelayMs=R,U.timeoutRetry.maxRetryDelayMs=R}}}),v.length&&Pe.warn('hls.js config: "'+v.join('", "')+'" setting(s) are deprecated, use "'+h+'": '+JSON.stringify(d[h]))}),hr(hr({},c),d)}(g.DefaultConfig,c);this.userConfig=c,i.progressive&&Dh(i);var o=i.abrController,u=i.bufferController,h=i.capLevelController,v=i.fpsController,y=new(0,i.errorController)(this),C=this.abrController=new o(this),R=this.bufferController=new u(this),U=this.capLevelController=new h(this),J=new v(this),se=new no(this),ye=new Uc(this),Ae=i.contentSteeringController,Ue=Ae?new Ae(this):null,Ke=this.levelController=new pp(this,Ue),Xe=new Zu(this),pt=new Fl(this.config),yt=this.streamController=new Mh(this,Xe,pt);U.setStreamController(yt),J.setStreamController(yt);var nn=[se,Ke,yt];Ue&&nn.splice(1,0,Ue),this.networkControllers=nn;var qt=[C,R,U,J,ye,Xe];this.audioTrackController=this.createController(i.audioTrackController,nn);var Dt=i.audioStreamController;Dt&&nn.push(new Dt(this,Xe,pt)),this.subtitleTrackController=this.createController(i.subtitleTrackController,nn);var on=i.subtitleStreamController;on&&nn.push(new on(this,Xe,pt)),this.createController(i.timelineController,qt),pt.emeController=this.emeController=this.createController(i.emeController,qt),this.cmcdController=this.createController(i.cmcdController,qt),this.latencyController=this.createController(Bc,qt),this.coreComponents=qt,nn.push(y);var an=y.onErrorOut;"function"==typeof an&&this.on(x.ERROR,an,y)}g.isMSESupported=function(){return gd()},g.isSupported=function(){return function Rh(){if(!gd())return!1;var g=Kr();return"function"==typeof g?.isTypeSupported&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(function(d){return g.isTypeSupported(Nr(d,"video"))})||["mp4a.40.2","fLaC"].some(function(d){return g.isTypeSupported(Nr(d,"audio"))}))}()},g.getMediaSource=function(){return Kr()};var d=g.prototype;return d.createController=function(i,o){if(i){var u=new i(this);return o&&o.push(u),u}return null},d.on=function(i,o,u){void 0===u&&(u=this),this._emitter.on(i,o,u)},d.once=function(i,o,u){void 0===u&&(u=this),this._emitter.once(i,o,u)},d.removeAllListeners=function(i){this._emitter.removeAllListeners(i)},d.off=function(i,o,u,h){void 0===u&&(u=this),this._emitter.off(i,o,u,h)},d.listeners=function(i){return this._emitter.listeners(i)},d.emit=function(i,o,u){return this._emitter.emit(i,o,u)},d.trigger=function(i,o){if(this.config.debug)return this.emit(i,i,o);try{return this.emit(i,i,o)}catch(h){Pe.error("An internal error happened while handling event "+i+'. Error message: "'+h.message+'". Here is a stacktrace:',h),this.triggeringException||(this.triggeringException=!0,this.trigger(x.ERROR,{type:Ee.OTHER_ERROR,details:ge.INTERNAL_EXCEPTION,fatal:i===x.ERROR,event:i,error:h}),this.triggeringException=!1)}return!1},d.listenerCount=function(i){return this._emitter.listenerCount(i)},d.destroy=function(){Pe.log("destroy"),this.trigger(x.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(o){return o.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(o){return o.destroy()}),this.coreComponents.length=0;var i=this.config;i.xhrSetup=i.fetchSetup=void 0,this.userConfig=null},d.attachMedia=function(i){Pe.log("attachMedia"),this._media=i,this.trigger(x.MEDIA_ATTACHING,{media:i})},d.detachMedia=function(){Pe.log("detachMedia"),this.trigger(x.MEDIA_DETACHING,void 0),this._media=null},d.loadSource=function(i){this.stopLoad();var o=this.media,u=this.url,h=this.url=Me.buildAbsoluteURL(self.location.href,i,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,Pe.log("loadSource:"+h),o&&u&&(u!==h||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(o)),this.trigger(x.MANIFEST_LOADING,{url:i})},d.startLoad=function(i){void 0===i&&(i=-1),Pe.log("startLoad("+i+")"),this.started=!0,this.networkControllers.forEach(function(o){o.startLoad(i)})},d.stopLoad=function(){Pe.log("stopLoad"),this.started=!1,this.networkControllers.forEach(function(i){i.stopLoad()})},d.resumeBuffering=function(){this.started&&this.networkControllers.forEach(function(i){"fragmentLoader"in i&&i.startLoad(-1)})},d.pauseBuffering=function(){this.networkControllers.forEach(function(i){"fragmentLoader"in i&&i.stopLoad()})},d.swapAudioCodec=function(){Pe.log("swapAudioCodec"),this.streamController.swapAudioCodec()},d.recoverMediaError=function(){Pe.log("recoverMediaError");var i=this._media;this.detachMedia(),i&&this.attachMedia(i)},d.removeLevel=function(i){this.levelController.removeLevel(i)},d.setAudioOption=function(i){var o;return null==(o=this.audioTrackController)?void 0:o.setAudioOption(i)},d.setSubtitleOption=function(i){var o;return null==(o=this.subtitleTrackController)||o.setSubtitleOption(i),null},Ce(g,[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(i){Pe.log("set currentLevel:"+i),this.levelController.manualLevel=i,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(i){Pe.log("set nextLevel:"+i),this.levelController.manualLevel=i,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(i){Pe.log("set loadLevel:"+i),this.levelController.manualLevel=i}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(i){this.levelController.nextLoadLevel=i}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(i){Pe.log("set firstLevel:"+i),this.levelController.firstLevel=i}},{key:"startLevel",get:function(){var i=this.levelController.startLevel;return-1===i&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:i},set:function(i){Pe.log("set startLevel:"+i),-1!==i&&(i=Math.max(i,this.minAutoLevel)),this.levelController.startLevel=i}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(i){var o=!!i;o!==this.config.capLevelToPlayerSize&&(o?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=o)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(i){this._autoLevelCapping!==i&&(Pe.log("set autoLevelCapping:"+i),this._autoLevelCapping=i,this.levelController.checkMaxAutoUpdated())}},{key:"bandwidthEstimate",get:function(){var i=this.abrController.bwEstimator;return i?i.getEstimate():NaN},set:function(i){this.abrController.resetEstimator(i)}},{key:"ttfbEstimate",get:function(){var i=this.abrController.bwEstimator;return i?i.getEstimateTTFB():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(i){(function Pu(g){return zr.indexOf(g)>-1})(i)&&this._maxHdcpLevel!==i&&(this._maxHdcpLevel=i,this.levelController.checkMaxAutoUpdated())}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var i=this.levels,o=this.config.minAutoBitrate;if(!i)return 0;for(var u=i.length,h=0;h<u;h++)if(i[h].maxBitrate>=o)return h;return 0}},{key:"maxAutoLevel",get:function(){var h,i=this.levels,o=this.autoLevelCapping,u=this.maxHdcpLevel;if(h=-1===o&&null!=i&&i.length?i.length-1:o,u)for(var p=h;p--;){var v=i[p].attrs["HDCP-LEVEL"];if(v&&v<=u)return p}return h}},{key:"firstAutoLevel",get:function(){return this.abrController.firstAutoLevel}},{key:"nextAutoLevel",get:function(){return this.abrController.nextAutoLevel},set:function(i){this.abrController.nextAutoLevel=i}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"allAudioTracks",get:function(){var i=this.audioTrackController;return i?i.allAudioTracks:[]}},{key:"audioTracks",get:function(){var i=this.audioTrackController;return i?i.audioTracks:[]}},{key:"audioTrack",get:function(){var i=this.audioTrackController;return i?i.audioTrack:-1},set:function(i){var o=this.audioTrackController;o&&(o.audioTrack=i)}},{key:"allSubtitleTracks",get:function(){var i=this.subtitleTrackController;return i?i.allSubtitleTracks:[]}},{key:"subtitleTracks",get:function(){var i=this.subtitleTrackController;return i?i.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var i=this.subtitleTrackController;return i?i.subtitleTrack:-1},set:function(i){var o=this.subtitleTrackController;o&&(o.subtitleTrack=i)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var i=this.subtitleTrackController;return!!i&&i.subtitleDisplay},set:function(i){var o=this.subtitleTrackController;o&&(o.subtitleDisplay=i)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(i){this.config.lowLatencyMode=i}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.5.8"}},{key:"Events",get:function(){return x}},{key:"ErrorTypes",get:function(){return Ee}},{key:"ErrorDetails",get:function(){return ge}},{key:"DefaultConfig",get:function(){return g.defaultConfig?g.defaultConfig:lf},set:function(i){g.defaultConfig=i}}]),g}();return ff.defaultConfig=void 0,ff}()}(!1)},86:(Na,Jr,Ci)=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.Logger=void 0;var _r=Ci(161);Object.defineProperty(Jr,"Logger",{enumerable:!0,get:function(){return _r.Logger}})},161:(Na,Jr)=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.Logger=void 0,Jr.Logger=class Ci{debug;context;constructor(hr,Vt=!1){this.debug=Vt,this.context=hr}d(hr){this.debug&&console.debug(this.context,"DEBUG:"+(new Date).toJSON()+":",hr)}i(hr){console.info(this.context,"INFO:"+(new Date).toJSON()+":",hr)}e(hr){console.error(this.context,"- ERROR:"+(new Date).toJSON()+":",hr)}w(hr){console.warn(this.context,"WARN:"+(new Date).toJSON()+":",hr)}trace(){console.trace()}}},660:(Na,Jr,Ci)=>{"use strict";Jr.J5=Jr.X6=Jr.tX=void 0;var hr=Ci(687);Object.defineProperty(Jr,"tX",{enumerable:!0,get:function(){return hr.DashTech}});var Vt=Ci(375);Object.defineProperty(Jr,"X6",{enumerable:!0,get:function(){return Vt.HlsTech}});var Qe=Ci(477);Object.defineProperty(Jr,"J5",{enumerable:!0,get:function(){return Qe.Player}})},477:(Na,Jr,Ci)=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.Player=void 0;const _r=Ci(86);Jr.Player=class hr{url="";player=null;volume=.99;headers=null;protData=null;logger=null;debug=!1;muted=!1;eventHandlers={};is_live=!1;autoplay=!1;onLicenseError=null;subtitlesUrl="";tech=null;event_handler_count=0;videoElement=document.createElement("video");available_events=["manifestLoaded","streamInitialized","abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","interruptbegin","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"];constructor(){this.logger=new _r.Logger("Player")}init(Qe,ne,Ce,G,E,_,F,V){this.logger.debug=E,this.url=Ce,this.tech=Qe,this.videoElement=ne,this.url=Ce,this.debug=E,this.muted=!1,this.volume=.99,this.headers=_,this.autoplay=G,this.protData=F,this.videoElement=ne,this.onLicenseError=V,this.assignEventListeners(),this.tech.init(this.videoElement,this.url,this.autoplay,this.debug,this.handleEvent,this.headers,this.protData,this.onLicenseError)}getUrl(){return this.url}getTech(){return this.tech}play(){this.videoElement.play()}pause(){this.videoElement.pause()}seek(Qe){this.videoElement.currentTime=Qe}getCurrentTime(){return this.videoElement.currentTime}getDuration(){return this.videoElement.duration}isLive(){return null!=this.tech&&this.tech.isLive()}setAudioTrack(Qe){null!=this.tech&&this.tech.setAudioTrack(Qe)}getQualities(){return null!=this.tech?this.tech.getQualities():[]}setQuality(Qe){null!=this.tech&&this.tech.setQuality(Qe)}getCurrentQuality(){return null!=this.tech?this.tech.getCurrentQuality():{index:0,width:0,height:0,bitrate:0,bitrateStr:"0k"}}getAudioTracks(){return null!=this.tech?this.tech.getAudioTracks():[]}setMaxQuality(){null!=this.tech&&this.tech.setMaxQuality()}setPlaybackRate(Qe){this.videoElement.playbackRate=Qe}setVolume(Qe){this.muted||(this.videoElement.volume=1==Qe?.99:Qe),this.volume=Qe}getVolume(){return this.volume}mute(){this.muted=!0,this.videoElement.volume=0}unmute(){this.muted=!1,this.videoElement.volume=this.volume}isMuted(){return this.muted}loadSubtitles(Qe){this.subtitlesUrl=Qe,this.clearVideoElement();var ne=document.createElement("track");ne.label="Subtitle",ne.kind="subtitles",ne.default=!0,ne.src=Qe,this.videoElement.appendChild(ne)}getSubtitlesUrl(){return this.subtitlesUrl}clearVideoElement(){this.clearNode(this.videoElement)}handleEvent=Qe=>{if(Qe.type in this.eventHandlers)for(var ne in this.eventHandlers[Qe.type])this.eventHandlers[Qe.type][ne](Qe)};addEventHandler(Qe,ne){Qe in this.eventHandlers||(this.eventHandlers[Qe]={});var Ce="handler_"+this.event_handler_count++;return this.eventHandlers[Qe][Ce]=ne,Ce}removeEventHandler(Qe,ne){delete this.eventHandlers[Qe][ne]}assignEventListeners(){for(var Qe=0;Qe<this.available_events.length;Qe++)this.videoElement.addEventListener(this.available_events[Qe],this.handleEvent,!1)}clearEventHandlers(){for(var Qe=0;Qe<this.available_events.length;Qe++)this.videoElement.removeEventListener(this.available_events[Qe],this.handleEvent,!1)}clearNode(Qe){for(;Qe.hasChildNodes();)Qe.removeChild(Qe.lastChild)}destroy(){this.logger.d("Player destroy"),this.clearVideoElement(),this.clearEventHandlers(),null!=this.tech&&this.tech.destroy(),this.tech=null}}},687:(Na,Jr,Ci)=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.DashTech=void 0;const _r=Ci(86),hr=Ci(584),Vt=Ci(433);Jr.DashTech=class Qe{url="";player=null;headers=null;logger=new _r.Logger("DashTech");eventHandler=null;is_live=!1;autoplay=!1;onLicenseError=null;videoElement=null;defaultHandler=Ce=>{this.eventHandler(Ce)};ascertainStreamType=Ce=>{"dynamic"==Ce.data.type&&(this.is_live=!0),this.eventHandler(Ce)};playerErrorHandler=Ce=>{this.logger.e(Ce.error.message),111==Ce.error.code||"key_session"==Ce.error&&this.onLicenseError()?this.onLicenseError():(this.eventHandler?this.eventHandler(Ce):this.logger.w("eventHandler is undefined"),this.defaultHandler(Ce),this.destroy())};init(Ce,G,E,_,F,V,D,j){this.logger.debug=_,this.url=G,this.headers=V,this.autoplay=E,this.videoElement=Ce,this.onLicenseError=j,this.player=(0,hr.MediaPlayer)().create(),this.eventHandler=F,this.attachHandlers(),typeof this.player.setFastSwitchEnabled<"u"&&this.player.setFastSwitchEnabled(!0),typeof this.player.getDebug().setLogToBrowserConsole<"u"&&this.player.getDebug().setLogToBrowserConsole(_),null!=D&&(this.player.getProtectionController().setRobustnessLevel("SW_SECURE_CRYPTO"),this.player.setProtectionData(D));var B=M=>{for(var L in this.headers)M.setRequestHeader(L,this.headers[L]);return M};null!=this.headers&&this.player.extend("RequestModifier",()=>({modifyRequestHeader:B}),!0),this.player.label="dash",this.logger.d("initializing"),this.player.registerCustomCapabilitiesFilter(M=>{let L=M.mimeType+'; codecs="'+M.codecs+'"',K=""!==this.videoElement.canPlayType(L);return console.log("Can play "+L+": "+K),K}),this.player.updateSettings({errors:{recoverAttempts:{mediaErrorDecode:3}},streaming:{capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!0}}}),this.player.initialize(this.videoElement,this.url,this.autoplay)}attachHandlers(){this.player.on(hr.MediaPlayer.events.METRIC_CHANGED,this.defaultHandler),this.player.on(hr.MediaPlayer.events.STREAM_INITIALIZED,this.defaultHandler),this.player.on(hr.MediaPlayer.events.MANIFEST_LOADED,this.ascertainStreamType),this.player.on(hr.MediaPlayer.events.ERROR,this.playerErrorHandler)}detachHandlers(){this.player.off(hr.MediaPlayer.events.METRIC_CHANGED,this.defaultHandler),this.player.off(hr.MediaPlayer.events.STREAM_INITIALIZED,this.defaultHandler),this.player.off(hr.MediaPlayer.events.MANIFEST_LOADED,this.ascertainStreamType),this.player.off(hr.MediaPlayer.events.ERROR,this.playerErrorHandler)}getPlayer(){return this.player}isLive(){return this.is_live}getAudioTracks(){for(var Ce=this.player.getTracksFor("audio"),G=[],E=0;E<Ce.length;E++)""==Ce[E].lang&&(Ce[E].lang="Audio "+E),""==Ce[E].name&&(Ce[E].name="Audio "+E),G.push({lang:Ce[E].lang,name:Ce[E].name,index:Ce[E].index});return G}setAudioTrack(Ce){for(var G=this.player.getTracksFor("audio"),E=0;E<G.length;E++)if(G[E].index==Ce)return void this.player.setCurrentTrack(G[E])}getQualities(){var Ce=this.player.getBitrateInfoListFor("video"),G=[];G.push(E={index:-1,bitrate:0,bitrateStr:"Auto",width:0,height:0});for(var _=0;_<Ce.length;_++){var E;(E={index:0,bitrate:0,bitrateStr:"0k",width:0,height:0}).index=Ce[_].qualityIndex,E.bitrate=Ce[_].bitrate,E.bitrateStr=Vt.Utils.calcBitrateStr(Ce[_].bitrate),E.width=Ce[_].width,E.height=Ce[_].height,G.push(E)}return G}setQuality(Ce){-1!=(Ce=parseInt(Ce))?(typeof this.player.setAutoSwitchQuality<"u"?this.player.setAutoSwitchQuality(!1):typeof this.player.setAutoSwitchQualityFor<"u"?this.player.setAutoSwitchQualityFor("video",!1):typeof this.player.updateSettings<"u"&&this.player.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),this.player.setQualityFor("video",Ce)):typeof this.player.setAutoSwitchQuality<"u"?this.player.setAutoSwitchQuality(!0):typeof this.player.setAutoSwitchQualityFor<"u"?this.player.setAutoSwitchQualityFor("video",!0):typeof this.player.updateSettings<"u"&&this.player.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}})}getCurrentQuality(){if(!this.player)return{index:0,bitrate:0,bitrateStr:"0k",width:0,height:0};var Ce=this.player.getQualityFor("video"),G=this.getQualities();for(var E in G)if(Ce==G[E].index)return G[E];var _={index:0,bitrate:0,bitrateStr:"0k",width:0,height:0};return _.index=Ce.qualityIndex,_.bitrate=Ce.bitrate,_.bitrateStr=Math.floor(Ce.bitrate/1e3)+"k",_.width=Ce.width,_.height=Ce.height,_}setMaxQuality(){for(var Ce=this.getQualities(),G=Ce[0],E=1;E<Ce.length;E++)Ce[E].bitrate>G.bitrate&&(G=Ce[E]);this.setQuality(G.index)}destroy(){null!=this.player&&(this.detachHandlers(),this.logger.d("Dashjs destroy"),this.player.reset(),this.player=null)}}},375:function(Na,Jr,Ci){"use strict";var _r=this&&this.__importDefault||function(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}};Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.HlsTech=void 0;const hr=_r(Ci(857)),Vt=Ci(86),Qe=Ci(433);Jr.HlsTech=class ne{url="";player=null;headers=null;logger=new Vt.Logger("HlsTech");recover_take=0;is_live=!1;eventHandler=null;autoplay=!1;onLicenseError=null;videoElement=document.createElement("video");manifestParsedHandler=(G,E)=>{E.type=G,this.eventHandler(E),!0===this.autoplay&&this.videoElement.play()};levelLoadedHandler=(G,E)=>{null!=E.details&&"VOD"!==E.details.type&&(this.is_live=!0),E.type=G,this.eventHandler(E)};errorHandler=(G,E)=>{if(E.type=G,this.logger.i({event:G,data:E}),this.eventHandler(E),E.fatal)switch(E.type){case hr.default.ErrorTypes.MEDIA_ERROR:this.logger.e("Media error"),1==this.recover_take&&this.player.swapAudioCodec(),this.player.recoverMediaError(),this.recover_take++;break;case hr.default.ErrorTypes.NETWORK_ERROR:this.logger.e("Network error"),this.player.startLoad();break;default:this.logger.e("Unrecoverable error"),this.destroy()}};init(G,E,_,F,V,D,j,B){this.url=E,this.headers=D,this.autoplay=_,this.logger.debug=F,this.videoElement=G,this.onLicenseError=B,this.videoElement=G,this.player=new hr.default({enableWorker:!1,debug:F,xhrSetup:(T,M)=>{for(var L in this.headers)T.setRequestHeader(L,this.headers[L])}}),this.attachHandlers(),this.eventHandler=V,this.player.loadSource(this.url),this.player.attachMedia(this.videoElement)}attachHandlers(){this.player.on(hr.default.Events.MANIFEST_PARSED,this.manifestParsedHandler),this.player.on(hr.default.Events.LEVEL_LOADED,this.levelLoadedHandler),this.player.on(hr.default.Events.ERROR,this.errorHandler)}detachHandlers(){this.player.off(hr.default.Events.MANIFEST_PARSED,this.manifestParsedHandler),this.player.off(hr.default.Events.LEVEL_LOADED,this.levelLoadedHandler),this.player.off(hr.default.Events.ERROR,this.errorHandler)}getPlayer(){return this.player}isLive(){return this.is_live}getAudioTracks(){for(var G=this.player.audioTracks,E=[],_=0;_<G.length;_++)E.push({name:G[_].name,index:_,lang:G[_].lang});return E}setAudioTrack(G){this.player.audioTrack=G+1}getQualities(){var G=this.player.levels,E=[];E.push(_={index:-1,bitrate:0,bitrateStr:"Auto",width:0,height:0});for(var F=0;F<G.length;F++){var _;(_={index:0,bitrate:0,bitrateStr:"0k",width:0,height:0}).index=null!=G[F].level?G[F].level:F,_.bitrate=G[F].bitrate,_.bitrateStr=Qe.Utils.calcBitrateStr(G[F].bitrate),_.height=G[F].height,E.push(_)}return E}setQuality(G){this.player.currentLevel=G}getCurrentQuality(){var G=this.getQualities();for(var E in G)if(this.player.currentLevel==G[E].index)return G[E];return{index:0,bitrate:0,bitrateStr:"0k",height:0,width:0}}setMaxQuality(){for(var G=this.getQualities(),E=-1,_=0,F=0;F<G.length;F++)G[F].bitrate>_&&(_=G[F].bitrate,E=G[F].index);this.setQuality(E)}destroy(){null!=this.player&&(this.logger.d("Hlsjs destroy"),this.detachHandlers(),this.player.destroy(),this.player=null)}}},433:(Na,Jr)=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.Utils=void 0,Jr.Utils=class Ci{static calcBitrateStr(hr){var Vt=hr+"bps";return hr>1e3&&(Vt=Math.floor(hr/1e3)+"kbps"),hr>1e6&&(Vt=Math.floor(hr/1e6)+"mbps"),Vt}}}},Na=>{Na(Na.s=930)}]);